<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
    <h4 class="dark-mode-text fw-bold">الصلاحيات</h4>
    <button class="btn btn-primary d-flex align-items-center" (click)="openForm(null)">
      <i class="bi bi-plus-circle me-2"></i>
    </button>
  </div>

  <!-- Roles Table -->
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-striped table-hover align-middle mb-0" dir="rtl">
      <thead class="table-light dark-mode-bg">
        <tr>
          <th>#</th>
          <th>الاسم</th>
          <th>الصلاحيات</th>
          <th>التصنيفات</th>
          <th>المنتجات</th>
          <th>الاجراء</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let role of roles; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ lang.currentLang === 'ar' ? role.nameAr : role.nameEn }}</td>
          <td>
            <div class="d-flex flex-wrap gap-1">
              <span *ngFor="let rp of role.rolePermissions" class="badge bg-secondary me-1">
                {{ lang.currentLang === 'ar' ? rp.permission.nameAr : rp.permission.nameEn }}
              </span>
            </div>
          </td>
          <td>
            <div class="d-flex flex-wrap gap-1">
              <span *ngFor="let rc of role.roleCategories" class="badge bg-secondary me-1">
                {{ lang.currentLang === 'ar' ? rc.category?.nameAr : rc.category?.nameEn }}
              </span>
            </div>
          </td>
          <td>
            <div class="d-flex flex-wrap gap-1">
              <span *ngFor="let rc of role.roleProducts" class="badge bg-secondary me-1">
                {{ lang.currentLang === 'ar' ? rc.product?.nameAr : rc.product?.nameEn }}
              </span>
            </div>
          </td>
          <td class="text-nowrap" dir="ltr">
            <button class="btn btn-sm btn-outline-info me-2" (click)="openForm(role.id)">
              <i class="bi bi-pencil"></i>
            </button>
            <!-- <button class="btn btn-sm btn-outline-danger">
              <i class="bi bi-trash"></i>
            </button> -->
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Optional: Empty State -->
  <div *ngIf="!roles || roles.length === 0" class="text-center text-muted py-4">
    {{ 'SHARED.NO_DATA' | translate }}
  </div>
</div>