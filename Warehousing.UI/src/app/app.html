<div class="min-h-screen bg-gray-50" [dir]="languageService.currentLang === 'ar' ? 'rtl' : 'ltr'">
  <!-- Modern Navigation Bar (only show when NOT in admin or order modules) -->
  <nav class="bg-white backdrop-blur-lg bg-opacity-95 border-b border-gray-200 shadow-lg sticky top-0 z-50 transition-all duration-300"
       *ngIf="authService.isAuthenticated() && !inModule">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16 sm:h-20">
        
        <!-- Brand / Home Link -->
        <button 
          (click)="goToHome()"
          class="group flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50"
          [ngClass]="{ 'flex-row-reverse': languageService.currentLang === 'ar' }">
          <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300">
            <i class="bi bi-house-check-fill text-white text-lg"></i>
          </div>
          <span class="hidden sm:block text-lg font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
            {{ languageService.currentLang === 'ar' ? 'نظام إدارة مواد البناء' : 'Building Materials Management' }}
          </span>
        </button>

        <!-- Right-aligned Actions -->
        <div class="flex items-center gap-2 sm:gap-3"
             [ngClass]="{ 'flex-row-reverse': languageService.currentLang === 'ar' }">
          
          <!-- User Profile -->
          <div class="hidden md:flex items-center gap-3 px-4 py-2 rounded-xl bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200">
            <div class="w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-md">
              <i class="bi bi-person-circle text-white text-lg"></i>
            </div>
            <div class="min-w-0">
              <p class="text-sm font-semibold text-gray-900 truncate max-w-32">
                {{ getUserDisplayName() }}
              </p>
              <p class="text-xs text-gray-500 truncate">
                {{ authService.isAdmin ? 'ADMIN.TITLE' : 'ORDER.TITLE' | translate }}
              </p>
            </div>
          </div>

          <!-- Mobile User Name (Simplified) -->
          <div class="md:hidden px-2">
            <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-md">
              <span class="text-white text-xs font-bold">
                {{ getUserDisplayName() | slice:0:1 }}
              </span>
            </div>
          </div>

          <!-- Language Toggle -->
          <button 
            class="group relative inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-xl border-2 transition-all duration-300 hover:scale-110 hover:shadow-lg"
            [ngClass]="{
              'border-blue-400 text-blue-700 bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200': currentLang === 'ar',
              'border-green-400 text-green-700 bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200': currentLang === 'en'
            }"
            (click)="toggleLanguage()" 
            [title]="getLanguageTooltip()">
            <i class="bi bi-translate text-base sm:text-lg"></i>
            <span class="absolute -bottom-1 -right-1 w-5 h-5 bg-gradient-to-br from-blue-600 to-indigo-600 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-md">
              {{ currentLang === 'ar' ? 'ع' : 'EN' }}
            </span>
          </button>

          <!-- Pending Orders Button -->
          <button 
            routerLink="/pending-orders"
            class="group relative inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 text-green-700 hover:from-green-100 hover:to-emerald-100 hover:border-green-300 hover:shadow-lg transition-all duration-300 hover:scale-110"
            [title]="'BREADCRUMB.PENDING_ORDERS' | translate">
            <i class="bi bi-list-ul text-base sm:text-lg"></i>
            <span class="absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          </button>

          <!-- Cart Icon with Badge -->
          <button 
            routerLink="/cart"
            class="group relative inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:border-blue-300 hover:shadow-lg transition-all duration-300 hover:scale-110"
            [title]="languageService.currentLang === 'ar' ? 'السلة' : 'Cart'">
            <i class="bi bi-cart-dash text-base sm:text-lg"></i>
            <!-- Cart Badge -->
            <span 
              *ngIf="cartService.cartCount$ | async as count"
              [hidden]="count === 0"
              class="absolute -top-1 -right-1 inline-flex items-center justify-center min-w-[1.25rem] h-5 px-1.5 text-xs font-bold text-white bg-gradient-to-r from-red-500 to-pink-600 rounded-full shadow-lg border-2 border-white animate-pulse"
              [ngClass]="{ 'animate-bounce': count > 0 }">
              {{ count > 99 ? '99+' : count }}
            </span>
          </button>

          <!-- Logout Button -->
          <button 
            *ngIf="authService.isAuthenticated()"
            (click)="logout()"
            class="group relative inline-flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-red-50 to-pink-50 border-2 border-red-200 text-red-700 hover:from-red-100 hover:to-pink-100 hover:border-red-300 hover:shadow-lg transition-all duration-300 hover:scale-110"
            [title]="'AUTH.LOGOUT' | translate">
            <i class="bi bi-box-arrow-right text-base sm:text-lg"></i>
            <span class="absolute inset-0 bg-gradient-to-r from-red-500 to-pink-600 opacity-0 group-hover:opacity-10 rounded-xl transition-opacity duration-300"></span>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main content area -->
  <main class="min-h-screen">
    <router-outlet></router-outlet>
  </main>
</div>

<app-spinner></app-spinner>
