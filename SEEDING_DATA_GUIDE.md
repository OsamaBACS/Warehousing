# Seeding Data Guide - Main Branch

## Overview
This document describes the seeding data configuration for the main branch (general deployment, not client-specific).

## What Gets Seeded

### 1. Permissions (Identity starts from 1)
- **All permissions** from the database tables are seeded
- **No explicit IDs** - database auto-generates starting from 1
- **Total**: ~97 permissions covering all system features
- **Categories**:
  - Product Management (5)
  - User Management (6)
  - Role Management (5)
  - Customer Management (5)
  - Supplier Management (5)
  - Purchase Orders (8)
  - Sale Orders (8)
  - Reports (2)
  - Settings (2)
  - Categories (5)
  - Units (5)
  - Stores (5)
  - Store Transfers (5)
  - Inventory Management (4)
  - Subcategories (5)
  - Activity Logs (2)
  - Working Hours (4)
  - Printer Configurations (4)
  - Additional (Edit Approved Invoice, View Admin)

### 2. Roles
- **ADMIN** - Full system access
- **WAREHOUSE_MANAGER** - Warehouse operations
- **SALES_MANAGER** - Sales operations
- **PURCHASE_MANAGER** - Purchase operations
- **USER** - Basic user access

### 3. Users
- **admin** user:
  - Username: `admin`
  - Password: `Admin@123`
  - Role: ADMIN (with all permissions)
  - Email: admin@warehousing.com
  - Active: Yes

### 4. Lookup Tables

#### Statuses (11 statuses)
- PENDING, PROCESSING, CONFIRMED, SHIPPED, DELIVERED
- CANCELLED, RETURNED, COMPLETED, ONHOLD, FAILED, DRAFT

#### Order Types (2 types)
- Purchase Order
- Sale Order

#### Transaction Types (11 types)
- PURCHASE, SALE, RETURN_IN, RETURN_OUT
- ADJUSTMENT_PLUS, ADJUSTMENT_MINUS
- TRANSFER_IN, TRANSFER_OUT
- DAMAGE_LOSS, SAMPLE
- Initial Stock (empty code)

#### Units (10 units)
- EA (Each), KG (Kilogram), GM (Gram)
- LT (Liter), ML (Milliliter)
- MTR (Meter), CM (Centimeter), INCH
- PKT (Packet), BOX

#### Stores (2 stores)
- Main Warehouse (المستودع الرئيسي)
- Secondary Warehouse (المستودع الثانوي)

### 5. Printer Configurations (2 configurations)
- **A4 Default Printer**:
  - Type: A4
  - Paper: A4 (210x297mm)
  - Assigned to: ADMIN role
  
- **POS Thermal Printer**:
  - Type: POS
  - Paper: Thermal 80mm
  - ESC/POS enabled

### 6. Company
- Default company information
- Name: Warehousing Solutions Ltd / شركة حلول المستودعات
- Currency: JOD

### 7. Working Hours
- Default working hours: Sunday to Thursday, 8:00 AM to 5:00 PM

## Seeding Logic

### Automatic Seeding
The `SeedingService` runs automatically when the application starts (if configured in `Program.cs`).

### Smart Seeding
- **Permissions**: Only adds missing permissions (checks by Code)
- **Lookup Tables**: Only seeds if table is empty
- **Roles**: Only creates if no roles exist
- **Users**: Only creates admin user if it doesn't exist
- **Role Permissions**: Ensures ADMIN role always has ALL permissions (even if new permissions are added later)

### Order of Seeding
1. Permissions (always)
2. Lookup tables (Statuses, OrderTypes, TransactionTypes, Units, Stores)
3. Printer Configurations
4. Roles (if none exist)
5. Users (if none exist)
6. Role Permissions (assign all to ADMIN)
7. User Roles (assign ADMIN role to admin user)
8. Working Hours
9. Company

## Database Setup

### For New Database
1. Run migrations to create schema
2. Start application - seeding runs automatically
3. Login with:
   - Username: `admin`
   - Password: `Admin@123`

### For Existing Database
- Seeding service will:
  - Add any missing permissions
  - Add missing lookup table entries
  - Ensure ADMIN role has all permissions
  - Not duplicate existing data

## Publish Profile Configuration

### Local IIS (Main Branch)
- **Method**: FileSystem
- **Output**: `bin\Release\Publish`
- **Configuration**: Release
- **Platform**: Any CPU

### To Publish
1. Right-click on `Warehousing.Api` project
2. Select "Publish"
3. Choose "Warehousing" profile
4. Click "Publish"
5. Copy output to IIS directory

## Notes

- All IDs are auto-generated by the database (Identity columns)
- Permissions start from ID 1 (not 6, 7, etc.)
- Admin role automatically gets all permissions
- Seeding is idempotent - safe to run multiple times
- Main branch is for general deployment (not client-specific)

