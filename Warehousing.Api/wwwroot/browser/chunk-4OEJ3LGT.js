import{a as ft,b as $t,c as Ht,d as bt,e as qt,f as bn,g as xn,h as vn,i as tt,j as hn,k as it,l as ct,m as Ui,n as nt,o as yn,p as ji,q as _n,r as Cn,s as En,t as rt,u as An}from"./chunk-QPVJBCOD.js";import{a as Pn,b as Fn,c as On,d as Tn,e as ot,f as Gi}from"./chunk-V2RQKADX.js";import{$ as We,$a as Bi,$b as Fe,Aa as Ie,Ba as je,Bb as Wt,Cb as ve,Da as fe,Db as Ke,E as u,Ea as F,Eb as G,Fa as w,Fb as M,Ga as ln,H as v,Ha as me,I as A,Ia as _e,Ib as gn,J as Nt,Ja as ze,Jb as mt,K as en,Ka as Se,L as f,La as Ye,M as Vt,Ma as Pe,P as d,Q as n,R as i,Ra as Ut,Rb as ee,S as l,Sa as ae,Sb as fn,T as Le,Tb as Ee,U as Be,Ub as Ge,V as C,Vb as Ne,W as x,Wa as sn,X as c,Xa as k,Xb as Ve,Y as Je,Ya as dn,Yb as Sn,Z as Xe,Za as T,Zb as zt,_ as Ze,_a as mn,_b as Yt,a as se,aa as Li,ab as be,ac as wn,b as Oe,ba as N,bb as V,bc as In,c as Xi,ca as K,cb as S,d as we,da as r,db as D,ea as p,eb as B,fa as b,fb as cn,ga as q,ha as tn,hb as Re,ia as nn,ib as W,j as Me,ja as re,jb as xe,k as Zi,ka as oe,la as ue,lb as U,ma as rn,mb as jt,na as $e,nb as Gt,oa as Lt,ob as j,pa as ge,pb as J,q as ke,qa as pt,qb as X,ra as on,rb as Z,s as ie,sa as un,sb as gt,t as Rt,ta as an,tb as Ce,u as te,ub as pn,v as Dt,va as g,vb as L,w as y,wa as h,wb as Qe,x as _,xa as Q,xb as De,ya as et,yb as Y,za as Bt,zb as ce}from"./chunk-CRG46VMK.js";var z=(a,t,e=Dt(ce))=>{let o=a.data.permission;return o==null?!1:o.some(s=>e.hasPermission(s))};var Wn=a=>({dark:a}),$n=(a,t,e,o)=>({"right-[17rem]":a,"right-4":t,"left-[17rem]":e,"left-4":o}),Hn=(a,t)=>({"lg:mr-64":a,"lg:ml-64":t}),qn=a=>({"flex-row-reverse":a}),zn=(a,t)=>({"mr-4":a,"ml-4":t});function Yn(a,t){if(a&1){let e=C();n(0,"div",9),x("click",function(){y(e);let s=c();return _(s.closeSidebar())}),i()}}var Qt=class a{constructor(t,e,o,s,m){this.themeService=t;this.authService=e;this.router=o;this.languageService=s;this.sidebarConfigService=m}isDarkMode=!1;sidebarOpen=!1;sidebarConfig;isRTL=!0;ngOnInit(){this.themeService.isDarkMode$.subscribe(e=>{this.isDarkMode=e}),this.router.events.pipe(Zi(e=>e instanceof sn)).subscribe(e=>{}),this.isRTL=this.languageService.currentLang==="ar",window.innerWidth>=1024&&(this.sidebarOpen=!0),new MutationObserver(()=>{this.isRTL=document.documentElement.getAttribute("dir")==="rtl"}).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}),this.sidebarConfig=this.sidebarConfigService.getAdminConfig()}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}closeSidebar(){this.sidebarOpen=!1}static \u0275fac=function(e){return new(e||a)(v(In),v(ce),v(T),v(G),v(Pn))};static \u0275cmp=A({type:a,selectors:[["app-admin"]],standalone:!1,decls:12,vars:26,consts:[[1,"min-h-screen","flex","bg-gray-50",3,"dir","ngClass"],[3,"sidebarOpenChange","config","sidebarOpen"],["class","fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden transition-opacity duration-300 backdrop-blur-sm",3,"click",4,"ngIf"],[1,"fixed","top-4","z-50","lg:hidden","p-3","rounded-xl","bg-white","shadow-lg","hover:shadow-xl","transition-all","duration-300","border-2","border-gray-200","hover:border-blue-400","text-gray-700","hover:text-blue-600",3,"click","ngClass"],[1,"flex-1","flex","flex-col","min-w-0",3,"ngClass"],[1,"sticky","top-0","z-30","bg-white","border-b","border-gray-200","shadow-sm","backdrop-blur-sm","bg-opacity-95"],[1,"flex","items-center","justify-between","h-16","px-4","sm:px-6","lg:px-8",3,"ngClass"],[1,"flex-1",3,"ngClass"],[1,"flex-1","overflow-y-auto","bg-gray-50","p-4","sm:p-6","lg:p-8"],[1,"fixed","inset-0","bg-black","bg-opacity-50","z-40","lg:hidden","transition-opacity","duration-300","backdrop-blur-sm",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"app-sidebar",1),ue("sidebarOpenChange",function(m){return oe(o.sidebarOpen,m)||(o.sidebarOpen=m),m}),i(),f(2,Yn,1,0,"div",2),n(3,"button",3),x("click",function(){return o.toggleSidebar()}),l(4,"i"),i(),n(5,"div",4)(6,"header",5)(7,"div",6)(8,"div",7),l(9,"app-breadcrumb"),i()()(),n(10,"main",8),l(11,"router-outlet"),i()()()),e&2&&(d("dir",o.isRTL?"rtl":"ltr")("ngClass",ge(11,Wn,o.isDarkMode)),u(),d("config",o.sidebarConfig),re("sidebarOpen",o.sidebarOpen),u(),d("ngIf",o.sidebarOpen),u(),d("ngClass",un(13,$n,o.isRTL&&o.sidebarOpen,o.isRTL&&!o.sidebarOpen,!o.isRTL&&o.sidebarOpen,!o.isRTL&&!o.sidebarOpen)),u(),K(o.sidebarOpen?"bi bi-x-lg text-xl":"bi bi-list text-xl"),u(),d("ngClass",pt(18,Hn,o.isRTL,!o.isRTL)),u(2),d("ngClass",ge(21,qn,o.isRTL)),u(),d("ngClass",pt(23,zn,o.isRTL,!o.isRTL)))},dependencies:[fe,w,dn,M,On,Tn],styles:['aside[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}aside[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}aside[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}aside[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.dark[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#1f2937,#111827);border-color:#374151}.dark[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .text-gray-700[_ngcontent-%COMP%]{color:#d1d5db}.dark[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .hover\\\\[_ngcontent-%COMP%]:bg-gray-100:hover{background-color:#374151;color:#f9fafb}.dark[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{background-color:#1f2937f2;border-color:#374151;color:#f9fafb}.dark[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{background-color:#111827}@media (max-width: 1023px){aside[_ngcontent-%COMP%]{box-shadow:-2px 0 8px #0000001a}[dir=ltr][_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{box-shadow:2px 0 8px #0000001a}}.transform[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before, nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#3b82f64d;transform:translate(-50%,-50%);transition:width .6s,height .6s}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active:before, nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.bg-gradient-to-r.from-blue-500.to-indigo-600[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:3px;background:linear-gradient(to bottom,#3b82f6,#6366f1);border-radius:0 4px 4px 0}[dir=ltr][_ngcontent-%COMP%]   .bg-gradient-to-r.from-blue-500.to-indigo-600[_ngcontent-%COMP%]:after{left:0;right:auto;border-radius:4px 0 0 4px}[dir=rtl][_ngcontent-%COMP%]   .bg-gradient-to-r.from-blue-500.to-indigo-600[_ngcontent-%COMP%]:after{right:0;left:auto}h3.text-xs[_ngcontent-%COMP%]{letter-spacing:.1em;text-shadow:0 1px 2px rgba(0,0,0,.05)}.w-8.h-8.rounded-lg[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.w-8.h-8.rounded-lg[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.bg-gradient-to-r.from-blue-500.to-indigo-600[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#6366f1);box-shadow:0 4px 14px #3b82f663}.bg-gradient-to-r.from-blue-500.to-indigo-600[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #3b82f673}.bg-gradient-to-r.from-blue-600.via-indigo-600.to-purple-600[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#4f46e5,#7c3aed);box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.w-10.h-10.bg-gradient-to-br.from-blue-500.to-indigo-600[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #3b82f64d;transition:transform .3s ease}.w-10.h-10.bg-gradient-to-br.from-blue-500.to-indigo-600[_ngcontent-%COMP%]:hover{transform:scale(1.05)}@media (max-width: 640px){aside[_ngcontent-%COMP%]{width:100%;max-width:280px}}']})};function Qn(a,t){a&1&&(n(0,"div",46),l(1,"i",47),r(2," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0645\u0637\u0644\u0648\u0628 "),i())}function Kn(a,t){a&1&&(n(0,"div",46),l(1,"i",47),r(2," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0645\u0637\u0644\u0648\u0628 "),i())}var Kt=class a{constructor(t,e,o,s,m,E){this.fb=t;this.categoriesService=e;this.router=o;this.route=s;this.toastr=m;this.imageUrlService=E}categoryForm;serverUrl=Y.resourcesUrl||"";ngOnInit(){this.initializingForm(null),this.route.queryParams.subscribe(t=>{let e=+t.categoryId;e&&this.categoriesService.GetCategoryById(e).subscribe({next:o=>{this.initializingForm(o)},error:o=>{}})})}initializingForm(t){this.categoryForm=this.fb.group({id:[t?t.id:0],nameEn:[t?t.nameEn:""],nameAr:[t?t.nameAr:"",S.required],description:[t?t.description:""],imagePath:[t?t.imagePath:""],image:[null],isActive:[t?t.isActive:!0]})}onSubmit(){if(this.categoryForm.valid){let t=new FormData;t.append("id",this.categoryForm.get("id")?.value),t.append("nameEn",this.categoryForm.get("nameEn")?.value),t.append("nameAr",this.categoryForm.get("nameAr")?.value),t.append("description",this.categoryForm.get("description")?.value),t.append("isActive",this.categoryForm.get("isActive")?.value);let e=this.categoryForm.get("image")?.value;e instanceof File&&t.append("image",e,e.name),this.categoriesService.SaveCategory(t).subscribe({next:o=>{o?(this.toastr.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 \u0628\u0646\u062C\u0627\u062D","category"),this.router.navigate(["../category"],{relativeTo:this.route})):this.toastr.error(o,"category")},error:o=>{this.toastr.error(o.error,"category")}})}}cancel(){this.router.navigate(["../category"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v(ot),v(T),v(k),v(ee),v(Ve))};static \u0275cmp=A({type:a,selectors:[["app-category-form"]],standalone:!1,decls:74,vars:7,consts:[[1,"min-h-screen","bg-gradient-to-br","from-green-50","to-emerald-100","p-4","md:p-6"],[1,"max-w-4xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-xl","mb-8","overflow-hidden"],[1,"bg-gradient-to-r","from-green-600","to-emerald-700","px-6","py-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-12","h-12","bg-white","bg-opacity-20","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-tags","text-white","text-2xl"],[1,"text-2xl","font-bold","text-white"],[1,"text-green-100","mt-1"],[1,"px-4","py-2","bg-white","bg-opacity-20","text-white","rounded-lg","hover:bg-opacity-30","transition-colors",3,"click"],[1,"bi","bi-arrow-right","mr-2"],[1,"space-y-8",3,"formGroup"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden"],[1,"bg-gradient-to-r","from-green-500","to-emerald-600","px-6","py-4"],[1,"text-xl","font-bold","text-white","flex","items-center"],[1,"bi","bi-info-circle","mr-3"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-translate","mr-2","text-green-600"],["type","text","formControlName","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],["class","text-red-500 text-sm flex items-center",4,"ngIf"],["type","text","formControlName","nameEn","placeholder","Enter category name in English",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"mt-6","space-y-2"],[1,"bi","bi-file-text","mr-2","text-green-600"],["formControlName","description","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641\u0627\u064B \u0645\u0641\u0635\u0644\u0627\u064B \u0644\u0644\u062A\u0635\u0646\u064A\u0641...",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors","resize-none"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","px-6","py-4"],[1,"bi","bi-image","mr-3"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bi","bi-camera","mr-2","text-blue-600"],[1,"border-2","border-dashed","border-gray-300","rounded-xl","p-4","hover:border-blue-400","transition-colors"],["formControlName","image",3,"initialImageUrl"],[1,"bi","bi-toggle-on","mr-2","text-blue-600"],[1,"flex","items-center","space-x-3","p-4","bg-gray-50","rounded-xl"],["type","checkbox","formControlName","isActive",1,"h-6","w-6","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-white","rounded-2xl","shadow-xl","p-6"],[1,"flex","flex-col","sm:flex-row","justify-end","gap-4"],["type","button",1,"w-full","sm:w-auto","px-8","py-3","bg-gray-500","text-white","rounded-xl","hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"],[1,"bi","bi-x-circle","mr-2"],["type","button",1,"w-full","sm:w-auto","px-8","py-3","bg-gradient-to-r","from-green-600","to-emerald-600","text-white","rounded-xl","hover:from-green-700","hover:to-emerald-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","font-semibold","shadow-lg",3,"click","disabled"],[1,"bi","bi-check-circle","mr-2"],["type","hidden","formControlName","id"],[1,"text-red-500","text-sm","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),l(7,"i",7),i(),n(8,"div")(9,"h1",8),r(10," \u0625\u0636\u0627\u0641\u0629 / \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 "),i(),n(11,"p",9),r(12,"\u0625\u062F\u0627\u0631\u0629 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0648\u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),i()()(),n(13,"button",10),x("click",function(){return o.cancel()}),l(14,"i",11),r(15," \u0627\u0644\u0639\u0648\u062F\u0629 "),i()()()(),n(16,"form",12)(17,"div",13)(18,"div",14)(19,"h2",15),l(20,"i",16),r(21," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i()(),n(22,"div",17)(23,"div",18)(24,"div",19)(25,"label",20),l(26,"i",21),r(27," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 (\u0639\u0631\u0628\u064A) * "),i(),l(28,"input",22),f(29,Qn,3,0,"div",23),i(),n(30,"div",19)(31,"label",20),l(32,"i",21),r(33," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 (\u0625\u0646\u062C\u0644\u064A\u0632\u064A) * "),i(),l(34,"input",24),f(35,Kn,3,0,"div",23),i()(),n(36,"div",25)(37,"label",20),l(38,"i",26),r(39," \u0627\u0644\u0648\u0635\u0641 "),i(),l(40,"textarea",27),i()()(),n(41,"div",13)(42,"div",28)(43,"h2",15),l(44,"i",29),r(45," \u0627\u0644\u0635\u0648\u0631\u0629 \u0648\u0627\u0644\u062D\u0627\u0644\u0629 "),i()(),n(46,"div",17)(47,"div",30)(48,"div",19)(49,"label",20),l(50,"i",31),r(51," \u0635\u0648\u0631\u0629 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 "),i(),n(52,"div",32),l(53,"app-image-uploader",33),i()(),n(54,"div",19)(55,"label",20),l(56,"i",34),r(57," \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 "),i(),n(58,"div",35),l(59,"input",36),n(60,"div")(61,"span",37),r(62),i(),n(63,"p",38),r(64),i()()()()()()(),n(65,"div",39)(66,"div",40)(67,"button",41),x("click",function(){return o.cancel()}),l(68,"i",42),r(69," \u0625\u0644\u063A\u0627\u0621 "),i(),n(70,"button",43),x("click",function(){return o.onSubmit()}),l(71,"i",44),r(72," \u062D\u0641\u0638 "),i()()(),l(73,"input",45),i()()()),e&2){let s,m,E,I,R;u(16),d("formGroup",o.categoryForm),u(13),d("ngIf",((s=o.categoryForm.get("nameAr"))==null?null:s.invalid)&&((s=o.categoryForm.get("nameAr"))==null?null:s.touched)),u(6),d("ngIf",((m=o.categoryForm.get("nameEn"))==null?null:m.invalid)&&((m=o.categoryForm.get("nameEn"))==null?null:m.touched)),u(18),d("initialImageUrl",o.imageUrlService.getImageUrl((E=o.categoryForm.get("imagePath"))==null?null:E.value,o.serverUrl)),u(9),b(" ",(I=o.categoryForm.get("isActive"))!=null&&I.value?"\u062A\u0635\u0646\u064A\u0641 \u0646\u0634\u0637":"\u062A\u0635\u0646\u064A\u0641 \u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(2),b(" ",(R=o.categoryForm.get("isActive"))!=null&&R.value?"\u0633\u064A\u0638\u0647\u0631 \u0641\u064A \u0627\u0644\u0642\u0648\u0627\u0626\u0645":"\u0644\u0646 \u064A\u0638\u0647\u0631 \u0641\u064A \u0627\u0644\u0642\u0648\u0627\u0626\u0645"," "),u(6),d("disabled",o.categoryForm.invalid)}},dependencies:[w,Fe,W,V,be,D,B,U,j],encapsulation:2})};function Jn(a,t){if(a&1){let e=C();n(0,"button",8),x("click",function(){y(e);let s=c();return _(s.onEdit(null))}),l(1,"i",9),r(2," \u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 "),i()}}function Xn(a,t){if(a&1){let e=C();n(0,"button",28),x("click",function(){y(e);let s=c().$implicit,m=c(2);return _(m.onEdit(s.id))}),l(1,"i",29),r(2," \u062A\u0639\u062F\u064A\u0644 "),i()}}function Zn(a,t){if(a&1&&(n(0,"div",12)(1,"div",13)(2,"div",14),l(3,"app-image-uploader",15),i(),n(4,"div",16)(5,"div",17)(6,"h3",18),r(7),i(),n(8,"p",19),r(9),i()(),n(10,"div",20)(11,"p",21),r(12),g(13,"slice"),i()(),n(14,"div",22)(15,"span",23),l(16,"i",24),r(17),i()(),n(18,"div",25)(19,"span",26),r(20),i(),f(21,Xn,3,0,"button",27),i()()()()),a&2){let e=t.$implicit,o=c(2);u(3),d("initialImageUrl",o.imageUrlService.getImageUrl(e.imagePath,o.serverUrl))("readonly",!0),u(4),b(" ",e.nameAr," "),u(2),p(e.nameEn),u(2),d("title",e.description),u(),b(" ",((e.description==null?null:e.description.length)||0)>60?et(13,11,e.description,0,60)+"...":e.description," "),u(3),d("ngClass",e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),d("ngClass",e.isActive?"bi-check-circle":"bi-x-circle"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(3),b("ID: ",e.id),u(),d("ngIf",o.authService.hasPermission("EDIT_CATEGORY"))}}function er(a,t){if(a&1&&(n(0,"div",10),f(1,Zn,22,15,"div",11),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e)}}function tr(a,t){if(a&1){let e=C();n(0,"button",36),x("click",function(){y(e);let s=c(2);return _(s.onEdit(null))}),l(1,"i",9),r(2," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u062A\u0635\u0646\u064A\u0641 "),i()}}function ir(a,t){if(a&1&&(n(0,"div",30)(1,"div",31),l(2,"i",32),i(),n(3,"h3",33),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u0635\u0646\u064A\u0641\u0627\u062A"),i(),n(5,"p",34),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0645\u062A\u0627\u062D\u0629"),i(),f(7,tr,3,0,"button",35),i()),a&2){let e=c();u(7),d("ngIf",e.authService.hasPermission("ADD_CATEGORY"))}}var Jt=class a{constructor(t,e,o,s,m,E){this.categoriesService=t;this.router=e;this.route=o;this.lang=s;this.authService=m;this.imageUrlService=E}ngOnInit(){this.loadcategorys(),this.serverUrl=this.categoriesService.url.substring(0,this.categoriesService.url.indexOf("api"))}categorys$;serverUrl="";loadcategorys(){this.categorys$=this.categoriesService.GetCategories().pipe(Me(t=>t.filter(e=>this.authService.hasCategory(e.id))))}onEdit(t){t?this.router.navigate(["../category-form"],{relativeTo:this.route,queryParams:{categoryId:t}}):this.router.navigate(["../category-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(ot),v(T),v(k),v(G),v(ce),v(Ve))};static \u0275cmp=A({type:a,selectors:[["app-category"]],standalone:!1,decls:13,vars:7,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-blue-50","to-indigo-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mt-4 sm:mt-0 inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105","title","\u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641",3,"click",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",4,"ngIf"],["class","text-center py-16",4,"ngIf"],["title","\u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641",1,"mt-4","sm:mt-0","inline-flex","items-center","px-6","py-3","bg-blue-600","text-white","rounded-xl","font-semibold","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105",3,"click"],[1,"bi","bi-plus-lg","mr-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-6"],["class","group h-full",4,"ngFor","ngForOf"],[1,"group","h-full"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","h-full","flex","flex-col"],[1,"w-full","h-48","bg-gradient-to-br","from-gray-100","to-gray-200","flex","items-center","justify-center","flex-shrink-0","overflow-hidden"],[3,"initialImageUrl","readonly"],[1,"p-6","flex","flex-col","flex-grow"],[1,"text-center","mb-4"],[1,"font-bold","text-gray-900","text-lg","mb-1","group-hover:text-blue-600","transition-colors"],[1,"text-gray-500","text-sm"],[1,"flex-grow","mb-4"],[1,"text-gray-600","text-sm","leading-relaxed","min-h-[3rem]",3,"title"],[1,"text-center","mb-4","flex-shrink-0"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"bi","mr-1",3,"ngClass"],[1,"flex","justify-between","items-center","pt-4","border-t","border-gray-100","flex-shrink-0"],[1,"text-xs","text-gray-500"],["class","inline-flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors","title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641",3,"click",4,"ngIf"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641",1,"inline-flex","items-center","px-3","py-2","bg-blue-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-square","mr-1"],[1,"text-center","py-16"],[1,"w-24","h-24","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-grid-3x3-gap","text-gray-400","text-3xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["class","inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-6","py-3","bg-blue-600","text-white","rounded-xl","font-semibold","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200",3,"click"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A"),i(),n(6,"p",4),r(7,"\u0625\u062F\u0627\u0631\u0629 \u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A"),i()(),f(8,Jn,3,0,"button",5),i(),f(9,er,2,1,"div",6),g(10,"async"),f(11,ir,8,1,"div",7),g(12,"async"),i()()),e&2){let s;u(8),d("ngIf",o.authService.hasPermission("ADD_CATEGORY")),u(),d("ngIf",h(10,3,o.categorys$)),u(2),d("ngIf",((s=h(12,5,o.categorys$))==null?null:s.length)===0)}},dependencies:[fe,F,w,Fe,M,me,Ye],encapsulation:2})};var nr=["class","component"];function rr(a,t){a&1&&(n(0,"div",77),r(1," \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0645\u0637\u0644\u0648\u0628 "),i())}function or(a,t){a&1&&(n(0,"div",77),r(1," \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0645\u0637\u0644\u0648\u0628 "),i())}function ur(a,t){a&1&&(n(0,"div",77),r(1," \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0645\u0637\u0644\u0648\u0628 "),i())}function ar(a,t){a&1&&(n(0,"div",77),r(1," \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0645\u0637\u0644\u0648\u0628 "),i())}function lr(a,t){a&1&&(n(0,"div"),r(1,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u0645\u0637\u0644\u0648\u0628"),i())}function sr(a,t){a&1&&(n(0,"div"),r(1,"\u0635\u064A\u063A\u0629 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629"),i())}function dr(a,t){if(a&1&&(n(0,"div",77),f(1,lr,2,0,"div",78)(2,sr,2,0,"div",78),i()),a&2){let e=c();u(),d("ngIf",e.phone.errors==null?null:e.phone.errors.required),u(),d("ngIf",e.phone.errors==null?null:e.phone.errors.pattern)}}function mr(a,t){a&1&&(n(0,"div"),r(1,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0645\u0637\u0644\u0648\u0628"),i())}function cr(a,t){a&1&&(n(0,"div"),r(1,"\u0635\u064A\u063A\u0629 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629"),i())}function pr(a,t){if(a&1&&(n(0,"div",77),f(1,mr,2,0,"div",78)(2,cr,2,0,"div",78),i()),a&2){let e=c();u(),d("ngIf",e.email.errors==null?null:e.email.errors.required),u(),d("ngIf",e.email.errors==null?null:e.email.errors.email)}}function gr(a,t){a&1&&(n(0,"div",77),r(1," \u0631\u0645\u0632 \u0627\u0644\u0639\u0645\u0644\u0629 \u0645\u0637\u0644\u0648\u0628 "),i())}function fr(a,t){a&1&&(n(0,"div",17)(1,"label",18),l(2,"i",121),r(3," \u062D\u062C\u0645 \u0627\u0644\u0648\u0631\u0642 "),i(),n(4,"select",122)(5,"option",88),r(6,"A4"),i(),n(7,"option",123),r(8,"Letter"),i(),n(9,"option",124),r(10,"Legal"),i(),n(11,"option",125),r(12,"A3"),i(),n(13,"option",126),r(14,"A5"),i()()())}function br(a,t){a&1&&(n(0,"div",17)(1,"label",18),l(2,"i",127),r(3," \u0639\u0631\u0636 \u0627\u0644\u0648\u0631\u0642 (\u0645\u0645) "),n(4,"span",20),r(5,"*"),i()(),l(6,"input",128),i())}function xr(a,t){a&1&&(n(0,"div",17)(1,"label",18),l(2,"i",129),r(3," \u0627\u0644\u0627\u062A\u062C\u0627\u0647 "),i(),n(4,"select",130)(5,"option",131),r(6,"\u0639\u0645\u0648\u062F\u064A"),i(),n(7,"option",132),r(8,"\u0623\u0641\u0642\u064A"),i()()())}function vr(a,t){a&1&&(n(0,"div",16)(1,"div",133),l(2,"input",134),n(3,"label",135),l(4,"i",136),r(5," \u0637\u0628\u0627\u0639\u0629 \u0645\u0644\u0648\u0646\u0629 "),i()(),n(6,"div",133),l(7,"input",137),n(8,"label",138),l(9,"i",139),r(10," \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062E\u0644\u0641\u064A\u0629 "),i()()())}function hr(a,t){a&1&&(n(0,"div",99)(1,"h3",100),l(2,"i",140),r(3," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0637\u0627\u0628\u0639\u0629 \u0646\u0642\u0627\u0637 \u0627\u0644\u0628\u064A\u0639 "),i(),n(4,"div",109)(5,"div",17)(6,"label",110),r(7,"\u0627\u0644\u062A\u0631\u0645\u064A\u0632"),i(),n(8,"select",141)(9,"option",142),r(10,"UTF-8"),i(),n(11,"option",143),r(12,"Windows-1256"),i(),n(13,"option",144),r(14,"ISO-8859-6"),i()()(),n(15,"div",17)(16,"label",110),r(17,"\u0639\u062F\u062F \u0627\u0644\u0646\u0633\u062E"),i(),l(18,"input",145),i(),n(19,"div",17)(20,"label",110),r(21,"\u0646\u0648\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644"),i(),n(22,"select",146)(23,"option",147),r(24,"USB"),i(),n(25,"option",148),r(26,"\u0634\u0628\u0643\u0629"),i(),n(27,"option",149),r(28,"\u0633\u064A\u0631\u064A\u0627\u0644"),i(),n(29,"option",150),r(30,"\u0628\u0644\u0648\u062A\u0648\u062B"),i()()(),n(31,"div",17)(32,"label",110),r(33,"\u0633\u0644\u0633\u0644\u0629 \u0627\u0644\u0627\u062A\u0635\u0627\u0644"),i(),l(34,"input",151),i(),n(35,"div",17)(36,"label",110),r(37,"\u0643\u062B\u0627\u0641\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (0-15)"),i(),l(38,"input",152),i(),n(39,"div",17)(40,"label",110),r(41,"\u0633\u0631\u0639\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (1-5)"),i(),l(42,"input",153),i(),n(43,"div",133),l(44,"input",154),n(45,"label",155),l(46,"i",156),r(47," \u0642\u0637\u0639 \u0627\u0644\u0648\u0631\u0642 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B "),i()(),n(48,"div",133),l(49,"input",157),n(50,"label",158),l(51,"i",159),r(52," \u0641\u062A\u062D \u062F\u0631\u062C \u0627\u0644\u0646\u0642\u062F\u064A\u0629 "),i()(),n(53,"div",133),l(54,"input",160),n(55,"label",161),l(56,"i",162),r(57," \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0623\u0648\u0627\u0645\u0631 ESC/POS "),i()()()())}function yr(a,t){if(a&1&&(n(0,"div",85)(1,"div",16)(2,"div",17)(3,"label",18),l(4,"i",86),r(5," \u0646\u0648\u0639 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 "),n(6,"span",20),r(7,"*"),i()(),n(8,"select",87)(9,"option",88),r(10,"A4 (\u0637\u0627\u0628\u0639\u0629 \u0648\u0631\u0642\u064A\u0629)"),i(),n(11,"option",89),r(12,"POS (\u0637\u0627\u0628\u0639\u0629 \u0646\u0642\u0627\u0637 \u0627\u0644\u0628\u064A\u0639)"),i(),n(13,"option",90),r(14,"Thermal (\u0637\u0627\u0628\u0639\u0629 \u062D\u0631\u0627\u0631\u064A\u0629)"),i(),n(15,"option",91),r(16,"Label (\u0637\u0627\u0628\u0639\u0629 \u0645\u0644\u0635\u0642\u0627\u062A)"),i()()(),f(17,fr,15,0,"div",92)(18,br,7,0,"div",92),n(19,"div",17)(20,"label",18),l(21,"i",93),r(22," \u0627\u0631\u062A\u0641\u0627\u0639 \u0627\u0644\u0648\u0631\u0642 (\u0645\u0645) "),n(23,"span",94),r(24,"(0 = \u0645\u0633\u062A\u0645\u0631)"),i()(),l(25,"input",95),i(),f(26,xr,9,0,"div",92),n(27,"div",17)(28,"label",18),l(29,"i",96),r(30," \u0645\u0642\u064A\u0627\u0633 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (0.1 - 2.0) "),i(),l(31,"input",97),i()(),f(32,vr,11,0,"div",98),n(33,"div",99)(34,"h3",100),l(35,"i",101),r(36," \u0627\u0644\u0647\u0648\u0627\u0645\u0634 "),i(),n(37,"div",102)(38,"div",17)(39,"label",103),r(40,"\u0623\u0639\u0644\u0649"),i(),l(41,"input",104),i(),n(42,"div",17)(43,"label",103),r(44,"\u064A\u0645\u064A\u0646"),i(),l(45,"input",105),i(),n(46,"div",17)(47,"label",103),r(48,"\u0623\u0633\u0641\u0644"),i(),l(49,"input",106),i(),n(50,"div",17)(51,"label",103),r(52,"\u064A\u0633\u0627\u0631"),i(),l(53,"input",107),i()()(),n(54,"div",99)(55,"h3",100),l(56,"i",108),r(57," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u062E\u0637 "),i(),n(58,"div",109)(59,"div",17)(60,"label",110),r(61,"\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u062E\u0637"),i(),n(62,"select",111)(63,"option",112),r(64,"Arial"),i(),n(65,"option",113),r(66,"Courier"),i(),n(67,"option",114),r(68,"Times New Roman"),i(),n(69,"option",115),r(70,"Helvetica"),i()()(),n(71,"div",17)(72,"label",110),r(73,"\u062D\u062C\u0645 \u0627\u0644\u062E\u0637 \u0627\u0644\u0623\u0633\u0627\u0633\u064A"),i(),l(74,"input",116),i(),n(75,"div",17)(76,"label",110),r(77,"\u062D\u062C\u0645 \u062E\u0637 \u0627\u0644\u0639\u0646\u0648\u0627\u0646"),i(),l(78,"input",117),i(),n(79,"div",17)(80,"label",110),r(81,"\u062D\u062C\u0645 \u062E\u0637 \u0627\u0644\u062A\u0630\u064A\u064A\u0644"),i(),l(82,"input",118),i(),n(83,"div",17)(84,"label",110),r(85,"\u062D\u062C\u0645 \u062E\u0637 \u0627\u0644\u062C\u062F\u0648\u0644"),i(),l(86,"input",119),i()()(),f(87,hr,58,0,"div",120),i()),a&2){let e=c(2);d("formGroup",e.printerConfigForm),u(17),d("ngIf",!e.isPosPrinter),u(),d("ngIf",e.isPosPrinter),u(8),d("ngIf",!e.isPosPrinter),u(6),d("ngIf",!e.isPosPrinter),u(55),d("ngIf",e.isPosPrinter)}}function _r(a,t){if(a&1){let e=C();n(0,"div",13)(1,"div",79)(2,"h2",80),l(3,"i",81),r(4," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 "),i(),n(5,"button",82),x("click",function(){y(e);let s=c();return _(s.togglePrinterSettings())}),l(6,"i",83),r(7),i()(),f(8,yr,88,6,"div",84),i()}if(a&2){let e=c();u(6),N("bi-chevron-down",!e.showPrinterSettings)("bi-chevron-up",e.showPrinterSettings),u(),b(" ",e.showPrinterSettings?"\u0625\u062E\u0641\u0627\u0621":"\u0625\u0638\u0647\u0627\u0631"," \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A "),u(),d("ngIf",e.showPrinterSettings)}}var Xt=class a{constructor(t,e,o,s,m,E){this.fb=t;this.companiesService=e;this.notification=o;this.router=s;this.route=m;this.imageUrlService=E}companyForm;printerConfigForm;imageToShow;initialImageUrl=null;url=Y.resourcesUrl;showPrinterSettings=!1;printerConfig=qt;ngOnInit(){this.initForm(null),this.route.queryParams.subscribe(t=>{let e=+t.companyId;e&&this.companiesService.GetCompanyById(e).subscribe({next:o=>{this.initForm(o)},error:o=>{}})})}initForm(t){this.companyForm=this.fb.group({id:[t?.id||0],nameEn:[t?.nameEn||"",S.required],nameAr:[t?.nameAr||"",S.required],addressEn:[t?.addressEn||"",S.required],addressAr:[t?.addressAr||"",S.required],phone:[t?.phone||"",[S.required,S.pattern(/^\+?[0-9\s\-]{7,15}$/)]],email:[t?.email||"",[S.required,S.email]],website:[t?.website||""],taxNumber:[t?.taxNumber||""],fax:[t?.fax||""],registrationNumber:[t?.registrationNumber||""],capital:[t?.capital||null],sloganEn:[t?.sloganEn||""],sloganAr:[t?.sloganAr||""],currencyCode:[t?.currencyCode||"",S.required],footerNoteEn:[t?.footerNoteEn||""],footerNoteAr:[t?.footerNoteAr||""],termsEn:[t?.termsEn||""],termsAr:[t?.termsAr||""],image:[null],printTemplateId:[t?.printTemplateId||null],isActive:[t?.isActive??!0]}),t?.printerConfiguration?this.printerConfig=xn(t.printerConfiguration):this.printerConfig=se({},qt),this.initPrinterConfigForm(),t&&t.logoUrl&&(this.initialImageUrl=this.imageUrlService.getImageUrl(t.logoUrl,this.url),this.detectFiles(this.initialImageUrl))}initPrinterConfigForm(){this.printerConfigForm=this.fb.group({printerType:[this.printerConfig.printerType,S.required],paperFormat:[this.printerConfig.paperFormat],paperWidth:[this.printerConfig.paperWidth,[S.required,S.min(1)]],paperHeight:[this.printerConfig.paperHeight,[S.min(0)]],orientation:[this.printerConfig.orientation],printInColor:[this.printerConfig.printInColor],printBackground:[this.printerConfig.printBackground],scale:[this.printerConfig.scale,[S.required,S.min(.1),S.max(2)]],marginTop:[this.printerConfig.margins.top],marginRight:[this.printerConfig.margins.right],marginBottom:[this.printerConfig.margins.bottom],marginLeft:[this.printerConfig.margins.left],fontFamily:[this.printerConfig.fontSettings.fontFamily],baseFontSize:[this.printerConfig.fontSettings.baseFontSize,[S.required,S.min(6),S.max(72)]],headerFontSize:[this.printerConfig.fontSettings.headerFontSize,[S.required,S.min(6),S.max(72)]],footerFontSize:[this.printerConfig.fontSettings.footerFontSize,[S.required,S.min(6),S.max(72)]],tableFontSize:[this.printerConfig.fontSettings.tableFontSize,[S.required,S.min(6),S.max(72)]],posEncoding:[this.printerConfig.posSettings?.encoding||"UTF-8"],posCopies:[this.printerConfig.posSettings?.copies||1,[S.min(1),S.max(10)]],posAutoCut:[this.printerConfig.posSettings?.autoCut??!0],posOpenCashDrawer:[this.printerConfig.posSettings?.openCashDrawer??!1],posPrintDensity:[this.printerConfig.posSettings?.printDensity||8,[S.min(0),S.max(15)]],posPrintSpeed:[this.printerConfig.posSettings?.printSpeed||3,[S.min(1),S.max(5)]],posUseEscPos:[this.printerConfig.posSettings?.useEscPos??!0],posConnectionType:[this.printerConfig.posSettings?.connectionType||"USB"],posConnectionString:[this.printerConfig.posSettings?.connectionString||""]}),this.printerConfigForm.get("printerType")?.valueChanges.subscribe(t=>{this.onPrinterTypeChange(t)})}onPrinterTypeChange(t){if(t==="POS"||t==="Thermal"){let e=bn;this.printerConfigForm.patchValue({paperWidth:e.paperWidth,paperHeight:e.paperHeight,printInColor:!1,printBackground:!1,marginTop:e.margins.top,marginRight:e.margins.right,marginBottom:e.margins.bottom,marginLeft:e.margins.left,fontFamily:e.fontSettings.fontFamily,baseFontSize:e.fontSettings.baseFontSize,headerFontSize:e.fontSettings.headerFontSize,footerFontSize:e.fontSettings.footerFontSize,tableFontSize:e.fontSettings.tableFontSize})}else{let e=qt;this.printerConfigForm.patchValue({paperFormat:e.paperFormat,paperWidth:e.paperWidth,paperHeight:e.paperHeight,printInColor:e.printInColor,printBackground:e.printBackground,marginTop:e.margins.top,marginRight:e.margins.right,marginBottom:e.margins.bottom,marginLeft:e.margins.left,fontFamily:e.fontSettings.fontFamily,baseFontSize:e.fontSettings.baseFontSize,headerFontSize:e.fontSettings.headerFontSize,footerFontSize:e.fontSettings.footerFontSize,tableFontSize:e.fontSettings.tableFontSize})}}togglePrinterSettings(){this.showPrinterSettings=!this.showPrinterSettings}get isPosPrinter(){let t=this.printerConfigForm?.get("printerType")?.value;return t==="POS"||t==="Thermal"}detectFiles(t){let e=null;if(t instanceof File?e=t:t instanceof Event&&t.target?.files?.length&&(e=t.target.files[0]),e){let o=new FileReader;o.onload=s=>{this.imageToShow=s.target.result,this.image.setValue(e)},o.readAsDataURL(e)}else this.imageToShow=t,this.image.setValue(t)}save(){if(this.companyForm.valid){let t=new FormData;t.append("id",this.id.value),t.append("nameEn",this.nameEn.value),t.append("nameAr",this.nameAr.value),t.append("addressEn",this.addressEn.value),t.append("addressAr",this.addressAr.value),t.append("phone",this.phone.value),t.append("email",this.email.value),t.append("website",this.website.value),t.append("taxNumber",this.taxNumber.value),t.append("fax",this.fax.value||""),t.append("registrationNumber",this.registrationNumber.value||""),t.append("capital",this.capital.value||""),t.append("sloganEn",this.sloganEn.value||""),t.append("sloganAr",this.sloganAr.value||""),t.append("currencyCode",this.currencyCode.value),t.append("footerNoteEn",this.footerNoteEn.value),t.append("footerNoteAr",this.footerNoteAr.value),t.append("termsEn",this.termsEn.value),t.append("termsAr",this.termsAr.value);let e=this.image.value;if(e instanceof File&&t.append("image",e,e.name),t.append("printTemplateId",this.printTemplateId.value?this.printTemplateId.value.toString():""),t.append("isActive",this.isActive.value),this.printerConfigForm.valid){let o={printerType:this.printerConfigForm.get("printerType")?.value,paperFormat:this.printerConfigForm.get("paperFormat")?.value,paperWidth:this.printerConfigForm.get("paperWidth")?.value,paperHeight:this.printerConfigForm.get("paperHeight")?.value,margins:{top:this.printerConfigForm.get("marginTop")?.value,right:this.printerConfigForm.get("marginRight")?.value,bottom:this.printerConfigForm.get("marginBottom")?.value,left:this.printerConfigForm.get("marginLeft")?.value},fontSettings:{fontFamily:this.printerConfigForm.get("fontFamily")?.value,baseFontSize:this.printerConfigForm.get("baseFontSize")?.value,headerFontSize:this.printerConfigForm.get("headerFontSize")?.value,footerFontSize:this.printerConfigForm.get("footerFontSize")?.value,tableFontSize:this.printerConfigForm.get("tableFontSize")?.value},posSettings:this.isPosPrinter?{encoding:this.printerConfigForm.get("posEncoding")?.value,copies:this.printerConfigForm.get("posCopies")?.value,autoCut:this.printerConfigForm.get("posAutoCut")?.value,openCashDrawer:this.printerConfigForm.get("posOpenCashDrawer")?.value,printDensity:this.printerConfigForm.get("posPrintDensity")?.value,printSpeed:this.printerConfigForm.get("posPrintSpeed")?.value,useEscPos:this.printerConfigForm.get("posUseEscPos")?.value,connectionType:this.printerConfigForm.get("posConnectionType")?.value,connectionString:this.printerConfigForm.get("posConnectionString")?.value||null}:void 0,printInColor:this.printerConfigForm.get("printInColor")?.value,printBackground:this.printerConfigForm.get("printBackground")?.value,orientation:this.printerConfigForm.get("orientation")?.value,scale:this.printerConfigForm.get("scale")?.value};t.append("printerConfiguration",vn(o))}this.companiesService.SaveCompany(t).subscribe({next:o=>{this.notification.success("Successfully saved","Company"),this.router.navigate(["../company"],{relativeTo:this.route})},error:o=>{this.notification.error(o.error||"Error while saving","Company")}})}}cancel(){this.router.navigate(["../company"],{relativeTo:this.route})}get id(){return this.companyForm.get("id")}get nameEn(){return this.companyForm.get("nameEn")}get nameAr(){return this.companyForm.get("nameAr")}get addressEn(){return this.companyForm.get("addressEn")}get addressAr(){return this.companyForm.get("addressAr")}get phone(){return this.companyForm.get("phone")}get email(){return this.companyForm.get("email")}get website(){return this.companyForm.get("website")}get taxNumber(){return this.companyForm.get("taxNumber")}get fax(){return this.companyForm.get("fax")}get registrationNumber(){return this.companyForm.get("registrationNumber")}get capital(){return this.companyForm.get("capital")}get sloganEn(){return this.companyForm.get("sloganEn")}get sloganAr(){return this.companyForm.get("sloganAr")}get currencyCode(){return this.companyForm.get("currencyCode")}get footerNoteEn(){return this.companyForm.get("footerNoteEn")}get footerNoteAr(){return this.companyForm.get("footerNoteAr")}get termsEn(){return this.companyForm.get("termsEn")}get termsAr(){return this.companyForm.get("termsAr")}get image(){return this.companyForm.get("image")}get printTemplateId(){return this.companyForm.get("printTemplateId")}get isActive(){return this.companyForm.get("isActive")}static \u0275fac=function(e){return new(e||a)(v(L),v(tt),v(Ge),v(T),v(k),v(Ve))};static \u0275cmp=A({type:a,selectors:[["app-company-form",8,"component"]],standalone:!1,attrs:nr,decls:184,vars:13,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-5xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-building","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-building","text-blue-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-translate","mr-2","text-blue-600"],[1,"text-red-500"],["type","text","formControlName","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["type","text","formControlName","nameEn","placeholder","Enter company name in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-geo-alt","mr-2","text-green-600"],["type","text","formControlName","addressAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","addressEn","placeholder","Enter address in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-telephone","text-green-600","mr-3"],[1,"bi","bi-phone","mr-2","text-green-600"],["type","tel","formControlName","phone","placeholder","\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-printer","mr-2","text-green-600"],["type","tel","formControlName","fax","placeholder","\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u0643\u0633",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-envelope","mr-2","text-purple-600"],["type","email","formControlName","email","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-globe","mr-2","text-purple-600"],["type","url","formControlName","website","placeholder","https://example.com",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-shield-check","text-amber-600","mr-3"],[1,"bi","bi-receipt","mr-2","text-amber-600"],["type","text","formControlName","taxNumber","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064A\u0628\u064A",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-file-earmark-text","mr-2","text-amber-600"],["type","text","formControlName","registrationNumber","placeholder","\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-currency-exchange","mr-2","text-amber-600"],["type","number","step","0.01","formControlName","capital","placeholder","0.00",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-cash-stack","mr-2","text-amber-600"],["type","text","formControlName","currencyCode","placeholder","JOD \u0623\u0648 \u062F.\u0623",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-palette","text-pink-600","mr-3"],[1,"bi","bi-quote","mr-2","text-pink-600"],["type","text","formControlName","sloganAr","placeholder","\u0645\u062B\u0627\u0644: \u0633\u0631\u0627\u0645\u064A\u0643 \u060C \u0645\u0648\u0631\u0633\u062A\u0627\u0646 - \u0631\u062E\u0627\u0645 \u060C \u062D\u0648\u0627\u0644\u064A\u062A \u0623\u062F\u0648\u0627\u062A \u0635\u062D\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-pink-500","focus:border-pink-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","sloganEn","placeholder","e.g., Ceramic, Moristan - Marble, Granite, Sanitary Ware",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-pink-500","focus:border-pink-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"space-y-2","md:col-span-2"],[1,"block","text-sm","font-semibold","text-gray-700","mb-3"],[1,"bi","bi-image","mr-2","text-pink-600"],["formControlName","image",3,"imageSelected","initialImageUrl"],[1,"bi","bi-file-earmark-text","text-indigo-600","mr-3"],[1,"bi","bi-chat-dots","mr-2","text-indigo-600"],["rows","3","formControlName","footerNoteAr","placeholder","\u0623\u062F\u062E\u0644 \u0645\u0644\u0627\u062D\u0638\u0629 \u0627\u0644\u062A\u0630\u064A\u064A\u0644 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],["rows","3","formControlName","footerNoteEn","placeholder","Enter footer note in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],[1,"bi","bi-file-earmark-check","mr-2","text-indigo-600"],["rows","5","formControlName","termsAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062D\u0643\u0627\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],["rows","5","formControlName","termsEn","placeholder","Enter terms and conditions in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],["class","border-b border-gray-200 pb-8",4,"ngIf"],[1,"pb-8"],[1,"bi","bi-gear","text-gray-600","mr-3"],[1,"bi","bi-printer","mr-2","text-gray-600"],["type","number","formControlName","printTemplateId","placeholder","\u0645\u0639\u0631\u0641 \u0642\u0627\u0644\u0628 \u0627\u0644\u0637\u0628\u0627\u0639\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:border-gray-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"space-y-2","flex","items-center"],[1,"flex","items-center","p-4","bg-gray-50","rounded-xl","border-2","border-gray-200"],["type","checkbox","formControlName","isActive","id","isActive",1,"w-5","h-5","text-green-600","bg-gray-100","border-gray-300","rounded","focus:ring-green-500","focus:ring-2"],["for","isActive",1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer","flex-1"],[1,"bi","bi-toggle-on","mr-2","text-green-600"],[1,"text-sm","text-gray-500","mr-3"],[1,"bi","bi-info-circle","mr-1"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-bold","text-gray-900","flex","items-center"],[1,"bi","bi-printer-fill","text-blue-600","mr-3"],["type","button",1,"px-4","py-2","bg-blue-50","text-blue-600","rounded-lg","hover:bg-blue-100","transition-colors","flex","items-center",3,"click"],[1,"bi","mr-2"],["class","space-y-6 bg-gray-50 p-6 rounded-xl",3,"formGroup",4,"ngIf"],[1,"space-y-6","bg-gray-50","p-6","rounded-xl",3,"formGroup"],[1,"bi","bi-printer","mr-2","text-blue-600"],["formControlName","printerType",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white"],["value","A4"],["value","POS"],["value","Thermal"],["value","Label"],["class","space-y-2",4,"ngIf"],[1,"bi","bi-arrows-expand-vertical","mr-2","text-blue-600"],[1,"text-xs","text-gray-500"],["type","number","formControlName","paperHeight","placeholder","0",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white"],[1,"bi","bi-zoom-in","mr-2","text-blue-600"],["type","number","step","0.1","formControlName","scale","placeholder","1.0",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white"],["class","grid grid-cols-1 md:grid-cols-2 gap-6",4,"ngIf"],[1,"border-t","border-gray-300","pt-6"],[1,"text-lg","font-semibold","text-gray-800","mb-4","flex","items-center"],[1,"bi","bi-border-width","mr-2","text-green-600"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"block","text-xs","font-medium","text-gray-600"],["type","text","formControlName","marginTop","placeholder","20mm",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","bg-white"],["type","text","formControlName","marginRight","placeholder","20mm",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","bg-white"],["type","text","formControlName","marginBottom","placeholder","20mm",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","bg-white"],["type","text","formControlName","marginLeft","placeholder","20mm",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-green-500","bg-white"],[1,"bi","bi-fonts","mr-2","text-purple-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700"],["formControlName","fontFamily",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-purple-500","bg-white"],["value","Arial"],["value","Courier"],["value","Times New Roman"],["value","Helvetica"],["type","number","formControlName","baseFontSize",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-purple-500","bg-white"],["type","number","formControlName","headerFontSize",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-purple-500","bg-white"],["type","number","formControlName","footerFontSize",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-purple-500","bg-white"],["type","number","formControlName","tableFontSize",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-purple-500","bg-white"],["class","border-t border-gray-300 pt-6",4,"ngIf"],[1,"bi","bi-file-earmark","mr-2","text-blue-600"],["formControlName","paperFormat",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white"],["value","Letter"],["value","Legal"],["value","A3"],["value","A5"],[1,"bi","bi-arrows-expand-horizontal","mr-2","text-blue-600"],["type","number","formControlName","paperWidth","placeholder","80",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white"],[1,"bi","bi-arrow-repeat","mr-2","text-blue-600"],["formControlName","orientation",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","bg-white"],["value","Portrait"],["value","Landscape"],[1,"flex","items-center","p-4","bg-white","rounded-xl","border-2","border-gray-200"],["type","checkbox","formControlName","printInColor","id","printInColor",1,"w-5","h-5","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","focus:ring-2"],["for","printInColor",1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer"],[1,"bi","bi-palette","mr-2","text-blue-600"],["type","checkbox","formControlName","printBackground","id","printBackground",1,"w-5","h-5","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","focus:ring-2"],["for","printBackground",1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer"],[1,"bi","bi-image","mr-2","text-blue-600"],[1,"bi","bi-receipt-cutoff","mr-2","text-orange-600"],["formControlName","posEncoding",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","bg-white"],["value","UTF-8"],["value","Windows-1256"],["value","ISO-8859-6"],["type","number","formControlName","posCopies","min","1","max","10",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","bg-white"],["formControlName","posConnectionType",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","bg-white"],["value","USB"],["value","Network"],["value","Serial"],["value","Bluetooth"],["type","text","formControlName","posConnectionString","placeholder","\u0645\u062B\u0627\u0644: COM3 \u0623\u0648 192.168.1.100",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","bg-white"],["type","number","formControlName","posPrintDensity","min","0","max","15",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","bg-white"],["type","number","formControlName","posPrintSpeed","min","1","max","5",1,"w-full","px-4","py-2","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-orange-500","bg-white"],["type","checkbox","formControlName","posAutoCut","id","posAutoCut",1,"w-5","h-5","text-orange-600","bg-gray-100","border-gray-300","rounded","focus:ring-orange-500","focus:ring-2"],["for","posAutoCut",1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer"],[1,"bi","bi-scissors","mr-2","text-orange-600"],["type","checkbox","formControlName","posOpenCashDrawer","id","posOpenCashDrawer",1,"w-5","h-5","text-orange-600","bg-gray-100","border-gray-300","rounded","focus:ring-orange-500","focus:ring-2"],["for","posOpenCashDrawer",1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer"],[1,"bi","bi-cash-register","mr-2","text-orange-600"],["type","checkbox","formControlName","posUseEscPos","id","posUseEscPos",1,"w-5","h-5","text-orange-600","bg-gray-100","border-gray-300","rounded","focus:ring-orange-500","focus:ring-2"],["for","posUseEscPos",1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer"],[1,"bi","bi-code-slash","mr-2","text-orange-600"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0627\u0645\u0644\u0623 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0644\u0625\u062F\u0627\u0631\u0629 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0634\u0631\u0643\u0629"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.save()}),n(16,"div",13)(17,"h2",14),l(18,"i",15),r(19," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 \u0644\u0644\u0634\u0631\u0643\u0629 "),i(),n(20,"div",16)(21,"div",17)(22,"label",18),l(23,"i",19),r(24," \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),n(25,"span",20),r(26,"*"),i()(),l(27,"input",21),f(28,rr,2,0,"div",22),i(),n(29,"div",17)(30,"label",18),l(31,"i",19),r(32," \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),n(33,"span",20),r(34,"*"),i()(),l(35,"input",23),f(36,or,2,0,"div",22),i(),n(37,"div",17)(38,"label",18),l(39,"i",24),r(40," \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),n(41,"span",20),r(42,"*"),i()(),l(43,"input",25),f(44,ur,2,0,"div",22),i(),n(45,"div",17)(46,"label",18),l(47,"i",24),r(48," \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),n(49,"span",20),r(50,"*"),i()(),l(51,"input",26),f(52,ar,2,0,"div",22),i()()(),n(53,"div",13)(54,"h2",14),l(55,"i",27),r(56," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 "),i(),n(57,"div",16)(58,"div",17)(59,"label",18),l(60,"i",28),r(61," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 "),n(62,"span",20),r(63,"*"),i()(),l(64,"input",29),f(65,dr,3,2,"div",22),i(),n(66,"div",17)(67,"label",18),l(68,"i",30),r(69," \u0627\u0644\u0641\u0627\u0643\u0633 "),i(),l(70,"input",31),i(),n(71,"div",17)(72,"label",18),l(73,"i",32),r(74," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A "),n(75,"span",20),r(76,"*"),i()(),l(77,"input",33),f(78,pr,3,2,"div",22),i(),n(79,"div",17)(80,"label",18),l(81,"i",34),r(82," \u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A "),i(),l(83,"input",35),i()()(),n(84,"div",13)(85,"h2",14),l(86,"i",36),r(87," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064A\u0629 \u0648\u0627\u0644\u0645\u0627\u0644\u064A\u0629 "),i(),n(88,"div",16)(89,"div",17)(90,"label",18),l(91,"i",37),r(92," \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064A\u0628\u064A "),i(),l(93,"input",38),i(),n(94,"div",17)(95,"label",18),l(96,"i",39),r(97," \u0631\u0642\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 "),i(),l(98,"input",40),i(),n(99,"div",17)(100,"label",18),l(101,"i",41),r(102," \u0631\u0623\u0633 \u0627\u0644\u0645\u0627\u0644 "),i(),l(103,"input",42),i(),n(104,"div",17)(105,"label",18),l(106,"i",43),r(107," \u0631\u0645\u0632 \u0627\u0644\u0639\u0645\u0644\u0629 "),n(108,"span",20),r(109,"*"),i()(),l(110,"input",44),f(111,gr,2,0,"div",22),i()()(),n(112,"div",13)(113,"h2",14),l(114,"i",45),r(115," \u0627\u0644\u0647\u0648\u064A\u0629 \u0627\u0644\u0628\u0635\u0631\u064A\u0629 "),i(),n(116,"div",16)(117,"div",17)(118,"label",18),l(119,"i",46),r(120," \u0627\u0644\u0634\u0639\u0627\u0631 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),i(),l(121,"input",47),i(),n(122,"div",17)(123,"label",18),l(124,"i",46),r(125," \u0627\u0644\u0634\u0639\u0627\u0631 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),i(),l(126,"input",48),i(),n(127,"div",49)(128,"label",50),l(129,"i",51),r(130," \u0634\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0643\u0629 "),i(),n(131,"app-image-uploader",52),x("imageSelected",function(m){return o.detectFiles(m)}),i()()()(),n(132,"div",13)(133,"h2",14),l(134,"i",53),r(135," \u0627\u0644\u062A\u0630\u064A\u064A\u0644 \u0648\u0627\u0644\u0634\u0631\u0648\u0637 "),i(),n(136,"div",16)(137,"div",17)(138,"label",18),l(139,"i",54),r(140," \u0645\u0644\u0627\u062D\u0638\u0629 \u0627\u0644\u062A\u0630\u064A\u064A\u0644 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),i(),l(141,"textarea",55),i(),n(142,"div",17)(143,"label",18),l(144,"i",54),r(145," \u0645\u0644\u0627\u062D\u0638\u0629 \u0627\u0644\u062A\u0630\u064A\u064A\u0644 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),i(),l(146,"textarea",56),i(),n(147,"div",17)(148,"label",18),l(149,"i",57),r(150," \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062D\u0643\u0627\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),i(),l(151,"textarea",58),i(),n(152,"div",17)(153,"label",18),l(154,"i",57),r(155," \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062D\u0643\u0627\u0645 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),i(),l(156,"textarea",59),i()()(),f(157,_r,9,6,"div",60),n(158,"div",61)(159,"h2",14),l(160,"i",62),r(161," \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0625\u0636\u0627\u0641\u064A\u0629 "),i(),n(162,"div",16)(163,"div",17)(164,"label",18),l(165,"i",63),r(166," \u0645\u0639\u0631\u0641 \u0642\u0627\u0644\u0628 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 "),i(),l(167,"input",64),i(),n(168,"div",65)(169,"div",66),l(170,"input",67),n(171,"label",68),l(172,"i",69),r(173," \u0627\u0644\u0634\u0631\u0643\u0629 \u0646\u0634\u0637\u0629 "),i()(),n(174,"div",70),l(175,"i",71),r(176," \u0627\u0644\u0634\u0631\u0643\u0629 \u0627\u0644\u0646\u0634\u0637\u0629 \u0633\u062A\u0638\u0647\u0631 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645 "),i()()()(),n(177,"div",72)(178,"button",73),x("click",function(){return o.cancel()}),l(179,"i",74),r(180," \u0625\u0644\u063A\u0627\u0621 "),i(),n(181,"button",75),l(182,"i",76),r(183),i()()()()()()),e&2){let s,m;u(9),b(" ",((s=o.companyForm.get("id"))==null?null:s.value)>0?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0634\u0631\u0643\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0634\u0631\u0643\u0629 \u062C\u062F\u064A\u062F\u0629"," "),u(6),d("formGroup",o.companyForm),u(13),d("ngIf",o.nameAr.invalid&&(o.nameAr.dirty||o.nameAr.touched)),u(8),d("ngIf",o.nameEn.invalid&&(o.nameEn.dirty||o.nameEn.touched)),u(8),d("ngIf",o.addressAr.invalid&&(o.addressAr.dirty||o.addressAr.touched)),u(8),d("ngIf",o.addressEn.invalid&&(o.addressEn.dirty||o.addressEn.touched)),u(13),d("ngIf",o.phone.invalid&&(o.phone.dirty||o.phone.touched)),u(13),d("ngIf",o.email.invalid&&(o.email.dirty||o.email.touched)),u(33),d("ngIf",o.currencyCode.invalid&&(o.currencyCode.dirty||o.currencyCode.touched)),u(20),d("initialImageUrl",o.initialImageUrl),u(26),d("ngIf",o.printerConfigForm),u(24),d("disabled",!o.companyForm.valid),u(2),b(" ",((m=o.companyForm.get("id"))==null?null:m.value)>0?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0634\u0631\u0643\u0629":"\u062D\u0641\u0638 \u0627\u0644\u0634\u0631\u0643\u0629"," ")}},dependencies:[w,Fe,M,W,X,Z,V,xe,be,J,D,B,Ce,gt,U,j],encapsulation:2})};var Sr=["class","component"];function Cr(a,t){if(a&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19),l(3,"app-image-uploader",20),i(),n(4,"div",21)(5,"div",22)(6,"h3",23),r(7),i(),n(8,"p",24),r(9),i()(),n(10,"div",25)(11,"span",26),l(12,"i",27),r(13),i()(),n(14,"div",28)(15,"div",29)(16,"div",30),l(17,"i",31),i(),n(18,"p",32),r(19),i()()(),n(20,"div",33)(21,"div",5)(22,"div",34),l(23,"i",35),i(),n(24,"span",36),r(25),i()(),n(26,"button",37),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.openForm(s.id))}),l(27,"i",38),r(28," \u062A\u0639\u062F\u064A\u0644 "),i()()()()()}if(a&2){let e=t.$implicit,o=c(2);u(3),d("initialImageUrl",o.imageUrlService.getImageUrl(e.logoUrl,o.serverUrl))("readonly",!0),u(4),b(" ",e.nameAr," "),u(2),p(e.nameEn),u(4),b(" ",e.taxNumber||"\u0644\u0627 \u064A\u0648\u062C\u062F \u0631\u0642\u0645 \u0636\u0631\u064A\u0628\u064A"," "),u(6),b(" ",o.lang.currentLang==="ar"?e.addressAr:e.addressEn," "),u(6),p(e.currencyCode)}}function Er(a,t){if(a&1&&(n(0,"div",15),f(1,Cr,29,7,"div",16),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e.companies)}}function Ar(a,t){if(a&1){let e=C();n(0,"div",40)(1,"div",41),l(2,"i",42),i(),n(3,"h3",43),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0634\u0631\u0643\u0627\u062A"),i(),n(5,"p",44),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0634\u0631\u0643\u0627\u062A \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i(),n(7,"button",10),x("click",function(){y(e);let s=c(2);return _(s.openForm(null))}),l(8,"i",45),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0634\u0631\u0643\u0629 "),i()()}}function wr(a,t){if(a&1&&(n(0,"div"),f(1,Ar,10,0,"div",39),i()),a&2){let e=t.ngIf;u(),d("ngIf",!e.companies||e.companies.length===0)}}function Ir(a,t){a&1&&(n(0,"div",40),l(1,"div",46),n(2,"p",47),r(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0634\u0631\u0643\u0627\u062A..."),i()())}function Pr(a,t){a&1&&(n(0,"span",58),r(1,"..."),i())}function Fr(a,t){if(a&1){let e=C();n(0,"button",53),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.changePage(s))}),r(1),i()}if(a&2){let e=t.$implicit,o=c(2);N("bg-violet-600",e===o.pageIndex)("text-white",e===o.pageIndex)("bg-gray-100",e!==o.pageIndex)("text-gray-700",e!==o.pageIndex)("hover:bg-gray-200",e!==o.pageIndex),u(),b(" ",e," ")}}function Or(a,t){a&1&&(n(0,"span",58),r(1,"..."),i())}function Tr(a,t){if(a&1){let e=C();n(0,"button",53),x("click",function(){y(e);let s=c(2);return _(s.changePage(s.totalPages))}),r(1),i()}if(a&2){let e=c(2);N("bg-violet-600",e.pageIndex===e.totalPages)("text-white",e.pageIndex===e.totalPages)("bg-gray-100",e.pageIndex!==e.totalPages)("text-gray-700",e.pageIndex!==e.totalPages)("hover:bg-gray-200",e.pageIndex!==e.totalPages),u(),b(" ",e.totalPages," ")}}function Mr(a,t){if(a&1){let e=C();n(0,"div",48)(1,"nav",49)(2,"div",50)(3,"button",51),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex-1))}),l(4,"i",52),i(),n(5,"button",53),x("click",function(){y(e);let s=c();return _(s.changePage(1))}),r(6," 1 "),i(),f(7,Pr,2,0,"span",54)(8,Fr,2,11,"button",55)(9,Or,2,0,"span",54)(10,Tr,2,11,"button",56),n(11,"button",51),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex+1))}),l(12,"i",57),i()()()()}if(a&2){let e=c();u(3),d("disabled",e.pageIndex===1),u(2),N("bg-violet-600",e.pageIndex===1)("text-white",e.pageIndex===1)("bg-gray-100",e.pageIndex!==1)("text-gray-700",e.pageIndex!==1)("hover:bg-gray-200",e.pageIndex!==1),u(2),d("ngIf",e.pageIndex>4),u(),d("ngForOf",e.getPageRange()),u(),d("ngIf",e.pageIndex<e.totalPages-3),u(),d("ngIf",e.totalPages>1),u(),d("disabled",e.pageIndex===e.totalPages||e.totalPages===0)}}var Zt=class a{constructor(t,e,o,s,m,E){this.fb=t;this.companiesService=e;this.router=o;this.route=s;this.lang=m;this.imageUrlService=E}companies$;companyForm;pageIndex=1;pageSize=8;totalPages=1;totalPagesArray=[];serverUrl="";ngOnInit(){this.loadCompanies(),this.companyForm=this.fb.group({id:[null],nameAr:["",S.required],nameEn:["",S.required],addressAr:["",S.required],addressEn:["",S.required],termsAr:["",S.required],termsEn:["",S.required],footerNoteAr:["",S.required],footerNoteEn:["",S.required],taxNumber:["",S.required],currencyCode:["",S.required],logoUrl:[""]}),this.serverUrl=this.companiesService.url.substring(0,this.companiesService.url.indexOf("api"))}loadCompanies(){this.companies$=this.companiesService.GetCompaniesPagination(this.pageIndex,this.pageSize).pipe(ke(t=>{this.totalPages=Math.ceil(t.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(e,o)=>o+1)}))}changePage(t){t<1||t>this.totalPages||(this.pageIndex=t,this.loadCompanies())}getPageRange(){let e=[],o=Math.max(2,this.pageIndex-2),s=Math.min(this.totalPages-1,this.pageIndex+2);for(let m=o;m<=s;m++)e.push(m);return e}openForm(t){t?this.router.navigate(["../company-form"],{relativeTo:this.route,queryParams:{companyId:t}}):this.router.navigate(["../company-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v(tt),v(T),v(k),v(G),v(Ve))};static \u0275cmp=A({type:a,selectors:[["app-company",8,"component"]],standalone:!1,attrs:Sr,decls:23,vars:10,consts:[["loadingTemplate",""],["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-violet-500","to-purple-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-building","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"inline-flex","items-center","px-6","py-3","bg-gradient-to-r","from-violet-600","to-purple-600","text-white","rounded-xl","font-semibold","hover:from-violet-700","hover:to-purple-700","focus:outline-none","focus:ring-2","focus:ring-violet-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-plus-circle","mr-2","text-lg"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","bg-white rounded-2xl shadow-lg p-6 mt-8",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],["class","group h-full",4,"ngFor","ngForOf"],[1,"group","h-full"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","h-full","flex","flex-col"],[1,"aspect-square","bg-gradient-to-br","from-violet-50","to-purple-100","flex","items-center","justify-center","p-6","flex-shrink-0"],[3,"initialImageUrl","readonly"],[1,"p-6","flex","flex-col","flex-grow"],[1,"text-center","mb-4"],[1,"font-bold","text-gray-900","text-lg","mb-2","group-hover:text-violet-600","transition-colors"],[1,"text-gray-500","text-sm"],[1,"mb-4"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-violet-100","text-violet-800"],[1,"bi","bi-hash","mr-1"],[1,"flex-grow","mb-4"],[1,"flex","items-start"],[1,"w-6","h-6","bg-gradient-to-br","from-gray-100","to-gray-200","rounded-lg","flex","items-center","justify-center","mr-2","flex-shrink-0","mt-0.5"],[1,"bi","bi-geo-alt","text-gray-600","text-xs"],[1,"text-gray-600","text-sm","leading-relaxed"],[1,"flex","justify-between","items-center","pt-4","border-t","border-gray-100","flex-shrink-0"],[1,"w-6","h-6","bg-gradient-to-br","from-amber-100","to-orange-100","rounded-lg","flex","items-center","justify-center","mr-2"],[1,"bi","bi-currency-exchange","text-amber-600","text-xs"],[1,"text-sm","font-semibold","text-gray-700"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0634\u0631\u0643\u0629",1,"inline-flex","items-center","px-3","py-2","bg-violet-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-violet-700","focus:outline-none","focus:ring-2","focus:ring-violet-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-square","mr-1"],["class","bg-white rounded-2xl shadow-lg p-12 text-center",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","p-12","text-center"],[1,"w-24","h-24","bg-gray-100","rounded-full","mx-auto","flex","items-center","justify-center","mb-6"],[1,"bi","bi-building","text-gray-400","text-4xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"bi","bi-plus-circle","mr-2"],[1,"w-16","h-16","border-4","border-violet-600","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-4"],[1,"text-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mt-8"],["aria-label","Page navigation",1,"flex","justify-center"],[1,"flex","items-center","space-x-2","space-x-reverse"],[1,"px-3","py-2","text-gray-500","hover:text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"bi","bi-chevron-right","text-lg"],[1,"px-4","py-2","rounded-lg","font-medium","transition-colors",3,"click"],["class","px-2 text-gray-500",4,"ngIf"],["class","px-4 py-2 rounded-lg font-medium transition-colors",3,"bg-violet-600","text-white","bg-gray-100","text-gray-700","hover:bg-gray-200","click",4,"ngFor","ngForOf"],["class","px-4 py-2 rounded-lg font-medium transition-colors",3,"bg-violet-600","text-white","bg-gray-100","text-gray-700","hover:bg-gray-200","click",4,"ngIf"],[1,"bi","bi-chevron-left","text-lg"],[1,"px-2","text-gray-500"]],template:function(e,o){if(e&1){let s=C();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),l(6,"i",7),i(),n(7,"div")(8,"h1",8),r(9,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0634\u0631\u0643\u0627\u062A"),i(),n(10,"p",9),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0634\u0631\u0643\u0627\u062A \u0648\u0627\u0644\u0645\u0624\u0633\u0633\u0627\u062A \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()(),n(12,"button",10),x("click",function(){return y(s),_(o.openForm(null))}),l(13,"i",11),r(14," \u0625\u0636\u0627\u0641\u0629 \u0634\u0631\u0643\u0629 \u062C\u062F\u064A\u062F\u0629 "),i()()(),f(15,Er,2,1,"div",12),g(16,"async"),f(17,wr,2,1,"div",13),g(18,"async"),f(19,Ir,4,0,"ng-template",null,0,je)(21,Mr,13,16,"div",14),g(22,"async"),i()()}if(e&2){let s=We(20);u(15),d("ngIf",h(16,4,o.companies$)),u(2),d("ngIf",h(18,6,o.companies$))("ngIfElse",s),u(4),d("ngIf",h(22,8,o.companies$))}},dependencies:[F,w,Fe,M,me],encapsulation:2})};var kr=["class","component"];function Rr(a,t){if(a&1&&(n(0,"div",34),l(1,"i",35),r(2),i()),a&2){let e=c();u(2),b(" ",e.getFieldError("nameAr")," ")}}function Dr(a,t){if(a&1&&(n(0,"div",34),l(1,"i",35),r(2),i()),a&2){let e=c();u(2),b(" ",e.getFieldError("nameEn")," ")}}function Nr(a,t){if(a&1&&(n(0,"div",34),l(1,"i",35),r(2),i()),a&2){let e=c();u(2),b(" ",e.getFieldError("phone")," ")}}function Vr(a,t){if(a&1&&(n(0,"div",34),l(1,"i",35),r(2),i()),a&2){let e=c();u(2),b(" ",e.getFieldError("email")," ")}}function Lr(a,t){if(a&1&&(n(0,"div",34),l(1,"i",35),r(2),i()),a&2){let e=c();u(2),b(" ",e.getFieldError("address")," ")}}function Br(a,t){a&1&&l(0,"i",36)}function Ur(a,t){a&1&&l(0,"i",37)}var ei=class a{constructor(t,e,o,s,m){this.fb=t;this.customerService=e;this.toastr=o;this.route=s;this.router=m}customerForm;isEditMode=!1;customerId=0;isLoading=!1;ngOnInit(){this.customerForm=this.fb.group({id:[0],nameAr:["",S.required],nameEn:["",S.required],phone:["",S.required],email:["",[S.email]],address:["",S.required]}),this.route.queryParams.subscribe(t=>{t.customerId&&(this.customerId=+t.customerId,this.isEditMode=!0,this.loadCustomer(this.customerId))})}loadCustomer(t){this.isLoading=!0,this.customerService.GetCustomerById(t).subscribe({next:e=>{this.customerForm.patchValue(e),this.isLoading=!1},error:()=>{this.toastr.error("Failed to load customer"),this.isLoading=!1}})}onSubmit(){if(this.customerForm.invalid){this.customerForm.markAllAsTouched();return}this.isLoading=!0,this.customerService.SaveCustomer(this.customerForm.value).subscribe({next:()=>{this.toastr.success("Customer saved successfully"),this.isLoading=!1,this.router.navigate(["../customers"],{relativeTo:this.route})},error:t=>{this.toastr.error(t.error||"Save failed"),this.isLoading=!1}})}getFieldError(t){let e=this.customerForm.get(t);if(e?.errors&&e.touched){if(e.errors.required)return"This field is required";if(e.errors.email)return"Please enter a valid email address"}return""}cancel(){this.router.navigate(["../customers"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v(ft),v(ee),v(k),v(T))};static \u0275cmp=A({type:a,selectors:[["app-customers-form",8,"component"]],standalone:!1,attrs:kr,decls:80,vars:65,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-cyan-50","to-blue-100","py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center"],[1,"w-14","h-14","bg-gradient-to-br","from-cyan-500","to-blue-600","rounded-2xl","flex","items-center","justify-center","mr-4","shadow-lg"],[1,"bi","bi-person-plus","text-white","text-2xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-white","hover:bg-gray-100","rounded-full","flex","items-center","justify-center","transition-colors","shadow-md",3,"click","disabled"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","border","border-gray-100","overflow-hidden"],[1,"p-6","sm:p-8",3,"ngSubmit","formGroup"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-person","mr-2","text-cyan-600"],[1,"text-red-500"],["type","text","formControlName","nameAr",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"placeholder"],["class","text-red-500 text-sm mt-1 flex items-center",4,"ngIf"],["type","text","formControlName","nameEn",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"placeholder"],[1,"bi","bi-telephone","mr-2","text-cyan-600"],["type","tel","formControlName","phone",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"placeholder"],[1,"bi","bi-envelope","mr-2","text-cyan-600"],["type","email","formControlName","email",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"placeholder"],[1,"bi","bi-geo-alt","mr-2","text-cyan-600"],["formControlName","address","rows","4",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","resize-none","bg-gray-50","focus:bg-white",3,"placeholder"],[1,"flex","flex-col","sm:flex-row","justify-end","gap-4","mt-8","pt-6","border-t","border-gray-200"],["type","button",1,"w-full","sm:w-auto","px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"w-full","sm:w-auto","px-8","py-3","bg-gradient-to-r","from-cyan-600","to-blue-600","text-white","rounded-xl","font-semibold","hover:from-cyan-700","hover:to-blue-700","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],["class","bi bi-check-lg mr-2",4,"ngIf"],["class","bi bi-arrow-clockwise animate-spin mr-2",4,"ngIf"],[1,"text-red-500","text-sm","mt-1","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"],[1,"bi","bi-check-lg","mr-2"],[1,"bi","bi-arrow-clockwise","animate-spin","mr-2"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),g(10,"translate"),i(),n(11,"p",8),r(12),g(13,"translate"),i()()(),n(14,"button",9),x("click",function(){return o.cancel()}),l(15,"i",10),i()()(),n(16,"div",11)(17,"form",12),x("ngSubmit",function(){return o.onSubmit()}),n(18,"div",13)(19,"div",14)(20,"div",15)(21,"label",16),l(22,"i",17),r(23),g(24,"translate"),n(25,"span",18),r(26,"*"),i()(),l(27,"input",19),g(28,"translate"),f(29,Rr,3,1,"div",20),i(),n(30,"div",15)(31,"label",16),l(32,"i",17),r(33),g(34,"translate"),n(35,"span",18),r(36,"*"),i()(),l(37,"input",21),g(38,"translate"),f(39,Dr,3,1,"div",20),i()(),n(40,"div",14)(41,"div",15)(42,"label",16),l(43,"i",22),r(44),g(45,"translate"),n(46,"span",18),r(47,"*"),i()(),l(48,"input",23),g(49,"translate"),f(50,Nr,3,1,"div",20),i(),n(51,"div",15)(52,"label",16),l(53,"i",24),r(54),g(55,"translate"),i(),l(56,"input",25),g(57,"translate"),f(58,Vr,3,1,"div",20),i()(),n(59,"div",15)(60,"label",16),l(61,"i",26),r(62),g(63,"translate"),n(64,"span",18),r(65,"*"),i()(),l(66,"textarea",27),g(67,"translate"),f(68,Lr,3,1,"div",20),i()(),n(69,"div",28)(70,"button",29),x("click",function(){return o.cancel()}),l(71,"i",30),r(72),g(73,"translate"),i(),n(74,"button",31),f(75,Br,1,0,"i",32)(76,Ur,1,0,"i",33),r(77),g(78,"translate"),g(79,"translate"),i()()()()()()),e&2){let s,m,E,I,R;u(9),b(" ",h(10,35,o.isEditMode?"CUSTOMER_FORM.EDIT_TITLE":"CUSTOMER_FORM.TITLE")," "),u(3),p(h(13,37,"CUSTOMER_FORM.SUBTITLE")),u(2),d("disabled",o.isLoading),u(3),d("formGroup",o.customerForm),u(6),b(" ",h(24,39,"CUSTOMER_FORM.NAME_AR")," "),u(4),N("border-red-500",((s=o.customerForm.get("nameAr"))==null?null:s.invalid)&&((s=o.customerForm.get("nameAr"))==null?null:s.touched)),d("placeholder",h(28,41,"CUSTOMER_FORM.PLACEHOLDER.NAME_AR")),u(2),d("ngIf",o.getFieldError("nameAr")),u(4),b(" ",h(34,43,"CUSTOMER_FORM.NAME_EN")," "),u(4),N("border-red-500",((m=o.customerForm.get("nameEn"))==null?null:m.invalid)&&((m=o.customerForm.get("nameEn"))==null?null:m.touched)),d("placeholder",h(38,45,"CUSTOMER_FORM.PLACEHOLDER.NAME_EN")),u(2),d("ngIf",o.getFieldError("nameEn")),u(5),b(" ",h(45,47,"CUSTOMER_FORM.PHONE")," "),u(4),N("border-red-500",((E=o.customerForm.get("phone"))==null?null:E.invalid)&&((E=o.customerForm.get("phone"))==null?null:E.touched)),d("placeholder",h(49,49,"CUSTOMER_FORM.PLACEHOLDER.PHONE")),u(2),d("ngIf",o.getFieldError("phone")),u(4),b(" ",h(55,51,"CUSTOMER_FORM.EMAIL")," "),u(2),N("border-red-500",((I=o.customerForm.get("email"))==null?null:I.invalid)&&((I=o.customerForm.get("email"))==null?null:I.touched)),d("placeholder",h(57,53,"CUSTOMER_FORM.PLACEHOLDER.EMAIL")),u(2),d("ngIf",o.getFieldError("email")),u(4),b(" ",h(63,55,"CUSTOMER_FORM.ADDRESS")," "),u(4),N("border-red-500",((R=o.customerForm.get("address"))==null?null:R.invalid)&&((R=o.customerForm.get("address"))==null?null:R.touched)),d("placeholder",h(67,57,"CUSTOMER_FORM.PLACEHOLDER.ADDRESS")),u(2),d("ngIf",o.getFieldError("address")),u(2),d("disabled",o.isLoading),u(2),b(" ",h(73,59,"CUSTOMER_FORM.BUTTONS.CANCEL")," "),u(2),d("disabled",o.customerForm.invalid||o.isLoading),u(),d("ngIf",!o.isLoading),u(),d("ngIf",o.isLoading),u(),b(" ",o.isLoading?h(78,61,"CUSTOMER_FORM.BUTTONS.SAVING"):h(79,63,"CUSTOMER_FORM.BUTTONS.SAVE")," ")}},dependencies:[w,M,W,V,D,B,U,j,ve],styles:[".floating-label-input[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding-top:1rem;height:auto}.floating-label-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.75rem;pointer-events:none;color:#6c757d;background-color:#fff;padding:0 4px;font-size:.875em;transition:.2s ease all;transform-origin:0 0}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-1.2rem);left:.25rem;color:#0d6efd}"]})};var jr=["class","component"];function Gr(a,t){if(a&1){let e=C();n(0,"tr",15)(1,"td",16),r(2),i(),n(3,"td",17),r(4),i(),n(5,"td",18),r(6),i(),n(7,"td",18)(8,"div",19),l(9,"i",20),r(10),i()(),n(11,"td",18)(12,"div",19),l(13,"i",21),r(14),i()(),n(15,"td",22)(16,"div",19),l(17,"i",23),r(18),i()(),n(19,"td",24)(20,"div",25)(21,"button",26),x("click",function(){let s=y(e).$implicit,m=c();return _(m.openForm(s.id))}),l(22,"i",27),r(23," \u062A\u0639\u062F\u064A\u0644 "),i(),n(24,"button",28),l(25,"i",29),r(26," \u062D\u0630\u0641 "),i()()()()}if(a&2){let e=t.$implicit,o=t.index;u(2),p(o+1),u(2),p(e.nameAr),u(2),p(e.nameEn),u(4),b(" ",e.phone," "),u(4),b(" ",e.email," "),u(),d("title",e.address),u(3),b(" ",e.address," ")}}function Wr(a,t){if(a&1){let e=C();n(0,"div",30)(1,"div",31),l(2,"i",32),i(),n(3,"h3",33),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0645\u0644\u0627\u0621"),i(),n(5,"p",34),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0639\u0645\u0644\u0627\u0621 \u0645\u0633\u062C\u0644\u064A\u0646"),i(),n(7,"button",35),x("click",function(){y(e);let s=c();return _(s.openForm(null))}),l(8,"i",6),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0639\u0645\u064A\u0644 "),i()()}}var ti=class a{constructor(t,e,o,s){this.customerService=t;this.dialog=e;this.router=o;this.route=s}customers=[];ngOnInit(){this.loadCustomers()}loadCustomers(){this.customerService.GetCustomers().subscribe(t=>{this.customers=t})}openForm(t){t?this.router.navigate(["../customers-form"],{relativeTo:this.route,queryParams:{customerId:t}}):this.router.navigate(["../customers-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(ft),v(gn),v(T),v(k))};static \u0275cmp=A({type:a,selectors:[["app-customers",8,"component"]],standalone:!1,attrs:jr,decls:41,vars:26,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-cyan-50","to-blue-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-4","sm:mt-0","inline-flex","items-center","px-6","py-3","bg-cyan-600","text-white","rounded-xl","font-semibold","hover:bg-cyan-700","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105",3,"click"],[1,"bi","bi-plus-circle","mr-2"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-cyan-500","to-blue-600"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],["class","text-center py-16",4,"ngIf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","font-semibold"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-600"],[1,"flex","items-center"],[1,"bi","bi-telephone","mr-2","text-gray-400"],[1,"bi","bi-envelope","mr-2","text-gray-400"],[1,"px-6","py-4","text-sm","text-gray-600","max-w-xs","truncate",3,"title"],[1,"bi","bi-geo-alt","mr-2","text-gray-400"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"flex","items-center","space-x-2"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0645\u064A\u0644",1,"inline-flex","items-center","px-3","py-2","bg-cyan-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-cyan-700","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil","mr-1"],["title","\u062D\u0630\u0641 \u0627\u0644\u0639\u0645\u064A\u0644",1,"inline-flex","items-center","px-3","py-2","bg-red-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors"],[1,"bi","bi-trash","mr-1"],[1,"text-center","py-16"],[1,"w-24","h-24","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-people","text-gray-400","text-3xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-6","py-3","bg-cyan-600","text-white","rounded-xl","font-semibold","hover:bg-cyan-700","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:ring-offset-2","transition-all","duration-200",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5),g(6,"translate"),i(),n(7,"p",4),r(8,"\u0625\u062F\u0627\u0631\u0629 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0639\u0645\u0644\u0627\u0621"),i()(),n(9,"button",5),x("click",function(){return o.openForm(null)}),l(10,"i",6),r(11),g(12,"translate"),i()(),n(13,"div",7)(14,"div",8)(15,"table",9)(16,"thead",10)(17,"tr")(18,"th",11),r(19,"#"),i(),n(20,"th",11),r(21),g(22,"translate"),i(),n(23,"th",11),r(24),g(25,"translate"),i(),n(26,"th",11),r(27),g(28,"translate"),i(),n(29,"th",11),r(30),g(31,"translate"),i(),n(32,"th",11),r(33),g(34,"translate"),i(),n(35,"th",11),r(36),g(37,"translate"),i()()(),n(38,"tbody",12),f(39,Gr,27,7,"tr",13),i()()()(),f(40,Wr,10,0,"div",14),i()()),e&2&&(u(5),p(h(6,10,"CUSTOMERS.TITLE")),u(6),b(" ",h(12,12,"SHARED.BUTTONS.ADD")," "),u(10),p(h(22,14,"CUSTOMERS.NAMEAR")),u(3),p(h(25,16,"CUSTOMERS.NAMEEN")),u(3),p(h(28,18,"CUSTOMERS.PHONE")),u(3),p(h(31,20,"CUSTOMERS.EMAIL")),u(3),p(h(34,22,"CUSTOMERS.ADDRESS")),u(3),p(h(37,24,"SHARED.ACTIONS")),u(3),d("ngForOf",o.customers),u(),d("ngIf",(o.customers==null?null:o.customers.length)===0))},dependencies:[F,w,M,ve],encapsulation:2})};var ii=class a{constructor(t){this.http=t}url=`${Y.baseUrl}/Dashboard/`;getDashboardOverview(){return this.http.get(`${this.url}overview`)}getRecentTransactions(t=10){return this.http.get(`${this.url}recent-transactions?count=${t}`)}getTopProducts(t=10){return this.http.get(`${this.url}top-products?count=${t}`)}getStorePerformance(){return this.http.get(`${this.url}store-performance`)}getMonthlyTransactions(t=6){return this.http.get(`${this.url}monthly-transactions?months=${t}`)}getAlerts(){return this.http.get(`${this.url}alerts`)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};function Hr(a,t){a&1&&(n(0,"div",9),l(1,"div",10),n(2,"h3",11),r(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i(),n(4,"p",4),r(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645"),i()())}function qr(a,t){if(a&1&&(n(0,"div",30)(1,"div",31),l(2,"div",32),n(3,"div",19)(4,"div",33)(5,"div",34)(6,"h6",35),r(7),i(),n(8,"h3",3),r(9),i(),n(10,"p",36),r(11),i()(),n(12,"div",37),l(13,"i"),i()()()()()),a&2){let e=t.$implicit,o=c(2);u(7),p(e.title),u(2),p(o.formatNumber(e.value)),u(2),p(e.subtitle),u(2),K($e("",e.icon," text-white text-xl"))}}function zr(a,t){a&1&&(n(0,"div",38),l(1,"div",39),n(2,"p",4),r(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()())}function Yr(a,t){a&1&&(n(0,"div",38)(1,"div",40),l(2,"i",41),i(),n(3,"h4",42),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0639\u0627\u0645\u0644\u0627\u062A \u062D\u062F\u064A\u062B\u0629"),i(),n(5,"p",43),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0645\u0639\u0627\u0645\u0644\u0627\u062A \u062D\u062F\u064A\u062B\u0629"),i()())}function Qr(a,t){if(a&1&&(n(0,"div",46)(1,"div",47)(2,"div",34)(3,"h6",48),r(4),i(),n(5,"p",49),r(6),i(),n(7,"p",36),r(8),i()(),n(9,"div",50)(10,"span",51),l(11,"i",52),r(12),i()()()()),a&2){let e=t.$implicit,o=c(3);u(4),p(e.productNameAr),u(2),q(" ",e.storeNameAr," - ",e.transactionTypeNameAr," "),u(2),p(o.formatDate(e.transactionDate)),u(2),d("ngClass",e.quantityChanged>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),d("ngClass",e.quantityChanged>0?"bi-arrow-up":"bi-arrow-down"),u(),q(" ",e.quantityChanged>0?"+":"","",e.quantityChanged," ")}}function Kr(a,t){if(a&1&&(n(0,"div",44),f(1,Qr,13,8,"div",45),i()),a&2){let e=c(2);u(),d("ngForOf",e.recentTransactions)}}function Jr(a,t){a&1&&(n(0,"div",38),l(1,"div",53),n(2,"p",4),r(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()())}function Xr(a,t){a&1&&(n(0,"div",38)(1,"div",40),l(2,"i",54),i(),n(3,"h4",42),r(4),g(5,"translate"),i(),n(6,"p",43),r(7,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0645\u0646\u062A\u062C\u0627\u062A"),i()()),a&2&&(u(4),p(h(5,1,"REPORTS.NO_PRODUCTS")))}function Zr(a,t){if(a&1&&(n(0,"div",46)(1,"div",55)(2,"div",56)(3,"div",57),r(4),i(),n(5,"div")(6,"h6",48),r(7),i(),n(8,"p",58),r(9),i()()(),n(10,"div",50)(11,"div",59),r(12),i(),n(13,"p",36),r(14),i()()()()),a&2){let e=t.$implicit,o=t.index,s=c(3);u(4),b(" ",o+1," "),u(3),p(e.productNameAr),u(2),p(e.productCode),u(3),p(s.formatNumber(e.totalQuantity)),u(2),b("",e.storeCount," \u0645\u0633\u062A\u0648\u062F\u0639")}}function e0(a,t){if(a&1&&(n(0,"div",44),f(1,Zr,15,5,"div",45),i()),a&2){let e=c(2);u(),d("ngForOf",e.topProducts)}}function t0(a,t){a&1&&(n(0,"div",38),l(1,"div",60),n(2,"p",4),r(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()())}function i0(a,t){a&1&&(n(0,"div",38)(1,"div",40),l(2,"i",61),i(),n(3,"h4",42),r(4),g(5,"translate"),i(),n(6,"p",43),r(7,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i()()),a&2&&(u(4),p(h(5,1,"REPORTS.NO_WAREHOUSES")))}function n0(a,t){a&1&&(n(0,"span",71),r(1,"\u0631\u0626\u064A\u0633\u064A"),i())}function r0(a,t){if(a&1&&(n(0,"div",46)(1,"div",62)(2,"div",34)(3,"div",63)(4,"h6",64),r(5),i(),f(6,n0,2,0,"span",65),i(),n(7,"p",58),r(8),i()()(),n(9,"div",66)(10,"div",67)(11,"div",68),r(12),i(),n(13,"p",36),r(14),g(15,"translate"),i()(),n(16,"div",67)(17,"div",59),r(18),i(),n(19,"p",36),r(20,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0645\u064A\u0629"),i()(),n(21,"div",67)(22,"div",69),r(23),i(),n(24,"p",36),r(25),g(26,"translate"),i()(),n(27,"div",67)(28,"div",70),r(29),i(),n(30,"p",36),r(31),g(32,"translate"),i()()()()),a&2){let e=t.$implicit,o=c(3);u(5),p(e.storeNameAr),u(),d("ngIf",e.isMainWarehouse),u(2),p(e.storeCode),u(4),p(o.formatNumber(e.totalProducts)),u(2),p(h(15,10,"DASHBOARD.TOTAL_PRODUCTS")),u(4),p(o.formatNumber(e.totalQuantity)),u(5),p(e.lowStockProducts),u(2),p(h(26,12,"DASHBOARD.LOW_STOCK")),u(4),p(e.zeroStockProducts),u(2),p(h(32,14,"DASHBOARD.OUT_OF_STOCK"))}}function o0(a,t){if(a&1&&(n(0,"div",44),f(1,r0,33,16,"div",45),i()),a&2){let e=c(2);u(),d("ngForOf",e.storePerformance)}}function u0(a,t){a&1&&(n(0,"div",38),l(1,"div",72),n(2,"p",4),r(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()())}function a0(a,t){a&1&&(n(0,"div",38)(1,"div",40),l(2,"i",73),i(),n(3,"h4",42),r(4),g(5,"translate"),i(),n(6,"p",43),r(7,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u0646\u0628\u064A\u0647\u0627\u062A \u062D\u0627\u0644\u064A\u0627\u064B"),i()()),a&2&&(u(4),p(h(5,1,"REPORTS.NO_ALERTS")))}function l0(a,t){if(a&1&&(n(0,"div",46)(1,"div",74)(2,"div",75),l(3,"i"),i(),n(4,"div",34)(5,"h6",48),r(6),i(),n(7,"p",49),r(8),i(),n(9,"span",76),r(10),i()()()()),a&2){let e=t.$implicit,o=c(3);u(2),d("ngClass",o.getSeverityClass(e.severity)),u(),K($e("",o.getSeverityIcon(e.severity)," text-white text-sm")),u(3),p(e.type),u(2),p(e.message),u(),d("ngClass",o.getSeverityBadgeClass(e.severity)),u(),b(" \u062E\u0637\u0648\u0631\u0629: ",e.severity," ")}}function s0(a,t){if(a&1&&(n(0,"div",44),f(1,l0,11,8,"div",45),i()),a&2){let e=c(2);u(),d("ngForOf",e.alerts)}}function d0(a,t){if(a&1&&(n(0,"div")(1,"div",12),f(2,qr,14,6,"div",13),i(),n(3,"div",14)(4,"div",15)(5,"div",16)(6,"h5",17),l(7,"i",18),r(8," \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0627\u0644\u0623\u062E\u064A\u0631\u0629 "),i()(),n(9,"div",19),f(10,zr,4,0,"div",20)(11,Yr,7,0,"div",20)(12,Kr,2,1,"div",21),i()(),n(13,"div",15)(14,"div",22)(15,"h5",17),l(16,"i",23),r(17),g(18,"translate"),i()(),n(19,"div",19),f(20,Jr,4,0,"div",20)(21,Xr,8,3,"div",20)(22,e0,2,1,"div",21),i()()(),n(23,"div",24)(24,"div",25)(25,"div",26)(26,"h5",17),l(27,"i",27),r(28),g(29,"translate"),i()(),n(30,"div",19),f(31,t0,4,0,"div",20)(32,i0,8,3,"div",20)(33,o0,2,1,"div",21),i()(),n(34,"div",15)(35,"div",28)(36,"h5",17),l(37,"i",29),r(38," \u0627\u0644\u062A\u0646\u0628\u064A\u0647\u0627\u062A "),i()(),n(39,"div",19),f(40,u0,4,0,"div",20)(41,a0,8,3,"div",20)(42,s0,2,1,"div",21),i()()()()),a&2){let e=c();u(2),d("ngForOf",e.dashboardCards),u(8),d("ngIf",e.isLoadingTransactions),u(),d("ngIf",!e.isLoadingTransactions&&e.recentTransactions.length===0),u(),d("ngIf",!e.isLoadingTransactions&&e.recentTransactions.length>0),u(5),b(" ",h(18,15,"DASHBOARD.MOST_STOCKED_PRODUCTS")," "),u(3),d("ngIf",e.isLoadingTopProducts),u(),d("ngIf",!e.isLoadingTopProducts&&e.topProducts.length===0),u(),d("ngIf",!e.isLoadingTopProducts&&e.topProducts.length>0),u(6),b(" ",h(29,17,"DASHBOARD.WAREHOUSE_PERFORMANCE")," "),u(3),d("ngIf",e.isLoadingStorePerformance),u(),d("ngIf",!e.isLoadingStorePerformance&&e.storePerformance.length===0),u(),d("ngIf",!e.isLoadingStorePerformance&&e.storePerformance.length>0),u(7),d("ngIf",e.isLoadingAlerts),u(),d("ngIf",!e.isLoadingAlerts&&e.alerts.length===0),u(),d("ngIf",!e.isLoadingAlerts&&e.alerts.length>0)}}var ni=class a{constructor(t){this.dashboardService=t}isLoading=!0;isLoadingOverview=!0;isLoadingTransactions=!0;isLoadingTopProducts=!0;isLoadingStorePerformance=!0;isLoadingAlerts=!0;overview=null;recentTransactions=[];topProducts=[];storePerformance=[];alerts=[];dashboardCards=[];ngOnInit(){this.loadDashboardData()}loadDashboardData(){return we(this,null,function*(){this.isLoading=!0;try{yield Promise.all([this.loadOverview(),this.loadRecentTransactions(),this.loadTopProducts(),this.loadStorePerformance(),this.loadAlerts()])}catch{}finally{this.isLoading=!1}})}loadOverview(){return we(this,null,function*(){try{this.overview=yield this.dashboardService.getDashboardOverview().toPromise(),this.createDashboardCards()}catch{}finally{this.isLoadingOverview=!1}})}loadRecentTransactions(){return we(this,null,function*(){try{this.recentTransactions=(yield this.dashboardService.getRecentTransactions(5).toPromise())||[]}catch{}finally{this.isLoadingTransactions=!1}})}loadTopProducts(){return we(this,null,function*(){try{this.topProducts=(yield this.dashboardService.getTopProducts(5).toPromise())||[]}catch{}finally{this.isLoadingTopProducts=!1}})}loadStorePerformance(){return we(this,null,function*(){try{this.storePerformance=(yield this.dashboardService.getStorePerformance().toPromise())||[]}catch{}finally{this.isLoadingStorePerformance=!1}})}loadAlerts(){return we(this,null,function*(){try{this.alerts=(yield this.dashboardService.getAlerts().toPromise())||[]}catch{}finally{this.isLoadingAlerts=!1}})}createDashboardCards(){this.overview&&(this.dashboardCards=[{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",value:this.overview.totalProducts,icon:"bi bi-box-seam",color:"text-primary",subtitle:"\u0645\u0646\u062A\u062C \u0646\u0634\u0637"},{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A",value:this.overview.totalStores,icon:"bi bi-building",color:"text-success",subtitle:"\u0645\u0633\u062A\u0648\u062F\u0639 \u0646\u0634\u0637"},{title:"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062E\u0632\u0648\u0646",value:this.overview.totalInventoryQuantity,icon:"bi bi-clipboard-data",color:"text-info",subtitle:"\u0648\u062D\u062F\u0629 \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0648\u0646"},{title:"\u0627\u0644\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0623\u062E\u064A\u0631\u0629",value:this.overview.recentOrders,icon:"bi bi-cart-check",color:"text-warning",subtitle:"\u0637\u0644\u0628 \u0641\u064A \u0627\u0644\u0623\u0633\u0628\u0648\u0639 \u0627\u0644\u0645\u0627\u0636\u064A"},{title:"\u0645\u0646\u062A\u062C\u0627\u062A \u0642\u0644\u064A\u0644\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646",value:this.overview.lowStockProducts,icon:"bi bi-exclamation-triangle",color:"text-warning",subtitle:"\u062A\u062D\u062A\u0627\u062C \u0625\u0639\u0627\u062F\u0629 \u062A\u0645\u0648\u064A\u0646"},{title:"\u0645\u0646\u062A\u062C\u0627\u062A \u0646\u0627\u0641\u062F\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646",value:this.overview.zeroStockProducts,icon:"bi bi-x-circle",color:"text-danger",subtitle:"\u062E\u0627\u0631\u062C \u0627\u0644\u0645\u062E\u0632\u0648\u0646"}])}getSeverityClass(t){switch(t){case"High":return"text-danger";case"Medium":return"text-warning";case"Low":return"text-info";default:return"text-secondary"}}getSeverityIcon(t){switch(t){case"High":return"bi bi-exclamation-circle-fill";case"Medium":return"bi bi-exclamation-triangle-fill";case"Low":return"bi bi-info-circle-fill";default:return"bi bi-circle-fill"}}getSeverityBadgeClass(t){switch(t){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}formatDate(t){return new Date(t).toLocaleDateString("en-JO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",calendar:"gregory"})}formatNumber(t){return new Intl.NumberFormat("en-JO").format(t)}static \u0275fac=function(e){return new(e||a)(v(ii))};static \u0275cmp=A({type:a,selectors:[["app-dashboard"]],standalone:!1,decls:13,vars:5,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-blue-50","to-indigo-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-4","sm:mt-0","inline-flex","items-center","px-6","py-3","bg-blue-600","text-white","rounded-xl","font-semibold","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105",3,"click","disabled"],[1,"bi","bi-arrow-clockwise","mr-2"],["class","text-center py-16",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-16"],[1,"w-16","h-16","border-4","border-blue-600","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-4"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","mb-8"],["class","group",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8","mb-8"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","px-6","py-4"],[1,"text-lg","font-semibold","text-white","flex","items-center"],[1,"bi","bi-clock-history","mr-3"],[1,"p-6"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"bg-gradient-to-r","from-green-500","to-emerald-600","px-6","py-4"],[1,"bi","bi-trophy","mr-3"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600","px-6","py-4"],[1,"bi","bi-building","mr-3"],[1,"bg-gradient-to-r","from-red-500","to-pink-600","px-6","py-4"],[1,"bi","bi-bell","mr-3"],[1,"group"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100"],[1,"h-1","bg-gradient-to-r","from-blue-500","via-purple-500","to-pink-500"],[1,"flex","items-center","justify-between"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-600","mb-1"],[1,"text-xs","text-gray-500"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-purple-600","rounded-xl","flex","items-center","justify-center","group-hover:scale-110","transition-transform","duration-300"],[1,"text-center","py-8"],[1,"w-8","h-8","border-2","border-blue-600","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-inbox","text-gray-400","text-2xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500"],[1,"space-y-4"],["class","bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors",4,"ngFor","ngForOf"],[1,"bg-gray-50","rounded-xl","p-4","hover:bg-gray-100","transition-colors"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-right"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"bi","mr-1",3,"ngClass"],[1,"w-8","h-8","border-2","border-green-600","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"bi","bi-box-seam","text-gray-400","text-2xl"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],[1,"w-8","h-8","bg-gradient-to-br","from-green-500","to-emerald-600","rounded-full","flex","items-center","justify-center","text-white","font-bold","text-sm","mr-3"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"w-8","h-8","border-2","border-purple-600","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"bi","bi-building","text-gray-400","text-2xl"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex","items-center","mb-2"],[1,"font-semibold","text-gray-900","text-lg"],["class","bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-2",4,"ngIf"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"text-center"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"text-2xl","font-bold","text-red-600"],[1,"bg-blue-100","text-blue-800","text-xs","px-2","py-1","rounded-full","mr-2"],[1,"w-8","h-8","border-2","border-red-600","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-3"],[1,"bi","bi-check-circle","text-gray-400","text-2xl"],[1,"flex","items-start"],[1,"w-8","h-8","rounded-full","flex","items-center","justify-center","mr-3","mt-1",3,"ngClass"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5,"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645"),i(),n(6,"p",4),r(7,"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0623\u062F\u0627\u0621 \u0627\u0644\u0646\u0638\u0627\u0645 \u0648\u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i()(),n(8,"button",5),x("click",function(){return o.loadDashboardData()}),l(9,"i",6),r(10," \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A "),i()(),f(11,Hr,6,0,"div",7)(12,d0,43,19,"div",8),i()()),e&2&&(u(8),d("disabled",o.isLoading),u(),N("animate-spin",o.isLoading),u(2),d("ngIf",o.isLoading),u(),d("ngIf",!o.isLoading))},dependencies:[fe,F,w,M,ve],styles:[".spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dark-mode-bg[_ngcontent-%COMP%]{background-color:var(--bs-body-bg);color:var(--bs-body-color)}.dark-mode-text[_ngcontent-%COMP%]{color:var(--bs-body-color)}.card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a!important}.badge[_ngcontent-%COMP%]{font-size:.75rem}.list-group-item[_ngcontent-%COMP%]{border-radius:.375rem;margin-bottom:.5rem;transition:background-color .2s ease-in-out}.list-group-item[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-100)}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;font-weight:600;color:var(--bs-gray-700)}.spinner-border[_ngcontent-%COMP%]{border-width:.2em}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem}.fs-1[_ngcontent-%COMP%]{font-size:2rem!important}.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-warning[_ngcontent-%COMP%]{color:#fd7e14!important}.text-info[_ngcontent-%COMP%]{color:#0dcaf0!important}.text-success[_ngcontent-%COMP%]{color:#198754!important}.btn-outline-primary[_ngcontent-%COMP%]{border-color:var(--bs-primary);color:var(--bs-primary)}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary);border-color:var(--bs-primary);color:#fff}.text-muted[_ngcontent-%COMP%]{color:var(--bs-gray-500)!important}"]})};var ht=class a{constructor(t){this.http=t}apiUrl=`${Y.baseUrl}/ProductVariants`;getVariantsByProduct(t){return this.http.get(`${this.apiUrl}/by-product/${t}`)}getVariant(t){return this.http.get(`${this.apiUrl}/${t}`)}createVariant(t){return this.http.post(this.apiUrl,t)}updateVariant(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteVariant(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var ri=class a{constructor(t){this.http=t}apiUrl=Y.baseUrl;validateVariantStock(t,e,o,s){return this.http.get(`${this.apiUrl}/product-variants/${e}/validate-stock`,{params:{storeId:o.toString(),quantity:s.toString()}})}getVariantStockInfo(t,e,o){return this.http.get(`${this.apiUrl}/products/${t}/variant-stock`,{params:{variantId:e.toString(),storeId:o.toString()}})}getProductVariantsStock(t,e){return this.http.get(`${this.apiUrl}/products/${t}/variants-stock`,{params:{storeId:e.toString()}})}updateVariantStock(t,e,o,s,m){return this.http.post(`${this.apiUrl}/products/${t}/variant-stock`,{variantId:e,storeId:o,quantityChange:s,notes:m})}getLowStockVariants(t,e){return this.http.get(`${this.apiUrl}/products/${t}/low-stock-variants`,{params:{storeId:e.toString()}})}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var c0=a=>[a,"JOD","symbol","1.2-2","ar"];function p0(a,t){if(a&1){let e=C();n(0,"button",9),x("click",function(){y(e);let s=c();return _(s.resetForm())}),l(1,"i",10),r(2," \u0625\u0636\u0627\u0641\u0629 \u0645\u062A\u063A\u064A\u0631 "),i()}}function g0(a,t){a&1&&(n(0,"div",57),l(1,"i",58),r(2," \u0627\u0633\u0645 \u0627\u0644\u0645\u062A\u063A\u064A\u0631 \u0645\u0637\u0644\u0648\u0628 "),i())}function f0(a,t){if(a&1&&(n(0,"option",59),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),b(" ",e.nameAr," ")}}function b0(a,t){a&1&&(n(0,"div",57),l(1,"i",58),r(2," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0645\u0637\u0644\u0648\u0628 "),i())}function x0(a,t){if(a&1){let e=C();n(0,"div",11)(1,"form",12),x("ngSubmit",function(){y(e);let s=c();return _(s.onSubmit())}),n(2,"div",13)(3,"div",14)(4,"label",15),l(5,"i",16),r(6," \u0627\u0633\u0645 \u0627\u0644\u0645\u062A\u063A\u064A\u0631 * "),i(),l(7,"input",17),f(8,g0,3,0,"div",18),i(),n(9,"div",14)(10,"label",15),l(11,"i",19),r(12," \u0643\u0648\u062F \u0627\u0644\u0645\u062A\u063A\u064A\u0631 "),i(),l(13,"input",20),i()(),n(14,"div",14)(15,"label",15),l(16,"i",21),r(17," \u0627\u0644\u0648\u0635\u0641 "),i(),l(18,"textarea",22),i(),n(19,"div",23)(20,"div",14)(21,"label",15),l(22,"i",24),r(23," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631 "),i(),n(24,"div",25),l(25,"input",26),n(26,"span",27),r(27,"\u062F.\u0623"),i()()(),n(28,"div",14)(29,"label",15),l(30,"i",28),r(31," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0643\u0644\u0641\u0629 "),i(),n(32,"div",25),l(33,"input",29),n(34,"span",27),r(35,"\u062F.\u0623"),i()()(),n(36,"div",14)(37,"label",15),l(38,"i",30),r(39," \u0645\u0633\u062A\u0648\u0649 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0637\u0644\u0628 "),i(),l(40,"input",31),i(),n(41,"div",14)(42,"label",15),l(43,"i",32),r(44," \u0643\u0645\u064A\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 "),i(),l(45,"input",33),i()(),n(46,"div",14)(47,"label",15),l(48,"i",34),r(49," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 * "),i(),n(50,"select",35)(51,"option",36),r(52,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),f(53,f0,2,2,"option",37),i(),f(54,b0,3,0,"div",18),i(),n(55,"div",38)(56,"div",39),l(57,"i",40),n(58,"div")(59,"h4",41),r(60,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i(),n(61,"p",42),r(62," \u0643\u0644 \u0645\u062A\u063A\u064A\u0631 \u0644\u0647 \u0643\u0645\u064A\u0629 \u0645\u062E\u0632\u0648\u0646 \u062E\u0627\u0635\u0629 \u0628\u0647 \u064A\u062A\u0645 \u0625\u062F\u0627\u0631\u062A\u0647\u0627 \u0645\u0646 \u062E\u0644\u0627\u0644 \u062C\u062F\u0648\u0644 \u0627\u0644\u0645\u062E\u0632\u0648\u0646. \u064A\u062A\u0645 \u062A\u062A\u0628\u0639 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0644\u0643\u0644 \u0645\u062A\u063A\u064A\u0631 \u0641\u064A \u0643\u0644 \u0645\u0633\u062A\u0648\u062F\u0639 \u0644\u0644\u062A\u062D\u0643\u0645 \u0627\u0644\u062F\u0642\u064A\u0642. "),i()()()(),n(63,"div",43)(64,"div",14)(65,"label",15),l(66,"i",44),r(67," \u062A\u0631\u062A\u064A\u0628 \u0627\u0644\u0639\u0631\u0636 "),i(),l(68,"input",45),i(),n(69,"div",14)(70,"label",15),l(71,"i",46),r(72," \u0627\u0644\u062D\u0627\u0644\u0629 "),i(),n(73,"div",47),l(74,"input",48),n(75,"span",49),r(76,"\u0646\u0634\u0637"),i()()(),n(77,"div",14)(78,"label",15),l(79,"i",50),r(80," \u0627\u0641\u062A\u0631\u0627\u0636\u064A "),i(),n(81,"div",47),l(82,"input",51),n(83,"span",49),r(84,"\u0645\u062A\u063A\u064A\u0631 \u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i()()()(),n(85,"div",52)(86,"button",53),x("click",function(){y(e);let s=c();return _(s.cancelEdit())}),l(87,"i",54),r(88," \u0625\u0644\u063A\u0627\u0621 "),i(),n(89,"button",55),l(90,"i",56),r(91),i()()()()}if(a&2){let e,o,s=c();u(),d("formGroup",s.variantForm),u(7),d("ngIf",((e=s.variantForm.get("name"))==null?null:e.invalid)&&((e=s.variantForm.get("name"))==null?null:e.touched)),u(45),d("ngForOf",s.stores),u(),d("ngIf",((o=s.variantForm.get("storeId"))==null?null:o.invalid)&&((o=s.variantForm.get("storeId"))==null?null:o.touched)),u(35),d("disabled",s.variantForm.invalid),u(2),b(" ",s.isEditing?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u062A\u063A\u064A\u0631":"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u062A\u063A\u064A\u0631"," ")}}function v0(a,t){a&1&&(n(0,"span",79),r(1,"\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i())}function h0(a,t){if(a&1){let e=C();n(0,"tr",66)(1,"td",67),r(2),i(),n(3,"td",68),r(4),i(),n(5,"td",68),r(6),g(7,"currency"),i(),n(8,"td",68)(9,"div",69)(10,"span",70),r(11),i(),n(12,"small",71),r(13,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i()()(),n(14,"td",68)(15,"span",72),r(16),i()(),n(17,"td",68),f(18,v0,2,0,"span",73),i(),n(19,"td",68)(20,"div",74)(21,"button",75),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.editVariant(s))}),l(22,"i",76),i(),n(23,"button",77),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.deleteVariant(s))}),l(24,"i",78),i()()()()}if(a&2){let e=t.$implicit,o=c(2);u(2),p(e.name),u(2),p(e.code||"-"),u(2),p(Ie(7,9,ge(15,c0,e.priceAdjustment||0))),u(5),q(" ",o.getTotalVariantStock(e.id)," ",o.getUnitName()," "),u(4),K(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(2),d("ngIf",e.isDefault)}}function y0(a,t){if(a&1&&(n(0,"div",11)(1,"div",60)(2,"table",61)(3,"thead",62)(4,"tr")(5,"th",63),r(6,"\u0627\u0644\u0627\u0633\u0645"),i(),n(7,"th",63),r(8,"\u0627\u0644\u0643\u0648\u062F"),i(),n(9,"th",63),r(10,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631"),i(),n(11,"th",63),r(12,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i(),n(13,"th",63),r(14,"\u0627\u0644\u062D\u0627\u0644\u0629"),i(),n(15,"th",63),r(16,"\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i(),n(17,"th",63),r(18,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),i()()(),n(19,"tbody",64),f(20,h0,25,17,"tr",65),i()()()()),a&2){let e=c();u(20),d("ngForOf",e.variants)}}function _0(a,t){a&1&&(n(0,"div",80)(1,"div",81),l(2,"div",82),n(3,"span",83),r(4,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()()())}function S0(a,t){if(a&1){let e=C();n(0,"div",84)(1,"div",85)(2,"div",86),l(3,"i",87),i(),n(4,"h4",88),r(5,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062A\u063A\u064A\u0631\u0627\u062A"),i(),n(6,"p",89),r(7,'\u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062A\u062C \u0644\u0627 \u064A\u062D\u062A\u0648\u064A \u0639\u0644\u0649 \u0623\u064A \u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0628\u0639\u062F. \u0627\u0636\u063A\u0637 \u0639\u0644\u0649 "\u0625\u0636\u0627\u0641\u0629 \u0645\u062A\u063A\u064A\u0631" \u0644\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0623\u0648\u0644.'),i(),n(8,"button",90),x("click",function(){y(e);let s=c();return _(s.resetForm())}),l(9,"i",10),r(10," \u0625\u0636\u0627\u0641\u0629 \u0645\u062A\u063A\u064A\u0631 "),i()()()}}var yt=class a{constructor(t,e,o,s,m){this.fb=t;this.variantService=e;this.storeService=o;this.variantStockService=s;this.productService=m;this.variantForm=this.fb.group({name:["",S.required],code:[""],description:[""],priceAdjustment:[0],costAdjustment:[0],reorderLevel:[0],stockQuantity:[0],isActive:[!0],isDefault:[!1],displayOrder:[0],storeId:["",S.required]})}productId;variantsUpdated=new Vt;variants=[];stores=[];variantForm;isEditing=!1;editingVariantId;loading=!1;showAddForm=!1;ngOnInit(){this.loadVariants(),this.loadStores(),this.loadVariantStockData()}loadStores(){this.storeService.GetStores().subscribe({next:t=>{this.stores=t},error:t=>{}})}loadVariants(){this.loading=!0,this.variantService.getVariantsByProduct(this.productId).subscribe({next:t=>{this.variants=t,this.variantsUpdated.emit(t),this.loading=!1},error:t=>{this.loading=!1}})}onSubmit(){if(this.variantForm.valid){let e=this.variantForm.value,o=e.stockQuantity||0,s=e.storeId,t=e,{stockQuantity:m}=t,E=Xi(t,["stockQuantity"]),I=se({productId:this.productId},E);this.isEditing&&this.editingVariantId?this.updateVariant(I,o,s):this.createVariant(I,o,s)}}createVariant(t,e,o){this.variantService.createVariant(t).subscribe({next:s=>{this.variants.push(s),e>0&&s.id&&this.setVariantStock(s.id,o,e),this.showAddForm=!1,this.resetForm(),this.variantsUpdated.emit(this.variants)},error:s=>{}})}updateVariant(t,e,o){this.editingVariantId&&this.variantService.updateVariant(this.editingVariantId,se({id:this.editingVariantId},t)).subscribe({next:s=>{let m=this.variants.findIndex(E=>E.id===this.editingVariantId);m!==-1&&(this.variants[m]=s),e>=0&&this.editingVariantId&&this.setVariantStock(this.editingVariantId,o,e),this.showAddForm=!1,this.resetForm(),this.variantsUpdated.emit(this.variants)},error:s=>{}})}editVariant(t){this.isEditing=!0,this.showAddForm=!1,this.editingVariantId=t.id;let e=this.getTotalVariantStock(t.id),o=this.stores[0]?.id||1,s=0;this.stores.forEach(m=>{let E=this.getVariantStockForStore(t.id,m.id);E>s&&(s=E,o=m.id)}),this.variantForm.patchValue({name:t.name,code:t.code,description:t.description,priceAdjustment:t.priceAdjustment,costAdjustment:t.costAdjustment,reorderLevel:t.reorderLevel,stockQuantity:e,isActive:t.isActive,isDefault:t.isDefault,displayOrder:t.displayOrder,storeId:o})}deleteVariant(t){t.id&&confirm("Are you sure you want to delete this variant?")&&this.variantService.deleteVariant(t.id).subscribe({next:()=>{this.variants=this.variants.filter(e=>e.id!==t.id),this.variantsUpdated.emit(this.variants)},error:e=>{}})}resetForm(){this.variantForm.reset({name:"",code:"",description:"",priceAdjustment:0,costAdjustment:0,reorderLevel:0,stockQuantity:0,isActive:!0,isDefault:!1,displayOrder:0,storeId:""}),this.isEditing=!1,this.editingVariantId=void 0,this.showAddForm=!0}cancelEdit(){this.showAddForm=!1,this.resetForm()}getVariantStockForStore(t,e){return this.variantStockData[`${this.productId}-${t}-${e}`]||0}getTotalVariantStock(t){let e=0;return this.stores.forEach(o=>{e+=this.getVariantStockForStore(t,o.id)}),e}getUnitName(){return"\u0648\u062D\u062F\u0629"}variantStockData={};loadVariantStockData(){this.productId&&this.stores.length>0&&this.stores.forEach(t=>{this.variantStockService.getProductVariantsStock(this.productId,t.id).subscribe({next:e=>{e.forEach(o=>{let s=`${this.productId}-${o.variantId}-${t.id}`;this.variantStockData[s]=o.availableQuantity})},error:e=>{}})})}setVariantStock(t,e,o){this.productService.SetVariantStock(this.productId,{variantId:t,storeId:e,quantity:o}).subscribe({next:s=>{this.loadVariantStockData()},error:s=>{}})}static \u0275fac=function(e){return new(e||a)(v(L),v(ht),v(Ne),v(ri),v(Ee))};static \u0275cmp=A({type:a,selectors:[["app-product-variants"]],inputs:{productId:"productId"},outputs:{variantsUpdated:"variantsUpdated"},decls:11,vars:5,consts:[[1,"bg-white","rounded-2xl","shadow-lg","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"text-xl","font-bold","text-white","flex","items-center"],[1,"bi","bi-tags","mr-3"],["class","px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors",3,"click",4,"ngIf"],["class","p-6",4,"ngIf"],["class","p-6 text-center",4,"ngIf"],["class","p-12 text-center",4,"ngIf"],[1,"px-4","py-2","bg-white","bg-opacity-20","text-white","rounded-lg","hover:bg-opacity-30","transition-colors",3,"click"],[1,"bi","bi-plus-lg","mr-2"],[1,"p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-tag","mr-2","text-blue-600"],["type","text","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u0643\u0628\u064A\u0631\u060C \u0623\u062D\u0645\u0631\u060C \u0645\u0645\u064A\u0632",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],["class","text-red-500 text-sm flex items-center",4,"ngIf"],[1,"bi","bi-hash","mr-2","text-blue-600"],["type","text","formControlName","code","placeholder","\u0645\u062B\u0627\u0644: LARGE, RED, PREM",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors"],[1,"bi","bi-file-text","mr-2","text-blue-600"],["formControlName","description","rows","3","placeholder","\u0648\u0635\u0641 \u0627\u062E\u062A\u064A\u0627\u0631\u064A \u0644\u0644\u0645\u062A\u063A\u064A\u0631",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors","resize-none"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bi","bi-currency-dollar","mr-2","text-green-600"],[1,"relative"],["type","number","formControlName","priceAdjustment","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"absolute","left-3","top-3","text-gray-500"],[1,"bi","bi-cart-dash","mr-2","text-green-600"],["type","number","formControlName","costAdjustment","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"bi","bi-exclamation-triangle","mr-2","text-orange-600"],["type","number","formControlName","reorderLevel","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-colors"],[1,"bi","bi-box","mr-2","text-orange-600"],["type","number","formControlName","stockQuantity","step","0.01","min","0","placeholder","0.00",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-colors"],[1,"bi","bi-building","mr-2","text-purple-600"],["formControlName","storeId",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"bg-blue-50","border","border-blue-200","rounded-xl","p-4"],[1,"flex","items-start"],[1,"bi","bi-info-circle","text-blue-600","text-xl","mr-3","mt-1"],[1,"text-blue-900","font-semibold","mb-1"],[1,"text-blue-700","text-sm"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bi","bi-sort-numeric-down","mr-2","text-indigo-600"],["type","number","formControlName","displayOrder","placeholder","0",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors"],[1,"bi","bi-toggle-on","mr-2","text-indigo-600"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-xl"],["type","checkbox","formControlName","isActive",1,"h-5","w-5","text-indigo-600","focus:ring-indigo-500","border-gray-300","rounded"],[1,"text-sm","text-gray-700"],[1,"bi","bi-star","mr-2","text-indigo-600"],["type","checkbox","formControlName","isDefault",1,"h-5","w-5","text-indigo-600","focus:ring-indigo-500","border-gray-300","rounded"],[1,"flex","flex-col","sm:flex-row","justify-end","gap-4","pt-6","border-t","border-gray-200"],["type","button",1,"w-full","sm:w-auto","px-6","py-3","bg-gray-500","text-white","rounded-xl","hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"],[1,"bi","bi-x-circle","mr-2"],["type","submit",1,"w-full","sm:w-auto","px-6","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","font-semibold","shadow-lg",3,"disabled"],[1,"bi","bi-check-circle","mr-2"],[1,"text-red-500","text-sm","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"],[3,"value"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"flex","flex-col"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"text-gray-500","mt-1"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",4,"ngIf"],[1,"flex","space-x-2"],["title","\u062A\u0639\u062F\u064A\u0644",1,"px-3","py-1","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-fill"],["title","\u062D\u0630\u0641",1,"px-3","py-1","bg-red-600","text-white","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-trash-fill"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-indigo-100","text-indigo-800"],[1,"p-6","text-center"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-50","rounded-lg"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-blue-600","mr-3"],[1,"text-blue-600","font-medium"],[1,"p-12","text-center"],[1,"flex","flex-col","items-center"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],[1,"bi","bi-box","text-gray-400","text-2xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"px-6","py-3","bg-blue-600","text-white","rounded-xl","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4,"i",4),r(5," \u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C "),i(),f(6,p0,3,0,"button",5),i()(),f(7,x0,92,6,"div",6)(8,y0,21,1,"div",6)(9,_0,5,0,"div",7)(10,S0,11,0,"div",8),i()),e&2&&(u(6),d("ngIf",!o.isEditing),u(),d("ngIf",o.isEditing||o.variants.length===0||o.showAddForm),u(),d("ngIf",o.variants.length>0),u(),d("ngIf",o.loading),u(),d("ngIf",!o.loading&&o.variants.length===0&&!o.isEditing))},dependencies:[Pe,F,w,De,W,X,Z,V,xe,be,J,D,B,Ce,U,j,Se],styles:[".product-variants-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.product-variants-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.product-variants-container[_ngcontent-%COMP%]   .variant-form[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:20px;border:1px solid #e9ecef}.product-variants-container[_ngcontent-%COMP%]   .variant-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.product-variants-container[_ngcontent-%COMP%]   .variant-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;gap:10px}.product-variants-container[_ngcontent-%COMP%]   .variants-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:none;font-weight:600;color:#495057}.product-variants-container[_ngcontent-%COMP%]   .variants-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.product-variants-container[_ngcontent-%COMP%]   .variants-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75em}.product-variants-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:40px}.product-variants-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#6c757d}.product-variants-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:20px}.product-variants-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;color:#495057}.product-variants-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9em}.form-check[_ngcontent-%COMP%]{margin-top:8px}.badge-success[_ngcontent-%COMP%]{background-color:#28a745}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545}.badge-info[_ngcontent-%COMP%]{background-color:#17a2b8}"]})};var at=class a{constructor(t){this.http=t}apiUrl=`${Y.baseUrl}/ProductModifiers`;getAllModifiers(){return this.http.get(this.apiUrl)}getModifier(t){return this.http.get(`${this.apiUrl}/${t}`)}createModifier(t){return this.http.post(this.apiUrl,t)}updateModifier(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteModifier(t){return this.http.delete(`${this.apiUrl}/${t}`)}getModifierOptions(t){return this.http.get(`${this.apiUrl}/${t}/options`)}createModifierOption(t,e){return this.http.post(`${this.apiUrl}/${t}/options`,e)}updateModifierOption(t,e){return this.http.put(`${this.apiUrl}/options/${t}`,e)}deleteModifierOption(t){return this.http.delete(`${this.apiUrl}/options/${t}`)}getModifierGroupsByProduct(t){return this.http.get(`${this.apiUrl}/groups/by-product/${t}`)}createModifierGroup(t){return this.http.post(`${this.apiUrl}/groups`,t)}updateModifierGroup(t,e){return this.http.put(`${this.apiUrl}/groups/${t}`,e)}deleteModifierGroup(t){return this.http.delete(`${this.apiUrl}/groups/${t}`)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var Rn=a=>[a,"JOD","symbol","1.2-2","ar"];function C0(a,t){if(a&1){let e=C();n(0,"button",10),x("click",function(){y(e);let s=c();return _(s.resetModifierForm())}),l(1,"i",11),r(2," \u0625\u0636\u0627\u0641\u0629 \u0645\u0643\u0648\u0646 "),i()}}function E0(a,t){if(a&1&&(n(0,"option",38),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),b(" ",e.name," ")}}function A0(a,t){a&1&&(n(0,"div",39),l(1,"i",40),r(2," \u0627\u0644\u0645\u0643\u0648\u0646 \u0645\u0637\u0644\u0648\u0628 "),i())}function w0(a,t){if(a&1){let e=C();n(0,"div",12)(1,"form",13),x("ngSubmit",function(){y(e);let s=c();return _(s.onModifierSubmit())}),n(2,"div",14)(3,"div",15)(4,"label",16),l(5,"i",17),r(6," \u0627\u0644\u0645\u0643\u0648\u0646 * "),i(),n(7,"select",18)(8,"option",19),r(9,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0643\u0648\u0646"),i(),f(10,E0,2,2,"option",20),i(),f(11,A0,3,0,"div",21),i(),n(12,"div",15)(13,"label",16),l(14,"i",22),r(15," \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0627\u062E\u062A\u064A\u0627\u0631 "),i(),l(16,"input",23),i(),n(17,"div",15)(18,"label",16),l(19,"i",24),r(20," \u062A\u0631\u062A\u064A\u0628 \u0627\u0644\u0639\u0631\u0636 "),i(),l(21,"input",25),i()(),n(22,"div",26)(23,"div",15)(24,"label",16),l(25,"i",27),r(26," \u0645\u0637\u0644\u0648\u0628 "),i(),n(27,"div",28),l(28,"input",29),n(29,"span",30),r(30,"\u0645\u0643\u0648\u0646 \u0645\u0637\u0644\u0648\u0628"),i()()(),n(31,"div",15)(32,"label",16),l(33,"i",31),r(34," \u0646\u0634\u0637 "),i(),n(35,"div",28),l(36,"input",32),n(37,"span",30),r(38,"\u0645\u0643\u0648\u0646 \u0646\u0634\u0637"),i()()()(),n(39,"div",33)(40,"button",34),x("click",function(){y(e);let s=c();return _(s.cancelEdit())}),l(41,"i",35),r(42," \u0625\u0644\u063A\u0627\u0621 "),i(),n(43,"button",36),l(44,"i",37),r(45),i()()()()}if(a&2){let e,o=c();u(),d("formGroup",o.modifierForm),u(9),d("ngForOf",o.availableModifiers),u(),d("ngIf",((e=o.modifierForm.get("modifierId"))==null?null:e.invalid)&&((e=o.modifierForm.get("modifierId"))==null?null:e.touched)),u(32),d("disabled",o.modifierForm.invalid),u(2),b(" ",o.isEditing?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0643\u0648\u0646":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0643\u0648\u0646"," ")}}function I0(a,t){if(a&1){let e=C();n(0,"tr",47)(1,"td",48),r(2),i(),n(3,"td",49)(4,"span",50),r(5),i()(),n(6,"td",49),r(7),i(),n(8,"td",49)(9,"span",50),r(10),i()(),n(11,"td",49)(12,"div",51)(13,"button",52),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.editModifierGroup(s))}),l(14,"i",53),i(),n(15,"button",54),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.deleteModifierGroup(s))}),l(16,"i",55),i()()()()}if(a&2){let e=t.$implicit;u(2),p(e.modifierName||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),u(2),K(e.isRequired?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),u(),b(" ",e.isRequired?"\u0645\u0637\u0644\u0648\u0628":"\u0627\u062E\u062A\u064A\u0627\u0631\u064A"," "),u(2),p(e.maxSelections),u(2),K(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function P0(a,t){if(a&1&&(n(0,"div",12)(1,"div",41)(2,"table",42)(3,"thead",43)(4,"tr")(5,"th",44),r(6,"\u0627\u0644\u0645\u0643\u0648\u0646"),i(),n(7,"th",44),r(8,"\u0645\u0637\u0644\u0648\u0628"),i(),n(9,"th",44),r(10,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649"),i(),n(11,"th",44),r(12,"\u0627\u0644\u062D\u0627\u0644\u0629"),i(),n(13,"th",44),r(14,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),i()()(),n(15,"tbody",45),f(16,I0,17,8,"tr",46),i()()()()),a&2){let e=c();u(16),d("ngForOf",e.modifierGroups)}}function F0(a,t){if(a&1){let e=C();n(0,"div",61),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.selectModifier(s))}),n(1,"div",62)(2,"h5",63),r(3),i(),n(4,"span",64),r(5),i()(),n(6,"p",65),r(7),i(),n(8,"div",66)(9,"div",67)(10,"span"),r(11,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631:"),i(),n(12,"span",68),r(13),g(14,"currency"),i()(),n(15,"div",67)(16,"span"),r(17,"\u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A:"),i(),n(18,"span",68),r(19),i()()()()}if(a&2){let e=t.$implicit;u(3),p(e.name),u(2),b(" ",e.isMultiple?"\u0645\u062A\u0639\u062F\u062F":"\u0648\u0627\u062D\u062F"," "),u(2),p(e.description||"\u0644\u0627 \u064A\u0648\u062C\u062F \u0648\u0635\u0641"),u(6),p(Ie(14,5,ge(11,Rn,e.priceAdjustment))),u(6),p((e.options==null?null:e.options.length)||0)}}function O0(a,t){if(a&1&&(n(0,"div",56)(1,"h4",57),l(2,"i",58),r(3," \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629 "),i(),n(4,"div",59),f(5,F0,20,13,"div",60),i()()),a&2){let e=c();u(5),d("ngForOf",e.availableModifiers)}}function T0(a,t){if(a&1){let e=C();n(0,"button",75),x("click",function(){y(e);let s=c(2);return _(s.resetOptionForm())}),l(1,"i",11),r(2," \u0625\u0636\u0627\u0641\u0629 \u062E\u064A\u0627\u0631 "),i()}}function M0(a,t){a&1&&(n(0,"div",39),l(1,"i",40),r(2," \u0627\u0633\u0645 \u0627\u0644\u062E\u064A\u0627\u0631 \u0645\u0637\u0644\u0648\u0628 "),i())}function k0(a,t){if(a&1){let e=C();n(0,"div",76)(1,"form",13),x("ngSubmit",function(){y(e);let s=c(2);return _(s.onOptionSubmit())}),n(2,"div",26)(3,"div",15)(4,"label",16),l(5,"i",77),r(6," \u0627\u0633\u0645 \u0627\u0644\u062E\u064A\u0627\u0631 * "),i(),l(7,"input",78),f(8,M0,3,0,"div",21),i(),n(9,"div",15)(10,"label",16),l(11,"i",22),r(12," \u0643\u0648\u062F \u0627\u0644\u062E\u064A\u0627\u0631 "),i(),l(13,"input",79),i()(),n(14,"div",15)(15,"label",16),l(16,"i",80),r(17," \u0627\u0644\u0648\u0635\u0641 "),i(),l(18,"textarea",81),i(),n(19,"div",82)(20,"div",15)(21,"label",16),l(22,"i",83),r(23," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631 "),i(),n(24,"div",84),l(25,"input",85),n(26,"span",86),r(27,"\u062F.\u0623"),i()()(),n(28,"div",15)(29,"label",16),l(30,"i",87),r(31," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0643\u0644\u0641\u0629 "),i(),n(32,"div",84),l(33,"input",88),n(34,"span",86),r(35,"\u062F.\u0623"),i()()(),n(36,"div",15)(37,"label",16),l(38,"i",89),r(39," \u062A\u0631\u062A\u064A\u0628 \u0627\u0644\u0639\u0631\u0636 "),i(),l(40,"input",90),i(),n(41,"div",15)(42,"label",16),l(43,"i",91),r(44," \u0627\u0641\u062A\u0631\u0627\u0636\u064A "),i(),n(45,"div",28),l(46,"input",92),n(47,"span",30),r(48,"\u062E\u064A\u0627\u0631 \u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i()()()(),n(49,"div",33)(50,"button",34),x("click",function(){y(e);let s=c(2);return _(s.resetOptionForm())}),l(51,"i",35),r(52," \u0625\u0644\u063A\u0627\u0621 "),i(),n(53,"button",36),l(54,"i",37),r(55),i()()()()}if(a&2){let e,o=c(2);u(),d("formGroup",o.optionForm),u(7),d("ngIf",((e=o.optionForm.get("name"))==null?null:e.invalid)&&((e=o.optionForm.get("name"))==null?null:e.touched)),u(45),d("disabled",o.optionForm.invalid),u(2),b(" ",o.isEditingOption?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062E\u064A\u0627\u0631":"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062E\u064A\u0627\u0631"," ")}}function R0(a,t){a&1&&(n(0,"span",94),r(1,"\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i())}function D0(a,t){if(a&1){let e=C();n(0,"tr",47)(1,"td",48),r(2),i(),n(3,"td",49),r(4),i(),n(5,"td",49),r(6),g(7,"currency"),i(),n(8,"td",49),f(9,R0,2,0,"span",93),i(),n(10,"td",49)(11,"span",50),r(12),i()(),n(13,"td",49)(14,"div",51)(15,"button",52),x("click",function(){let s=y(e).$implicit,m=c(3);return _(m.editModifierOption(s))}),l(16,"i",53),i(),n(17,"button",54),x("click",function(){let s=y(e).$implicit,m=c(3);return _(m.deleteModifierOption(s))}),l(18,"i",55),i()()()()}if(a&2){let e=t.$implicit;u(2),p(e.name),u(2),p(e.code||"-"),u(2),p(Ie(7,7,ge(13,Rn,e.priceAdjustment))),u(3),d("ngIf",e.isDefault),u(2),K(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function N0(a,t){if(a&1&&(n(0,"div",41)(1,"table",42)(2,"thead",43)(3,"tr")(4,"th",44),r(5,"\u0627\u0644\u0627\u0633\u0645"),i(),n(6,"th",44),r(7,"\u0627\u0644\u0643\u0648\u062F"),i(),n(8,"th",44),r(9,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631"),i(),n(10,"th",44),r(11,"\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i(),n(12,"th",44),r(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),i(),n(14,"th",44),r(15,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),i()()(),n(16,"tbody",45),f(17,D0,19,15,"tr",46),i()()()),a&2){let e=c(2);u(17),d("ngForOf",e.selectedModifier.options)}}function V0(a,t){if(a&1&&(n(0,"div",56)(1,"div",69)(2,"h4",70),l(3,"i",71),r(4),i(),f(5,T0,3,0,"button",72),i(),f(6,k0,56,4,"div",73)(7,N0,18,1,"div",74),i()),a&2){let e=c();u(4),b(" \u062E\u064A\u0627\u0631\u0627\u062A ",e.selectedModifier.name," "),u(),d("ngIf",!e.isEditingOption),u(),d("ngIf",e.isEditingOption||e.selectedModifier.options&&e.selectedModifier.options.length===0||e.showAddOptionForm),u(),d("ngIf",e.selectedModifier.options&&e.selectedModifier.options.length>0)}}function L0(a,t){a&1&&(n(0,"div",95)(1,"div",96),l(2,"div",97),n(3,"span",98),r(4,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()()())}function B0(a,t){if(a&1){let e=C();n(0,"div",99)(1,"div",100)(2,"div",101),l(3,"i",102),i(),n(4,"h4",103),r(5,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0643\u0648\u0646\u0627\u062A"),i(),n(6,"p",104),r(7,'\u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062A\u062C \u0644\u0627 \u064A\u062D\u062A\u0648\u064A \u0639\u0644\u0649 \u0623\u064A \u0645\u0643\u0648\u0646\u0627\u062A \u0628\u0639\u062F. \u0627\u0636\u063A\u0637 \u0639\u0644\u0649 "\u0625\u0636\u0627\u0641\u0629 \u0645\u0643\u0648\u0646" \u0644\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0623\u0648\u0644.'),i(),n(8,"button",105),x("click",function(){y(e);let s=c();return _(s.resetModifierForm())}),l(9,"i",11),r(10," \u0625\u0636\u0627\u0641\u0629 \u0645\u0643\u0648\u0646 "),i()()()}}var St=class a{constructor(t,e){this.fb=t;this.modifierService=e;this.modifierForm=this.fb.group({modifierId:["",S.required],isRequired:[!1],maxSelections:[1,[S.required,S.min(1)]],displayOrder:[0],isActive:[!0]}),this.optionForm=this.fb.group({name:["",S.required],code:[""],description:[""],priceAdjustment:[0],costAdjustment:[0],isActive:[!0],isDefault:[!1],displayOrder:[0]})}productId;modifiersUpdated=new Vt;modifierGroups=[];availableModifiers=[];modifierForm;optionForm;isEditing=!1;isEditingOption=!1;editingModifierId;editingOptionId;selectedModifier;loading=!1;showAddModifierForm=!1;showAddOptionForm=!1;ngOnInit(){this.loadModifierGroups(),this.loadAvailableModifiers()}loadModifierGroups(){this.loading=!0,this.modifierService.getModifierGroupsByProduct(this.productId).subscribe({next:t=>{this.modifierGroups=t,this.modifiersUpdated.emit(t),this.loading=!1},error:t=>{this.loading=!1}})}loadAvailableModifiers(){this.modifierService.getAllModifiers().subscribe({next:t=>{this.availableModifiers=t},error:t=>{}})}loadModifierOptions(t){this.modifierService.getModifierOptions(t).subscribe({next:e=>{let o=this.availableModifiers.find(s=>s.id===t);o&&(o.options=e)},error:e=>{}})}onModifierSubmit(){if(this.modifierForm.valid){let t=this.modifierForm.value,e={productId:this.productId,modifierId:t.modifierId,isRequired:t.isRequired,maxSelections:t.maxSelections,displayOrder:t.displayOrder,isActive:t.isActive};this.modifierService.createModifierGroup(e).subscribe({next:o=>{this.modifierGroups.push(o),this.showAddModifierForm=!1,this.resetModifierForm(),this.modifiersUpdated.emit(this.modifierGroups)},error:o=>{}})}}onOptionSubmit(){if(this.optionForm.valid&&this.selectedModifier){let t=this.optionForm.value,e={modifierId:this.selectedModifier.id,name:t.name,code:t.code,description:t.description,priceAdjustment:t.priceAdjustment,costAdjustment:t.costAdjustment,isActive:t.isActive,isDefault:t.isDefault,displayOrder:t.displayOrder};this.modifierService.createModifierOption(this.selectedModifier.id,e).subscribe({next:o=>{this.selectedModifier.options||(this.selectedModifier.options=[]),this.selectedModifier.options.push(o),this.showAddOptionForm=!1,this.resetOptionForm()},error:o=>{}})}}selectModifier(t){this.selectedModifier=t,this.loadModifierOptions(t.id)}editModifierGroup(t){this.isEditing=!0,this.showAddModifierForm=!1,this.editingModifierId=t.id,this.modifierForm.patchValue({modifierId:t.modifierId,isRequired:t.isRequired,maxSelections:t.maxSelections,displayOrder:t.displayOrder,isActive:t.isActive})}editModifierOption(t){this.isEditingOption=!0,this.showAddOptionForm=!1,this.editingOptionId=t.id,this.optionForm.patchValue({name:t.name,code:t.code,description:t.description,priceAdjustment:t.priceAdjustment,costAdjustment:t.costAdjustment,isActive:t.isActive,isDefault:t.isDefault,displayOrder:t.displayOrder})}deleteModifierGroup(t){t.id&&confirm("Are you sure you want to remove this modifier from the product?")&&this.modifierService.deleteModifierGroup(t.id).subscribe({next:()=>{this.modifierGroups=this.modifierGroups.filter(e=>e.id!==t.id),this.modifiersUpdated.emit(this.modifierGroups)},error:e=>{}})}deleteModifierOption(t){t.id&&confirm("Are you sure you want to delete this option?")&&this.modifierService.deleteModifierOption(t.id).subscribe({next:()=>{this.selectedModifier?.options&&(this.selectedModifier.options=this.selectedModifier.options.filter(e=>e.id!==t.id))},error:e=>{}})}resetModifierForm(){this.modifierForm.reset({modifierId:"",isRequired:!1,maxSelections:1,displayOrder:0,isActive:!0}),this.isEditing=!1,this.editingModifierId=void 0,this.showAddModifierForm=!0}resetOptionForm(){this.optionForm.reset({name:"",code:"",description:"",priceAdjustment:0,costAdjustment:0,isActive:!0,isDefault:!1,displayOrder:0}),this.isEditingOption=!1,this.editingOptionId=void 0,this.showAddOptionForm=!0}cancelEdit(){this.showAddModifierForm=!1,this.showAddOptionForm=!1,this.resetModifierForm(),this.resetOptionForm()}static \u0275fac=function(e){return new(e||a)(v(L),v(at))};static \u0275cmp=A({type:a,selectors:[["app-product-modifiers"]],inputs:{productId:"productId"},outputs:{modifiersUpdated:"modifiersUpdated"},decls:13,vars:7,consts:[[1,"bg-white","rounded-2xl","shadow-lg","overflow-hidden"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"text-xl","font-bold","text-white","flex","items-center"],[1,"bi","bi-list-ul","mr-3"],["class","px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors",3,"click",4,"ngIf"],["class","p-6",4,"ngIf"],["class","p-6 border-t border-gray-200",4,"ngIf"],["class","p-6 text-center",4,"ngIf"],["class","p-12 text-center",4,"ngIf"],[1,"px-4","py-2","bg-white","bg-opacity-20","text-white","rounded-lg","hover:bg-opacity-30","transition-colors",3,"click"],[1,"bi","bi-plus-lg","mr-2"],[1,"p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-gear","mr-2","text-purple-600"],["formControlName","modifierId",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-red-500 text-sm flex items-center",4,"ngIf"],[1,"bi","bi-hash","mr-2","text-purple-600"],["type","number","formControlName","maxSelections","min","1","placeholder","1",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"bi","bi-sort-numeric-down","mr-2","text-purple-600"],["type","number","formControlName","displayOrder","placeholder","0",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bi","bi-exclamation-triangle","mr-2","text-purple-600"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-xl"],["type","checkbox","formControlName","isRequired",1,"h-5","w-5","text-purple-600","focus:ring-purple-500","border-gray-300","rounded"],[1,"text-sm","text-gray-700"],[1,"bi","bi-toggle-on","mr-2","text-purple-600"],["type","checkbox","formControlName","isActive",1,"h-5","w-5","text-purple-600","focus:ring-purple-500","border-gray-300","rounded"],[1,"flex","flex-col","sm:flex-row","justify-end","gap-4","pt-6","border-t","border-gray-200"],["type","button",1,"w-full","sm:w-auto","px-6","py-3","bg-gray-500","text-white","rounded-xl","hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"],[1,"bi","bi-x-circle","mr-2"],["type","submit",1,"w-full","sm:w-auto","px-6","py-3","bg-gradient-to-r","from-purple-600","to-pink-600","text-white","rounded-xl","hover:from-purple-700","hover:to-pink-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","font-semibold","shadow-lg",3,"disabled"],[1,"bi","bi-check-circle","mr-2"],[3,"value"],[1,"text-red-500","text-sm","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"flex","space-x-2"],["title","\u062A\u0639\u062F\u064A\u0644",1,"px-3","py-1","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-fill"],["title","\u062D\u0630\u0641",1,"px-3","py-1","bg-red-600","text-white","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-trash-fill"],[1,"p-6","border-t","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","mb-4","flex","items-center"],[1,"bi","bi-list-check","mr-2","text-purple-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4 hover:shadow-md transition-all duration-200 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"bg-gradient-to-br","from-purple-50","to-pink-50","border","border-purple-200","rounded-xl","p-4","hover:shadow-md","transition-all","duration-200","cursor-pointer",3,"click"],[1,"flex","items-start","justify-between","mb-3"],[1,"font-semibold","text-purple-900"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-purple-100","text-purple-800"],[1,"text-purple-700","text-sm","mb-3"],[1,"space-y-1","text-xs","text-purple-600"],[1,"flex","justify-between"],[1,"font-medium"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"bi","bi-list-ul","mr-2","text-purple-600"],["class","px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors",3,"click",4,"ngIf"],["class","bg-gray-50 rounded-xl p-6 mb-6",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bg-gray-50","rounded-xl","p-6","mb-6"],[1,"bi","bi-tag","mr-2","text-purple-600"],["type","text","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u062C\u0628\u0646 \u0625\u0636\u0627\u0641\u064A",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],["type","text","formControlName","code","placeholder","\u0645\u062B\u0627\u0644: CHEESE",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"bi","bi-file-text","mr-2","text-purple-600"],["formControlName","description","rows","2","placeholder","\u0648\u0635\u0641 \u0627\u062E\u062A\u064A\u0627\u0631\u064A \u0644\u0644\u062E\u064A\u0627\u0631",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors","resize-none"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bi","bi-currency-dollar","mr-2","text-green-600"],[1,"relative"],["type","number","formControlName","priceAdjustment","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"absolute","left-3","top-3","text-gray-500"],[1,"bi","bi-cart-dash","mr-2","text-green-600"],["type","number","formControlName","costAdjustment","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"bi","bi-sort-numeric-down","mr-2","text-indigo-600"],["type","number","formControlName","displayOrder","placeholder","0",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors"],[1,"bi","bi-star","mr-2","text-indigo-600"],["type","checkbox","formControlName","isDefault",1,"h-5","w-5","text-indigo-600","focus:ring-indigo-500","border-gray-300","rounded"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",4,"ngIf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-indigo-100","text-indigo-800"],[1,"p-6","text-center"],[1,"inline-flex","items-center","px-4","py-2","bg-purple-50","rounded-lg"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-purple-600","mr-3"],[1,"text-purple-600","font-medium"],[1,"p-12","text-center"],[1,"flex","flex-col","items-center"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],[1,"bi","bi-gear","text-gray-400","text-2xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"px-6","py-3","bg-purple-600","text-white","rounded-xl","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4,"i",4),r(5," \u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C "),i(),f(6,C0,3,0,"button",5),i()(),f(7,w0,46,5,"div",6)(8,P0,17,1,"div",6)(9,O0,6,1,"div",7)(10,V0,8,4,"div",7)(11,L0,5,0,"div",8)(12,B0,11,0,"div",9),i()),e&2&&(u(6),d("ngIf",!o.isEditing),u(),d("ngIf",o.isEditing||o.modifierGroups.length===0||o.showAddModifierForm),u(),d("ngIf",o.modifierGroups.length>0),u(),d("ngIf",o.availableModifiers.length>0),u(),d("ngIf",o.selectedModifier),u(),d("ngIf",o.loading),u(),d("ngIf",!o.loading&&o.modifierGroups.length===0&&!o.isEditing))},dependencies:[Pe,F,w,De,W,X,Z,V,xe,be,J,D,B,Ce,U,j,Se],styles:[".product-modifiers-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.product-modifiers-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%], .product-modifiers-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:20px;border:1px solid #e9ecef}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .product-modifiers-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%], .product-modifiers-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;gap:10px}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-groups-list[_ngcontent-%COMP%]{margin-bottom:30px}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-groups-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:none;font-weight:600;color:#495057}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-groups-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]{margin-bottom:30px}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:15px;color:#495057}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]   .modifier-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9ecef;border-radius:8px;padding:15px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]   .modifier-card[_ngcontent-%COMP%]:hover{border-color:#007bff;box-shadow:0 4px 8px #00000026;transform:translateY(-2px)}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]   .modifier-card[_ngcontent-%COMP%]   .modifier-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]   .modifier-card[_ngcontent-%COMP%]   .modifier-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.1em}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]   .modifier-card[_ngcontent-%COMP%]   .modifier-description[_ngcontent-%COMP%]{color:#6c757d;font-size:.9em;margin-bottom:10px}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]   .modifier-card[_ngcontent-%COMP%]   .modifier-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.8em;color:#6c757d}.product-modifiers-container[_ngcontent-%COMP%]   .available-modifiers[_ngcontent-%COMP%]   .modifiers-grid[_ngcontent-%COMP%]   .modifier-card[_ngcontent-%COMP%]   .modifier-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-options[_ngcontent-%COMP%]   .options-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-options[_ngcontent-%COMP%]   .options-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#495057}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-options[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:none;font-weight:600;color:#495057;font-size:.9em}.product-modifiers-container[_ngcontent-%COMP%]   .modifier-options[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;font-size:.9em}.product-modifiers-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:40px}.product-modifiers-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#6c757d}.product-modifiers-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:20px}.product-modifiers-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;color:#495057}.product-modifiers-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9em}.form-check[_ngcontent-%COMP%]{margin-top:8px}.badge[_ngcontent-%COMP%]{font-size:.75em}.badge.badge-success[_ngcontent-%COMP%]{background-color:#28a745}.badge.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545}.badge.badge-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.badge.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d}.badge.badge-info[_ngcontent-%COMP%]{background-color:#17a2b8}"]})};var lt=class a{constructor(t){this.http=t}url=Y.baseUrl+"/Inventory";GetAllInventory(){return this.http.get(`${this.url}`)}GetInventoryByStore(t){return this.http.get(`${this.url}/by-store/${t}`)}GetInventoryByProduct(t){return this.http.get(`${this.url}/by-product/${t}`)}GetInventorySummary(){return this.http.get(`${this.url}/summary`)}GetLowStockItems(){return this.http.get(`${this.url}/low-stock`)}AdjustInventory(t,e,o){return this.http.post(`${this.url}/AdjustInventory`,{inventoryId:t,newQuantity:e,notes:o})}BulkAdjustInventory(t){return this.http.post(`${this.url}/BulkAdjustInventory`,t)}InitialStockSetup(t){return this.http.post(`${this.url}/initial-stock-setup`,t)}BulkInitialStockSetup(t){return this.http.post(`${this.url}/bulk-initial-stock-setup`,t)}SingleInitialStockSetup(t){return this.http.post(`${this.url}/single-initial-stock-setup`,t)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var zi=()=>({standalone:!0});function U0(a,t){a&1&&(n(0,"div",67),l(1,"i",68),r(2," \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062A\u062C \u0645\u0637\u0644\u0648\u0628 "),i())}function j0(a,t){if(a&1&&(n(0,"option",29),r(1),i()),a&2){let e=t.$implicit;d("ngValue",e.id),u(),p(e.nameAr)}}function G0(a,t){a&1&&(n(0,"div",67),l(1,"i",68),r(2," \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0645\u0637\u0644\u0648\u0628 "),i())}function W0(a,t){if(a&1&&(n(0,"option",29),r(1),i()),a&2){let e=t.$implicit;d("ngValue",e.id),u(),p(e.nameAr)}}function $0(a,t){a&1&&(n(0,"div",67),l(1,"i",68),r(2," \u0648\u062D\u062F\u0629 \u0627\u0644\u0642\u064A\u0627\u0633 \u0645\u0637\u0644\u0648\u0628\u0629 "),i())}function H0(a,t){a&1&&(n(0,"div",67),l(1,"i",68),r(2," \u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 \u0645\u0637\u0644\u0648\u0628 "),i())}function q0(a,t){a&1&&(n(0,"div",67),l(1,"i",68),r(2," \u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639 \u0645\u0637\u0644\u0648\u0628 "),i())}function z0(a,t){if(a&1){let e=C();n(0,"li",92)(1,"span",93),r(2),i(),n(3,"span",94),r(4),i(),n(5,"div",95)(6,"input",96),ue("ngModelChange",function(s){let m=y(e).$implicit,E=c(2);return oe(E.recallAmountByVariant[m.id],s)||(E.recallAmountByVariant[m.id]=s),_(s)}),i(),n(7,"button",97),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.recallFromVariant(s.id))}),r(8,"\u0627\u0633\u062A\u0631\u062C\u0627\u0639 \u0644\u0644\u0639\u0627\u0645"),i()()()}if(a&2){let e=t.$implicit,o=c(2);u(2),b("",e.name,":"),u(2),p(e.quantity),u(2),d("name",$e("recall_",e.id))("max",e.quantity),re("ngModel",o.recallAmountByVariant[e.id]),d("ngModelOptions",Lt(8,zi)),u(),d("disabled",!o.recallAmountByVariant[e.id]||o.recallAmountByVariant[e.id]<1||o.recallAmountByVariant[e.id]>e.quantity)}}function Y0(a,t){if(a&1&&(n(0,"option",29),r(1),i()),a&2){let e=t.$implicit;d("ngValue",e.id),u(),p(e.name)}}function Q0(a,t){if(a&1&&(n(0,"div",98),r(1),i()),a&2){let e=c(2);N("text-green-700",e.allocationSuccess)("text-red-700",!e.allocationSuccess),u(),p(e.allocationMsg)}}function K0(a,t){if(a&1){let e=C();n(0,"div",69)(1,"div",70)(2,"h2",15),l(3,"i",71),r(4," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062C\u0631\u062F \u0648\u0627\u0644\u0643\u0645\u064A\u0629 "),i()(),n(5,"div",17)(6,"div",72)(7,"div",73)(8,"div",74),r(9,"\u0643\u0645\u064A\u0629 \u0628\u062F\u0648\u0646 \u0645\u062A\u063A\u064A\u0631 (\u0639\u0627\u0645): "),n(10,"span",75),r(11),i()()(),n(12,"div",73)(13,"div",76),r(14,"\u0643\u0645\u064A\u0627\u062A \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A:"),i(),n(15,"ul",77),f(16,z0,9,9,"li",78),i()(),n(17,"div",79)(18,"div",74),r(19,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A: "),n(20,"span",80),r(21),i()(),n(22,"div",74),r(23,"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0644\u064A: "),n(24,"span",81),r(25),i()()()(),n(26,"div",82)(27,"div",83),r(28,"\u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0643\u0645\u064A\u0629 \u0627\u0644\u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A"),i(),n(29,"form",84),x("ngSubmit",function(){y(e);let s=c();return _(s.allocateToVariant())}),n(30,"div",85)(31,"label",86),r(32,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u062A\u063A\u064A\u0631"),i(),n(33,"select",87),ue("ngModelChange",function(s){y(e);let m=c();return oe(m.allocation.variantId,s)||(m.allocation.variantId=s),_(s)}),n(34,"option",88),r(35,"\u0627\u062E\u062A\u0631 \u0645\u062A\u063A\u064A\u0631"),i(),f(36,Y0,2,2,"option",30),i()(),n(37,"div",85)(38,"label",86),r(39,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(40,"input",89),ue("ngModelChange",function(s){y(e);let m=c();return oe(m.allocation.amount,s)||(m.allocation.amount=s),_(s)}),i()(),n(41,"button",90),r(42,"\u062A\u0648\u0632\u064A\u0639"),i()(),f(43,Q0,2,5,"div",91),i()()()}if(a&2){let e=c();u(11),p(e.generalQuantity),u(5),d("ngForOf",e.variantQuantities),u(5),p(e.variantsTotal),u(4),p(e.overallTotal),u(8),re("ngModel",e.allocation.variantId),d("ngModelOptions",Lt(14,zi)),u(),d("ngValue",null),u(2),d("ngForOf",e.variantQuantities),u(4),d("max",e.generalQuantity),re("ngModel",e.allocation.amount),d("ngModelOptions",Lt(15,zi))("disabled",e.generalQuantity==0),u(),d("disabled",!e.allocation.variantId||e.allocation.amount<1||e.allocation.amount>e.generalQuantity),u(2),d("ngIf",e.allocationMsg)}}function J0(a,t){if(a&1&&(n(0,"tr")(1,"td",118),r(2),i(),n(3,"td",119),r(4),i(),n(5,"td",120)(6,"span",121),r(7),i()(),n(8,"td",122),r(9),g(10,"number"),i()()),a&2){let e=t.$implicit;u(2),p(e.name),u(2),p(e.code||"-"),u(2),N("bg-green-100",e.isActive)("text-green-700",e.isActive)("bg-red-100",!e.isActive)("text-red-700",!e.isActive),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u0645\u062A\u0648\u0642\u0641"," "),u(2),b(" ",Q(10,12,e.priceAdjustment||0,"1.2-2")," ")}}function X0(a,t){a&1&&(n(0,"tr")(1,"td",123),r(2," \u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062A\u062C \u062D\u0627\u0644\u064A\u0627\u064B "),i()())}function Z0(a,t){if(a&1&&(n(0,"tr")(1,"td",118),r(2),i(),n(3,"td",120)(4,"span",124),r(5),i()(),n(6,"td",122),r(7),i(),n(8,"td",120)(9,"span",121),r(10),i()()()),a&2){let e=t.$implicit;u(2),p((e.modifier==null?null:e.modifier.name)||e.modifierName),u(2),N("bg-blue-100",e.isRequired)("text-blue-700",e.isRequired)("bg-gray-100",!e.isRequired)("text-gray-600",!e.isRequired),u(),b(" ",e.isRequired?"\u0646\u0639\u0645":"\u0627\u062E\u062A\u064A\u0627\u0631\u064A"," "),u(2),p(e.maxSelections||1),u(2),N("bg-green-100",e.isActive)("text-green-700",e.isActive)("bg-red-100",!e.isActive)("text-red-700",!e.isActive),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u0645\u062A\u0648\u0642\u0641"," ")}}function eo(a,t){a&1&&(n(0,"tr")(1,"td",123),r(2," \u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0643\u0648\u0646\u0627\u062A \u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062A\u062C "),i()())}function to(a,t){if(a&1){let e=C();n(0,"div",13)(1,"div",99)(2,"h2",15),l(3,"i",100),r(4," \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0648\u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A "),i()(),n(5,"div",101)(6,"div")(7,"div",102)(8,"div")(9,"h3",103),l(10,"i",104),r(11," \u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(12,"p",105),r(13,"\u0639\u0631\u0636 \u0633\u0631\u064A\u0639 \u0644\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0627\u0644\u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062A\u062C"),i()(),n(14,"button",106),x("click",function(){y(e);let s=c();return _(s.openVariantManager())}),l(15,"i",107),r(16," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062A\u063A\u064A\u0631\u0627\u062A "),i()(),n(17,"div",108)(18,"table",109)(19,"thead",110)(20,"tr")(21,"th",111),r(22,"\u0627\u0644\u0627\u0633\u0645"),i(),n(23,"th",111),r(24,"\u0627\u0644\u0643\u0648\u062F"),i(),n(25,"th",112),r(26,"\u0627\u0644\u062D\u0627\u0644\u0629"),i(),n(27,"th",112),r(28,"\u0633\u0639\u0631 \u0625\u0636\u0627\u0641\u064A"),i()()(),n(29,"tbody",113),f(30,J0,11,15,"tr",114)(31,X0,3,0,"tr",115),i()()()(),n(32,"div")(33,"div",102)(34,"div")(35,"h3",103),l(36,"i",116),r(37," \u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(38,"p",105),r(39,"\u0639\u0631\u0636 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0625\u0636\u0627\u0641\u064A\u0629 \u0627\u0644\u0645\u0641\u0639\u0651\u0644\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062A\u062C"),i()(),n(40,"button",117),x("click",function(){y(e);let s=c();return _(s.openModifierManager())}),l(41,"i",107),r(42," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A "),i()(),n(43,"div",108)(44,"table",109)(45,"thead",110)(46,"tr")(47,"th",111),r(48,"\u0627\u0644\u0645\u0643\u0648\u0646"),i(),n(49,"th",112),r(50,"\u0625\u062C\u0628\u0627\u0631\u064A"),i(),n(51,"th",112),r(52,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0627\u062E\u062A\u064A\u0627\u0631\u0627\u062A"),i(),n(53,"th",112),r(54,"\u0627\u0644\u062D\u0627\u0644\u0629"),i()()(),n(55,"tbody",113),f(56,Z0,11,20,"tr",114)(57,eo,3,0,"tr",115),i()()()()()()}if(a&2){let e=c();u(30),d("ngForOf",e.variantSummary),u(),d("ngIf",e.variantSummary.length===0),u(25),d("ngForOf",e.modifierSummary),u(),d("ngIf",e.modifierSummary.length===0)}}function io(a,t){if(a&1){let e=C();n(0,"div",125)(1,"div",126)(2,"div",127)(3,"h3",128),l(4,"i",129),r(5," \u0625\u062F\u0627\u0631\u0629 \u0645\u062A\u063A\u064A\u0631\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(6,"button",130),x("click",function(){y(e);let s=c();return _(s.closeVariantManager())}),l(7,"i",131),i()(),n(8,"div",17)(9,"app-product-variants",132),x("variantsUpdated",function(s){y(e);let m=c();return _(m.onVariantsUpdated(s))}),i()()()()}if(a&2){let e,o=c();u(9),d("productId",(e=o.productForm.get("id"))==null?null:e.value)}}function no(a,t){if(a&1){let e=C();n(0,"div",125)(1,"div",126)(2,"div",127)(3,"h3",128),l(4,"i",133),r(5," \u0625\u062F\u0627\u0631\u0629 \u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(6,"button",130),x("click",function(){y(e);let s=c();return _(s.closeModifierManager())}),l(7,"i",131),i()(),n(8,"div",17)(9,"app-product-modifiers",134),x("modifiersUpdated",function(s){y(e);let m=c();return _(m.onModifiersUpdated(s))}),i()()()()}if(a&2){let e,o=c();u(9),d("productId",(e=o.productForm.get("id"))==null?null:e.value)}}var Ct=class a{constructor(t,e,o,s,m,E,I,R,P,ne,Ae){this.fb=t;this.productService=e;this.inventoryService=o;this.categoriesService=s;this.unitsService=m;this.notification=E;this.router=I;this.route=R;this.authService=P;this.productVariantService=ne;this.productModifierService=Ae;this.stores=this.route.snapshot.data.StoresResolver,this.subCategories=this.route.snapshot.data.subCategoriesResolver,this.isAdmin=this.authService.isAdmin}generalQuantity=0;variantQuantities=[];allocation={variantId:0,amount:1};allocationMsg="";allocationSuccess=!1;isAdmin=!1;inventoryData=[];variantsTotal=0;overallTotal=0;recallAmountByVariant={};storeInventoryRows=[];productVariantsList=[];ngOnInit(){this.initializingForm(null),this.route.queryParams.subscribe(t=>{let e=+t.productId;e&&this.productService.GetProductById(e).subscribe({next:o=>{this.initializingForm(o),this.loadInventory(o.id),this.loadVariantSummary(o.id),this.loadModifierSummary(o.id)},error:o=>{}})}),this.unitsService.GetUnits().subscribe({next:t=>{this.units=t},error:t=>{}})}loadInventory(t){let e=this.stores&&this.stores.length>0?this.stores[0].id:1;this.inventoryService.GetInventoryByProduct(t).subscribe(o=>{let s=(o||[]).map(P=>({id:P.id??P.Id,productId:P.productId??P.ProductId,storeId:P.storeId??P.StoreId,quantity:P.quantity??P.Quantity,variantId:P.variantId??P.VariantId,store:P.store??P.Store,variant:P.variant??P.Variant}));this.inventoryData=s;let m=s.filter(P=>P.variantId==null||P.variantId===0);this.generalQuantity=m.reduce((P,ne)=>P+(ne.quantity||0),0);let E={};s.forEach(P=>{let ne=P.storeId,Ae=P.store?.nameAr??P.store?.NameAr??`Store ${ne}`;if(E[ne]||(E[ne]={storeId:ne,storeName:Ae,generalQuantity:0,variants:{}}),P.variantId==null||P.variantId===0)E[ne].generalQuantity+=P.quantity||0;else{let ye=P.variantId;E[ne].variants[ye]=(E[ne].variants[ye]||0)+(P.quantity||0)}});let I=(this.productVariantsList.length>0?this.productVariantsList:this.productForm.value?.variants||[]).map(P=>({id:P.id,name:P.name}));this.storeInventoryRows=Object.values(E).map(P=>{let ne=Object.keys(P.variants).map(Ae=>{let ye=+Ae,jn=I.find(Gn=>Gn.id===ye);return{id:ye,name:jn?.name||"Variant #"+ye,quantity:P.variants[ye]}});return{storeId:P.storeId,storeName:P.storeName,generalQuantity:P.generalQuantity,variants:ne}}).sort((P,ne)=>P.storeId-ne.storeId),this.variantQuantities=[];let R=this.productVariantsList.length>0?this.productVariantsList:this.productForm.value?.variants||[];if(R.length===0){let P=s.filter(Ae=>Ae.variantId!=null&&Ae.variantId>0),ne={};P.forEach(Ae=>{let ye=Ae.variantId;ne[ye]=(ne[ye]||0)+(Ae.quantity||0)}),Object.keys(ne).forEach(Ae=>{let ye=+Ae;this.variantQuantities.push({id:ye,name:"Variant #"+ye,quantity:ne[ye]}),this.recallAmountByVariant[ye]=this.recallAmountByVariant[ye]||1})}else R.forEach(P=>{let ne=s.filter(Ae=>Ae.variantId==P.id).reduce((Ae,ye)=>Ae+(ye.quantity||0),0);this.variantQuantities.push({id:P.id||0,name:P.name,quantity:ne}),this.recallAmountByVariant[P.id]=this.recallAmountByVariant[P.id]||1});this.variantsTotal=this.variantQuantities.reduce((P,ne)=>P+(ne.quantity||0),0),this.overallTotal=this.generalQuantity+this.variantsTotal})}allocateToVariant(){if(!this.allocation.variantId||this.allocation.amount<1||this.allocation.amount>this.generalQuantity){this.allocationMsg="\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0643\u0645\u064A\u0629 \u0635\u062D\u064A\u062D\u0629 \u0648\u0645\u062A\u063A\u064A\u0631 \u0635\u062D\u064A\u062D",this.allocationSuccess=!1;return}let t=this.productForm.get("id")?.value,e=this.inventoryData.find(s=>!s.variantId||s.variantId==0);if(!e){this.allocationMsg="\u0644\u0627 \u064A\u0648\u062C\u062F \u0643\u0645\u064A\u0629 \u0639\u0627\u0645\u0629 \u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u062A\u0648\u0632\u064A\u0639",this.allocationSuccess=!1;return}let o={productId:t,storeId:e.storeId,generalInventoryId:e.id,generalQuantity:e.quantity,allocations:[{variantId:this.allocation.variantId,quantity:this.allocation.amount}]};this.productService.splitGeneralQuantityToVariants(o).subscribe({next:()=>{this.allocationMsg="\u062A\u0645 \u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0643\u0645\u064A\u0629 \u0628\u0646\u062C\u0627\u062D",this.allocationSuccess=!0,this.notification.success("\u062A\u0645 \u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0643\u0645\u064A\u0629 \u0628\u0646\u062C\u0627\u062D"),this.loadInventory(t),this.allocation.amount=1,this.allocation.variantId=0},error:s=>{this.allocationMsg=s.error?.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0648\u0632\u064A\u0639 \u0627\u0644\u0643\u0645\u064A\u0629",this.allocationSuccess=!1,this.notification.error(this.allocationMsg)}})}recallFromVariant(t){let e=this.recallAmountByVariant[t]||0;if(e<1){this.notification.error("\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0643\u0645\u064A\u0629 \u0635\u062D\u064A\u062D\u0629");return}let o=this.productForm.get("id")?.value,s=this.inventoryData.find(m=>!m.variantId||m.variantId==0);if(!s){this.notification.error("\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u062E\u0632\u0648\u0646 \u0639\u0627\u0645 \u0644\u0627\u0633\u062A\u0642\u0628\u0627\u0644 \u0627\u0644\u0643\u0645\u064A\u0629");return}this.productService.RecallStockFromVariant(o,{storeId:s.storeId,variantId:t,quantity:e}).subscribe({next:()=>{this.notification.success("\u062A\u0645 \u0627\u0644\u0627\u0633\u062A\u0631\u062C\u0627\u0639 \u0644\u0644\u0643\u0645\u064A\u0629 \u0627\u0644\u0639\u0627\u0645\u0629"),this.loadInventory(o)},error:m=>{this.notification.error(m.error||"\u0641\u0634\u0644 \u0627\u0633\u062A\u0631\u062C\u0627\u0639 \u0627\u0644\u0643\u0645\u064A\u0629")}})}productForm;subCategories=[];units=[];imageToShow;initialImageUrl=null;url=Y.resourcesUrl;stores=[];variantSummary=[];modifierSummary=[];showVariantManager=!1;showModifierManager=!1;initializingForm(t){this.productForm=this.fb.group({id:[t?.id||0],code:[t?.code||""],nameEn:[t?.nameEn||""],nameAr:[t?.nameAr||"",S.required],description:[t?.description||""],reorderLevel:[t?.reorderLevel||0],costPrice:[t?.costPrice,S.required],sellingPrice:[t?.sellingPrice,S.required],image:[null],isActive:[t?.isActive??!0],subCategoryId:[t?.subCategoryId||null,S.required],unitId:[t?.unitId||null,S.required]}),t&&(this.initialImageUrl=this.url+t.imagePath,this.detectFiles(this.initialImageUrl))}detectFiles(t){let e=null;if(t instanceof File?e=t:t&&t instanceof Event&&t.target?.files?.length&&(e=t.target.files[0]),e){let o=new FileReader;o.onload=s=>{this.imageToShow=s.target.result,this.image.setValue(e)},o.readAsDataURL(e)}else this.imageToShow=t,this.image.setValue(t)}save(){if(this.productForm.valid){let t=new FormData;t.append("id",this.id.value),t.append("code",this.code.value),t.append("nameAr",this.nameAr.value),t.append("nameEn",this.nameEn.value),t.append("description",this.description.value),t.append("reorderLevel",this.reorderLevel.value),t.append("costPrice",this.costPrice.value),t.append("sellingPrice",this.sellingPrice.value);let e=this.image.value;e instanceof File&&t.append("image",e,e.name),t.append("isActive",this.isActive.value),t.append("subCategoryId",this.subCategoryId.value),t.append("unitId",this.unitId.value),this.productService.SaveProduct(t).subscribe({next:o=>{o?(this.notification.success("Successfully saved","Product"),this.router.navigate(["../products"],{relativeTo:this.route})):this.notification.error("Error while saving","Product")},error:o=>{this.notification.error(o.error,"Product")}})}}cancel(){this.router.navigate(["../products"],{relativeTo:this.route})}get id(){return this.productForm.get("id")}get code(){return this.productForm.get("code")}get nameAr(){return this.productForm.get("nameAr")}get nameEn(){return this.productForm.get("nameEn")}get description(){return this.productForm.get("description")}get reorderLevel(){return this.productForm.get("reorderLevel")}get costPrice(){return this.productForm.get("costPrice")}get sellingPrice(){return this.productForm.get("sellingPrice")}get image(){return this.productForm.get("image")}get isActive(){return this.productForm.get("isActive")}get subCategoryId(){return this.productForm.get("subCategoryId")}get unitId(){return this.productForm.get("unitId")}onVariantsUpdated(t){this.productVariantsList=t||[],this.variantSummary=t||[];let e=this.productForm.get("id")?.value;e&&e>0&&this.loadInventory(e)}onModifiersUpdated(t){this.modifierSummary=t||[]}openVariantManager(){this.showVariantManager=!0}closeVariantManager(){this.showVariantManager=!1;let t=this.productForm.get("id")?.value;t&&this.loadVariantSummary(t)}openModifierManager(){this.showModifierManager=!0}closeModifierManager(){this.showModifierManager=!1;let t=this.productForm.get("id")?.value;t&&this.loadModifierSummary(t)}loadVariantSummary(t){if(!t){this.variantSummary=[];return}this.productVariantService.getVariantsByProduct(t).subscribe({next:e=>{this.variantSummary=e,this.productVariantsList=e}})}loadModifierSummary(t){if(!t){this.modifierSummary=[];return}this.productModifierService.getModifierGroupsByProduct(t).subscribe({next:e=>{this.modifierSummary=e}})}static \u0275fac=function(e){return new(e||a)(v(L),v(Ee),v(lt),v(ot),v(rt),v(Ge),v(T),v(k),v(ce),v(ht),v(at))};static \u0275cmp=A({type:a,selectors:[["app-product-form"]],decls:132,vars:16,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-100","p-4","md:p-6"],[1,"max-w-6xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-xl","mb-8","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-600","to-indigo-700","px-6","py-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-12","h-12","bg-white","bg-opacity-20","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-box","text-white","text-2xl"],[1,"text-2xl","font-bold","text-white"],[1,"text-blue-100","mt-1"],[1,"px-4","py-2","bg-white","bg-opacity-20","text-white","rounded-lg","hover:bg-opacity-30","transition-colors",3,"click"],[1,"bi","bi-arrow-right","mr-2"],[1,"space-y-8",3,"formGroup"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden"],[1,"bg-gradient-to-r","from-green-500","to-emerald-600","px-6","py-4"],[1,"text-xl","font-bold","text-white","flex","items-center"],[1,"bi","bi-info-circle","mr-3"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-translate","mr-2","text-green-600"],["formControlName","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062A\u062C \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],["class","text-red-500 text-sm flex items-center",4,"ngIf"],["formControlName","nameEn","placeholder","Enter product name in English",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"bi","bi-hash","mr-2","text-green-600"],["formControlName","code","readonly","","placeholder","\u0633\u064A\u062A\u0645 \u0625\u0646\u0634\u0627\u0624\u0647 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","bg-gray-100","text-gray-600","cursor-not-allowed"],[1,"bi","bi-tags","mr-2","text-green-600"],["formControlName","subCategoryId",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"bi","bi-rulers","mr-2","text-green-600"],["formControlName","unitId",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"bi","bi-toggle-on","mr-2","text-green-600"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-xl"],["type","checkbox","formControlName","isActive",1,"h-5","w-5","text-green-600","focus:ring-green-500","border-gray-300","rounded"],[1,"text-sm","text-gray-700"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600","px-6","py-4"],[1,"bi","bi-currency-dollar","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bi","bi-cart-dash","mr-2","text-purple-600"],[1,"relative"],["type","number","step","0.01","formControlName","costPrice","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"absolute","left-3","top-3","text-gray-500"],[1,"bi","bi-cart-plus","mr-2","text-purple-600"],["type","number","step","0.01","formControlName","sellingPrice","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"bi","bi-exclamation-triangle","mr-2","text-purple-600"],["type","number","step","0.01","formControlName","reorderLevel","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"text-sm","text-gray-600"],[1,"bi","bi-info-circle","mr-1"],[1,"bg-gradient-to-r","from-orange-500","to-red-600","px-6","py-4"],[1,"bi","bi-image","mr-3"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bi","bi-file-text","mr-2","text-orange-600"],["rows","8","formControlName","description","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641\u0627\u064B \u0645\u0641\u0635\u0644\u0627\u064B \u0644\u0644\u0645\u0646\u062A\u062C...",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-colors","resize-none"],[1,"bi","bi-camera","mr-2","text-orange-600"],[1,"border-2","border-dashed","border-gray-300","rounded-xl","p-4","hover:border-orange-400","transition-colors"],["formControlName","image",3,"imageSelected","initialImageUrl"],["class","bg-white rounded-2xl shadow-xl overflow-hidden mt-6",4,"ngIf"],["class","bg-white rounded-2xl shadow-xl overflow-hidden",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-start justify-center z-40 overflow-y-auto",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-xl","p-6"],[1,"flex","flex-col","sm:flex-row","justify-end","gap-4"],["type","button",1,"w-full","sm:w-auto","px-8","py-3","bg-gray-500","text-white","rounded-xl","hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"],[1,"bi","bi-x-circle","mr-2"],["type","button",1,"w-full","sm:w-auto","px-8","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","font-semibold","shadow-lg",3,"click","disabled"],[1,"bi","bi-check-circle","mr-2"],[1,"text-red-500","text-sm","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden","mt-6"],[1,"bg-gradient-to-r","from-yellow-500","to-orange-400","px-6","py-4"],[1,"bi","bi-database","mr-3"],[1,"mb-4","flex","flex-col","gap-4","lg:flex-row","lg:gap-12"],[1,"w-full"],[1,"font-semibold","text-gray-700"],[1,"text-lg","text-blue-700","mx-2"],[1,"font-semibold","text-gray-700","mb-2"],[1,"text-blue-800","text-sm","font-bold","space-y-2","md:ml-4"],["class","flex flex-col sm:flex-row sm:items-center gap-3 py-1",4,"ngFor","ngForOf"],[1,"lg:ml-auto","w-full","lg:w-auto"],[1,"text-lg","text-purple-700","mx-2"],[1,"text-lg","text-emerald-700","mx-2"],[1,"border-t","border-gray-200","pt-4","mt-4"],[1,"font-bold","mb-2","text-gray-600"],[1,"flex","flex-col","lg:flex-row","gap-3","lg:items-end",3,"ngSubmit"],[1,"flex-1","min-w-0"],[1,"block","text-sm","text-gray-600"],["name","variant","required","",1,"form-select","w-full","border","rounded","p-2",3,"ngModelChange","ngModel","ngModelOptions"],["disabled","","selected","",3,"ngValue"],["type","number","min","1","required","","name","amount",1,"form-input","w-full","border","rounded","p-2",3,"ngModelChange","max","ngModel","ngModelOptions","disabled"],["type","submit",1,"px-4","py-3","lg:py-2","rounded","bg-yellow-600","text-white","font-bold","hover:bg-yellow-700","disabled:opacity-40","w-full","lg:w-auto",3,"disabled"],["class","text-sm mt-2 font-semibold",3,"text-green-700","text-red-700",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","sm:items-center","gap-3","py-1"],[1,"min-w-40"],[1,"text-green-700"],[1,"flex","flex-col","sm:flex-row","items-stretch","sm:items-center","gap-2","md:ml-4","w-full","sm:w-auto"],["type","number","min","1",1,"w-full","sm:w-24","form-input","border","rounded","p-2","sm:p-1",3,"ngModelChange","max","ngModel","ngModelOptions","name"],["type","button",1,"px-3","py-2","sm:px-2","sm:py-1","rounded","bg-gray-600","text-white","text-xs","hover:bg-gray-700","disabled:opacity-40",3,"click","disabled"],[1,"text-sm","mt-2","font-semibold"],[1,"bg-gradient-to-r","from-indigo-500","to-purple-600","px-6","py-4"],[1,"bi","bi-gear","mr-3"],[1,"p-6","space-y-8"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"bi","bi-tags","mr-2","text-indigo-500"],[1,"text-gray-500","text-sm","mt-1"],["type","button",1,"px-4","py-2","bg-indigo-600","text-white","rounded-lg","hover:bg-indigo-700","transition-colors",3,"click"],[1,"bi","bi-sliders","mr-2"],[1,"overflow-x-auto","border","border-gray-200","rounded-xl"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-4","py-3","text-right","text-xs","font-semibold","text-gray-600","uppercase"],[1,"px-4","py-3","text-center","text-xs","font-semibold","text-gray-600","uppercase"],[1,"divide-y","divide-gray-100"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bi","bi-list-ul","mr-2","text-purple-500"],["type","button",1,"px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700","transition-colors",3,"click"],[1,"px-4","py-3","text-sm","font-medium","text-gray-900"],[1,"px-4","py-3","text-sm","text-gray-600"],[1,"px-4","py-3","text-sm","text-center"],[1,"px-3","py-1","rounded-full","text-xs","font-semibold"],[1,"px-4","py-3","text-sm","text-center","text-gray-700"],["colspan","4",1,"px-4","py-6","text-center","text-gray-500"],[1,"px-2","py-1","rounded-full","text-xs","font-semibold"],[1,"fixed","inset-0","bg-black","bg-opacity-60","backdrop-blur-sm","flex","items-start","justify-center","z-40","overflow-y-auto"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-4xl","mt-10","mb-10"],[1,"flex","items-center","justify-between","px-6","py-4","border-b"],[1,"text-xl","font-bold","text-gray-900","flex","items-center"],[1,"bi","bi-sliders","mr-2","text-indigo-600"],["type","button",1,"w-10","h-10","rounded-full","bg-gray-100","hover:bg-gray-200","flex","items-center","justify-center",3,"click"],[1,"bi","bi-x","text-gray-600"],[3,"variantsUpdated","productId"],[1,"bi","bi-sliders","mr-2","text-purple-600"],[3,"modifiersUpdated","productId"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),l(7,"i",7),i(),n(8,"div")(9,"h1",8),r(10," \u0625\u0636\u0627\u0641\u0629 / \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A "),i(),n(11,"p",9),r(12,"\u0625\u062F\u0627\u0631\u0629 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C \u0648\u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),i()()(),n(13,"button",10),x("click",function(){return o.cancel()}),l(14,"i",11),r(15," \u0627\u0644\u0639\u0648\u062F\u0629 "),i()()()(),n(16,"form",12)(17,"div",13)(18,"div",14)(19,"h2",15),l(20,"i",16),r(21," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i()(),n(22,"div",17)(23,"div",18)(24,"div",19)(25,"label",20),l(26,"i",21),r(27," \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062A\u062C (\u0639\u0631\u0628\u064A) * "),i(),l(28,"input",22),f(29,U0,3,0,"div",23),i(),n(30,"div",19)(31,"label",20),l(32,"i",21),r(33," \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062A\u062C (\u0625\u0646\u062C\u0644\u064A\u0632\u064A) "),i(),l(34,"input",24),i(),n(35,"div",19)(36,"label",20),l(37,"i",25),r(38," \u0643\u0648\u062F \u0627\u0644\u0645\u0646\u062A\u062C "),i(),l(39,"input",26),i(),n(40,"div",19)(41,"label",20),l(42,"i",27),r(43," \u0627\u0644\u062A\u0635\u0646\u064A\u0641 * "),i(),n(44,"select",28)(45,"option",29),r(46,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062A\u0635\u0646\u064A\u0641"),i(),f(47,j0,2,2,"option",30),i(),f(48,G0,3,0,"div",23),i(),n(49,"div",19)(50,"label",20),l(51,"i",31),r(52," \u0648\u062D\u062F\u0629 \u0627\u0644\u0642\u064A\u0627\u0633 * "),i(),n(53,"select",32)(54,"option",29),r(55,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0648\u062D\u062F\u0629"),i(),f(56,W0,2,2,"option",30),i(),f(57,$0,3,0,"div",23),i(),n(58,"div",19)(59,"label",20),l(60,"i",33),r(61," \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(62,"div",34),l(63,"input",35),n(64,"span",36),r(65,"\u0645\u0646\u062A\u062C \u0646\u0634\u0637"),i()()()()()(),n(66,"div",13)(67,"div",37)(68,"h2",15),l(69,"i",38),r(70," \u0627\u0644\u062A\u0633\u0639\u064A\u0631 \u0648\u0627\u0644\u062A\u0643\u0644\u0641\u0629 "),i()(),n(71,"div",17)(72,"div",39)(73,"div",19)(74,"label",20),l(75,"i",40),r(76," \u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621 * "),i(),n(77,"div",41),l(78,"input",42),n(79,"span",43),r(80,"\u062F.\u0623"),i()(),f(81,H0,3,0,"div",23),i(),n(82,"div",19)(83,"label",20),l(84,"i",44),r(85," \u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639 * "),i(),n(86,"div",41),l(87,"input",45),n(88,"span",43),r(89,"\u062F.\u0623"),i()(),f(90,q0,3,0,"div",23),i(),n(91,"div",19)(92,"label",20),l(93,"i",46),r(94," \u0645\u0633\u062A\u0648\u0649 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0637\u0644\u0628 "),i(),n(95,"div",41),l(96,"input",47),n(97,"span",43),r(98,"\u0643\u0645\u064A\u0629"),i()(),n(99,"div",48),l(100,"i",49),r(101," \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u062F\u0646\u0649 \u0644\u0644\u0643\u0645\u064A\u0629 \u0642\u0628\u0644 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0637\u0644\u0628 "),i()()()()(),n(102,"div",13)(103,"div",50)(104,"h2",15),l(105,"i",51),r(106," \u0627\u0644\u0648\u0635\u0641 \u0648\u0627\u0644\u0635\u0648\u0631\u0629 "),i()(),n(107,"div",17)(108,"div",52)(109,"div",19)(110,"label",20),l(111,"i",53),r(112," \u0648\u0635\u0641 \u0627\u0644\u0645\u0646\u062A\u062C "),i(),l(113,"textarea",54),i(),n(114,"div",19)(115,"label",20),l(116,"i",55),r(117," \u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(118,"div",56)(119,"app-image-uploader",57),x("imageSelected",function(m){return o.detectFiles(m)}),i()()()()()(),f(120,K0,44,16,"div",58)(121,to,58,4,"div",59)(122,io,10,1,"div",60)(123,no,10,1,"div",60),n(124,"div",61)(125,"div",62)(126,"button",63),x("click",function(){return o.cancel()}),l(127,"i",64),r(128," \u0625\u0644\u063A\u0627\u0621 "),i(),n(129,"button",65),x("click",function(){return o.save()}),l(130,"i",66),r(131," \u062D\u0641\u0638 "),i()()()()()()),e&2){let s,m;u(16),d("formGroup",o.productForm),u(13),d("ngIf",o.nameAr.invalid&&o.nameAr.touched),u(16),d("ngValue",null),u(2),d("ngForOf",o.subCategories),u(),d("ngIf",o.subCategoryId.invalid&&o.subCategoryId.touched),u(6),d("ngValue",null),u(2),d("ngForOf",o.units),u(),d("ngIf",o.unitId.invalid&&o.unitId.touched),u(24),d("ngIf",o.costPrice.invalid&&o.costPrice.touched),u(9),d("ngIf",o.sellingPrice.invalid&&o.sellingPrice.touched),u(29),d("initialImageUrl",o.initialImageUrl),u(),d("ngIf",((s=o.productForm.get("id"))==null?null:s.value)>0&&o.isAdmin),u(),d("ngIf",((m=o.productForm.get("id"))==null?null:m.value)>0),u(),d("ngIf",o.showVariantManager),u(),d("ngIf",o.showModifierManager),u(6),d("disabled",o.productForm.invalid)}},dependencies:[Pe,F,w,De,W,X,Z,V,xe,be,J,D,B,pn,Ce,gt,U,j,Qe,Re,cn,Ke,yt,St,Fe,ze],styles:[".floating-label-input[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding-top:1rem;height:auto}.floating-label-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.75rem;pointer-events:none;color:#6c757d;background-color:#fff;padding:0 4px;font-size:.875em;transition:.2s ease all;transform-origin:0 0}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not([value=null]) + label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-1.2rem);left:.25rem;color:#0d6efd}.floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-top:1.5rem}"]})};var Et=class a{constructor(t){this.http=t}url=Y.baseUrl+"/InventoryTransaction/";GetTransactionByProductId(t,e,o,s){return this.http.get(this.url+`GetTransactionByProductId?pageIndex=${t}&pageSize=${e}&id=${o}&storeId=${s}`)}GetAllTransactions(t,e,o,s,m,E){let I=`pageIndex=${t}&pageSize=${e}`;return o&&(I+=`&storeId=${o}`),s&&(I+=`&productId=${s}`),m&&(I+=`&fromDate=${m.toISOString()}`),E&&(I+=`&toDate=${E.toISOString()}`),this.http.get(`${this.url}GetAllTransactions?${I}`)}GetStockMovementReport(t,e,o){let s="";return t&&(s+=`storeId=${t}`),e&&(s+=`${s?"&":""}fromDate=${e.toISOString()}`),o&&(s+=`${s?"&":""}toDate=${o.toISOString()}`),this.http.get(`${this.url}GetStockMovementReport?${s}`)}GetInventoryValuationReport(t){let e=t?`?storeId=${t}`:"";return this.http.get(`${this.url}GetInventoryValuationReport${e}`)}GetLowStockReport(t=10,e){let o=`threshold=${t}`;return e&&(o+=`&storeId=${e}`),this.http.get(`${this.url}GetLowStockReport?${o}`)}GetTransactionTrends(t,e,o=6){let s=`months=${o}`;return t&&(s+=`&storeId=${t}`),e&&(s+=`&productId=${e}`),this.http.get(`${this.url}GetTransactionTrends?${s}`)}GetTopMovingProducts(t,e,o,s=10){let m=`topCount=${s}`;return t&&(m+=`&storeId=${t}`),e&&(m+=`&fromDate=${e.toISOString()}`),o&&(m+=`&toDate=${o.toISOString()}`),this.http.get(`${this.url}GetTopMovingProducts?${m}`)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};function ro(a,t){if(a&1&&(n(0,"div",1)(1,"h2"),r(2),i()()),a&2){let e=t.ngIf;u(2),p(e.printHeader)}}var At=class a{constructor(t,e,o,s){this.companiesService=t;this.lang=e;this.usersService=o;this.authService=s}companies$;user$;ngOnInit(){this.user$=this.usersService.GetUserById(+this.authService.userId)}static \u0275fac=function(e){return new(e||a)(v(tt),v(G),v(it),v(ce))};static \u0275cmp=A({type:a,selectors:[["app-company-header"]],standalone:!1,decls:2,vars:3,consts:[["class","text-center","dir","rtl",4,"ngIf"],["dir","rtl",1,"text-center"]],template:function(e,o){e&1&&(f(0,ro,3,1,"div",0),g(1,"async")),e&2&&d("ngIf",h(1,1,o.user$))},dependencies:[w,M,me],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px}"]})};function oo(a,t){if(a&1&&(n(0,"div",1)(1,"p"),r(2),i()()),a&2){let e=t.ngIf;u(2),p(e.printFooter)}}var wt=class a{constructor(t,e,o,s){this.companiesService=t;this.lang=e;this.usersService=o;this.authService=s}companies$;user$;ngOnInit(){this.user$=this.usersService.GetUserById(+this.authService.userId)}static \u0275fac=function(e){return new(e||a)(v(tt),v(G),v(it),v(ce))};static \u0275cmp=A({type:a,selectors:[["app-company-footer"]],standalone:!1,decls:2,vars:3,consts:[["class","text-center","dir","rtl",4,"ngIf"],["dir","rtl",1,"text-center"]],template:function(e,o){e&1&&(f(0,oo,3,1,"div",0),g(1,"async")),e&2&&d("ngIf",h(1,1,o.user$))},dependencies:[w,M,me],styles:["[_nghost-%COMP%]{display:block;margin-top:30px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px}"]})};var uo=["printSection"],ao=["printAllSection"],lo=["class","component"],so=a=>["/admin/transaction",a];function mo(a,t){if(a&1&&(n(0,"option",11),r(1),i()),a&2){let e=t.$implicit,o=c();d("ngValue",e.id),u(),b(" ",o.lang.currentLang==="ar"?e.nameAr:e.nameEn," ")}}function co(a,t){if(a&1&&(n(0,"div",47),l(1,"i",48),r(2),i()),a&2){let e=c();u(2),b(" \u0639\u0631\u0636 \u0627\u0644\u0643\u0645\u064A\u0627\u062A \u0645\u0646: ",e.getStoreName(e.storeId)," ")}}function po(a,t){a&1&&(n(0,"div",47),l(1,"i",48),r(2," \u0639\u0631\u0636 \u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0645\u064A\u0627\u062A \u0645\u0646 \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A "),i())}function go(a,t){if(a&1){let e=C();n(0,"div")(1,"label",9),r(2,"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"),i(),n(3,"input",53),g(4,"date"),x("ngModelChange",function(s){y(e);let m=c(2);return _(m.onFromDateChange(s))}),i()()}if(a&2){let e=c(2);u(3),d("ngModel",Q(4,1,e.fromDate,"yyyy-MM-dd"))}}function fo(a,t){if(a&1){let e=C();n(0,"div")(1,"label",9),r(2,"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E"),i(),n(3,"input",53),g(4,"date"),x("ngModelChange",function(s){y(e);let m=c(2);return _(m.onToDateChange(s))}),i()()}if(a&2){let e=c(2);u(3),d("ngModel",Q(4,1,e.toDate,"yyyy-MM-dd"))}}function bo(a,t){if(a&1){let e=C();n(0,"div")(1,"label",9),r(2,"\u062D\u062F \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0645\u0646\u062E\u0641\u0636"),i(),n(3,"input",54),ue("ngModelChange",function(s){y(e);let m=c(2);return oe(m.threshold,s)||(m.threshold=s),_(s)}),x("change",function(){y(e);let s=c(2);return _(s.onFilterChange())}),i()()}if(a&2){let e=c(2);u(3),re("ngModel",e.threshold)}}function xo(a,t){if(a&1){let e=C();n(0,"div")(1,"label",9),r(2,"\u0639\u062F\u062F \u0627\u0644\u0623\u0634\u0647\u0631"),i(),n(3,"input",55),ue("ngModelChange",function(s){y(e);let m=c(2);return oe(m.months,s)||(m.months=s),_(s)}),x("change",function(){y(e);let s=c(2);return _(s.onFilterChange())}),i()()}if(a&2){let e=c(2);u(3),re("ngModel",e.months)}}function vo(a,t){if(a&1){let e=C();n(0,"div")(1,"label",9),r(2,"\u0639\u062F\u062F \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A"),i(),n(3,"input",56),ue("ngModelChange",function(s){y(e);let m=c(2);return oe(m.topCount,s)||(m.topCount=s),_(s)}),x("change",function(){y(e);let s=c(2);return _(s.onFilterChange())}),i()()}if(a&2){let e=c(2);u(3),re("ngModel",e.topCount)}}function ho(a,t){if(a&1&&(n(0,"div",19)(1,"div",49)(2,"h3",50),l(3,"i",51),r(4," \u0641\u0644\u0627\u062A\u0631 \u0625\u0636\u0627\u0641\u064A\u0629 "),i()(),n(5,"div",22)(6,"div",52),f(7,go,5,4,"div",33)(8,fo,5,4,"div",33)(9,bo,4,1,"div",33)(10,xo,4,1,"div",33)(11,vo,4,1,"div",33),i()()()),a&2){let e=c();u(7),d("ngIf",e.activeTab==="stock-movement"||e.activeTab==="top-products"),u(),d("ngIf",e.activeTab==="stock-movement"||e.activeTab==="top-products"),u(),d("ngIf",e.activeTab==="low-stock"),u(),d("ngIf",e.activeTab==="trends"),u(),d("ngIf",e.activeTab==="top-products")}}function yo(a,t){if(a&1&&(n(0,"div",82),r(1),i()),a&2){let e=c(4);u(),b(" \u0645\u0646: ",e.getStoreName(e.storeId)," ")}}function _o(a,t){a&1&&(n(0,"div",82),r(1," \u0625\u062C\u0645\u0627\u0644\u064A \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A "),i())}function So(a,t){if(a&1&&(n(0,"tr",67)(1,"td",68),r(2),i(),n(3,"td",69)(4,"a",70),r(5),i()(),n(6,"td",71),r(7),i(),n(8,"td",72),r(9),i(),n(10,"td",72),r(11),i(),n(12,"td",73),r(13),g(14,"currency"),i(),n(15,"td",73),r(16),g(17,"currency"),i(),n(18,"td",74)(19,"div",75)(20,"span",76),l(21,"i",77),n(22,"strong"),r(23),i(),n(24,"span",78),r(25),i()()(),f(26,yo,2,1,"div",79)(27,_o,2,0,"div",79),i(),n(28,"td",74)(29,"span",80),l(30,"i",81),r(31),i()()()),a&2){let e=t.$implicit,o=t.index,s=c(3);u(2),p((s.pageIndex-1)*s.pageSize+o+1),u(2),d("routerLink",ge(19,so,e.id)),u(),b(" ",e.code," "),u(2),p(s.lang.currentLang==="ar"?e.nameAr:e.nameEn),u(2),p(s.lang.currentLang==="ar"?e.subCategory==null?null:e.subCategory.nameAr:e.subCategory==null?null:e.subCategory.nameEn),u(2),p(s.lang.currentLang==="ar"?e.unit==null?null:e.unit.nameAr:e.unit==null?null:e.unit.nameEn),u(2),p(h(14,15,e.costPrice)),u(3),p(h(17,17,e.sellingPrice)),u(7),p(s.getTotalQuantity(e)),u(2),b(" ",s.lang.currentLang==="ar"?e==null||e.unit==null?null:e.unit.nameAr:e==null||e.unit==null?null:e.unit.nameEn," "),u(),d("ngIf",s.storeId>0),u(),d("ngIf",s.storeId===0),u(2),d("ngClass",e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),u(),d("ngClass",e.isActive?"bi-check-circle":"bi-x-circle"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function Co(a,t){if(a&1&&(n(0,"tbody",65),f(1,So,32,21,"tr",66),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e.products)}}function Eo(a,t){if(a&1&&(n(0,"div")(1,"div",57)(2,"div",20)(3,"h3",58),l(4,"i",59),r(5," \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u062C\u0631\u062F "),i()(),n(6,"div",60)(7,"table",61)(8,"thead",62)(9,"tr")(10,"th",63),r(11,"#"),i(),n(12,"th",63),r(13,"\u0627\u0644\u0643\u0648\u062F"),i(),n(14,"th",63),r(15,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(16,"th",63),r(17,"\u0627\u0644\u0635\u0646\u0641"),i(),n(18,"th",63),r(19,"\u0627\u0644\u0648\u062D\u062F\u0629"),i(),n(20,"th",63),r(21,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),i(),n(22,"th",63),r(23,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639"),i(),n(24,"th",63),r(25,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(26,"th",63),r(27,"\u0627\u0644\u062D\u0627\u0644\u0629"),i()()(),f(28,Co,2,1,"tbody",64),g(29,"async"),i()()()()),a&2){let e=c();u(28),d("ngIf",h(29,1,e.products$))}}function Ao(a,t){a&1&&(n(0,"li")(1,"span",90),r(2,"..."),i()())}function wo(a,t){if(a&1){let e=C();n(0,"li")(1,"button",87),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.changePage(s))}),r(2),i()()}if(a&2){let e=t.$implicit,o=c(2);u(),K(e===o.pageIndex?"bg-indigo-600 text-white border-indigo-600":"text-gray-500 bg-white"),u(),p(e)}}function Io(a,t){a&1&&(n(0,"li")(1,"span",90),r(2,"..."),i()())}function Po(a,t){if(a&1){let e=C();n(0,"li")(1,"button",87),x("click",function(){y(e);let s=c(2);return _(s.changePage(s.totalPages))}),r(2),i()()}if(a&2){let e=c(2);u(),K(e.pageIndex===e.totalPages?"bg-indigo-600 text-white border-indigo-600":"text-gray-500 bg-white"),u(),p(e.totalPages)}}function Fo(a,t){if(a&1){let e=C();n(0,"div",83)(1,"nav",84)(2,"ul",85)(3,"li")(4,"button",86),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex-1))}),r(5,"\xAB"),i()(),n(6,"li")(7,"button",87),x("click",function(){y(e);let s=c();return _(s.changePage(1))}),r(8,"1"),i()(),f(9,Ao,3,0,"li",33)(10,wo,3,3,"li",88)(11,Io,3,0,"li",33)(12,Po,3,3,"li",33),n(13,"li")(14,"button",89),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex+1))}),r(15,"\xBB"),i()()()()()}if(a&2){let e=c();u(4),d("disabled",e.pageIndex===1),u(3),K(e.pageIndex===1?"bg-indigo-600 text-white border-indigo-600":"text-gray-500 bg-white"),u(2),d("ngIf",e.pageIndex>4),u(),d("ngForOf",e.getPageRange()),u(),d("ngIf",e.pageIndex<e.totalPages-3),u(),d("ngIf",e.totalPages>1),u(2),d("disabled",e.pageIndex===e.totalPages||e.totalPages===0)}}function Oo(a,t){a&1&&(Le(0),l(1,"app-company-header"),Be())}function To(a,t){if(a&1&&(n(0,"tr",95)(1,"td",41),r(2),i(),n(3,"td",42),r(4),i(),n(5,"td",42),r(6),i(),n(7,"td",42),r(8),i(),n(9,"td",42),r(10),i(),n(11,"td",42),r(12),g(13,"currency"),i(),n(14,"td",42),r(15),g(16,"currency"),i(),n(17,"td",41)(18,"strong"),r(19),i(),n(20,"small",96),r(21),i()(),n(22,"td",41)(23,"span",97),r(24),i()()()),a&2){let e=t.$implicit,o=t.index,s=c(2);u(2),p((s.pageIndex-1)*s.pageSize+o+1),u(2),p(e.code),u(2),p(s.lang.currentLang==="ar"?e.nameAr:e.nameEn),u(2),p(s.lang.currentLang==="ar"?e.subCategory==null?null:e.subCategory.nameAr:e.subCategory==null?null:e.subCategory.nameEn),u(2),p(s.lang.currentLang==="ar"?e.unit==null?null:e.unit.nameAr:e.unit==null?null:e.unit.nameEn),u(2),p(h(13,12,e.costPrice)),u(3),p(h(16,14,e.sellingPrice)),u(4),p(s.getTotalQuantity(e)),u(2),b(" ",s.lang.currentLang==="ar"?e==null||e.unit==null?null:e.unit.nameAr:e==null||e.unit==null?null:e.unit.nameEn," "),u(2),K(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function Mo(a,t){a&1&&(Le(0),l(1,"app-company-footer"),Be())}function ko(a,t){if(a&1&&(n(0,"div",36,1)(2,"div",91),f(3,Oo,2,0,"ng-container",33),n(4,"h4",38),r(5),g(6,"date"),i(),n(7,"table",39)(8,"thead")(9,"tr",40)(10,"th",41),r(11,"#"),i(),n(12,"th",42),r(13,"\u0627\u0644\u0643\u0648\u062F"),i(),n(14,"th",42),r(15,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(16,"th",42),r(17,"\u0627\u0644\u0635\u0646\u0641"),i(),n(18,"th",42),r(19,"\u0627\u0644\u0648\u062D\u062F\u0629"),i(),n(20,"th",42),r(21,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),i(),n(22,"th",42),r(23,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639"),i(),n(24,"th",41),r(25,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(26,"th",41),r(27,"\u0627\u0644\u062D\u0627\u0644\u0629"),i()()(),n(28,"tbody"),f(29,To,25,16,"tr",43),i()(),n(30,"div",92)(31,"p",93),r(32),g(33,"date"),i(),n(34,"p",94),r(35,"Powered by Warehousing System"),i()(),f(36,Mo,2,0,"ng-container",33),i()()),a&2){let e=t.ngIf,o=c();u(3),d("ngIf",o.storeId),u(2),b(" \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u062C\u0631\u062F \u2014 ",Q(6,5,o.today,"short")," "),u(24),d("ngForOf",e.products),u(3),b("Printed on: ",Q(33,8,o.today,"short")),u(4),d("ngIf",o.storeId)}}function Ro(a,t){a&1&&(Le(0),l(1,"app-company-header"),Be())}function Do(a,t){if(a&1&&(n(0,"tr",95)(1,"td",41),r(2),i(),n(3,"td",42),r(4),i(),n(5,"td",42),r(6),i(),n(7,"td",42),r(8),i(),n(9,"td",42),r(10),i(),n(11,"td",42),r(12),g(13,"currency"),i(),n(14,"td",42),r(15),g(16,"currency"),i(),n(17,"td",41)(18,"strong"),r(19),i(),n(20,"small",96),r(21),i()(),n(22,"td",41)(23,"span",97),r(24),i()()()),a&2){let e=t.$implicit,o=t.index,s=c();u(2),p(o+1),u(2),p(e.code),u(2),p(s.lang.currentLang==="ar"?e.nameAr:e.nameEn),u(2),p(s.lang.currentLang==="ar"?e.subCategory==null?null:e.subCategory.nameAr:e.subCategory==null?null:e.subCategory.nameEn),u(2),p(s.lang.currentLang==="ar"?e.unit==null?null:e.unit.nameAr:e.unit==null?null:e.unit.nameEn),u(2),p(h(13,14,e.costPrice)),u(3),p(h(16,16,e.sellingPrice)),u(2),K(s.getTotalQuantity(e)<e.reorderLevel?"text-red-600 font-bold":""),u(2),p(s.getTotalQuantity(e)),u(2),b(" ",s.lang.currentLang==="ar"?e==null||e.unit==null?null:e.unit.nameAr:e==null||e.unit==null?null:e.unit.nameEn," "),u(2),K(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function No(a,t){a&1&&(Le(0),l(1,"app-company-footer"),Be())}function Vo(a,t){a&1&&l(0,"div",104)}function Lo(a,t){a&1&&(n(0,"div",105)(1,"div",106),l(2,"i",107),i(),n(3,"h4",108),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u062D\u0631\u0643\u0629 \u0645\u062E\u0632\u0648\u0646"),i(),n(5,"p",109),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u062D\u0631\u0643\u0629 \u0645\u062E\u0632\u0648\u0646 \u0645\u062A\u0627\u062D\u0629"),i()())}function Bo(a,t){if(a&1&&(n(0,"tr",67)(1,"td",110)(2,"div",111)(3,"div",112),l(4,"i",113),i(),n(5,"div")(6,"div",114),r(7),i(),n(8,"div",115),r(9),i()()()(),n(10,"td",116),r(11),i(),n(12,"td",117)(13,"div",111),l(14,"i",118),r(15),i()(),n(16,"td",119)(17,"div",111),l(18,"i",120),r(19),i()(),n(20,"td",121)(21,"div",111),l(22,"i",122),r(23),i()(),n(24,"td",123)(25,"span",124),r(26),i()(),n(27,"td",125),r(28),i()()),a&2){let e=t.$implicit,o=c(3);u(7),p(e.productNameAr),u(2),p(e.productNameEn),u(2),p(e.productCode),u(4),b(" ",o.formatNumber(e.totalIn)," "),u(4),b(" ",o.formatNumber(e.totalOut)," "),u(),d("ngClass",o.getMovementClass(e.netMovement)),u(2),K(o.getMovementIcon(e.netMovement)),u(),b(" ",o.formatNumber(e.netMovement)," "),u(3),b(" ",o.formatNumber(e.transactionCount)," "),u(2),p(o.formatDate(e.lastTransactionDate))}}function Uo(a,t){if(a&1&&(n(0,"div",60)(1,"table",61)(2,"thead",62)(3,"tr")(4,"th",63),r(5,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(6,"th",63),r(7,"\u0627\u0644\u0643\u0648\u062F"),i(),n(8,"th",63),r(9,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062F\u0627\u062E\u0644"),i(),n(10,"th",63),r(11,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062E\u0627\u0631\u062C"),i(),n(12,"th",63),r(13,"\u0635\u0627\u0641\u064A \u0627\u0644\u062D\u0631\u0643\u0629"),i(),n(14,"th",63),r(15,"\u0639\u062F\u062F \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"),i(),n(16,"th",63),r(17,"\u0622\u062E\u0631 \u0645\u0639\u0627\u0645\u0644\u0629"),i()()(),n(18,"tbody",65),f(19,Bo,29,11,"tr",66),i()()()),a&2){let e=c(2);u(19),d("ngForOf",e.stockMovementReport)}}function jo(a,t){if(a&1&&(n(0,"div")(1,"div",57)(2,"div",98)(3,"div",99)(4,"h5",50),l(5,"i",100),r(6," \u062A\u0642\u0631\u064A\u0631 \u062D\u0631\u0643\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 "),i(),f(7,Vo,1,0,"div",101),i()(),n(8,"div",22),f(9,Lo,7,0,"div",102)(10,Uo,20,1,"div",103),i()()()),a&2){let e=c();u(7),d("ngIf",e.isLoadingStockMovement),u(2),d("ngIf",!e.isLoadingStockMovement&&e.stockMovementReport.length===0),u(),d("ngIf",!e.isLoadingStockMovement&&e.stockMovementReport.length>0)}}function Go(a,t){a&1&&l(0,"div",104)}function Wo(a,t){if(a&1&&(n(0,"tr",67)(1,"td",110)(2,"div",111)(3,"div",147),l(4,"i",113),i(),n(5,"div")(6,"div",114),r(7),i(),n(8,"div",148),r(9),i()()()(),n(10,"td",123),r(11),i(),n(12,"td",71)(13,"span",124),r(14),i()(),n(15,"td",123),r(16),i(),n(17,"td",149),r(18),i(),n(19,"td",123),r(20),i(),n(21,"td",150),r(22),i(),n(23,"td",125),r(24),i()()),a&2){let e=t.$implicit,o=c(3);u(7),p(e.productNameAr),u(2),p(e.productCode),u(2),p(e.storeNameAr),u(3),b(" ",o.formatNumber(e.quantity)," "),u(2),p(o.formatCurrency(e.unitCost)),u(2),p(o.formatCurrency(e.totalCost)),u(2),p(o.formatCurrency(e.unitSellingPrice)),u(2),p(o.formatCurrency(e.totalValue)),u(2),p(o.formatDate(e.lastUpdated))}}function $o(a,t){if(a&1&&(n(0,"div")(1,"div",128)(2,"div",129)(3,"div",130)(4,"div")(5,"p",131),r(6,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0623\u0635\u0646\u0627\u0641"),i(),n(7,"p",132),r(8),i()(),n(9,"div",133),l(10,"i",134),i()()(),n(11,"div",135)(12,"div",130)(13,"div")(14,"p",136),r(15,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(16,"p",132),r(17),i()(),n(18,"div",137),l(19,"i",138),i()()(),n(20,"div",139)(21,"div",130)(22,"div")(23,"p",140),r(24,"\u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u062A\u0643\u0644\u0641\u0629"),i(),n(25,"p",132),r(26),i()(),n(27,"div",141),l(28,"i",142),i()()(),n(29,"div",143)(30,"div",130)(31,"div")(32,"p",144),r(33,"\u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u0628\u064A\u0639\u064A\u0629"),i(),n(34,"p",132),r(35),i()(),n(36,"div",145),l(37,"i",146),i()()()(),n(38,"div",60)(39,"table",61)(40,"thead",62)(41,"tr")(42,"th",63),r(43,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(44,"th",63),r(45,"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),n(46,"th",63),r(47,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(48,"th",63),r(49,"\u0633\u0639\u0631 \u0627\u0644\u062A\u0643\u0644\u0641\u0629"),i(),n(50,"th",63),r(51,"\u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u062A\u0643\u0644\u0641\u0629"),i(),n(52,"th",63),r(53,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639"),i(),n(54,"th",63),r(55,"\u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u0628\u064A\u0639\u064A\u0629"),i(),n(56,"th",63),r(57,"\u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B"),i()()(),n(58,"tbody",65),f(59,Wo,25,9,"tr",66),i()()()()),a&2){let e=c(2);u(8),p(e.formatNumber((e.inventoryValuationReport.summary==null?null:e.inventoryValuationReport.summary.totalItems)||0)),u(9),p(e.formatNumber((e.inventoryValuationReport.summary==null?null:e.inventoryValuationReport.summary.totalQuantity)||0)),u(9),p(e.formatCurrency((e.inventoryValuationReport.summary==null?null:e.inventoryValuationReport.summary.totalCostValue)||0)),u(9),p(e.formatCurrency((e.inventoryValuationReport.summary==null?null:e.inventoryValuationReport.summary.totalSellingValue)||0)),u(24),d("ngForOf",e.inventoryValuationReport.valuations)}}function Ho(a,t){if(a&1&&(n(0,"div")(1,"div",57)(2,"div",126)(3,"div",99)(4,"h5",50),l(5,"i",127),r(6," \u062A\u0642\u0631\u064A\u0631 \u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 "),i(),f(7,Go,1,0,"div",101),i()(),n(8,"div",22),f(9,$o,60,5,"div",33),i()()()),a&2){let e=c();u(7),d("ngIf",e.isLoadingValuation),u(2),d("ngIf",!e.isLoadingValuation&&e.inventoryValuationReport)}}function qo(a,t){a&1&&l(0,"div",104)}function zo(a,t){a&1&&(n(0,"span",170),l(1,"i",120),r(2," \u0623\u062F\u0646\u0649 \u0645\u0646 \u0645\u0633\u062A\u0648\u0649 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0637\u0644\u0628 "),i())}function Yo(a,t){a&1&&(n(0,"span",171),l(1,"i",172),r(2," \u0645\u062E\u0632\u0648\u0646 \u0645\u0646\u062E\u0641\u0636 "),i())}function Qo(a,t){if(a&1&&(n(0,"tr",67)(1,"td",110)(2,"div",111)(3,"div",165),l(4,"i",113),i(),n(5,"div")(6,"div",114),r(7),i(),n(8,"div",148),r(9),i()()()(),n(10,"td",123),r(11),i(),n(12,"td",121)(13,"span",166),r(14),i()(),n(15,"td",123)(16,"span",167),r(17),i()(),n(18,"td",69),f(19,zo,3,0,"span",168)(20,Yo,3,0,"span",169),i(),n(21,"td",123),r(22),i(),n(23,"td",123),r(24),i(),n(25,"td",125),r(26),i()()),a&2){let e=t.$implicit,o=c(3);u(7),p(e.productNameAr),u(2),p(e.productCode),u(2),p(e.storeNameAr),u(),d("ngClass",o.getSeverityClass(e.currentQuantity,o.threshold)),u(),d("ngClass",e.currentQuantity===0?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),u(),b(" ",o.formatNumber(e.currentQuantity)," "),u(3),b(" ",o.formatNumber(e.reorderLevel)," "),u(2),d("ngIf",e.isBelowReorderLevel),u(),d("ngIf",!e.isBelowReorderLevel),u(2),p(o.formatCurrency(e.unitCost)),u(2),p(o.formatCurrency(e.unitSellingPrice)),u(2),p(o.formatDate(e.lastUpdated))}}function Ko(a,t){if(a&1&&(n(0,"div")(1,"div",128)(2,"div",153)(3,"div",130)(4,"div")(5,"p",154),r(6,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u0645\u0646\u062E\u0641\u0636\u0629"),i(),n(7,"p",132),r(8),i()(),n(9,"div",155),l(10,"i",156),i()()(),n(11,"div",157)(12,"div",130)(13,"div")(14,"p",158),r(15,"\u0623\u062F\u0646\u0649 \u0645\u0646 \u0645\u0633\u062A\u0648\u0649 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0637\u0644\u0628"),i(),n(16,"p",132),r(17),i()(),n(18,"div",159),l(19,"i",160),i()()(),n(20,"div",161)(21,"div",130)(22,"div")(23,"p",162),r(24,"\u0646\u0627\u0641\u062F \u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i(),n(25,"p",132),r(26),i()(),n(27,"div",163),l(28,"i",164),i()()(),n(29,"div",129)(30,"div",130)(31,"div")(32,"p",131),r(33,"\u0627\u0644\u0642\u064A\u0645\u0629 \u0627\u0644\u0645\u0642\u062F\u0631\u0629"),i(),n(34,"p",132),r(35),i()(),n(36,"div",133),l(37,"i",142),i()()()(),n(38,"div",60)(39,"table",61)(40,"thead",62)(41,"tr")(42,"th",63),r(43,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(44,"th",63),r(45,"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),n(46,"th",63),r(47,"\u0627\u0644\u0643\u0645\u064A\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629"),i(),n(48,"th",63),r(49,"\u0645\u0633\u062A\u0648\u0649 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0637\u0644\u0628"),i(),n(50,"th",63),r(51,"\u0627\u0644\u062D\u0627\u0644\u0629"),i(),n(52,"th",63),r(53,"\u0633\u0639\u0631 \u0627\u0644\u062A\u0643\u0644\u0641\u0629"),i(),n(54,"th",63),r(55,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639"),i(),n(56,"th",63),r(57,"\u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B"),i()()(),n(58,"tbody",65),f(59,Qo,27,12,"tr",66),i()()()()),a&2){let e=c(2);u(8),p(e.formatNumber((e.lowStockReport.summary==null?null:e.lowStockReport.summary.totalLowStockItems)||0)),u(9),p(e.formatNumber((e.lowStockReport.summary==null?null:e.lowStockReport.summary.belowReorderLevel)||0)),u(9),p(e.formatNumber((e.lowStockReport.summary==null?null:e.lowStockReport.summary.zeroStockItems)||0)),u(9),p(e.formatCurrency((e.lowStockReport.summary==null?null:e.lowStockReport.summary.totalEstimatedValue)||0)),u(24),d("ngForOf",e.lowStockReport.lowStockItems)}}function Jo(a,t){if(a&1&&(n(0,"div")(1,"div",57)(2,"div",151)(3,"div",99)(4,"h5",50),l(5,"i",152),r(6," \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0645\u0646\u062E\u0641\u0636 "),i(),f(7,qo,1,0,"div",101),i()(),n(8,"div",22),f(9,Ko,60,5,"div",33),i()()()),a&2){let e=c();u(7),d("ngIf",e.isLoadingLowStock),u(2),d("ngIf",!e.isLoadingLowStock&&e.lowStockReport)}}function Xo(a,t){a&1&&l(0,"div",104)}function Zo(a,t){a&1&&(n(0,"div",105)(1,"div",106),l(2,"i",175),i(),n(3,"h4",108),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u062A\u062C\u0627\u0647\u0627\u062A"),i(),n(5,"p",109),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u062A\u062C\u0627\u0647\u0627\u062A \u0645\u062A\u0627\u062D\u0629"),i()())}function eu(a,t){if(a&1&&(n(0,"span",183),r(1),i()),a&2){let e=t.$implicit;u(),q(" ",e.transactionType,": ",e.transactionCount," ")}}function tu(a,t){if(a&1&&(n(0,"tr",67)(1,"td",176)(2,"div",111)(3,"div",177),l(4,"i",178),i(),r(5),i()(),n(6,"td",116),r(7),i(),n(8,"td",123)(9,"span",124),r(10),i()(),n(11,"td",71)(12,"span",179),r(13),i()(),n(14,"td",180),r(15),i(),n(16,"td",123)(17,"div",181),f(18,eu,2,2,"span",182),i()()()),a&2){let e=t.$implicit,o=c(3);u(5),b(" ",e.month," "),u(2),p(e.year),u(3),b(" ",o.formatNumber(e.totalTransactions)," "),u(3),b(" ",o.formatNumber(e.totalQuantity)," "),u(2),b(" ",o.formatCurrency(e.totalValue)," "),u(3),d("ngForOf",e.transactionTypes)}}function iu(a,t){if(a&1&&(n(0,"div",60)(1,"table",61)(2,"thead",62)(3,"tr")(4,"th",63),r(5,"\u0627\u0644\u0634\u0647\u0631"),i(),n(6,"th",63),r(7,"\u0627\u0644\u0633\u0646\u0629"),i(),n(8,"th",63),r(9,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"),i(),n(10,"th",63),r(11,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(12,"th",63),r(13,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0642\u064A\u0645\u0629"),i(),n(14,"th",63),r(15,"\u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"),i()()(),n(16,"tbody",65),f(17,tu,19,6,"tr",66),i()()()),a&2){let e=c(2);u(17),d("ngForOf",e.transactionTrends)}}function nu(a,t){if(a&1&&(n(0,"div")(1,"div",57)(2,"div",173)(3,"div",99)(4,"h5",50),l(5,"i",174),r(6," \u062A\u0642\u0631\u064A\u0631 \u0627\u062A\u062C\u0627\u0647\u0627\u062A \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A "),i(),f(7,Xo,1,0,"div",101),i()(),n(8,"div",22),f(9,Zo,7,0,"div",102)(10,iu,18,1,"div",103),i()()()),a&2){let e=c();u(7),d("ngIf",e.isLoadingTrends),u(2),d("ngIf",!e.isLoadingTrends&&e.transactionTrends.length===0),u(),d("ngIf",!e.isLoadingTrends&&e.transactionTrends.length>0)}}function ru(a,t){a&1&&l(0,"div",104)}function ou(a,t){a&1&&(n(0,"div",105)(1,"div",106),l(2,"i",186),i(),n(3,"h4",108),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0645\u0646\u062A\u062C\u0627\u062A"),i(),n(5,"p",109),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0628\u064A\u0627\u0646\u0627\u062A \u0645\u0646\u062A\u062C\u0627\u062A \u0645\u062A\u0627\u062D\u0629"),i()())}function uu(a,t){if(a&1&&(n(0,"tr",67)(1,"td",74)(2,"span",187),r(3),i()(),n(4,"td",110)(5,"div",111)(6,"div",188),l(7,"i",113),i(),n(8,"div")(9,"div",114),r(10),i(),n(11,"div",115),r(12),i()()()(),n(13,"td",116),r(14),i(),n(15,"td",123)(16,"span",124),r(17),i()(),n(18,"td",189)(19,"span",179),r(20),i()(),n(21,"td",117)(22,"div",111),l(23,"i",118),r(24),i()(),n(25,"td",119)(26,"div",111),l(27,"i",120),r(28),i()(),n(29,"td",121)(30,"div",111),l(31,"i",122),r(32),i()(),n(33,"td",150),r(34),i(),n(35,"td",125),r(36),i()()),a&2){let e=t.$implicit,o=t.index,s=c(3);u(2),d("ngClass",o<3?"bg-gradient-to-br from-yellow-500 to-orange-600":"bg-gray-500"),u(),b(" ",o+1," "),u(7),p(e.productNameAr),u(2),p(e.productNameEn),u(2),p(e.productCode),u(3),b(" ",s.formatNumber(e.totalTransactions)," "),u(3),b(" ",s.formatNumber(e.totalQuantityMoved)," "),u(4),b(" ",s.formatNumber(e.totalIn)," "),u(4),b(" ",s.formatNumber(e.totalOut)," "),u(),d("ngClass",s.getMovementClass(e.netMovement)),u(2),K(s.getMovementIcon(e.netMovement)),u(),b(" ",s.formatNumber(e.netMovement)," "),u(2),b(" ",s.formatCurrency(e.totalValue)," "),u(2),p(s.formatDate(e.lastTransactionDate))}}function au(a,t){if(a&1&&(n(0,"div",60)(1,"table",61)(2,"thead",62)(3,"tr")(4,"th",63),r(5,"\u0627\u0644\u062A\u0631\u062A\u064A\u0628"),i(),n(6,"th",63),r(7,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(8,"th",63),r(9,"\u0627\u0644\u0643\u0648\u062F"),i(),n(10,"th",63),r(11,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"),i(),n(12,"th",63),r(13,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0645\u064A\u0629 \u0627\u0644\u0645\u062A\u062D\u0631\u0643\u0629"),i(),n(14,"th",63),r(15,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062F\u0627\u062E\u0644"),i(),n(16,"th",63),r(17,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062E\u0627\u0631\u062C"),i(),n(18,"th",63),r(19,"\u0635\u0627\u0641\u064A \u0627\u0644\u062D\u0631\u0643\u0629"),i(),n(20,"th",63),r(21,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0642\u064A\u0645\u0629"),i(),n(22,"th",63),r(23,"\u0622\u062E\u0631 \u0645\u0639\u0627\u0645\u0644\u0629"),i()()(),n(24,"tbody",65),f(25,uu,37,15,"tr",66),i()()()),a&2){let e=c(2);u(25),d("ngForOf",e.topMovingProducts)}}function lu(a,t){if(a&1&&(n(0,"div")(1,"div",57)(2,"div",184)(3,"div",99)(4,"h5",50),l(5,"i",185),r(6," \u062A\u0642\u0631\u064A\u0631 \u0623\u0643\u062B\u0631 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u062D\u0631\u0643\u0629 "),i(),f(7,ru,1,0,"div",101),i()(),n(8,"div",22),f(9,ou,7,0,"div",102)(10,au,26,1,"div",103),i()()()),a&2){let e=c();u(7),d("ngIf",e.isLoadingTopProducts),u(2),d("ngIf",!e.isLoadingTopProducts&&e.topMovingProducts.length===0),u(),d("ngIf",!e.isLoadingTopProducts&&e.topMovingProducts.length>0)}}var oi=class a{constructor(t,e,o,s,m,E,I){this.productService=t;this.inventoryTransactionService=e;this.lang=o;this.printService=s;this.toastr=m;this.route=E;this.authService=I;this.stores=this.route.snapshot.data.StoresResolver}ngOnInit(){this.loadProducts(),this.route.queryParams.subscribe(t=>{t.tab&&this.setActiveTab(t.tab)})}printSection;printAllSection;products$;pageIndex=1;pageSize=8;totalPages=1;totalPagesArray=[];today=new Date;currentPrintData=[];isPrintingAll=!1;stores=[];storeId=1;activeTab="inventory";stockMovementReport=[];inventoryValuationReport=null;lowStockReport=null;transactionTrends=[];topMovingProducts=[];isLoadingStockMovement=!1;isLoadingValuation=!1;isLoadingLowStock=!1;isLoadingTrends=!1;isLoadingTopProducts=!1;fromDate=null;toDate=null;threshold=10;months=6;topCount=10;loadProducts(){this.products$=this.productService.GetProductsPagination(this.pageIndex,this.pageSize).pipe(ke(t=>{this.totalPages=Math.ceil(t.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(e,o)=>o+1)}),Me(t=>{let e=t.products.filter(o=>this.authService.hasProduct(o.id));return Oe(se({},t),{products:e,totals:e.length})}))}getTotalQuantity(t){return!t.inventories||t.inventories.length===0?0:this.storeId>0?t.inventories.filter(e=>e.storeId===this.storeId).reduce((e,o)=>e+(o.quantity||0),0):t.inventories.reduce((e,o)=>e+(o.quantity||0),0)}getStoreName(t){let e=this.stores.find(s=>s.id===t);return e&&(this.lang.currentLang==="ar"?e.nameAr:e.nameEn||e.nameAr)||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}getFilteredProducts(){return[]}changePage(t){t<1||t>this.totalPages||(this.pageIndex=t,this.loadProducts())}getPageRange(){let e=[],o=Math.max(2,this.pageIndex-2),s=Math.min(this.totalPages-1,this.pageIndex+2);for(let m=o;m<=s;m++)e.push(m);return e}printCurrentPage(){this.printSection&&this.printService.printHtml(this.printSection.nativeElement.innerHTML)}printAllPages(){this.productService.GetProducts().subscribe({next:t=>{let e=t.filter(o=>this.authService.hasProduct(o.id));this.currentPrintData=e,setTimeout(()=>{this.printAllSection&&this.printService.printHtml(this.printAllSection.nativeElement.innerHTML)},500)},error:t=>{this.toastr.error("Failed to load all products","Error"),this.isPrintingAll=!1}})}setActiveTab(t){switch(this.activeTab=t,t!=="inventory"&&(!this.fromDate||!this.toDate)&&(this.toDate=new Date,this.fromDate=new Date,this.fromDate.setDate(this.fromDate.getDate()-30)),t){case"stock-movement":this.loadStockMovementReport();break;case"valuation":this.loadInventoryValuationReport();break;case"low-stock":this.loadLowStockReport();break;case"trends":this.loadTransactionTrends();break;case"top-products":this.loadTopMovingProducts();break}}loadStockMovementReport(){return we(this,null,function*(){this.isLoadingStockMovement=!0;try{let t=this.fromDate instanceof Date?this.fromDate:this.fromDate?new Date(this.fromDate):void 0,e=this.toDate instanceof Date?this.toDate:this.toDate?new Date(this.toDate):void 0;this.stockMovementReport=(yield this.inventoryTransactionService.GetStockMovementReport(this.storeId>0?this.storeId:void 0,t,e).toPromise())||[]}catch{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u062D\u0631\u0643\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646","\u062E\u0637\u0623")}finally{this.isLoadingStockMovement=!1}})}loadInventoryValuationReport(){return we(this,null,function*(){this.isLoadingValuation=!0;try{this.inventoryValuationReport=yield this.inventoryTransactionService.GetInventoryValuationReport(this.storeId>0?this.storeId:void 0).toPromise()}catch{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0645\u062E\u0632\u0648\u0646","\u062E\u0637\u0623")}finally{this.isLoadingValuation=!1}})}loadLowStockReport(){return we(this,null,function*(){this.isLoadingLowStock=!0;try{this.lowStockReport=yield this.inventoryTransactionService.GetLowStockReport(this.threshold,this.storeId>0?this.storeId:void 0).toPromise()}catch{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0645\u0646\u062E\u0641\u0636","\u062E\u0637\u0623")}finally{this.isLoadingLowStock=!1}})}loadTransactionTrends(){return we(this,null,function*(){this.isLoadingTrends=!0;try{this.transactionTrends=(yield this.inventoryTransactionService.GetTransactionTrends(this.storeId>0?this.storeId:void 0,void 0,this.months).toPromise())||[]}catch{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0627\u062A\u062C\u0627\u0647\u0627\u062A","\u062E\u0637\u0623")}finally{this.isLoadingTrends=!1}})}loadTopMovingProducts(){return we(this,null,function*(){this.isLoadingTopProducts=!0;try{let t=this.fromDate instanceof Date?this.fromDate:this.fromDate?new Date(this.fromDate):void 0,e=this.toDate instanceof Date?this.toDate:this.toDate?new Date(this.toDate):void 0;this.topMovingProducts=(yield this.inventoryTransactionService.GetTopMovingProducts(this.storeId>0?this.storeId:void 0,t,e,this.topCount).toPromise())||[]}catch{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u0623\u0643\u062B\u0631 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u062D\u0631\u0643\u0629","\u062E\u0637\u0623")}finally{this.isLoadingTopProducts=!1}})}onFilterChange(){this.activeTab==="inventory"?this.loadProducts():this.setActiveTab(this.activeTab)}onFromDateChange(t){this.fromDate=t?new Date(t):null,this.onFilterChange()}onToDateChange(t){this.toDate=t?new Date(t):null,this.onFilterChange()}formatCurrency(t){return new Intl.NumberFormat("en-JO",{style:"currency",currency:"JOD",minimumFractionDigits:2}).format(t)}formatNumber(t){return new Intl.NumberFormat("en-JO").format(t)}formatDate(t){return new Date(t).toLocaleDateString("en-JO",{year:"numeric",month:"2-digit",day:"2-digit",calendar:"gregory"})}getSeverityClass(t,e){return t===0?"text-danger":t<=e?"text-warning":"text-success"}getMovementClass(t){return t>0?"text-success":t<0?"text-danger":"text-muted"}getMovementIcon(t){return t>0?"bi bi-arrow-up":t<0?"bi bi-arrow-down":"bi bi-minus"}static \u0275fac=function(e){return new(e||a)(v(Ee),v(Et),v(G),v(bt),v(ee),v(k),v(ce))};static \u0275cmp=A({type:a,selectors:[["app-inventory-report",8,"component"]],viewQuery:function(e,o){if(e&1&&(Je(uo,5),Je(ao,5)),e&2){let s;Xe(s=Ze())&&(o.printSection=s.first),Xe(s=Ze())&&(o.printAllSection=s.first)}},standalone:!1,attrs:lo,decls:104,vars:37,consts:[["printAllSection",""],["printSection",""],["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-indigo-50","to-purple-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","lg:flex-row","justify-between","items-start","lg:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-4","lg:mt-0","flex","flex-col","sm:flex-row","gap-4"],[1,"flex-1","min-w-48"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-transparent","transition-all","duration-200",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","mt-2 text-sm text-gray-600",4,"ngIf"],[1,"flex","gap-2"],[1,"inline-flex","items-center","px-4","py-3","bg-gray-600","text-white","rounded-xl","font-semibold","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200",3,"click"],[1,"bi","bi-printer","mr-2"],[1,"inline-flex","items-center","px-4","py-3","bg-indigo-600","text-white","rounded-xl","font-semibold","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","transition-all","duration-200",3,"click"],[1,"bi","bi-printer-fill","mr-2"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden","mb-8"],[1,"bg-gradient-to-r","from-indigo-500","to-purple-600","px-6","py-4"],[1,"text-xl","font-semibold","text-white"],[1,"p-6"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-4"],[1,"flex","flex-col","items-center","p-4","rounded-xl","border-2","transition-all","duration-200","hover:scale-105",3,"click","ngClass"],[1,"bi","bi-box-seam","text-2xl","mb-2"],[1,"text-sm","font-medium"],[1,"bi","bi-arrow-left-right","text-2xl","mb-2"],[1,"bi","bi-currency-dollar","text-2xl","mb-2"],[1,"bi","bi-exclamation-triangle","text-2xl","mb-2"],[1,"bi","bi-graph-up","text-2xl","mb-2"],[1,"bi","bi-trophy","text-2xl","mb-2"],["class","bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-8",4,"ngIf"],[4,"ngIf"],["class","mt-8 flex justify-center",4,"ngIf"],["style","display: none;",4,"ngIf"],[2,"display","none"],[1,"p-4",3,"dir"],[1,"text-center","my-3"],[1,"w-full","border-collapse","border","border-gray-300","text-sm"],[1,"bg-gray-100"],[1,"border","border-gray-300","px-2","py-1","text-center"],[1,"border","border-gray-300","px-2","py-1","text-right"],["class","border-b border-gray-200",4,"ngFor","ngForOf"],[1,"bg-gray-50","font-bold"],["colspan","7",1,"border","border-gray-300","px-2","py-1","text-right"],[1,"border","border-gray-300","px-2","py-1"],[1,"mt-2","text-sm","text-gray-600"],[1,"bi","bi-info-circle","mr-1"],[1,"bg-gradient-to-r","from-gray-500","to-gray-600","px-6","py-4"],[1,"text-lg","font-semibold","text-white","flex","items-center"],[1,"bi","bi-funnel","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],["type","date",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-transparent","transition-all","duration-200",3,"ngModelChange","ngModel"],["type","number","min","0",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-transparent","transition-all","duration-200",3,"ngModelChange","change","ngModel"],["type","number","min","1","max","12",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-transparent","transition-all","duration-200",3,"ngModelChange","change","ngModel"],["type","number","min","1","max","50",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-transparent","transition-all","duration-200",3,"ngModelChange","change","ngModel"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden"],[1,"text-xl","font-semibold","text-white","flex","items-center"],[1,"bi","bi-box-seam","mr-3"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["class","bg-white divide-y divide-gray-200",4,"ngIf"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm"],[1,"text-indigo-600","hover:text-indigo-900","font-medium",3,"routerLink"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","font-semibold"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-600"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","text-right"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-center"],[1,"flex","items-center","justify-center"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium","bg-green-100","text-green-800"],[1,"bi","bi-boxes","mr-2"],[1,"mr-1","text-gray-500"],["class","text-xs text-gray-500 mt-1",4,"ngIf"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"bi","mr-1",3,"ngClass"],[1,"text-xs","text-gray-500","mt-1"],[1,"mt-8","flex","justify-center"],["aria-label","Page navigation"],[1,"flex","items-center","space-x-1"],[1,"px-3","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-r-md","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-3","py-2","text-sm","font-medium","border","border-gray-300","hover:bg-gray-50",3,"click"],[4,"ngFor","ngForOf"],[1,"px-3","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-l-md","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-3","py-2","text-sm","text-gray-500","bg-white","border","border-gray-300"],["dir","rtl",1,"p-4"],[1,"mt-5","text-center","small"],[1,"mb-1"],[1,"mb-0"],[1,"border-b","border-gray-200"],[1,"text-gray-500","block"],[1,"px-2","py-1","rounded","text-xs","font-medium"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","px-6","py-4"],[1,"flex","justify-between","items-center"],[1,"bi","bi-arrow-left-right","mr-3"],["class","w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"w-6","h-6","border-2","border-white","border-t-transparent","rounded-full","animate-spin"],[1,"text-center","py-12"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-inbox","text-gray-400","text-2xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"w-10","h-10","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-box","text-white","text-sm"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","font-mono"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-green-600","font-semibold"],[1,"bi","bi-arrow-up","mr-1"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-red-600","font-semibold"],[1,"bi","bi-arrow-down","mr-1"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-semibold",3,"ngClass"],[1,"mr-1"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"bg-gradient-to-r","from-green-500","to-emerald-600","px-6","py-4"],[1,"bi","bi-currency-dollar","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-gradient-to-br","from-blue-500","to-blue-600","rounded-2xl","p-6","text-white"],[1,"flex","items-center","justify-between"],[1,"text-blue-100","text-sm","font-medium","mb-1"],[1,"text-3xl","font-bold"],[1,"w-12","h-12","bg-blue-400","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-box-seam","text-white","text-xl"],[1,"bg-gradient-to-br","from-green-500","to-green-600","rounded-2xl","p-6","text-white"],[1,"text-green-100","text-sm","font-medium","mb-1"],[1,"w-12","h-12","bg-green-400","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-clipboard-data","text-white","text-xl"],[1,"bg-gradient-to-br","from-purple-500","to-purple-600","rounded-2xl","p-6","text-white"],[1,"text-purple-100","text-sm","font-medium","mb-1"],[1,"w-12","h-12","bg-purple-400","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-currency-dollar","text-white","text-xl"],[1,"bg-gradient-to-br","from-orange-500","to-orange-600","rounded-2xl","p-6","text-white"],[1,"text-orange-100","text-sm","font-medium","mb-1"],[1,"w-12","h-12","bg-orange-400","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-graph-up","text-white","text-xl"],[1,"w-10","h-10","bg-gradient-to-br","from-green-500","to-emerald-600","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"text-sm","text-gray-500","font-mono"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-blue-600","font-semibold"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-orange-600","font-semibold"],[1,"bg-gradient-to-r","from-red-500","to-pink-600","px-6","py-4"],[1,"bi","bi-exclamation-triangle","mr-3"],[1,"bg-gradient-to-br","from-red-500","to-red-600","rounded-2xl","p-6","text-white"],[1,"text-red-100","text-sm","font-medium","mb-1"],[1,"w-12","h-12","bg-red-400","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-exclamation-triangle","text-white","text-xl"],[1,"bg-gradient-to-br","from-yellow-500","to-yellow-600","rounded-2xl","p-6","text-white"],[1,"text-yellow-100","text-sm","font-medium","mb-1"],[1,"w-12","h-12","bg-yellow-400","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-arrow-down","text-white","text-xl"],[1,"bg-gradient-to-br","from-gray-800","to-gray-900","rounded-2xl","p-6","text-white"],[1,"text-gray-300","text-sm","font-medium","mb-1"],[1,"w-12","h-12","bg-gray-600","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-x-circle","text-white","text-xl"],[1,"w-10","h-10","bg-gradient-to-br","from-red-500","to-pink-600","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-800"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",4,"ngIf"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",4,"ngIf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-yellow-100","text-yellow-800"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-red-100","text-red-800"],[1,"bi","bi-exclamation-triangle","mr-1"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600","px-6","py-4"],[1,"bi","bi-graph-up","mr-3"],[1,"bi","bi-graph-up","text-gray-400","text-2xl"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-semibold","text-gray-900"],[1,"w-8","h-8","bg-gradient-to-br","from-purple-500","to-pink-600","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-calendar","text-white","text-xs"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-green-100","text-green-800"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-purple-600","font-semibold"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-800"],[1,"bg-gradient-to-r","from-yellow-500","to-orange-600","px-6","py-4"],[1,"bi","bi-trophy","mr-3"],[1,"bi","bi-trophy","text-gray-400","text-2xl"],[1,"inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-sm","font-bold","text-white",3,"ngClass"],[1,"w-10","h-10","bg-gradient-to-br","from-yellow-500","to-orange-600","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","font-bold"]],template:function(e,o){if(e&1){let s=C();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"h1",5),r(5),g(6,"translate"),i(),n(7,"p",6),r(8,"\u062A\u0642\u0627\u0631\u064A\u0631 \u0634\u0627\u0645\u0644\u0629 \u0648\u0645\u0641\u0635\u0644\u0629 \u0644\u0644\u0645\u062E\u0632\u0648\u0646 \u0648\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A"),i()(),n(9,"div",7)(10,"div",8)(11,"label",9),r(12,"\u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),n(13,"select",10),ue("ngModelChange",function(E){return y(s),oe(o.storeId,E)||(o.storeId=E),_(E)}),x("change",function(){return y(s),_(o.onFilterChange())}),n(14,"option",11),r(15,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i(),f(16,mo,2,2,"option",12),i(),f(17,co,3,1,"div",13)(18,po,3,0,"div",13),i(),n(19,"div",14)(20,"button",15),x("click",function(){return y(s),_(o.printCurrentPage())}),l(21,"i",16),r(22," \u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 "),i(),n(23,"button",17),x("click",function(){return y(s),_(o.printAllPages())}),l(24,"i",18),r(25," \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0643\u0644 "),i()()()(),n(26,"div",19)(27,"div",20)(28,"h2",21),r(29,"\u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u062A\u0642\u0627\u0631\u064A\u0631"),i()(),n(30,"div",22)(31,"div",23)(32,"button",24),x("click",function(){return y(s),_(o.setActiveTab("inventory"))}),l(33,"i",25),n(34,"span",26),r(35,"\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u062C\u0631\u062F"),i()(),n(36,"button",24),x("click",function(){return y(s),_(o.setActiveTab("stock-movement"))}),l(37,"i",27),n(38,"span",26),r(39,"\u062D\u0631\u0643\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i()(),n(40,"button",24),x("click",function(){return y(s),_(o.setActiveTab("valuation"))}),l(41,"i",28),n(42,"span",26),r(43,"\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i()(),n(44,"button",24),x("click",function(){return y(s),_(o.setActiveTab("low-stock"))}),l(45,"i",29),n(46,"span",26),r(47,"\u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0645\u0646\u062E\u0641\u0636"),i()(),n(48,"button",24),x("click",function(){return y(s),_(o.setActiveTab("trends"))}),l(49,"i",30),n(50,"span",26),r(51,"\u0627\u0644\u0627\u062A\u062C\u0627\u0647\u0627\u062A"),i()(),n(52,"button",24),x("click",function(){return y(s),_(o.setActiveTab("top-products"))}),l(53,"i",31),n(54,"span",26),r(55,"\u0623\u0643\u062B\u0631 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u062D\u0631\u0643\u0629"),i()()()()(),f(56,ho,12,5,"div",32)(57,Eo,30,3,"div",33)(58,Fo,16,8,"div",34),i(),f(59,ko,37,11,"div",35),g(60,"async"),i(),n(61,"div",36,0)(63,"div",37),f(64,Ro,2,0,"ng-container",33),n(65,"h4",38),r(66),g(67,"translate"),g(68,"date"),i(),n(69,"table",39)(70,"thead")(71,"tr",40)(72,"th",41),r(73,"#"),i(),n(74,"th",42),r(75,"\u0627\u0644\u0643\u0648\u062F"),i(),n(76,"th",42),r(77,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(78,"th",42),r(79,"\u0627\u0644\u0635\u0646\u0641"),i(),n(80,"th",42),r(81,"\u0627\u0644\u0648\u062D\u062F\u0629"),i(),n(82,"th",42),r(83,"\u0633\u0639\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),i(),n(84,"th",42),r(85,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639"),i(),n(86,"th",41),r(87,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(88,"th",41),r(89,"\u0627\u0644\u062D\u0627\u0644\u0629"),i()()(),n(90,"tbody"),f(91,Do,25,18,"tr",43),n(92,"tr",44)(93,"td",45),r(94,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0623\u0635\u0646\u0627\u0641:"),i(),n(95,"td",41),r(96),i(),l(97,"td",46),i()()(),f(98,No,2,0,"ng-container",33),i()(),f(99,jo,11,3,"div",33)(100,Ho,10,2,"div",33)(101,Jo,10,2,"div",33)(102,nu,11,3,"div",33)(103,lu,11,3,"div",33)}e&2&&(u(5),p(h(6,28,"REPORTS.TITLE")),u(8),re("ngModel",o.storeId),u(),d("ngValue",0),u(2),d("ngForOf",o.stores),u(),d("ngIf",o.storeId>0),u(),d("ngIf",o.storeId===0),u(14),d("ngClass",o.activeTab==="inventory"?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"),u(4),d("ngClass",o.activeTab==="stock-movement"?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"),u(4),d("ngClass",o.activeTab==="valuation"?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"),u(4),d("ngClass",o.activeTab==="low-stock"?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"),u(4),d("ngClass",o.activeTab==="trends"?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"),u(4),d("ngClass",o.activeTab==="top-products"?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"),u(4),d("ngIf",o.activeTab!=="inventory"),u(),d("ngIf",o.activeTab==="inventory"),u(),d("ngIf",o.activeTab==="inventory"),u(),d("ngIf",h(60,30,o.products$)),u(4),d("dir",o.lang.currentLang==="ar"?"rtl":"ltr"),u(),d("ngIf",o.storeId),u(2),q(" ",h(67,32,"REPORTS.INVENTORYREPORT")," \u2014 Printed on: ",Q(68,34,o.today,"short")," "),u(25),d("ngForOf",o.currentPrintData),u(5),p(o.currentPrintData.length),u(2),d("ngIf",o.storeId),u(),d("ngIf",o.activeTab==="stock-movement"),u(),d("ngIf",o.activeTab==="valuation"),u(),d("ngIf",o.activeTab==="low-stock"),u(),d("ngIf",o.activeTab==="trends"),u(),d("ngIf",o.activeTab==="top-products"))},dependencies:[fe,F,w,mn,M,X,Z,V,xe,J,D,Ce,gt,Re,At,wt,me,Se,_e,ve],styles:[".status-cell[_ngcontent-%COMP%]{font-weight:700;color:#fff;text-align:center;padding:8px 12px;border-radius:4px}.page-link.btn[_ngcontent-%COMP%]{padding:.375rem .75rem;line-height:1.5}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#0000000d}.badge[_ngcontent-%COMP%]{font-size:.85rem}@media print{body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}#print-section[_ngcontent-%COMP%], #print-section[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible}#print-section[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%}.table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #000!important;padding:6px;font-size:12px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2!important}.text-danger[_ngcontent-%COMP%]{color:red!important}.bg-success[_ngcontent-%COMP%]{background-color:green!important;color:#fff!important}.bg-secondary[_ngcontent-%COMP%]{background-color:gray!important;color:#fff!important}h4[_ngcontent-%COMP%]{margin-bottom:20px}}"]})};var ui=class a{transform(t){return t.reduce((e,o)=>e+o.quantityChanged,0)}static \u0275fac=function(e){return new(e||a)};static \u0275pipe=en({name:"getQuantityChangedSum",type:a,pure:!0,standalone:!1})};var du=["printSection"],mu=["class","component"];function cu(a,t){if(a&1&&(n(0,"option",9),r(1),i()),a&2){let e=t.$implicit,o=c();d("ngValue",e.id),u(),b(" ",o.lang.currentLang==="ar"?e.nameAr:e.nameEn," ")}}function pu(a,t){if(a&1&&(n(0,"strong"),r(1),n(2,"small",33),r(3),i()()),a&2){let e=t.$implicit,o=c(2).$implicit,s=c(2);u(),b(" ",e.quantity," "),u(2),b(" ",s.lang.currentLang==="ar"?o.product.unit==null?null:o.product.unit.nameAr:o.product.unit==null?null:o.product.unit.nameEn," ")}}function gu(a,t){if(a&1&&(n(0,"div",31)(1,"span",32),r(2),g(3,"translate"),i(),n(4,"div",31)(5,"span",32),r(6),g(7,"translate"),i(),f(8,pu,4,2,"strong",27),i()()),a&2){let e=c().$implicit;u(2),p(h(3,3,"PRODUCTS.QUANTITYINSTOCK")),u(4),p(h(7,5,"PRODUCTS.QUANTITYINSTOCK")),u(2),d("ngForOf",e.product.inventories)}}function fu(a,t){if(a&1&&(n(0,"tr")(1,"td"),r(2),i(),n(3,"td"),r(4),g(5,"date"),i(),n(6,"td")(7,"span",28),r(8),i()(),n(9,"td"),r(10),i(),n(11,"td",29),r(12),i(),n(13,"td",29),f(14,gu,9,7,"div",30),i(),n(15,"td"),r(16),i()()),a&2){let e=t.$implicit,o=t.index,s=c(2);u(2),p((s.pageIndex-1)*s.pageSize+o+1),u(2),p(h(5,14,e.transactionDate)),u(3),N("bg-success",e.transactionType.code==="PURCHASE")("bg-danger",e.transactionType.code==="SALE"),u(),b(" ",s.lang.currentLang==="ar"?e.transactionType.nameAr:e.transactionType.nameEn," "),u(2),p(s.lang.currentLang==="ar"?e.product.nameAr:e.product.nameEn),u(),N("text-danger",e.quantityChanged<0),u(),q(" ",e.quantityChanged>0?"+":"","",e.quantityChanged," "),u(2),d("ngIf",e.product),u(2),p(e.notes)}}function bu(a,t){if(a&1&&(n(0,"tbody"),f(1,fu,17,16,"tr",27),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e.transactions)}}function xu(a,t){a&1&&(n(0,"div",34),r(1),g(2,"translate"),i()),a&2&&(u(),b(" ",h(2,1,"SHARED.NO_DATA")," "))}function vu(a,t){a&1&&(n(0,"li",35)(1,"span",36),r(2,"..."),i()())}function hu(a,t){if(a&1){let e=C();n(0,"li",21)(1,"button",22),x("click",function(){let s=y(e).$implicit,m=c();return _(m.changePage(s))}),r(2),i()()}if(a&2){let e=t.$implicit,o=c();N("active",e===o.pageIndex),u(2),b(" ",e," ")}}function yu(a,t){a&1&&(n(0,"li",35)(1,"span",36),r(2,"..."),i()())}function _u(a,t){if(a&1){let e=C();n(0,"li",21)(1,"button",22),x("click",function(){y(e);let s=c();return _(s.changePage(s.totalPages))}),r(2),i()()}if(a&2){let e=c();N("active",e.pageIndex===e.totalPages),u(2),b(" ",e.totalPages," ")}}function Su(a,t){if(a&1&&(n(0,"strong"),r(1),n(2,"small",33),r(3),i()()),a&2){let e=t.$implicit,o=c(2).$implicit,s=c(2);u(),b(" ",e.quantity," "),u(2),b(" ",s.lang.currentLang==="ar"?o.product.unit==null?null:o.product.unit.nameAr:o.product.unit==null?null:o.product.unit.nameEn," ")}}function Cu(a,t){if(a&1&&(n(0,"div",31)(1,"span",32),r(2),g(3,"translate"),i(),n(4,"div",31)(5,"span",32),r(6),g(7,"translate"),i(),f(8,Su,4,2,"strong",27),i()()),a&2){let e=c().$implicit;u(2),p(h(3,3,"PRODUCTS.QUANTITYINSTOCK")),u(4),p(h(7,5,"PRODUCTS.QUANTITYINSTOCK")),u(2),d("ngForOf",e.product.inventories)}}function Eu(a,t){if(a&1&&(n(0,"tr")(1,"td",29),r(2),i(),n(3,"td"),r(4),g(5,"date"),i(),n(6,"td",29)(7,"span",28),r(8),i()(),n(9,"td"),r(10),i(),n(11,"td",44),r(12),i(),n(13,"td",44),f(14,Cu,9,7,"div",30),i(),n(15,"td"),r(16),i()()),a&2){let e=t.$implicit,o=t.index,s=c(2);u(2),p(o+1),u(2),p(h(5,14,e.transactionDate)),u(3),N("bg-success",e.transactionType.code==="PURCHASE")("bg-danger",e.transactionType.code==="SALE"),u(),b(" ",s.lang.currentLang==="ar"?e.transactionType.nameAr:e.transactionType.nameEn," "),u(2),p(s.lang.currentLang==="ar"?e.product.nameAr:e.product.nameEn),u(),N("text-danger",e.quantityChanged<0),u(),q(" ",e.quantityChanged>0?"+":"","",e.quantityChanged," "),u(2),d("ngIf",e.product),u(2),p(e.notes)}}function Au(a,t){if(a&1&&(n(0,"div",37,0)(2,"div",38),Le(3),l(4,"app-company-header"),Be(),n(5,"h4",39),r(6),g(7,"translate"),i(),n(8,"table",40)(9,"thead")(10,"tr")(11,"th"),r(12,"#"),i(),n(13,"th"),r(14),g(15,"translate"),i(),n(16,"th"),r(17),g(18,"translate"),i(),n(19,"th"),r(20),g(21,"translate"),i(),n(22,"th"),r(23),g(24,"translate"),i(),n(25,"th"),r(26),g(27,"translate"),i(),n(28,"th"),r(29),g(30,"translate"),i()()(),n(31,"tbody"),f(32,Eu,17,16,"tr",27),i()(),n(33,"div",41)(34,"p",42),r(35),g(36,"getQuantityChangedSum"),i(),n(37,"p",43)(38,"strong"),r(39,"Final Balance:"),i(),r(40),i()(),Le(41),l(42,"app-company-footer"),Be(),i()()),a&2){let e=t.ngIf,o=c();u(2),d("dir",o.lang.currentLang==="ar"?"rtl":"ltr"),u(4),q(" ",h(7,12,"INVENTORYTRANSACTIONS.TITLE")," \u2013 Product ID: ",o.productId," "),u(8),p(h(15,14,"INVENTORYTRANSACTIONS.TRANSACTIONDATE")),u(3),p(h(18,16,"INVENTORYTRANSACTIONS.TRANSACTIONTYPEID")),u(3),p(h(21,18,"INVENTORYTRANSACTIONS.PRODUCTID")),u(3),p(h(24,20,"INVENTORYTRANSACTIONS.QUANTITYCHANGED")),u(3),p(h(27,22,"INVENTORYTRANSACTIONS.BALANCE")),u(3),p(h(30,24,"INVENTORYTRANSACTIONS.NOTES")),u(3),d("ngForOf",e.transactions),u(3),b("Total Movement: ",h(36,26,e.transactions)," "),u(5),b(" ",o.finalBalance," ")}}var ai=class a{constructor(t,e,o,s,m){this.route=t;this.inventoryTransactionService=e;this.lang=o;this.printService=s;this.router=m;this.stores=this.route.snapshot.data.StoresResolver}productId;transactions$;pageIndex=1;pageSize=8;totalPages=1;totalPagesArray=[];printSection;finalBalance=0;stores=[];storeId=1;ngOnInit(){this.productId=+this.route.snapshot.paramMap.get("id"),this.loadProductDetails()}loadProductDetails(){this.transactions$=this.inventoryTransactionService.GetTransactionByProductId(this.pageIndex,this.pageSize,this.productId,this.storeId).pipe(ke(t=>{this.totalPages=Math.ceil(t.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(e,o)=>o+1),t.transactions.length>0?this.finalBalance=t.transactions[t.transactions.length-1].quantityAfter:this.finalBalance=0}))}changePage(t){t<1||t>this.totalPages||(this.pageIndex=t,this.loadProductDetails())}getPageRange(){let e=[],o=Math.max(2,this.pageIndex-2),s=Math.min(this.totalPages-1,this.pageIndex+2);for(let m=o;m<=s;m++)e.push(m);return e}goBack(){this.router.navigate(["/admin/inventory-report"])}printTransactions(){this.printSection&&this.printService.printHtml(this.printSection.nativeElement.innerHTML)}static \u0275fac=function(e){return new(e||a)(v(k),v(Et),v(G),v(bt),v(T))};static \u0275cmp=A({type:a,selectors:[["app-transactions",8,"component"]],viewQuery:function(e,o){if(e&1&&Je(du,5),e&2){let s;Xe(s=Ze())&&(o.printSection=s.first)}},standalone:!1,attrs:mu,decls:61,vars:43,consts:[["printSection",""],[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4","flex-wrap"],["type","button",1,"btn","btn-link","p-0","text-decoration-none","d-flex","align-items-center",3,"click"],[1,"bi","bi-arrow-left-circle-fill","me-2","fs-5"],[1,"fw-bold","dark-mode-text","mb-0","flex-grow-1","text-center","text-md-start"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"p-2"],[1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","gap-2","w-sm-100"],["type","button",1,"btn","btn-outline-dark","d-flex","align-items-center",3,"click"],[1,"bi","bi-printer","me-1"],[1,"table-responsive","shadow-sm","rounded"],[1,"table","table-striped","table-hover","align-middle","mb-0"],[1,"table-light"],[4,"ngIf"],["class","alert alert-info text-center mt-4",4,"ngIf"],["aria-label","Page navigation",1,"mt-4","d-flex","justify-content-center"],[1,"pagination"],[1,"page-item"],[1,"page-link","btn",3,"click"],["class","page-item disabled",4,"ngIf"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["class","page-item",3,"active",4,"ngIf"],["style","display: none;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"badge"],[1,"text-center"],["class","d-flex justify-content-between mt-1",4,"ngIf"],[1,"d-flex","justify-content-between","mt-1"],[1,"text-muted"],[1,"text-muted","ms-1"],[1,"alert","alert-info","text-center","mt-4"],[1,"page-item","disabled"],[1,"page-link"],[2,"display","none"],[1,"p-4",3,"dir"],[1,"text-center","my-3"],[1,"table","table-bordered","small"],[1,"mt-5","text-center","small"],[1,"mb-1"],[1,"mb-0"],[1,"text-end"]],template:function(e,o){if(e&1&&(n(0,"div",1)(1,"div",2)(2,"button",3),x("click",function(){return o.goBack()}),l(3,"i",4),i(),n(4,"h4",5),r(5),g(6,"translate"),i(),n(7,"div",6)(8,"div",7)(9,"select",8),ue("ngModelChange",function(m){return oe(o.storeId,m)||(o.storeId=m),m}),x("change",function(){return o.loadProductDetails()}),n(10,"option",9),r(11,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0641\u0631\u0648\u0639"),i(),f(12,cu,2,2,"option",10),i()()(),n(13,"div",11)(14,"button",12),x("click",function(){return o.printTransactions()}),l(15,"i",13),i()()(),n(16,"div",14)(17,"table",15)(18,"thead",16)(19,"tr")(20,"th"),r(21,"#"),i(),n(22,"th"),r(23),g(24,"translate"),i(),n(25,"th"),r(26),g(27,"translate"),i(),n(28,"th"),r(29),g(30,"translate"),i(),n(31,"th"),r(32),g(33,"translate"),i(),n(34,"th"),r(35),g(36,"translate"),i(),n(37,"th"),r(38),g(39,"translate"),i()()(),f(40,bu,2,1,"tbody",17),g(41,"async"),i()(),f(42,xu,3,3,"div",18),g(43,"async"),n(44,"nav",19)(45,"ul",20)(46,"li",21)(47,"button",22),x("click",function(){return o.changePage(o.pageIndex-1)}),r(48,"\xAB"),i()(),n(49,"li",21)(50,"button",22),x("click",function(){return o.changePage(1)}),r(51,"1"),i()(),f(52,vu,3,0,"li",23)(53,hu,3,3,"li",24)(54,yu,3,0,"li",23)(55,_u,3,3,"li",25),n(56,"li",21)(57,"button",22),x("click",function(){return o.changePage(o.pageIndex+1)}),r(58,"\xBB"),i()()()()(),f(59,Au,43,28,"div",26),g(60,"async")),e&2){let s;u(5),b(" ",h(6,23,"INVENTORYTRANSACTIONS.TITLE")," "),u(4),re("ngModel",o.storeId),u(),d("ngValue",0),u(2),d("ngForOf",o.stores),u(11),p(h(24,25,"INVENTORYTRANSACTIONS.TRANSACTIONDATE")),u(3),p(h(27,27,"INVENTORYTRANSACTIONS.TRANSACTIONTYPEID")),u(3),p(h(30,29,"INVENTORYTRANSACTIONS.PRODUCTID")),u(3),p(h(33,31,"INVENTORYTRANSACTIONS.QUANTITYCHANGED")),u(3),p(h(36,33,"INVENTORYTRANSACTIONS.BALANCE")),u(3),p(h(39,35,"INVENTORYTRANSACTIONS.NOTES")),u(2),d("ngIf",h(41,37,o.transactions$)),u(2),d("ngIf",((s=h(43,39,o.transactions$))==null||s.transactions==null?null:s.transactions.length)===0),u(4),N("disabled",o.pageIndex===1),u(3),N("active",o.pageIndex===1),u(3),d("ngIf",o.pageIndex>4),u(),d("ngForOf",o.getPageRange()),u(),d("ngIf",o.pageIndex<o.totalPages-3),u(),d("ngIf",o.totalPages>1),u(),N("disabled",o.pageIndex>=o.totalPages||o.totalPages===0),u(3),d("ngIf",h(60,41,o.transactions$))}},dependencies:[F,w,M,X,Z,J,D,Re,At,wt,me,_e,ve,ui],encapsulation:2})};var li=class a{constructor(t){this.http=t}baseUrl=`${Y.baseUrl}/Reports`;getOrderSummary(t){return this.http.post(`${this.baseUrl}/order-summary`,t)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var Iu=a=>({"animate-spin":a}),Pu=(a,t)=>({"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":a,"bg-gray-100 text-gray-700 hover:bg-gray-200":t}),Fu=(a,t)=>({"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg":a,"bg-gray-100 text-gray-700 hover:bg-gray-200":t});function Ou(a,t){if(a&1){let e=C();Le(0),n(1,"button",30),x("click",function(){let s=y(e).$implicit,m=c();return _(m.onOrderTypeChange(s.id))}),r(2),g(3,"translate"),i(),Be()}if(a&2){let e=t.$implicit,o=c();u(),d("ngClass",pt(4,Pu,o.selectedOrderTypeId===e.id,o.selectedOrderTypeId!==e.id)),u(),b(" ",h(3,2,e.key)," ")}}function Tu(a,t){if(a&1){let e=C();n(0,"button",31),x("click",function(){let s=y(e).$implicit,m=c();return _(m.applyQuickRange(s))}),r(1),g(2,"translate"),i()}if(a&2){let e=t.$implicit,o=c();d("ngClass",pt(4,Fu,o.activeQuickRange===e.key,o.activeQuickRange!==e.key)),u(),b(" ",h(2,2,e.label)," ")}}function Mu(a,t){a&1&&(n(0,"div",32),l(1,"div",33),n(2,"p"),r(3),g(4,"translate"),i()()),a&2&&(u(3),p(h(4,1,"REPORTS.LOADING")))}function ku(a,t){if(a&1&&(n(0,"div",34),r(1),g(2,"translate"),i()),a&2){let e=c();u(),b(" ",h(2,1,e.errorMessage)," ")}}function Ru(a,t){if(a&1&&(n(0,"div",69)(1,"div")(2,"p",40),r(3),g(4,"date"),i(),n(5,"p",70),r(6),g(7,"translate"),i()(),n(8,"div",71),r(9),g(10,"number"),g(11,"translate"),i()()),a&2){let e=t.$implicit;u(3),p(h(4,5,e.date)),u(3),q("",e.orderCount," ",h(7,7,"REPORTS.ORDERS_SHORT")),u(3),q("",Q(10,9,e.totalAmount,"1.2-2")," ",h(11,12,"COMMON.CURRENCY"))}}function Du(a,t){if(a&1&&(n(0,"div",67),f(1,Ru,12,14,"div",68),i()),a&2){let e=c(2);u(),d("ngForOf",e.reportData==null?null:e.reportData.dailyBreakdown)}}function Nu(a,t){a&1&&(n(0,"div",72),r(1),g(2,"translate"),i()),a&2&&(u(),b(" ",h(2,1,"REPORTS.NO_DATA")," "))}function Vu(a,t){if(a&1&&(n(0,"div"),r(1),i()),a&2){let e=c().$implicit;u(),p(e.customerName)}}function Lu(a,t){if(a&1&&(n(0,"div"),r(1),i()),a&2){let e=c().$implicit;u(),p(e.supplierName)}}function Bu(a,t){if(a&1&&(n(0,"tr",73)(1,"td",74),r(2),i(),n(3,"td",75)(4,"div"),r(5),g(6,"date"),i(),n(7,"div",76),r(8),i()(),n(9,"td",75),f(10,Vu,2,1,"div",29)(11,Lu,2,1,"div",29),i(),n(12,"td",77)(13,"span",78),r(14),g(15,"translate"),i()(),n(16,"td",74),r(17),g(18,"number"),g(19,"translate"),i(),n(20,"td",75),r(21),g(22,"number"),i()()),a&2){let e=t.$implicit;u(2),b("#",e.orderId),u(3),p(Q(6,9,e.orderDate,"mediumDate")),u(3),p(e.orderTypeNameAr),u(2),d("ngIf",e.customerName),u(),d("ngIf",e.supplierName),u(3),b(" ",e.statusNameAr||h(15,12,"STATUS.PENDING")," "),u(3),q(" ",Q(18,14,e.totalAmount,"1.2-2")," ",h(19,17,"COMMON.CURRENCY")," "),u(4),p(Q(22,19,e.totalQuantity,"1.0-2"))}}function Uu(a,t){a&1&&(n(0,"div",72),r(1),g(2,"translate"),i()),a&2&&(u(),b(" ",h(2,1,"REPORTS.NO_DATA")," "))}function ju(a,t){if(a&1&&(Le(0),n(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38),l(5,"i",39),i(),n(6,"div")(7,"p",40),r(8),g(9,"translate"),i(),n(10,"h3",41),r(11),g(12,"number"),i()()()(),n(13,"div",36)(14,"div",37)(15,"div",42),l(16,"i",43),i(),n(17,"div")(18,"p",40),r(19),g(20,"translate"),i(),n(21,"h3",41),r(22),g(23,"number"),g(24,"translate"),i()()()(),n(25,"div",36)(26,"div",37)(27,"div",44),l(28,"i",45),i(),n(29,"div")(30,"p",40),r(31),g(32,"translate"),i(),n(33,"h3",41),r(34),g(35,"number"),g(36,"translate"),i()()()(),n(37,"div",36)(38,"div",37)(39,"div",46),l(40,"i",47),i(),n(41,"div")(42,"p",40),r(43),g(44,"translate"),i(),n(45,"h3",41),r(46),g(47,"number"),i()()()()(),n(48,"div",48)(49,"div",49)(50,"div",50)(51,"h3",51),r(52),g(53,"translate"),i()(),f(54,Du,2,1,"div",52)(55,Nu,3,3,"ng-template",null,0,je),i(),n(57,"div",53)(58,"h3",54),r(59),g(60,"translate"),i(),n(61,"ul",55)(62,"li",56)(63,"span"),r(64),g(65,"translate"),i(),n(66,"span",57),r(67),g(68,"date"),i()(),n(69,"li",56)(70,"span"),r(71),g(72,"translate"),i(),n(73,"span",57),r(74),g(75,"date"),i()(),n(76,"li",56)(77,"span"),r(78),g(79,"translate"),i(),n(80,"span",57),r(81),g(82,"number"),i()(),n(83,"li",56)(84,"span"),r(85),g(86,"translate"),i(),n(87,"span",57),r(88),g(89,"number"),g(90,"translate"),i()()()()(),n(91,"div",58)(92,"div",59)(93,"div")(94,"h3",51),r(95),g(96,"translate"),i(),n(97,"p",40),r(98),g(99,"translate"),i()(),n(100,"div",40),r(101),g(102,"translate"),i()(),n(103,"div",60)(104,"table",61)(105,"thead",62)(106,"tr")(107,"th",63),r(108),g(109,"translate"),i(),n(110,"th",63),r(111),g(112,"translate"),i(),n(113,"th",63),r(114),g(115,"translate"),i(),n(116,"th",63),r(117),g(118,"translate"),i(),n(119,"th",63),r(120),g(121,"translate"),i(),n(122,"th",63),r(123),g(124,"translate"),i()()(),n(125,"tbody",64),f(126,Bu,23,22,"tr",65),i()()(),f(127,Uu,3,3,"div",66),i(),Be()),a&2){let e=t.ngIf,o=We(56),s=c();u(8),p(h(9,37,"REPORTS.SUMMARY.TOTAL_ORDERS")),u(3),p(h(12,39,e.totalOrders)),u(8),p(h(20,41,"REPORTS.SUMMARY.TOTAL_AMOUNT")),u(3),q("",Q(23,43,e.totalAmount,"1.2-2")," ",h(24,46,"COMMON.CURRENCY")),u(9),p(h(32,48,"REPORTS.SUMMARY.AVERAGE_ORDER")),u(3),q("",Q(35,50,e.averageOrderValue,"1.2-2")," ",h(36,53,"COMMON.CURRENCY")),u(9),p(h(44,55,"REPORTS.SUMMARY.TOTAL_QUANTITY")),u(3),p(Q(47,57,e.totalQuantity,"1.0-2")),u(6),p(h(53,60,"REPORTS.DAILY_BREAKDOWN")),u(2),d("ngIf",s.reportData==null||s.reportData.dailyBreakdown==null?null:s.reportData.dailyBreakdown.length)("ngIfElse",o),u(5),p(h(60,62,"REPORTS.PERIOD_SUMMARY")),u(5),p(h(65,64,"REPORTS.FROM")),u(3),p(h(68,66,e.dateFrom)),u(4),p(h(72,68,"REPORTS.TO")),u(3),p(h(75,70,e.dateTo)),u(4),p(h(79,72,"REPORTS.SUMMARY.TOTAL_ORDERS")),u(3),p(h(82,74,e.totalOrders)),u(4),p(h(86,76,"REPORTS.SUMMARY.TOTAL_AMOUNT")),u(3),q("",Q(89,78,e.totalAmount,"1.2-2")," ",h(90,81,"COMMON.CURRENCY")),u(7),p(h(96,83,"REPORTS.ORDERS_TABLE")),u(3),p(h(99,85,"REPORTS.ORDERS_TABLE_DESCRIPTION")),u(3),tn(" ",h(102,87,"REPORTS.SHOWING")," ",s.details.length," / ",e.totalOrders," "),u(7),p(h(109,89,"REPORTS.COLUMNS.ORDER_ID")),u(3),p(h(112,91,"REPORTS.COLUMNS.DATE")),u(3),p(h(115,93,"REPORTS.COLUMNS.CUSTOMER_SUPPLIER")),u(3),p(h(118,95,"REPORTS.COLUMNS.STATUS")),u(3),p(h(121,97,"REPORTS.COLUMNS.TOTAL")),u(3),p(h(124,99,"REPORTS.COLUMNS.QUANTITY")),u(3),d("ngForOf",s.details)("ngForTrackBy",s.trackByOrderId),u(),d("ngIf",!s.details.length)}}var si=class a{constructor(t,e){this.fb=t;this.reportsService=e;this.filtersForm=this.fb.group({dateFrom:[this.getToday()],dateTo:[this.getToday()]})}loading=!1;errorMessage="";reportData=null;orderTypes=[{id:2,key:"REPORTS.SALES_TAB"},{id:1,key:"REPORTS.PURCHASE_TAB"}];selectedOrderTypeId=2;quickRanges=[{key:"today",label:"REPORTS.QUICK_RANGES.TODAY",days:0},{key:"seven",label:"REPORTS.QUICK_RANGES.LAST_7_DAYS",days:7},{key:"thirty",label:"REPORTS.QUICK_RANGES.LAST_30_DAYS",days:30}];activeQuickRange="today";filtersForm;ngOnInit(){this.loadReport()}getToday(){return new Date().toISOString().substring(0,10)}applyQuickRange(t){let e=new Date,o=new Date;t.days>0&&o.setDate(e.getDate()-t.days),this.filtersForm.patchValue({dateFrom:o.toISOString().substring(0,10),dateTo:e.toISOString().substring(0,10)}),this.activeQuickRange=t.key,this.loadReport()}onOrderTypeChange(t){this.selectedOrderTypeId=t,this.loadReport()}loadReport(){if(this.filtersForm.invalid){this.filtersForm.markAllAsTouched();return}let{dateFrom:t,dateTo:e}=this.filtersForm.value;this.loading=!0,this.errorMessage="",this.reportsService.getOrderSummary({orderTypeId:this.selectedOrderTypeId,dateFrom:t?new Date(t).toISOString():void 0,dateTo:e?new Date(e).toISOString():void 0,maxRecords:200}).subscribe({next:o=>{this.reportData=o,this.loading=!1},error:()=>{this.errorMessage="REPORTS.ERROR_LOADING",this.loading=!1}})}get summary(){return this.reportData?.summary??null}get details(){return this.reportData?.orders??[]}trackByOrderId(t,e){return e.orderId}static \u0275fac=function(e){return new(e||a)(v(L),v(li))};static \u0275cmp=A({type:a,selectors:[["app-order-report"]],standalone:!1,decls:49,vars:34,consts:[["noDaily",""],["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-cyan-50","to-blue-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","space-y-8"],[1,"bg-white","rounded-3xl","shadow-xl","border","border-gray-100","overflow-hidden"],[1,"bg-gradient-to-r","from-cyan-600","to-blue-600","px-6","py-6","text-white","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4"],[1,"text-sm","text-cyan-100","font-medium","tracking-wide"],[1,"text-3xl","font-bold"],[1,"text-sm","text-cyan-100","mt-1"],[1,"p-6","sm:p-8","space-y-6",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","gap-3"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-gray-50","rounded-2xl","p-4","border","border-gray-100"],[1,"text-sm","font-semibold","text-gray-600","mb-3","flex","items-center","gap-2"],[1,"bi","bi-calendar-range","text-cyan-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"space-y-1"],[1,"text-xs","font-medium","text-gray-500"],["type","date","formControlName","dateFrom",1,"w-full","px-3","py-2","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","text-sm","bg-white"],["type","date","formControlName","dateTo",1,"w-full","px-3","py-2","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","text-sm","bg-white"],[1,"bg-white","rounded-2xl","border","border-gray-100","p-4"],[1,"bi","bi-lightning-charge","text-amber-500"],[1,"flex","flex-wrap","gap-3"],["type","button","class","px-4 py-2 rounded-xl text-sm font-semibold transition-all duration-200",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["type","button",1,"inline-flex","items-center","px-6","py-3","rounded-2xl","bg-gradient-to-r","from-cyan-600","to-blue-600","text-white","font-semibold","shadow-lg","hover:from-cyan-700","hover:to-blue-700","transition-all","duration-200","disabled:opacity-50",3,"click","disabled"],[1,"bi","bi-arrow-repeat","mr-2",3,"ngClass"],["class","bg-white rounded-3xl shadow-lg p-8 flex flex-col items-center text-gray-600 gap-3",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-2xl p-6 text-red-700",4,"ngIf"],[4,"ngIf"],["type","button",1,"flex-1","px-4","py-3","rounded-2xl","font-semibold","transition-all","duration-200","focus:outline-none",3,"click","ngClass"],["type","button",1,"px-4","py-2","rounded-xl","text-sm","font-semibold","transition-all","duration-200",3,"click","ngClass"],[1,"bg-white","rounded-3xl","shadow-lg","p-8","flex","flex-col","items-center","text-gray-600","gap-3"],[1,"w-12","h-12","border-4","border-cyan-500","border-t-transparent","rounded-full","animate-spin"],[1,"bg-red-50","border","border-red-200","rounded-2xl","p-6","text-red-700"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-4","gap-6"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","p-6"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-2xl","bg-cyan-100","text-cyan-600","flex","items-center","justify-center","text-xl"],[1,"bi","bi-receipt"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-bold","text-gray-900"],[1,"w-12","h-12","rounded-2xl","bg-indigo-100","text-indigo-600","flex","items-center","justify-center","text-xl"],[1,"bi","bi-cash-stack"],[1,"w-12","h-12","rounded-2xl","bg-emerald-100","text-emerald-600","flex","items-center","justify-center","text-xl"],[1,"bi","bi-diagram-3"],[1,"w-12","h-12","rounded-2xl","bg-amber-100","text-amber-600","flex","items-center","justify-center","text-xl"],[1,"bi","bi-box-seam"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],[1,"bg-white","rounded-3xl","shadow-lg","border","border-gray-100","p-6","xl:col-span-2"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],["class","space-y-4",4,"ngIf","ngIfElse"],[1,"bg-white","rounded-3xl","shadow-lg","border","border-gray-100","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"space-y-4","text-sm","text-gray-600"],[1,"flex","items-center","justify-between"],[1,"font-semibold"],[1,"bg-white","rounded-3xl","shadow-lg","border","border-gray-100"],[1,"px-6","py-5","border-b","border-gray-100","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-3"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-gray-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-10 text-gray-500",4,"ngIf"],[1,"space-y-4"],["class","p-4 rounded-2xl border border-gray-100 bg-gray-50 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",4,"ngFor","ngForOf"],[1,"p-4","rounded-2xl","border","border-gray-100","bg-gray-50","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4"],[1,"text-base","font-semibold","text-gray-900"],[1,"text-lg","font-bold","text-cyan-600"],[1,"text-center","py-10","text-gray-500"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-semibold","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-600"],[1,"text-xs","text-gray-400"],[1,"px-6","py-4","whitespace-nowrap","text-sm"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-semibold","bg-cyan-100","text-cyan-800"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"p",5),r(6),g(7,"translate"),i(),n(8,"h1",6),r(9),g(10,"translate"),i(),n(11,"p",7),r(12),g(13,"translate"),i()()(),n(14,"form",8)(15,"div",9),f(16,Ou,4,7,"ng-container",10),i(),n(17,"div",11)(18,"div",12)(19,"h3",13),l(20,"i",14),r(21),g(22,"translate"),i(),n(23,"div",15)(24,"div",16)(25,"label",17),r(26),g(27,"translate"),i(),l(28,"input",18),i(),n(29,"div",16)(30,"label",17),r(31),g(32,"translate"),i(),l(33,"input",19),i()()(),n(34,"div",20)(35,"h3",13),l(36,"i",21),r(37),g(38,"translate"),i(),n(39,"div",22),f(40,Tu,3,7,"button",23),i()()(),n(41,"div",24)(42,"button",25),x("click",function(){return o.loadReport()}),l(43,"i",26),r(44),g(45,"translate"),i()()()(),f(46,Mu,5,3,"div",27)(47,ku,3,3,"div",28)(48,ju,128,101,"ng-container",29),i()()),e&2&&(u(6),p(h(7,16,"REPORTS.TITLE")),u(3),p(h(10,18,"REPORTS.SALES_PURCHASE_REPORT")),u(3),p(h(13,20,"REPORTS.DESCRIPTION")),u(2),d("formGroup",o.filtersForm),u(2),d("ngForOf",o.orderTypes),u(5),b(" ",h(22,22,"REPORTS.DATE_RANGE")," "),u(5),p(h(27,24,"REPORTS.FROM")),u(5),p(h(32,26,"REPORTS.TO")),u(6),b(" ",h(38,28,"REPORTS.QUICK_RANGES.TITLE")," "),u(3),d("ngForOf",o.quickRanges),u(2),d("disabled",o.loading),u(),d("ngClass",ge(32,Iu,o.loading)),u(),b(" ",h(45,30,"REPORTS.UPDATE")," "),u(2),d("ngIf",o.loading),u(),d("ngIf",!o.loading&&o.errorMessage),u(),d("ngIf",!o.loading&&o.summary))},dependencies:[fe,F,w,M,W,V,D,B,U,j,ze,_e,ve],styles:[".quick-range-button[_ngcontent-%COMP%]{border-radius:1rem;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:600;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}"]})};var st=class a{constructor(t){this.http=t}url=Y.baseUrl+"/Roles/";GetRoles(){return this.http.get(`${this.url}GetRoles`)}GetRoleById(t){return this.http.get(`${this.url}GetRoleById?id=${t}`)}saveRole(t){return this.http.post(`${this.url}SaveRole`,t)}deleteRole(t){return this.http.delete(`${this.url}?id=${t}`)}AssignRoleToUser(t){return this.http.post(`${this.url}AssignRoleToUser`,t)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var It=class a{constructor(t){this.http=t}url=Y.baseUrl+"/Permissions/";GetAllPermissions(){return this.http.get(`${this.url}GetAllPermissions`)}AssignPermissionsToRole(t){return this.http.post(`${this.url}AssignPermissionsToRole`,t)}GetUserPermissions(t){return this.http.get(`${this.url}GetUserPermissions?userId=${t}`)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var dt=class a{constructor(t){this.http=t}url=Y.baseUrl+"/PrinterConfigurations/";GetPrinterConfigurations(){return this.http.get(`${this.url}GetPrinterConfigurations`)}GetPrinterConfigurationById(t){return this.http.get(`${this.url}GetPrinterConfigurationById?id=${t}`)}SavePrinterConfiguration(t){return this.http.post(`${this.url}SavePrinterConfiguration`,t)}DeletePrinterConfiguration(t){return this.http.delete(`${this.url}DeletePrinterConfiguration?id=${t}`)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};function Wu(a,t){if(a&1&&(n(0,"option",27),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),q(" ",e.nameAr," (",e.printerType,") ")}}function $u(a,t){if(a&1){let e=C();n(0,"div",70)(1,"input",71),x("change",function(s){let m=y(e).$implicit,E=c(2);return _(E.onPermissionChange(m.id,s))}),i(),n(2,"label",72),r(3),i()()}if(a&2){let e,o=t.$implicit,s=c(2);u(),d("id",$e("perm_",o.id))("value",o.id)("checked",(e=s.roleForm.get("rolePermissionIds"))==null?null:e.value.includes(o.id)),u(),d("for",$e("perm_",o.id)),u(),b(" ",o.nameAr," ")}}function Hu(a,t){if(a&1){let e=C();n(0,"div",60)(1,"div",61)(2,"div",4)(3,"input",62),x("change",function(){let s=y(e).$implicit,m=c();return _(m.isModuleFullySelected(s)?m.deselectAllPermissionsInModule(s):m.selectAllPermissionsInModule(s))}),i(),n(4,"label",63),r(5),i(),n(6,"span",64),r(7),i()(),n(8,"div",34)(9,"button",65),x("click",function(){let s=y(e).$implicit,m=c();return _(m.selectAllPermissionsInModule(s))}),l(10,"i",36),r(11," \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0643\u0644 "),i(),n(12,"button",66),x("click",function(){let s=y(e).$implicit,m=c();return _(m.deselectAllPermissionsInModule(s))}),l(13,"i",38),r(14," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0643\u0644 "),i()()(),n(15,"div",67)(16,"div",68),f(17,$u,4,7,"div",69),i()()()}if(a&2){let e=t.$implicit,o=c();u(3),d("id","module_"+e)("checked",o.isModuleFullySelected(e))("indeterminate",o.isModulePartiallySelected(e)),u(),d("for","module_"+e),u(),b(" ",o.getModuleDisplayName(e)," "),u(2),b(" ",(o.groupedPermissions[e]==null?null:o.groupedPermissions[e].length)||0," \u0635\u0644\u0627\u062D\u064A\u0629 "),u(10),d("ngForOf",o.groupedPermissions[e])}}function qu(a,t){if(a&1){let e=C();n(0,"div",73)(1,"input",74),x("change",function(s){let m=y(e).$implicit,E=c();return _(E.onCategoryChange(m.id,s))}),i(),n(2,"label",72),r(3),i()()}if(a&2){let e,o=t.$implicit,s=c();u(),d("id","cat_"+o.id)("value",o.id)("checked",(e=s.roleForm.get("categoryIds"))==null?null:e.value.includes(o.id)),u(),d("for","cat_"+o.id),u(),b(" ",o.nameAr," ")}}function zu(a,t){if(a&1){let e=C();n(0,"div",75)(1,"input",76),x("change",function(s){let m=y(e).$implicit,E=c();return _(E.onSubCategoryChange(m.id,s))}),i(),n(2,"label",72),r(3),i()()}if(a&2){let e,o=t.$implicit,s=c();u(),d("id","subcat_"+o.id)("value",o.id)("checked",(e=s.roleForm.get("subCategoryIds"))==null?null:e.value.includes(o.id)),u(),d("for","subcat_"+o.id),u(),b(" ",o.nameAr," ")}}function Yu(a,t){if(a&1){let e=C();n(0,"div",77)(1,"input",78),x("change",function(s){let m=y(e).$implicit,E=c();return _(E.onProductChange(m.id,s))}),i(),n(2,"label",72),r(3),i()()}if(a&2){let e,o=t.$implicit,s=c();u(),d("id","prod_"+o.id)("value",o.id)("checked",(e=s.roleForm.get("productIds"))==null?null:e.value.includes(o.id)),u(),d("for","prod_"+o.id),u(),b(" ",o.nameAr," ")}}var di=class a{constructor(t,e,o,s,m,E,I,R){this.fb=t;this.roleService=e;this.permissionService=o;this.printerConfigService=s;this.router=m;this.route=E;this.lang=I;this.toastr=R;this.categories=this.route.snapshot.data.categoriesResolver,this.products=this.route.snapshot.data.productsResolver,this.permissions=this.route.snapshot.data.permissionsResolver,this.subCategories=this.route.snapshot.data.subCategoriesResolver}roleForm;permissions;categories;products;subCategories;groupedPermissions;printerConfigurations=[];ngOnInit(){if(this.permissions){let t=this.permissions.filter(e=>e.code?.includes("PRINTER"))}this.groupPermissions(),this.loadPrinterConfigurations(),this.initializingForm(null),this.route.queryParams.subscribe(t=>{let e=+t.roleId;e&&this.roleService.GetRoleById(e).subscribe({next:o=>{let s={id:o.id,code:o.code,nameAr:o.nameAr,nameEn:o.nameEn,rolePermissionIds:o?.permissions.map(m=>m.permissionId),categoryIds:o?.categoryIds||[],productIds:o?.productIds||[],subCategoryIds:o?.subCategoryIds||[],printerConfigurationId:o?.printerConfigurationId};this.initializingForm(s)},error:o=>{}})})}loadPrinterConfigurations(){this.printerConfigService.GetPrinterConfigurations().subscribe({next:t=>{this.printerConfigurations=t},error:t=>{}})}groupPermissions(){this.groupedPermissions={},!(!this.permissions||this.permissions.length===0)&&(this.permissions.forEach(t=>{if(!t.code)return;t.code.includes("PRINTER")||t.code.includes("printer");let e=this.getModuleFromCode(t.code);this.groupedPermissions[e]||(this.groupedPermissions[e]=[]),this.groupedPermissions[e].push(t)}),this.groupedPermissions["admin/printer-configurations"])}getModuleFromCode(t){return t==="VIEW_ADMIN"?"admin/main":t==="VIEW_PRODUCTS"||t==="ADD_PRODUCT"||t==="EDIT_PRODUCT"||t==="DELETE_PRODUCT"||t==="PRINT_PRODUCTS"?"admin/products":t==="VIEW_CUSTOMERS"||t==="ADD_CUSTOMER"||t==="EDIT_CUSTOMER"||t==="DELETE_CUSTOMER"||t==="PRINT_CUSTOMERS"?"admin/customers":t==="VIEW_SUPPLIERS"||t==="ADD_SUPPLIER"||t==="EDIT_SUPPLIER"||t==="DELETE_SUPPLIER"||t==="PRINT_SUPPLIERS"?"admin/suppliers":t==="VIEW_PURCHASE_ORDERS"||t==="ADD_PURCHASE_ORDER"||t==="EDIT_PURCHASE_ORDER"||t==="DELETE_PURCHASE_ORDER"||t==="COMPLETE_PURCHASE_ORDER"||t==="PRINT_PURCHASE_ORDER"||t==="APPROVE_PURCHASE_ORDER"||t==="CANCEL_PURCHASE_ORDER"||t==="VIEW_SALE_ORDERS"||t==="ADD_SALE_ORDER"||t==="EDIT_SALE_ORDER"||t==="DELETE_SALE_ORDER"||t==="COMPLETE_SALE_ORDER"||t==="PRINT_SALE_ORDER"||t==="APPROVE_SALE_ORDER"||t==="CANCEL_SALE_ORDER"?"admin/orders":t==="VIEW_INVENTORY_MANAGEMENT"||t==="MANAGE_INVENTORY"||t==="ADJUST_INVENTORY"||t==="VIEW_LOW_STOCK"||t==="VIEW_INVENTORY_REPORT"||t==="PRINT_INVENTORY_REPORT"?"admin/inventory":t==="VIEW_STORES"||t==="ADD_STORE"||t==="EDIT_STORE"||t==="DELETE_STORE"||t==="PRINT_STORES"||t==="VIEW_STORE_TRANSFERS"||t==="ADD_STORE_TRANSFER"||t==="EDIT_STORE_TRANSFER"||t==="DELETE_STORE_TRANSFER"||t==="APPROVE_STORE_TRANSFER"||t==="PRINT_STORE_TRANSFERS"?"admin/stores":t==="VIEW_USERS"||t==="ADD_USER"||t==="EDIT_USER"||t==="DELETE_USER"||t==="RESET_USER_PASSWORD"||t==="ASSIGN_ROLES_TO_USER"?"admin/users":t==="VIEW_ROLES"||t==="ADD_ROLE"||t==="EDIT_ROLE"||t==="DELETE_ROLE"||t==="ASSIGN_PERMISSIONS_TO_ROLE"?"admin/roles":t==="VIEW_CATEGORIES"||t==="ADD_CATEGORY"||t==="EDIT_CATEGORY"||t==="DELETE_CATEGORY"||t==="PRINT_CATEGORIES"?"admin/categories":t==="VIEW_SUBCATEGORIES"||t==="ADD_SUBCATEGORY"||t==="EDIT_SUBCATEGORY"||t==="DELETE_SUBCATEGORY"||t==="PRINT_SUBCATEGORIES"?"admin/subcategories":t==="VIEW_UNITS"||t==="ADD_UNIT"||t==="EDIT_UNIT"||t==="DELETE_UNIT"||t==="PRINT_UNITS"?"admin/units":t==="VIEW_SETTINGS"||t==="EDIT_SETTINGS"?"admin/company":t==="VIEW_ACTIVITY_LOGS"||t==="EXPORT_ACTIVITY_LOGS"?"admin/activity-logs":t==="VIEW_WORKING_HOURS"||t==="EDIT_WORKING_HOURS"||t==="MANAGE_WORKING_HOURS_EXCEPTIONS"?"admin/working-hours":t==="VIEW_PRINTER_CONFIGURATIONS"||t==="ADD_PRINTER_CONFIGURATION"||t==="EDIT_PRINTER_CONFIGURATION"||t==="DELETE_PRINTER_CONFIGURATION"||t?.toUpperCase()==="VIEW_PRINTER_CONFIGURATIONS"||t?.toUpperCase()==="ADD_PRINTER_CONFIGURATION"||t?.toUpperCase()==="EDIT_PRINTER_CONFIGURATION"||t?.toUpperCase()==="DELETE_PRINTER_CONFIGURATION"?"admin/printer-configurations":t==="EDIT_APPROVED_INVOICE"?"admin/orders":"admin/general"}getModuleDisplayName(t){return{"admin/main":"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629","admin/products":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A","admin/customers":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","admin/suppliers":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0631\u062F\u064A\u0646","admin/orders":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062A","admin/inventory":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646","admin/stores":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062E\u0627\u0632\u0646","admin/users":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646","admin/roles":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u062F\u0648\u0627\u0631","admin/categories":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A","admin/subcategories":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u0641\u0631\u0639\u064A\u0629","admin/units":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0648\u062D\u062F\u0627\u062A","admin/company":"\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0634\u0631\u0643\u0629","admin/activity-logs":"\u0633\u062C\u0644 \u0627\u0644\u0623\u0646\u0634\u0637\u0629","admin/working-hours":"\u0633\u0627\u0639\u0627\u062A \u0627\u0644\u0639\u0645\u0644","admin/printer-configurations":"\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629","admin/general":"\u0639\u0627\u0645"}[t]||t}getObjectKeys(t){return Object.keys(t)}initializingForm(t){this.roleForm=this.fb.group({id:[t?.id||0],code:[t?.code||"",S.required],nameEn:[t?.nameEn||""],nameAr:[t?.nameAr||"",S.required],rolePermissionIds:[t?.rolePermissionIds||[]],categoryIds:[t?.categoryIds||[]],productIds:[t?.productIds||[]],subCategoryIds:[t?.subCategoryIds||[]],printerConfigurationId:[t?.printerConfigurationId||null]})}onPermissionChange(t,e){let o=e.target.checked,s=this.roleForm.get("rolePermissionIds")?.value||[];o?this.roleForm.get("rolePermissionIds")?.setValue([...s,t]):this.roleForm.get("rolePermissionIds")?.setValue(s.filter(m=>m!==t))}onCategoryChange(t,e){let o=e.target.checked,s=this.roleForm.get("categoryIds")?.value||[];o?this.roleForm.get("categoryIds")?.setValue([...s,t]):this.roleForm.get("categoryIds")?.setValue(s.filter(m=>m!==t))}onProductChange(t,e){let o=e.target.checked,s=this.roleForm.get("productIds")?.value||[];o?this.roleForm.get("productIds")?.setValue([...s,t]):this.roleForm.get("productIds")?.setValue(s.filter(m=>m!==t))}onSubCategoryChange(t,e){let o=e.target.checked,s=this.roleForm.get("subCategoryIds")?.value||[];o?this.roleForm.get("subCategoryIds")?.setValue([...s,t]):this.roleForm.get("subCategoryIds")?.setValue(s.filter(m=>m!==t))}selectAllPermissions(){let t=this.permissions.map(e=>e.id);this.roleForm.get("rolePermissionIds")?.setValue(t)}deselectAllPermissions(){this.roleForm.get("rolePermissionIds")?.setValue([])}selectAllPermissionsInModule(t){let e=this.roleForm.get("rolePermissionIds")?.value||[],o=this.groupedPermissions[t]?.map(m=>m.id)||[],s=[...new Set([...e,...o])];this.roleForm.get("rolePermissionIds")?.setValue(s)}deselectAllPermissionsInModule(t){let e=this.roleForm.get("rolePermissionIds")?.value||[],o=this.groupedPermissions[t]?.map(m=>m.id)||[],s=e.filter(m=>!o.includes(m));this.roleForm.get("rolePermissionIds")?.setValue(s)}isModuleFullySelected(t){let e=this.roleForm.get("rolePermissionIds")?.value||[];return(this.groupedPermissions[t]?.map(s=>s.id)||[]).every(s=>e.includes(s))}isModulePartiallySelected(t){let e=this.roleForm.get("rolePermissionIds")?.value||[],o=this.groupedPermissions[t]?.map(m=>m.id)||[],s=o.filter(m=>e.includes(m));return s.length>0&&s.length<o.length}selectAllCategories(){let t=this.categories.map(e=>e.id);this.roleForm.get("categoryIds")?.setValue(t)}deselectAllCategories(){this.roleForm.get("categoryIds")?.setValue([])}selectAllSubCategories(){let t=this.subCategories.map(e=>e.id);this.roleForm.get("subCategoryIds")?.setValue(t)}deselectAllSubCategories(){this.roleForm.get("subCategoryIds")?.setValue([])}selectAllProducts(){let t=this.products.map(e=>e.id);this.roleForm.get("productIds")?.setValue(t)}deselectAllProducts(){this.roleForm.get("productIds")?.setValue([])}save(){if(this.roleForm.valid){let t=this.permissions.filter(o=>this.roleForm.get("rolePermissionIds")?.value.includes(o.id)).map(o=>o.code),e={id:this.roleForm.get("id")?.value,code:this.roleForm.get("code")?.value,nameEn:this.roleForm.get("nameEn")?.value,nameAr:this.roleForm.get("nameAr")?.value,permissionCodes:t,categoryIds:this.roleForm.get("categoryIds")?.value||[],productIds:this.roleForm.get("productIds")?.value||[],subCategoryIds:this.roleForm.get("subCategoryIds")?.value||[],printerConfigurationId:this.roleForm.get("printerConfigurationId")?.value||null};this.roleService.saveRole(e).subscribe({next:o=>{o?(this.toastr.success("Successfully saved","Roles"),this.router.navigate(["../roles"],{relativeTo:this.route})):this.toastr.error("Error while saving","Role")},error:o=>{this.toastr.error(o.error,"Role")}})}else this.toastr.error("Please fill all required fields!","Roles")}cancel(){this.router.navigate(["../roles"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v(st),v(It),v(dt),v(T),v(k),v(G),v(ee))};static \u0275cmp=A({type:a,selectors:[["app-roles-form"]],standalone:!1,decls:123,vars:10,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-6xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-amber-500","to-orange-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-shield-plus","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-info-circle","text-amber-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-hash","mr-2","text-gray-600"],["type","text","id","code","formControlName","code","placeholder","\u0623\u062F\u062E\u0644 \u0643\u0648\u062F \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:border-gray-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-tag","mr-2","text-amber-600"],[1,"text-red-500"],["type","text","id","nameAr","formControlName","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","id","nameEn","formControlName","nameEn","placeholder","Enter name in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-printer","mr-2","text-purple-600"],["formControlName","printerConfigurationId",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"text-xs","text-gray-500","mt-1"],[1,"bi","bi-shield-check","text-blue-600","mr-3"],[1,"bg-blue-50","rounded-xl","p-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-sm","text-gray-600"],[1,"flex","space-x-2","space-x-reverse"],["type","button",1,"px-3","py-1","bg-blue-600","text-white","text-xs","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"bi","bi-check-square","mr-1"],["type","button",1,"px-3","py-1","bg-gray-500","text-white","text-xs","rounded-lg","hover:bg-gray-600","transition-colors",3,"click"],[1,"bi","bi-square","mr-1"],[1,"space-y-6"],["class","border border-gray-200 rounded-xl overflow-hidden",4,"ngFor","ngForOf"],[1,"bi","bi-grid-3x3-gap","text-green-600","mr-3"],[1,"bg-green-50","rounded-xl","p-6"],["type","button",1,"px-3","py-1","bg-green-600","text-white","text-xs","rounded-lg","hover:bg-green-700","transition-colors",3,"click"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["class","flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-green-300 transition-colors",4,"ngFor","ngForOf"],[1,"bi","bi-grid-3x3","text-orange-600","mr-3"],[1,"bg-orange-50","rounded-xl","p-6"],["type","button",1,"px-3","py-1","bg-orange-600","text-white","text-xs","rounded-lg","hover:bg-orange-700","transition-colors",3,"click"],["class","flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors",4,"ngFor","ngForOf"],[1,"pb-8"],[1,"bi","bi-box","text-purple-600","mr-3"],[1,"bg-purple-50","rounded-xl","p-6"],["type","button",1,"px-3","py-1","bg-purple-600","text-white","text-xs","rounded-lg","hover:bg-purple-700","transition-colors",3,"click"],["class","flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-purple-300 transition-colors",4,"ngFor","ngForOf"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-amber-600","to-orange-600","text-white","rounded-xl","font-semibold","hover:from-amber-700","hover:to-orange-700","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"],[1,"border","border-gray-200","rounded-xl","overflow-hidden"],[1,"bg-gray-50","px-4","py-3","border-b","border-gray-200","flex","items-center","justify-between"],["type","checkbox",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","focus:ring-2",3,"change","id","checked","indeterminate"],[1,"mr-3","text-sm","font-semibold","text-gray-800","cursor-pointer",3,"for"],[1,"text-xs","text-gray-500","bg-gray-200","px-2","py-1","rounded-full"],["type","button",1,"px-2","py-1","bg-blue-600","text-white","text-xs","rounded","hover:bg-blue-700","transition-colors",3,"click"],["type","button",1,"px-2","py-1","bg-gray-500","text-white","text-xs","rounded","hover:bg-gray-600","transition-colors",3,"click"],[1,"p-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-3"],["class","flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 transition-colors",4,"ngFor","ngForOf"],[1,"flex","items-center","p-3","bg-white","rounded-lg","border","border-gray-200","hover:border-blue-300","transition-colors"],["type","checkbox",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","focus:ring-2",3,"change","id","value","checked"],[1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer","flex-1",3,"for"],[1,"flex","items-center","p-3","bg-white","rounded-lg","border","border-gray-200","hover:border-green-300","transition-colors"],["type","checkbox",1,"w-4","h-4","text-green-600","bg-gray-100","border-gray-300","rounded","focus:ring-green-500","focus:ring-2",3,"change","id","value","checked"],[1,"flex","items-center","p-3","bg-white","rounded-lg","border","border-gray-200","hover:border-orange-300","transition-colors"],["type","checkbox",1,"w-4","h-4","text-orange-600","bg-gray-100","border-gray-300","rounded","focus:ring-orange-500","focus:ring-2",3,"change","id","value","checked"],[1,"flex","items-center","p-3","bg-white","rounded-lg","border","border-gray-200","hover:border-purple-300","transition-colors"],["type","checkbox",1,"w-4","h-4","text-purple-600","bg-gray-100","border-gray-300","rounded","focus:ring-purple-500","focus:ring-2",3,"change","id","value","checked"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0648\u0627\u0644\u0623\u062F\u0648\u0627\u0631 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.save()}),n(16,"div",13)(17,"h2",14),l(18,"i",15),r(19," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i(),n(20,"div",16)(21,"div",17)(22,"label",18),l(23,"i",19),r(24," \u0643\u0648\u062F \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629 "),i(),l(25,"input",20),i(),n(26,"div",17)(27,"label",18),l(28,"i",21),r(29," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),n(30,"span",22),r(31,"*"),i()(),l(32,"input",23),i(),n(33,"div",17)(34,"label",18),l(35,"i",21),r(36," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),i(),l(37,"input",24),i(),n(38,"div",17)(39,"label",18),l(40,"i",25),r(41," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 "),i(),n(42,"select",26)(43,"option",27),r(44,"-- \u0627\u062E\u062A\u0631 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 --"),i(),f(45,Wu,2,3,"option",28),i(),n(46,"p",29),r(47,"\u0633\u064A\u062A\u0645 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 \u0639\u0646\u062F \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0645\u0633\u062A\u0646\u062F\u0627\u062A \u0644\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0628\u0647\u0630\u0627 \u0627\u0644\u062F\u0648\u0631"),i()()()(),n(48,"div",13)(49,"h2",14),l(50,"i",30),r(51," \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A "),i(),n(52,"div",31)(53,"div",32)(54,"p",33),r(55,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0627\u0644\u062A\u064A \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0645\u062A\u0639 \u0628\u0647\u0627 \u0647\u0630\u0627 \u0627\u0644\u062F\u0648\u0631:"),i(),n(56,"div",34)(57,"button",35),x("click",function(){return o.selectAllPermissions()}),l(58,"i",36),r(59," \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0643\u0644 "),i(),n(60,"button",37),x("click",function(){return o.deselectAllPermissions()}),l(61,"i",38),r(62," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0643\u0644 "),i()()(),n(63,"div",39),f(64,Hu,18,7,"div",40),i()()(),n(65,"div",13)(66,"h2",14),l(67,"i",41),r(68," \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A "),i(),n(69,"div",42)(70,"div",32)(71,"p",33),r(72,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u062A\u064A \u064A\u0645\u0643\u0646 \u0644\u0647\u0630\u0627 \u0627\u0644\u062F\u0648\u0631 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u064A\u0647\u0627:"),i(),n(73,"div",34)(74,"button",43),x("click",function(){return o.selectAllCategories()}),l(75,"i",36),r(76," \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0643\u0644 "),i(),n(77,"button",37),x("click",function(){return o.deselectAllCategories()}),l(78,"i",38),r(79," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0643\u0644 "),i()()(),n(80,"div",44),f(81,qu,4,5,"div",45),i()()(),n(82,"div",13)(83,"h2",14),l(84,"i",46),r(85," \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u0641\u0631\u0639\u064A\u0629 "),i(),n(86,"div",47)(87,"div",32)(88,"p",33),r(89,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u0641\u0631\u0639\u064A\u0629 \u0627\u0644\u062A\u064A \u064A\u0645\u0643\u0646 \u0644\u0647\u0630\u0627 \u0627\u0644\u062F\u0648\u0631 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u064A\u0647\u0627:"),i(),n(90,"div",34)(91,"button",48),x("click",function(){return o.selectAllSubCategories()}),l(92,"i",36),r(93," \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0643\u0644 "),i(),n(94,"button",37),x("click",function(){return o.deselectAllSubCategories()}),l(95,"i",38),r(96," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0643\u0644 "),i()()(),n(97,"div",44),f(98,zu,4,5,"div",49),i()()(),n(99,"div",50)(100,"h2",14),l(101,"i",51),r(102," \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A "),i(),n(103,"div",52)(104,"div",32)(105,"p",33),r(106,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u0627\u0644\u062A\u064A \u064A\u0645\u0643\u0646 \u0644\u0647\u0630\u0627 \u0627\u0644\u062F\u0648\u0631 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u064A\u0647\u0627:"),i(),n(107,"div",34)(108,"button",53),x("click",function(){return o.selectAllProducts()}),l(109,"i",36),r(110," \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0643\u0644 "),i(),n(111,"button",37),x("click",function(){return o.deselectAllProducts()}),l(112,"i",38),r(113," \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0643\u0644 "),i()()(),n(114,"div",44),f(115,Yu,4,5,"div",54),i()()(),n(116,"div",55)(117,"button",56),x("click",function(){return o.cancel()}),l(118,"i",57),r(119," \u0625\u0644\u063A\u0627\u0621 "),i(),n(120,"button",58),l(121,"i",59),r(122),i()()()()()()),e&2){let s,m;u(9),b(" ",((s=o.roleForm.get("id"))==null?null:s.value)>0?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0635\u0644\u0627\u062D\u064A\u0629 \u062C\u062F\u064A\u062F\u0629"," "),u(6),d("formGroup",o.roleForm),u(28),d("value",null),u(2),d("ngForOf",o.printerConfigurations),u(19),d("ngForOf",o.getObjectKeys(o.groupedPermissions)),u(17),d("ngForOf",o.categories),u(17),d("ngForOf",o.subCategories),u(17),d("ngForOf",o.products),u(5),d("disabled",o.roleForm.invalid),u(2),b(" ",((m=o.roleForm.get("id"))==null?null:m.value)>0?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629":"\u062D\u0641\u0638 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629"," ")}},dependencies:[F,M,W,X,Z,V,J,D,B,U,j],styles:[".floating-label-input[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-top:1rem;height:auto}.floating-label-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.75rem;pointer-events:none;color:#6c757d;background-color:#fff;padding:0 4px;font-size:.875rem;transition:.2s ease all;transform-origin:0 0}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-1.2rem);left:.25rem;color:#0d6efd}input[_ngcontent-%COMP%]{text-align:center}"]})};function Qu(a,t){if(a&1&&(n(0,"span",41),l(1,"i",42),r(2),i()),a&2){let e=t.$implicit;u(2),b(" ",e.permission.nameAr," ")}}function Ku(a,t){a&1&&(n(0,"span",43),r(1,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0635\u0644\u0627\u062D\u064A\u0627\u062A"),i())}function Ju(a,t){if(a&1&&(n(0,"span",44),l(1,"i",45),r(2),i()),a&2){let e=t.$implicit;u(2),b(" ",e.category.nameAr," ")}}function Xu(a,t){a&1&&(n(0,"span",43),r(1,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u0635\u0646\u064A\u0641\u0627\u062A"),i())}function Zu(a,t){if(a&1&&(n(0,"span",46),l(1,"i",47),r(2),i()),a&2){let e=t.$implicit;u(2),b(" ",e.product.nameAr," ")}}function ea(a,t){a&1&&(n(0,"span",43),r(1,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0646\u062A\u062C\u0627\u062A"),i())}function ta(a,t){if(a&1){let e=C();n(0,"tr",24)(1,"td",25)(2,"div",26),r(3),i()(),n(4,"td",27)(5,"div",4)(6,"div",28),l(7,"i",29),i(),n(8,"div")(9,"div",30),r(10),i(),n(11,"div",31),r(12),i()()()(),n(13,"td",32)(14,"div",33),f(15,Qu,3,1,"span",34)(16,Ku,2,0,"span",35),i()(),n(17,"td",32)(18,"div",33),f(19,Ju,3,1,"span",36)(20,Xu,2,0,"span",35),i()(),n(21,"td",32)(22,"div",33),f(23,Zu,3,1,"span",37)(24,ea,2,0,"span",35),i()(),n(25,"td",38)(26,"button",39),x("click",function(){let s=y(e).$implicit,m=c();return _(m.openForm(s.id))}),l(27,"i",40),r(28," \u062A\u0639\u062F\u064A\u0644 "),i()()()}if(a&2){let e=t.$implicit,o=t.index;u(3),b(" ",o+1," "),u(7),p(e.nameAr),u(2),p(e.nameEn),u(3),d("ngForOf",e.rolePermissions),u(),d("ngIf",!e.rolePermissions||e.rolePermissions.length===0),u(3),d("ngForOf",e.roleCategories),u(),d("ngIf",!e.roleCategories||e.roleCategories.length===0),u(3),d("ngForOf",e.roleProducts),u(),d("ngIf",!e.roleProducts||e.roleProducts.length===0)}}function ia(a,t){if(a&1){let e=C();n(0,"div",48)(1,"div",49),l(2,"i",50),i(),n(3,"h3",51),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0635\u0644\u0627\u062D\u064A\u0627\u062A"),i(),n(5,"p",52),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i(),n(7,"button",9),x("click",function(){y(e);let s=c();return _(s.openForm(null))}),l(8,"i",53),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0635\u0644\u0627\u062D\u064A\u0629 "),i()()}}var mi=class a{constructor(t,e,o,s,m){this.roleService=t;this.lang=e;this.router=o;this.route=s;this.toastr=m}roles=[];ngOnInit(){this.loadRoles()}loadRoles(){this.roleService.GetRoles().subscribe(t=>{this.roles=t})}openForm(t){t?this.router.navigate(["../roles-form"],{relativeTo:this.route,queryParams:{roleId:t}}):this.router.navigate(["../roles-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(st),v(G),v(T),v(k),v(ee))};static \u0275cmp=A({type:a,selectors:[["app-roles"]],standalone:!1,decls:40,vars:2,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-amber-500","to-orange-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-shield-check","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"inline-flex","items-center","px-6","py-3","bg-gradient-to-r","from-amber-600","to-orange-600","text-white","rounded-xl","font-semibold","hover:from-amber-700","hover:to-orange-700","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-plus-circle","mr-2","text-lg"],[1,"bg-white","rounded-2xl","shadow-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-amber-50","to-orange-50"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bi","bi-tag","mr-2"],[1,"bi","bi-shield-check","mr-2"],[1,"bi","bi-grid-3x3-gap","mr-2"],[1,"bi","bi-box","mr-2"],[1,"bi","bi-gear","mr-2"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],["class","bg-white rounded-2xl shadow-lg p-12 text-center mt-8",4,"ngIf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"w-8","h-8","bg-gradient-to-br","from-amber-500","to-orange-600","rounded-full","flex","items-center","justify-center","text-white","font-bold"],[1,"px-6","py-4","whitespace-nowrap"],[1,"w-10","h-10","bg-gradient-to-br","from-amber-100","to-orange-100","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-shield","text-amber-600"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-6","py-4"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",4,"ngFor","ngForOf"],["class","text-xs text-gray-400",4,"ngIf"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",4,"ngFor","ngForOf"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil","mr-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"bi","bi-check-circle","mr-1"],[1,"text-xs","text-gray-400"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-green-100","text-green-800"],[1,"bi","bi-grid-3x3-gap","mr-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-purple-100","text-purple-800"],[1,"bi","bi-box","mr-1"],[1,"bg-white","rounded-2xl","shadow-lg","p-12","text-center","mt-8"],[1,"w-24","h-24","bg-gray-100","rounded-full","mx-auto","flex","items-center","justify-center","mb-6"],[1,"bi","bi-shield","text-gray-400","text-4xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"bi","bi-plus-circle","mr-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A"),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0623\u062F\u0648\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0648\u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()(),n(12,"button",9),x("click",function(){return o.openForm(null)}),l(13,"i",10),r(14," \u0625\u0636\u0627\u0641\u0629 \u0635\u0644\u0627\u062D\u064A\u0629 \u062C\u062F\u064A\u062F\u0629 "),i()()(),n(15,"div",11)(16,"div",12)(17,"table",13)(18,"thead",14)(19,"tr")(20,"th",15),r(21," # "),i(),n(22,"th",15),l(23,"i",16),r(24," \u0627\u0633\u0645 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629 "),i(),n(25,"th",15),l(26,"i",17),r(27," \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A "),i(),n(28,"th",15),l(29,"i",18),r(30," \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A "),i(),n(31,"th",15),l(32,"i",19),r(33," \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A "),i(),n(34,"th",15),l(35,"i",20),r(36," \u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A "),i()()(),n(37,"tbody",21),f(38,ta,29,9,"tr",22),i()()()(),f(39,ia,10,0,"div",23),i()()),e&2&&(u(38),d("ngForOf",o.roles),u(),d("ngIf",!o.roles||o.roles.length===0))},dependencies:[F,w,M],styles:[".text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.badge[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:4px}"]})};function na(a,t){a&1&&(n(0,"div",40),l(1,"i",41),r(2," \u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),i())}function ra(a,t){a&1&&(n(0,"div",40),l(1,"i",41),r(2," \u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),i())}var ci=class a{constructor(t,e,o,s,m){this.fb=t;this.storeService=e;this.router=o;this.route=s;this.toastr=m}storeForm;ngOnInit(){this.initializingForm(null),this.route.queryParams.subscribe(t=>{let e=+t.storeId;e&&this.storeService.GetStoreById(e).subscribe({next:o=>{this.initializingForm(o)},error:o=>{}})})}initializingForm(t){this.storeForm=this.fb.group({id:[t?t.id:0],nameEn:[t?t.nameAr:"",S.required],nameAr:[t?t.nameEn:"",S.required],description:[t?t.description:""],isActive:[t?t.isActive:!0]})}onSubmit(){if(this.storeForm.valid){let t=this.storeForm.value;this.storeService.SaveStore(this.storeForm.value).subscribe({next:e=>{e?(this.toastr.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u0648\u062F\u0639 \u0628\u0646\u062C\u0627\u062D","STORES"),this.router.navigate(["../store"],{relativeTo:this.route})):this.toastr.error(e,"STORES")},error:e=>{this.toastr.error(e.error,"STORES")}})}}cancel(){this.router.navigate(["../store"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v(Ne),v(T),v(k),v(ee))};static \u0275cmp=A({type:a,selectors:[["app-store-form"]],standalone:!1,decls:62,vars:7,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-orange-500","to-red-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-building","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],["type","hidden","formControlName","id"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-info-circle","text-orange-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-building","mr-2","text-orange-600"],[1,"text-red-500"],["type","text","formControlName","nameAr","id","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["class","text-red-500 text-sm mt-1 flex items-center",4,"ngIf"],["type","text","formControlName","nameEn","id","nameEn","placeholder","Enter store name in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"mt-6","space-y-2"],[1,"bi","bi-file-text","mr-2","text-orange-600"],["formControlName","description","id","description","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],[1,"pb-8"],[1,"bi","bi-toggle-on","text-green-600","mr-3"],[1,"flex","items-center","space-x-4","space-x-reverse"],["type","checkbox","formControlName","isActive","id","isActive",1,"w-5","h-5","text-green-600","bg-gray-100","border-gray-300","rounded","focus:ring-green-500","focus:ring-2"],["for","isActive",1,"mr-3","text-sm","font-medium","text-gray-700"],[1,"text-sm","text-gray-500"],[1,"bi","bi-info-circle","mr-1"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-orange-600","to-red-600","text-white","rounded-xl","font-semibold","hover:from-orange-700","hover:to-red-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"],[1,"text-red-500","text-sm","mt-1","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.onSubmit()}),l(16,"input",13),n(17,"div",14)(18,"h2",15),l(19,"i",16),r(20," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i(),n(21,"div",17)(22,"div",18)(23,"label",19),l(24,"i",20),r(25," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),n(26,"span",21),r(27,"*"),i()(),l(28,"input",22),f(29,na,3,0,"div",23),i(),n(30,"div",18)(31,"label",19),l(32,"i",20),r(33," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),n(34,"span",21),r(35,"*"),i()(),l(36,"input",24),f(37,ra,3,0,"div",23),i()(),n(38,"div",25)(39,"label",19),l(40,"i",26),r(41," \u0627\u0644\u0648\u0635\u0641 "),i(),l(42,"textarea",27),i()(),n(43,"div",28)(44,"h2",15),l(45,"i",29),r(46," \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 "),i(),n(47,"div",30)(48,"div",4),l(49,"input",31),n(50,"label",32),r(51),i()(),n(52,"div",33),l(53,"i",34),r(54," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0627\u0644\u0646\u0634\u0637 \u064A\u0645\u0643\u0646 \u0627\u0633\u062A\u062E\u062F\u0627\u0645\u0647 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645 "),i()()(),n(55,"div",35)(56,"button",36),x("click",function(){return o.cancel()}),l(57,"i",37),r(58," \u0625\u0644\u063A\u0627\u0621 "),i(),n(59,"button",38),l(60,"i",39),r(61),i()()()()()()),e&2){let s,m,E,I,R;u(9),b(" ",((s=o.storeForm.get("id"))==null?null:s.value)>0?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u0648\u062F\u0639 \u062C\u062F\u064A\u062F"," "),u(6),d("formGroup",o.storeForm),u(14),d("ngIf",((m=o.storeForm.get("nameAr"))==null?null:m.invalid)&&((m=o.storeForm.get("nameAr"))==null?null:m.touched)),u(8),d("ngIf",((E=o.storeForm.get("nameEn"))==null?null:E.invalid)&&((E=o.storeForm.get("nameEn"))==null?null:E.touched)),u(14),b(" ",(I=o.storeForm.get("isActive"))!=null&&I.value?"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0646\u0634\u0637":"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(8),d("disabled",o.storeForm.invalid),u(2),b(" ",((R=o.storeForm.get("id"))==null?null:R.value)>0?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639":"\u062D\u0641\u0638 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"," ")}},dependencies:[w,M,W,V,be,D,B,U,j],encapsulation:2})};function oa(a,t){if(a&1){let e=C();n(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),l(4,"i",15),i()(),n(5,"div",16)(6,"div",17)(7,"h3",18),r(8),i(),n(9,"p",19),r(10),i()(),n(11,"div",20)(12,"p",21),r(13),g(14,"slice"),i()(),n(15,"div",22)(16,"span",23),l(17,"i",24),r(18),i()(),n(19,"div",25)(20,"span",26),r(21),i(),n(22,"button",27),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.onEdit(s.id))}),l(23,"i",28),r(24," \u062A\u0639\u062F\u064A\u0644 "),i()()()()()}if(a&2){let e=t.$implicit;u(8),b(" ",e.nameAr," "),u(2),p(e.nameEn),u(2),d("title",e.description),u(),b(" ",((e.description==null?null:e.description.length)||0)>60?et(14,8,e.description,0,60)+"...":e.description," "),u(3),d("ngClass",e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),d("ngClass",e.isActive?"bi-check-circle":"bi-x-circle"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(3),b("ID: ",e.id)}}function ua(a,t){if(a&1&&(n(0,"div",9),f(1,oa,25,12,"div",10),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e)}}function aa(a,t){if(a&1){let e=C();n(0,"div",29)(1,"div",30),l(2,"i",31),i(),n(3,"h3",32),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i(),n(5,"p",33),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A \u0645\u062A\u0627\u062D\u0629"),i(),n(7,"button",34),x("click",function(){y(e);let s=c();return _(s.onEdit(null))}),l(8,"i",6),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0645\u0633\u062A\u0648\u062F\u0639 "),i()()}}var pi=class a{constructor(t,e,o,s){this.storeService=t;this.router=e;this.route=o;this.lang=s}ngOnInit(){this.loadStores()}stores$;loadStores(){this.stores$=this.storeService.GetStores()}onEdit(t){t?this.router.navigate(["../store-form"],{relativeTo:this.route,queryParams:{storeId:t}}):this.router.navigate(["../store-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(Ne),v(T),v(k),v(G))};static \u0275cmp=A({type:a,selectors:[["app-store"]],standalone:!1,decls:15,vars:6,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-orange-50","to-red-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["title","\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u0648\u062F\u0639",1,"mt-4","sm:mt-0","inline-flex","items-center","px-6","py-3","bg-orange-600","text-white","rounded-xl","font-semibold","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105",3,"click"],[1,"bi","bi-plus-lg","mr-2"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",4,"ngIf"],["class","text-center py-16",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-6"],["class","group h-full",4,"ngFor","ngForOf"],[1,"group","h-full"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","h-full","flex","flex-col"],[1,"bg-gradient-to-br","from-orange-100","to-red-200","p-6","text-center","flex-shrink-0"],[1,"w-16","h-16","bg-gradient-to-br","from-orange-500","to-red-600","rounded-2xl","mx-auto","flex","items-center","justify-center","group-hover:scale-110","transition-transform","duration-300"],[1,"bi","bi-building","text-white","text-2xl"],[1,"p-6","flex","flex-col","flex-grow"],[1,"text-center","mb-4"],[1,"font-bold","text-gray-900","text-lg","mb-1","group-hover:text-orange-600","transition-colors"],[1,"text-gray-500","text-sm"],[1,"flex-grow","mb-4"],[1,"text-gray-600","text-sm","leading-relaxed","text-center","min-h-[3rem]",3,"title"],[1,"text-center","mb-4","flex-shrink-0"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"bi","mr-1",3,"ngClass"],[1,"flex","justify-between","items-center","pt-4","border-t","border-gray-100","flex-shrink-0"],[1,"text-xs","text-gray-500"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639",1,"inline-flex","items-center","px-3","py-2","bg-orange-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-square","mr-1"],[1,"text-center","py-16"],[1,"w-24","h-24","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-building","text-gray-400","text-3xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-6","py-3","bg-orange-600","text-white","rounded-xl","font-semibold","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:ring-offset-2","transition-all","duration-200",3,"click"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5,"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i(),n(6,"p",4),r(7,"\u0625\u062F\u0627\u0631\u0629 \u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A \u0648\u0645\u062E\u0627\u0632\u0646 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A"),i()(),n(8,"button",5),x("click",function(){return o.onEdit(null)}),l(9,"i",6),r(10," \u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u0648\u062F\u0639 "),i()(),f(11,ua,2,1,"div",7),g(12,"async"),f(13,aa,10,0,"div",8),g(14,"async"),i()()),e&2){let s;u(11),d("ngIf",h(12,2,o.stores$)),u(2),d("ngIf",((s=h(14,4,o.stores$))==null?null:s.length)===0)}},dependencies:[fe,F,w,M,me,Ye],encapsulation:2})};var sa=["class","component"],gi=class a{constructor(t,e,o,s,m){this.fb=t;this.supplierService=e;this.toastr=o;this.route=s;this.router=m}supplierForm;isEditMode=!1;supplierId=0;ngOnInit(){this.supplierForm=this.fb.group({id:[0],name:["",S.required],phone:["",S.required],email:["",[S.required,S.email]],address:[""]}),this.route.queryParams.subscribe(t=>{t.supplierId&&(this.supplierId=+t.supplierId,this.isEditMode=!0,this.loadSupplier(this.supplierId))})}loadSupplier(t){this.supplierService.GetSupplierById(t).subscribe({next:e=>{this.supplierForm.patchValue(e)},error:()=>{this.toastr.error("Failed to load supplier")}})}onSubmit(){this.supplierForm.invalid||this.supplierService.SaveSupplier(this.supplierForm.value).subscribe({next:()=>{this.toastr.success("Supplier saved successfully")},error:t=>{this.toastr.error(t.error||"Save failed")}})}cancel(){this.router.navigate(["../suppliers"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v($t),v(ee),v(k),v(T))};static \u0275cmp=A({type:a,selectors:[["app-suppliers-form",8,"component"]],standalone:!1,attrs:sa,decls:54,vars:4,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-green-500","to-emerald-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-building","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-info-circle","text-green-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-building","mr-2","text-green-600"],[1,"text-red-500"],["type","text","formControlName","name","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062F",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-telephone","mr-2","text-green-600"],["type","tel","formControlName","phone","placeholder","\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-envelope","mr-2","text-green-600"],["type","email","formControlName","email","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"mt-6","space-y-2"],[1,"bi","bi-geo-alt","mr-2","text-green-600"],["formControlName","address","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0643\u0627\u0645\u0644",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-green-600","to-emerald-600","text-white","rounded-xl","font-semibold","hover:from-green-700","hover:to-emerald-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0648\u0631\u062F\u064A\u0646 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.onSubmit()}),n(16,"div",13)(17,"h2",14),l(18,"i",15),r(19," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i(),n(20,"div",16)(21,"div",17)(22,"label",18),l(23,"i",19),r(24," \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062F "),n(25,"span",20),r(26,"*"),i()(),l(27,"input",21),i(),n(28,"div",17)(29,"label",18),l(30,"i",22),r(31," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 "),n(32,"span",20),r(33,"*"),i()(),l(34,"input",23),i(),n(35,"div",17)(36,"label",18),l(37,"i",24),r(38," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A "),n(39,"span",20),r(40,"*"),i()(),l(41,"input",25),i()(),n(42,"div",26)(43,"label",18),l(44,"i",27),r(45," \u0627\u0644\u0639\u0646\u0648\u0627\u0646 "),i(),l(46,"textarea",28),i()(),n(47,"div",29)(48,"button",30),x("click",function(){return o.cancel()}),l(49,"i",31),r(50," \u0625\u0644\u063A\u0627\u0621 "),i(),n(51,"button",32),l(52,"i",33),r(53),i()()()()()()),e&2&&(u(9),b(" ",o.isEditMode?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0648\u0631\u062F":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062F \u062C\u062F\u064A\u062F"," "),u(6),d("formGroup",o.supplierForm),u(36),d("disabled",o.supplierForm.invalid),u(2),b(" ",o.isEditMode?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0631\u062F":"\u062D\u0641\u0638 \u0627\u0644\u0645\u0648\u0631\u062F"," "))},dependencies:[M,W,V,D,B,U,j],styles:[".floating-label-input[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding-top:1rem;height:auto}.floating-label-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.75rem;pointer-events:none;color:#6c757d;background-color:#fff;padding:0 4px;font-size:.875em;transition:.2s ease all;transform-origin:0 0}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-1.2rem);left:.25rem;color:#0d6efd}"]})};var da=["class","component"];function ma(a,t){if(a&1){let e=C();n(0,"tr",15)(1,"td",16),r(2),i(),n(3,"td",17),r(4),i(),n(5,"td",18)(6,"div",19),l(7,"i",20),r(8),i()(),n(9,"td",18)(10,"div",19),l(11,"i",21),r(12),i()(),n(13,"td",22)(14,"div",19),l(15,"i",23),r(16),i()(),n(17,"td",24)(18,"div",25)(19,"button",26),x("click",function(){let s=y(e).$implicit,m=c();return _(m.openForm(s.id))}),l(20,"i",27),r(21," \u062A\u0639\u062F\u064A\u0644 "),i(),n(22,"button",28),l(23,"i",29),r(24," \u062D\u0630\u0641 "),i()()()()}if(a&2){let e=t.$implicit,o=t.index;u(2),p(o+1),u(2),p(e.name),u(4),b(" ",e.phone," "),u(4),b(" ",e.email," "),u(),d("title",e.address),u(3),b(" ",e.address," ")}}function ca(a,t){if(a&1){let e=C();n(0,"div",30)(1,"div",31),l(2,"i",32),i(),n(3,"h3",33),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0648\u0631\u062F\u064A\u0646"),i(),n(5,"p",34),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0645\u0648\u0631\u062F\u064A\u0646 \u0645\u0633\u062C\u0644\u064A\u0646"),i(),n(7,"button",35),x("click",function(){y(e);let s=c();return _(s.openForm(null))}),l(8,"i",6),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0645\u0648\u0631\u062F "),i()()}}var fi=class a{constructor(t,e,o){this.supplierService=t;this.router=e;this.route=o}suppliers=[];ngOnInit(){this.loadCustomers()}loadCustomers(){this.supplierService.GetSuppliers().subscribe(t=>{this.suppliers=t})}openForm(t){t?this.router.navigate(["../suppliers-form"],{relativeTo:this.route,queryParams:{supplierId:t}}):this.router.navigate(["../suppliers-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v($t),v(T),v(k))};static \u0275cmp=A({type:a,selectors:[["app-suppliers",8,"component"]],standalone:!1,attrs:da,decls:38,vars:23,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-teal-50","to-green-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-4","sm:mt-0","inline-flex","items-center","px-6","py-3","bg-teal-600","text-white","rounded-xl","font-semibold","hover:bg-teal-700","focus:outline-none","focus:ring-2","focus:ring-teal-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105",3,"click"],[1,"bi","bi-plus-circle","mr-2"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-teal-500","to-green-600"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],["class","text-center py-16",4,"ngIf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900","font-semibold"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-600"],[1,"flex","items-center"],[1,"bi","bi-telephone","mr-2","text-gray-400"],[1,"bi","bi-envelope","mr-2","text-gray-400"],[1,"px-6","py-4","text-sm","text-gray-600","max-w-xs","truncate",3,"title"],[1,"bi","bi-geo-alt","mr-2","text-gray-400"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"flex","items-center","space-x-2"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0648\u0631\u062F",1,"inline-flex","items-center","px-3","py-2","bg-teal-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-teal-700","focus:outline-none","focus:ring-2","focus:ring-teal-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil","mr-1"],["title","\u062D\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062F",1,"inline-flex","items-center","px-3","py-2","bg-red-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors"],[1,"bi","bi-trash","mr-1"],[1,"text-center","py-16"],[1,"w-24","h-24","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-truck","text-gray-400","text-3xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-6","py-3","bg-teal-600","text-white","rounded-xl","font-semibold","hover:bg-teal-700","focus:outline-none","focus:ring-2","focus:ring-teal-500","focus:ring-offset-2","transition-all","duration-200",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5),g(6,"translate"),i(),n(7,"p",4),r(8,"\u0625\u062F\u0627\u0631\u0629 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0648\u0631\u062F\u064A\u0646"),i()(),n(9,"button",5),x("click",function(){return o.openForm(null)}),l(10,"i",6),r(11),g(12,"translate"),i()(),n(13,"div",7)(14,"div",8)(15,"table",9)(16,"thead",10)(17,"tr")(18,"th",11),r(19,"#"),i(),n(20,"th",11),r(21),g(22,"translate"),i(),n(23,"th",11),r(24),g(25,"translate"),i(),n(26,"th",11),r(27),g(28,"translate"),i(),n(29,"th",11),r(30),g(31,"translate"),i(),n(32,"th",11),r(33),g(34,"translate"),i()()(),n(35,"tbody",12),f(36,ma,25,6,"tr",13),i()()()(),f(37,ca,10,0,"div",14),i()()),e&2&&(u(5),p(h(6,9,"SUPPLIERS.TITLE")),u(6),b(" ",h(12,11,"SHARED.BUTTONS.ADD")," "),u(10),p(h(22,13,"SUPPLIERS.NAME")),u(3),p(h(25,15,"SUPPLIERS.PHONE")),u(3),p(h(28,17,"SUPPLIERS.EMAIL")),u(3),p(h(31,19,"SUPPLIERS.ADDRESS")),u(3),p(h(34,21,"SHARED.ACTIONS")),u(3),d("ngForOf",o.suppliers),u(),d("ngIf",(o.suppliers==null?null:o.suppliers.length)===0))},dependencies:[F,w,M,ve],encapsulation:2})};function pa(a,t){a&1&&(n(0,"div",42),l(1,"i",43),r(2," \u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),i())}function ga(a,t){a&1&&(n(0,"div",42),l(1,"i",43),r(2," \u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),i())}function fa(a,t){a&1&&(n(0,"div",42),l(1,"i",43),r(2," \u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),i())}var bi=class a{constructor(t,e,o,s,m){this.fb=t;this.unitsService=e;this.router=o;this.route=s;this.toastr=m}unitForm;ngOnInit(){this.initializingForm(null),this.route.queryParams.subscribe(t=>{let e=+t.unitId;e&&this.unitsService.GetUnitById(e).subscribe({next:o=>{this.initializingForm(o)},error:o=>{}})})}initializingForm(t){this.unitForm=this.fb.group({id:[t?t.id:0],code:[t?t.code:"",S.required],nameEn:[t?t.nameAr:"",S.required],nameAr:[t?t.nameEn:"",S.required],description:[t?t.description:""],isActive:[t?t.isActive:!0]})}onSubmit(){this.unitForm.valid&&this.unitsService.SaveUnit(this.unitForm.value).subscribe({next:t=>{t?(this.toastr.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u0648\u062D\u062F\u0629 \u0642\u064A\u0627\u0633 \u0628\u0646\u062C\u0627\u062D","unit"),this.router.navigate(["../unit"],{relativeTo:this.route})):this.toastr.error(t,"unit")},error:t=>{this.toastr.error(t.error,"unit")}})}cancel(){this.router.navigate(["../unit"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v(rt),v(T),v(k),v(ee))};static \u0275cmp=A({type:a,selectors:[["app-unit-form"]],standalone:!1,decls:70,vars:8,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-purple-500","to-indigo-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-rulers","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],["type","hidden","formControlName","id"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-info-circle","text-purple-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-hash","mr-2","text-purple-600"],[1,"text-red-500"],["type","text","formControlName","code","id","code","placeholder","\u0623\u062F\u062E\u0644 \u0643\u0648\u062F \u0627\u0644\u0648\u062D\u062F\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["class","text-red-500 text-sm mt-1 flex items-center",4,"ngIf"],[1,"bi","bi-tag","mr-2","text-purple-600"],["type","text","formControlName","nameAr","id","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","nameEn","id","nameEn","placeholder","Enter name in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"mt-6","space-y-2"],[1,"bi","bi-file-text","mr-2","text-purple-600"],["formControlName","description","id","description","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641 \u0627\u0644\u0648\u062D\u062F\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],[1,"pb-8"],[1,"bi","bi-toggle-on","text-green-600","mr-3"],[1,"flex","items-center","space-x-4","space-x-reverse"],["type","checkbox","formControlName","isActive","id","isActive",1,"w-5","h-5","text-green-600","bg-gray-100","border-gray-300","rounded","focus:ring-green-500","focus:ring-2"],["for","isActive",1,"mr-3","text-sm","font-medium","text-gray-700"],[1,"text-sm","text-gray-500"],[1,"bi","bi-info-circle","mr-1"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-purple-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"],[1,"text-red-500","text-sm","mt-1","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0648\u062D\u062F\u0627\u062A \u0627\u0644\u0642\u064A\u0627\u0633 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.onSubmit()}),l(16,"input",13),n(17,"div",14)(18,"h2",15),l(19,"i",16),r(20," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i(),n(21,"div",17)(22,"div",18)(23,"label",19),l(24,"i",20),r(25," \u0643\u0648\u062F \u0627\u0644\u0648\u062D\u062F\u0629 "),n(26,"span",21),r(27,"*"),i()(),l(28,"input",22),f(29,pa,3,0,"div",23),i(),n(30,"div",18)(31,"label",19),l(32,"i",24),r(33," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),n(34,"span",21),r(35,"*"),i()(),l(36,"input",25),f(37,ga,3,0,"div",23),i(),n(38,"div",18)(39,"label",19),l(40,"i",24),r(41," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),n(42,"span",21),r(43,"*"),i()(),l(44,"input",26),f(45,fa,3,0,"div",23),i()(),n(46,"div",27)(47,"label",19),l(48,"i",28),r(49," \u0627\u0644\u0648\u0635\u0641 "),i(),l(50,"textarea",29),i()(),n(51,"div",30)(52,"h2",15),l(53,"i",31),r(54," \u062D\u0627\u0644\u0629 \u0627\u0644\u0648\u062D\u062F\u0629 "),i(),n(55,"div",32)(56,"div",4),l(57,"input",33),n(58,"label",34),r(59),i()(),n(60,"div",35),l(61,"i",36),r(62," \u0627\u0644\u0648\u062D\u062F\u0629 \u0627\u0644\u0646\u0634\u0637\u0629 \u064A\u0645\u0643\u0646 \u0627\u0633\u062A\u062E\u062F\u0627\u0645\u0647\u0627 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645 "),i()()(),n(63,"div",37)(64,"button",38),x("click",function(){return o.cancel()}),l(65,"i",39),r(66," \u0625\u0644\u063A\u0627\u0621 "),i(),n(67,"button",40),l(68,"i",41),r(69),i()()()()()()),e&2){let s,m,E,I,R,P;u(9),b(" ",((s=o.unitForm.get("id"))==null?null:s.value)>0?"\u062A\u0639\u062F\u064A\u0644 \u0648\u062D\u062F\u0629 \u0627\u0644\u0642\u064A\u0627\u0633":"\u0625\u0636\u0627\u0641\u0629 \u0648\u062D\u062F\u0629 \u0642\u064A\u0627\u0633 \u062C\u062F\u064A\u062F\u0629"," "),u(6),d("formGroup",o.unitForm),u(14),d("ngIf",((m=o.unitForm.get("code"))==null?null:m.invalid)&&((m=o.unitForm.get("code"))==null?null:m.touched)),u(8),d("ngIf",((E=o.unitForm.get("nameAr"))==null?null:E.invalid)&&((E=o.unitForm.get("nameAr"))==null?null:E.touched)),u(8),d("ngIf",((I=o.unitForm.get("nameEn"))==null?null:I.invalid)&&((I=o.unitForm.get("nameEn"))==null?null:I.touched)),u(14),b(" ",(R=o.unitForm.get("isActive"))!=null&&R.value?"\u0627\u0644\u0648\u062D\u062F\u0629 \u0646\u0634\u0637\u0629":"\u0627\u0644\u0648\u062D\u062F\u0629 \u063A\u064A\u0631 \u0646\u0634\u0637\u0629"," "),u(8),d("disabled",o.unitForm.invalid),u(2),b(" ",((P=o.unitForm.get("id"))==null?null:P.value)>0?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0648\u062D\u062F\u0629":"\u062D\u0641\u0638 \u0627\u0644\u0648\u062D\u062F\u0629"," ")}},dependencies:[w,M,W,V,be,D,B,U,j],encapsulation:2})};function ba(a,t){if(a&1){let e=C();n(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),l(4,"i",15),i()(),n(5,"div",16)(6,"div",17)(7,"h3",18),r(8),i(),n(9,"p",19),r(10),i()(),n(11,"div",20)(12,"p",21),r(13),g(14,"slice"),i()(),n(15,"div",22)(16,"span",23),l(17,"i",24),r(18),i()(),n(19,"div",25)(20,"span",26),r(21),i(),n(22,"button",27),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.onEdit(s.id))}),l(23,"i",28),r(24," \u062A\u0639\u062F\u064A\u0644 "),i()()()()()}if(a&2){let e=t.$implicit;u(8),b(" ",e.nameAr," "),u(2),p(e.nameEn),u(2),d("title",e.description),u(),b(" ",e.description&&e.description.length>60?et(14,8,e.description,0,60)+"...":e.description," "),u(3),d("ngClass",e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),d("ngClass",e.isActive?"bi-check-circle":"bi-x-circle"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(3),b("ID: ",e.id)}}function xa(a,t){if(a&1&&(n(0,"div",9),f(1,ba,25,12,"div",10),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e)}}function va(a,t){if(a&1){let e=C();n(0,"div",29)(1,"div",30),l(2,"i",31),i(),n(3,"h3",32),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0648\u062D\u062F\u0627\u062A \u0642\u064A\u0627\u0633"),i(),n(5,"p",33),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0648\u062D\u062F\u0627\u062A \u0642\u064A\u0627\u0633 \u0645\u062A\u0627\u062D\u0629"),i(),n(7,"button",34),x("click",function(){y(e);let s=c();return _(s.onEdit(null))}),l(8,"i",6),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0648\u062D\u062F\u0629 \u0642\u064A\u0627\u0633 "),i()()}}var xi=class a{constructor(t,e,o,s){this.unitsService=t;this.router=e;this.route=o;this.lang=s}ngOnInit(){this.loadunits()}units$;loadunits(){this.units$=this.unitsService.GetUnits()}onEdit(t){t?this.router.navigate(["../unit-form"],{relativeTo:this.route,queryParams:{unitId:t}}):this.router.navigate(["../unit-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(rt),v(T),v(k),v(G))};static \u0275cmp=A({type:a,selectors:[["app-unit"]],standalone:!1,decls:15,vars:6,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-purple-50","to-indigo-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["title","\u0625\u0636\u0627\u0641\u0629 \u0648\u062D\u062F\u0629 \u0642\u064A\u0627\u0633",1,"mt-4","sm:mt-0","inline-flex","items-center","px-6","py-3","bg-purple-600","text-white","rounded-xl","font-semibold","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105",3,"click"],[1,"bi","bi-plus-lg","mr-2"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",4,"ngIf"],["class","text-center py-16",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-6"],["class","group h-full",4,"ngFor","ngForOf"],[1,"group","h-full"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","h-full","flex","flex-col"],[1,"bg-gradient-to-br","from-purple-100","to-indigo-200","p-6","text-center","flex-shrink-0"],[1,"w-16","h-16","bg-gradient-to-br","from-purple-500","to-indigo-600","rounded-2xl","mx-auto","flex","items-center","justify-center","group-hover:scale-110","transition-transform","duration-300"],[1,"bi","bi-rulers","text-white","text-2xl"],[1,"p-6","flex","flex-col","flex-grow"],[1,"text-center","mb-4"],[1,"font-bold","text-gray-900","text-lg","mb-1","group-hover:text-purple-600","transition-colors"],[1,"text-gray-500","text-sm"],[1,"flex-grow","mb-4"],[1,"text-gray-600","text-sm","leading-relaxed","text-center","min-h-[3rem]",3,"title"],[1,"text-center","mb-4","flex-shrink-0"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"bi","mr-1",3,"ngClass"],[1,"flex","justify-between","items-center","pt-4","border-t","border-gray-100","flex-shrink-0"],[1,"text-xs","text-gray-500"],["title","\u062A\u0639\u062F\u064A\u0644 \u0648\u062D\u062F\u0629 \u0627\u0644\u0642\u064A\u0627\u0633",1,"inline-flex","items-center","px-3","py-2","bg-purple-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-square","mr-1"],[1,"text-center","py-16"],[1,"w-24","h-24","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-rulers","text-gray-400","text-3xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"inline-flex","items-center","px-6","py-3","bg-purple-600","text-white","rounded-xl","font-semibold","hover:bg-purple-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-all","duration-200",3,"click"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5,"\u0648\u062D\u062F\u0627\u062A \u0627\u0644\u0642\u064A\u0627\u0633"),i(),n(6,"p",4),r(7,"\u0625\u062F\u0627\u0631\u0629 \u0648\u062D\u062F\u0627\u062A \u0642\u064A\u0627\u0633 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A"),i()(),n(8,"button",5),x("click",function(){return o.onEdit(null)}),l(9,"i",6),r(10," \u0625\u0636\u0627\u0641\u0629 \u0648\u062D\u062F\u0629 \u0642\u064A\u0627\u0633 "),i()(),f(11,xa,2,1,"div",7),g(12,"async"),f(13,va,10,0,"div",8),g(14,"async"),i()()),e&2){let s;u(11),d("ngIf",h(12,2,o.units$)),u(2),d("ngIf",((s=h(14,4,o.units$))==null?null:s.length)===0)}},dependencies:[fe,F,w,M,me,Ye],encapsulation:2})};var vi={showCompanyName:!0,showCompanyLogo:!0,showCompanyAddress:!0,showCompanyPhone:!0,showCompanyFax:!0,showCompanyEmail:!0,showRegistrationNumber:!0,showCapital:!0,showTaxNumber:!0,showSlogan:!0,showDocumentTitle:!0},hi={showTerms:!0,showNotes:!0,showCustomerSignature:!0,showAuthorizedSignature:!0,showCompanyFooterNote:!0,showDocumentGenerationDate:!0};function ha(a,t){a&1&&(n(0,"div",17)(1,"label",18),l(2,"i",58),r(3," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),n(4,"span",20),r(5,"*"),i()(),l(6,"input",59),i())}function ya(a,t){a&1&&(n(0,"div",16)(1,"div",17)(2,"label",18),l(3,"i",60),r(4," \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (\u0646\u0635 \u0628\u0633\u064A\u0637) "),i(),l(5,"textarea",61),i(),n(6,"div",17)(7,"label",18),l(8,"i",60),r(9," \u062A\u0630\u064A\u064A\u0644 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (\u0646\u0635 \u0628\u0633\u064A\u0637) "),i(),l(10,"textarea",62),i()())}function _a(a,t){a&1&&(n(0,"div",63)(1,"div",64)(2,"h3",65),l(3,"i",66),r(4," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0631\u0623\u0633 \u0627\u0644\u0645\u0633\u062A\u0646\u062F "),i(),n(5,"div",67)(6,"label",68),l(7,"i",69),r(8," \u0646\u0635 \u0645\u062E\u0635\u0635 \u0641\u064A \u0627\u0644\u0631\u0623\u0633 (HTML/\u0646\u0635 \u0639\u0627\u062F\u064A) "),i(),l(9,"textarea",70),i(),n(10,"div",71)(11,"h4",72),r(12,"\u0625\u0638\u0647\u0627\u0631/\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u0639\u0646\u0627\u0635\u0631"),i(),n(13,"div",73)(14,"label",74),l(15,"input",75),n(16,"span",76),r(17,"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629"),i()(),n(18,"label",74),l(19,"input",77),n(20,"span",76),r(21,"\u0634\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0643\u0629"),i()(),n(22,"label",74),l(23,"input",78),n(24,"span",76),r(25,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0634\u0631\u0643\u0629"),i()(),n(26,"label",74),l(27,"input",79),n(28,"span",76),r(29,"\u0647\u0627\u062A\u0641 \u0627\u0644\u0634\u0631\u0643\u0629"),i()(),n(30,"label",74),l(31,"input",80),n(32,"span",76),r(33,"\u0641\u0627\u0643\u0633 \u0627\u0644\u0634\u0631\u0643\u0629"),i()(),n(34,"label",74),l(35,"input",81),n(36,"span",76),r(37,"\u0628\u0631\u064A\u062F \u0627\u0644\u0634\u0631\u0643\u0629"),i()(),n(38,"label",74),l(39,"input",82),n(40,"span",76),r(41,"\u0631\u0642\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644"),i()(),n(42,"label",74),l(43,"input",83),n(44,"span",76),r(45,"\u0631\u0623\u0633 \u0627\u0644\u0645\u0627\u0644"),i()(),n(46,"label",74),l(47,"input",84),n(48,"span",76),r(49,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064A\u0628\u064A"),i()(),n(50,"label",74),l(51,"input",85),n(52,"span",76),r(53,"\u0627\u0644\u0634\u0639\u0627\u0631"),i()(),n(54,"label",74),l(55,"input",86),n(56,"span",76),r(57,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0633\u062A\u0646\u062F"),i()()()()(),n(58,"div",87)(59,"h3",65),l(60,"i",88),r(61," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u062A\u0630\u064A\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u0646\u062F "),i(),n(62,"div",89)(63,"label",68),l(64,"i",90),r(65," \u0646\u0635 \u0645\u062E\u0635\u0635 \u0641\u064A \u0627\u0644\u062A\u0630\u064A\u064A\u0644 (HTML/\u0646\u0635 \u0639\u0627\u062F\u064A) "),i(),l(66,"textarea",91),i(),n(67,"div",89)(68,"label",68),l(69,"i",92),r(70," \u0634\u0631\u0648\u0637 \u0648\u0623\u062D\u0643\u0627\u0645 \u0645\u062E\u0635\u0635\u0629 (\u062A\u062A\u062C\u0627\u0648\u0632 \u0634\u0631\u0648\u0637 \u0627\u0644\u0634\u0631\u0643\u0629) "),i(),l(71,"textarea",93),i(),n(72,"div",67)(73,"label",68),l(74,"i",94),r(75," \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0645\u062E\u0635\u0635\u0629 "),i(),l(76,"textarea",95),i(),n(77,"div",71)(78,"h4",72),r(79,"\u0625\u0638\u0647\u0627\u0631/\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u0639\u0646\u0627\u0635\u0631"),i(),n(80,"div",96)(81,"label",74),l(82,"input",97),n(83,"span",76),r(84,"\u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062D\u0643\u0627\u0645"),i()(),n(85,"label",74),l(86,"input",98),n(87,"span",76),r(88,"\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),i()(),n(89,"label",74),l(90,"input",99),n(91,"span",76),r(92,"\u062A\u0648\u0642\u064A\u0639 \u0627\u0644\u0639\u0645\u064A\u0644"),i()(),n(93,"label",74),l(94,"input",100),n(95,"span",76),r(96,"\u0627\u0644\u062A\u0648\u0642\u064A\u0639 \u0627\u0644\u0645\u0639\u062A\u0645\u062F"),i()(),n(97,"label",74),l(98,"input",101),n(99,"span",76),r(100,"\u0645\u0644\u0627\u062D\u0638\u0629 \u0627\u0644\u0634\u0631\u0643\u0629"),i()(),n(101,"label",74),l(102,"input",102),n(103,"span",76),r(104,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0646\u0634\u0627\u0621"),i()()()()()())}function Sa(a,t){if(a&1){let e=C();n(0,"div",103)(1,"input",104),x("change",function(s){let m=y(e).$implicit,E=c();return _(E.onRoleChange(m.id,s))}),i(),n(2,"label",105),r(3),i()()}if(a&2){let e,o=t.$implicit,s=c();u(),d("id",$e("role_",o.id))("value",o.id)("checked",(e=s.userForm.get("roles"))==null?null:e.value.includes(o.id)),u(),d("for",$e("role_",o.id)),u(),b(" ",o.nameAr," ")}}var yi=class a{constructor(t,e,o,s,m,E,I){this.usersService=t;this.roleService=e;this.fb=o;this.router=s;this.route=m;this.lang=E;this.toastr=I;this.stores=this.route.snapshot.data.StoresResolver}userForm;roles=[];stores=[];printSettingsExpanded=!1;ngOnInit(){this.initializingForm(null),this.route.queryParams.subscribe(t=>{let e=+t.userId;e&&this.usersService.GetUserById(e).subscribe({next:o=>{this.initializingForm(o)},error:o=>{}})}),this.roleService.GetRoles().subscribe(t=>{this.roles=t})}initializingForm(t){let e=this.parsePrintSettings(t?.printHeader||""),o=this.parsePrintFooterSettings(t?.printFooter||"");this.userForm=this.fb.group({id:[t?.id||0],nameEn:[t?.nameEn||"",S.required],nameAr:[t?.nameAr||"",S.required],phone:[t?.phone||""],email:[t?.email||"",[S.required,S.email]],address:[t?.address||""],username:[t?.username||"",S.required],passwordHash:[t?.passwordHash||"",t?[]:[S.required]],roles:[t?.userRoles?.map(s=>s.roleId)||[]],printHeader:[t?.printHeader||""],printFooter:[t?.printFooter||""],printHeaderCustomText:[e.customText||""],printFooterCustomText:[o.customText||""],printFooterCustomTerms:[o.customTerms||""],printFooterCustomNotes:[o.customNotes||""],showCompanyName:[e.visibility?.showCompanyName??!0],showCompanyLogo:[e.visibility?.showCompanyLogo??!0],showCompanyAddress:[e.visibility?.showCompanyAddress??!0],showCompanyPhone:[e.visibility?.showCompanyPhone??!0],showCompanyFax:[e.visibility?.showCompanyFax??!0],showCompanyEmail:[e.visibility?.showCompanyEmail??!0],showRegistrationNumber:[e.visibility?.showRegistrationNumber??!0],showCapital:[e.visibility?.showCapital??!0],showTaxNumber:[e.visibility?.showTaxNumber??!0],showSlogan:[e.visibility?.showSlogan??!0],showDocumentTitle:[e.visibility?.showDocumentTitle??!0],showTerms:[o.visibility?.showTerms??!0],showNotes:[o.visibility?.showNotes??!0],showCustomerSignature:[o.visibility?.showCustomerSignature??!0],showAuthorizedSignature:[o.visibility?.showAuthorizedSignature??!0],showCompanyFooterNote:[o.visibility?.showCompanyFooterNote??!0],showDocumentGenerationDate:[o.visibility?.showDocumentGenerationDate??!0],isActive:[t?.isActive??!0]}),this.printSettingsExpanded=this.isJsonString(t?.printHeader||"")||this.isJsonString(t?.printFooter||"")}parsePrintSettings(t){if(!t)return{customText:"",visibility:vi};if(this.isJsonString(t))try{let e=JSON.parse(t);return{customText:e.customText||"",visibility:{showCompanyName:e.visibility?.showCompanyName??!0,showCompanyLogo:e.visibility?.showCompanyLogo??!0,showCompanyAddress:e.visibility?.showCompanyAddress??!0,showCompanyPhone:e.visibility?.showCompanyPhone??!0,showCompanyFax:e.visibility?.showCompanyFax??!0,showCompanyEmail:e.visibility?.showCompanyEmail??!0,showRegistrationNumber:e.visibility?.showRegistrationNumber??!0,showCapital:e.visibility?.showCapital??!0,showTaxNumber:e.visibility?.showTaxNumber??!0,showSlogan:e.visibility?.showSlogan??!0,showDocumentTitle:e.visibility?.showDocumentTitle??!0}}}catch{return{customText:t,visibility:vi}}return{customText:t,visibility:vi}}parsePrintFooterSettings(t){if(!t)return{customText:"",customTerms:"",customNotes:"",visibility:hi};if(this.isJsonString(t))try{let e=JSON.parse(t);return{customText:e.customText||"",customTerms:e.customTerms||"",customNotes:e.customNotes||"",visibility:{showTerms:e.visibility?.showTerms??!0,showNotes:e.visibility?.showNotes??!0,showCustomerSignature:e.visibility?.showCustomerSignature??!0,showAuthorizedSignature:e.visibility?.showAuthorizedSignature??!0,showCompanyFooterNote:e.visibility?.showCompanyFooterNote??!0,showDocumentGenerationDate:e.visibility?.showDocumentGenerationDate??!0}}}catch{return{customText:t,customTerms:"",customNotes:"",visibility:hi}}return{customText:t,customTerms:"",customNotes:"",visibility:hi}}isJsonString(t){if(!t||t.trim().length===0)return!1;let e=t.trim();return e.startsWith("{")&&e.endsWith("}")}togglePrintSettingsExpanded(){this.printSettingsExpanded=!this.printSettingsExpanded}onRoleChange(t,e){let o=e.target.checked,s=[...this.userForm.get("roles")?.value];if(o)s.push(t);else{let m=s.indexOf(t);m>-1&&s.splice(m,1)}this.userForm.get("roles")?.setValue(s)}get isEditMode(){return this.userForm.get("id")?.value>0}save(){if(this.userForm.valid){let t=se({},this.userForm.value);if(this.printSettingsExpanded){let e={customText:t.printHeaderCustomText||null,visibility:{showCompanyName:t.showCompanyName??!0,showCompanyLogo:t.showCompanyLogo??!0,showCompanyAddress:t.showCompanyAddress??!0,showCompanyPhone:t.showCompanyPhone??!0,showCompanyFax:t.showCompanyFax??!0,showCompanyEmail:t.showCompanyEmail??!0,showRegistrationNumber:t.showRegistrationNumber??!0,showCapital:t.showCapital??!0,showTaxNumber:t.showTaxNumber??!0,showSlogan:t.showSlogan??!0,showDocumentTitle:t.showDocumentTitle??!0}};t.printHeader=JSON.stringify(e);let o={customText:t.printFooterCustomText||null,customTerms:t.printFooterCustomTerms||null,customNotes:t.printFooterCustomNotes||null,visibility:{showTerms:t.showTerms??!0,showNotes:t.showNotes??!0,showCustomerSignature:t.showCustomerSignature??!0,showAuthorizedSignature:t.showAuthorizedSignature??!0,showCompanyFooterNote:t.showCompanyFooterNote??!0,showDocumentGenerationDate:t.showDocumentGenerationDate??!0}};t.printFooter=JSON.stringify(o)}delete t.printHeaderCustomText,delete t.printFooterCustomText,delete t.printFooterCustomTerms,delete t.printFooterCustomNotes,delete t.showCompanyName,delete t.showCompanyLogo,delete t.showCompanyAddress,delete t.showCompanyPhone,delete t.showCompanyFax,delete t.showCompanyEmail,delete t.showRegistrationNumber,delete t.showCapital,delete t.showTaxNumber,delete t.showSlogan,delete t.showDocumentTitle,delete t.showTerms,delete t.showNotes,delete t.showCustomerSignature,delete t.showAuthorizedSignature,delete t.showCompanyFooterNote,delete t.showDocumentGenerationDate,this.usersService.SaveUser(t).subscribe({next:e=>{e?(this.toastr.success("\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0646\u062C\u0627\u062D","\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),this.router.navigate(["../users"],{relativeTo:this.route})):this.toastr.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0641\u0638","\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645")},error:e=>{this.toastr.error(e.error||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0641\u0638","\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645")}})}else this.toastr.error("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629!","\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645")}cancel(){this.router.navigate(["../users"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(it),v(st),v(L),v(T),v(k),v(G),v(ee))};static \u0275cmp=A({type:a,selectors:[["app-users-form"]],standalone:!1,decls:100,vars:11,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-person-plus","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-person-lines-fill","text-blue-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-person","mr-2","text-blue-600"],[1,"text-red-500"],["type","text","formControlName","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","nameEn","placeholder","Enter name in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-telephone","mr-2","text-green-600"],["type","tel","formControlName","phone","placeholder","\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-envelope","mr-2","text-purple-600"],["type","email","formControlName","email","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"mt-6","space-y-2"],[1,"bi","bi-geo-alt","mr-2","text-amber-600"],["type","text","formControlName","address","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0643\u0627\u0645\u0644",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-shield-lock","text-indigo-600","mr-3"],[1,"bi","bi-person-circle","mr-2","text-indigo-600"],["type","text","formControlName","username","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["class","space-y-2",4,"ngIf"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-bold","text-gray-900","flex","items-center"],[1,"bi","bi-printer","text-gray-600","mr-3"],["type","button",1,"text-sm","text-blue-600","hover:text-blue-700","flex","items-center",3,"click"],[1,"mr-1"],["class","grid grid-cols-1 md:grid-cols-2 gap-6",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"bi","bi-toggle-on","text-green-600","mr-3"],[1,"flex","items-center","space-x-4","space-x-reverse"],["type","checkbox","formControlName","isActive","id","isActive",1,"w-5","h-5","text-green-600","bg-gray-100","border-gray-300","rounded","focus:ring-green-500","focus:ring-2"],["for","isActive",1,"mr-3","text-sm","font-medium","text-gray-700"],[1,"text-sm","text-gray-500"],[1,"bi","bi-info-circle","mr-1"],[1,"pb-8"],[1,"bi","bi-shield-check","text-amber-600","mr-3"],[1,"bg-gray-50","rounded-xl","p-6"],[1,"text-sm","text-gray-600","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],["class","flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-amber-300 transition-colors",4,"ngFor","ngForOf"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"],[1,"bi","bi-key","mr-2","text-red-600"],["type","password","formControlName","passwordHash","placeholder","\u0623\u062F\u062E\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-red-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-file-text","mr-2","text-gray-600"],["formControlName","printHeader","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0637\u0628\u0627\u0639\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:border-gray-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],["formControlName","printFooter","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u062A\u0630\u064A\u064A\u0644 \u0627\u0644\u0637\u0628\u0627\u0639\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:border-gray-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],[1,"space-y-6"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","rounded-xl","p-6","border-2","border-blue-200"],[1,"text-lg","font-bold","text-gray-900","mb-4","flex","items-center"],[1,"bi","bi-heading","text-blue-600","mr-2"],[1,"mb-6"],[1,"block","text-sm","font-semibold","text-gray-700","mb-2"],[1,"bi","bi-file-text","mr-2","text-blue-600"],["formControlName","printHeaderCustomText","rows","3","placeholder","\u0623\u062F\u062E\u0644 \u0646\u0635 \u0645\u062E\u0635\u0635 \u0644\u0644\u0631\u0623\u0633 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-all","duration-200","bg-white","resize-none"],[1,"bg-white","rounded-lg","p-4"],[1,"text-md","font-semibold","text-gray-800","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],[1,"flex","items-center","p-3","bg-gray-50","rounded-lg","hover:bg-gray-100","cursor-pointer"],["type","checkbox","formControlName","showCompanyName",1,"w-4","h-4","text-blue-600","rounded"],[1,"mr-2","text-sm","text-gray-700"],["type","checkbox","formControlName","showCompanyLogo",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showCompanyAddress",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showCompanyPhone",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showCompanyFax",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showCompanyEmail",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showRegistrationNumber",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showCapital",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showTaxNumber",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showSlogan",1,"w-4","h-4","text-blue-600","rounded"],["type","checkbox","formControlName","showDocumentTitle",1,"w-4","h-4","text-blue-600","rounded"],[1,"bg-gradient-to-r","from-green-50","to-emerald-50","rounded-xl","p-6","border-2","border-green-200"],[1,"bi","bi-file-earmark-text","text-green-600","mr-2"],[1,"mb-4"],[1,"bi","bi-file-text","mr-2","text-green-600"],["formControlName","printFooterCustomText","rows","3","placeholder","\u0623\u062F\u062E\u0644 \u0646\u0635 \u0645\u062E\u0635\u0635 \u0644\u0644\u062A\u0630\u064A\u064A\u0644 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-white","resize-none"],[1,"bi","bi-file-earmark-check","mr-2","text-green-600"],["formControlName","printFooterCustomTerms","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u0634\u0631\u0648\u0637 \u0648\u0623\u062D\u0643\u0627\u0645 \u0645\u062E\u0635\u0635\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-white","resize-none"],[1,"bi","bi-sticky","mr-2","text-green-600"],["formControlName","printFooterCustomNotes","rows","3","placeholder","\u0623\u062F\u062E\u0644 \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0645\u062E\u0635\u0635\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-white","resize-none"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-4"],["type","checkbox","formControlName","showTerms",1,"w-4","h-4","text-green-600","rounded"],["type","checkbox","formControlName","showNotes",1,"w-4","h-4","text-green-600","rounded"],["type","checkbox","formControlName","showCustomerSignature",1,"w-4","h-4","text-green-600","rounded"],["type","checkbox","formControlName","showAuthorizedSignature",1,"w-4","h-4","text-green-600","rounded"],["type","checkbox","formControlName","showCompanyFooterNote",1,"w-4","h-4","text-green-600","rounded"],["type","checkbox","formControlName","showDocumentGenerationDate",1,"w-4","h-4","text-green-600","rounded"],[1,"flex","items-center","p-3","bg-white","rounded-lg","border","border-gray-200","hover:border-amber-300","transition-colors"],["type","checkbox",1,"w-4","h-4","text-amber-600","bg-gray-100","border-gray-300","rounded","focus:ring-amber-500","focus:ring-2",3,"change","id","value","checked"],[1,"mr-3","text-sm","font-medium","text-gray-700","cursor-pointer","flex-1",3,"for"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0627\u0645\u0644\u0623 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0644\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.save()}),n(16,"div",13)(17,"h2",14),l(18,"i",15),r(19," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i(),n(20,"div",16)(21,"div",17)(22,"label",18),l(23,"i",19),r(24," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),n(25,"span",20),r(26,"*"),i()(),l(27,"input",21),i(),n(28,"div",17)(29,"label",18),l(30,"i",19),r(31," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),i(),l(32,"input",22),i(),n(33,"div",17)(34,"label",18),l(35,"i",23),r(36," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 "),i(),l(37,"input",24),i(),n(38,"div",17)(39,"label",18),l(40,"i",25),r(41," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A "),i(),l(42,"input",26),i()(),n(43,"div",27)(44,"label",18),l(45,"i",28),r(46," \u0627\u0644\u0639\u0646\u0648\u0627\u0646 "),i(),l(47,"input",29),i()(),n(48,"div",13)(49,"h2",14),l(50,"i",30),r(51," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062D\u0633\u0627\u0628 "),i(),n(52,"div",16)(53,"div",17)(54,"label",18),l(55,"i",31),r(56," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 "),n(57,"span",20),r(58,"*"),i()(),l(59,"input",32),i(),f(60,ha,7,0,"div",33),i()(),n(61,"div",13)(62,"div",34)(63,"h2",35),l(64,"i",36),r(65," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0628\u0627\u0639\u0629 "),i(),n(66,"button",37),x("click",function(){return o.togglePrintSettingsExpanded()}),l(67,"i"),n(68,"span",38),r(69),i()()(),f(70,ya,11,0,"div",39)(71,_a,105,0,"div",40),i(),n(72,"div",13)(73,"h2",14),l(74,"i",41),r(75," \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 "),i(),n(76,"div",42)(77,"div",4),l(78,"input",43),n(79,"label",44),r(80," \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0646\u0634\u0637 "),i()(),n(81,"div",45),l(82,"i",46),r(83," \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0627\u0644\u0646\u0634\u0637 \u064A\u0645\u0643\u0646\u0647 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0648\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0646\u0638\u0627\u0645 "),i()()(),n(84,"div",47)(85,"h2",14),l(86,"i",48),r(87," \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A "),i(),n(88,"div",49)(89,"p",50),r(90,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 \u0644\u0644\u0645\u0633\u062A\u062E\u062F\u0645:"),i(),n(91,"div",51),f(92,Sa,4,7,"div",52),i()()(),n(93,"div",53)(94,"button",54),x("click",function(){return o.cancel()}),l(95,"i",55),r(96," \u0625\u0644\u063A\u0627\u0621 "),i(),n(97,"button",56),l(98,"i",57),r(99),i()()()()()()),e&2){let s,m;u(9),b(" ",((s=o.userForm.get("id"))==null?null:s.value)>0?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u062E\u062F\u0645 \u062C\u062F\u064A\u062F"," "),u(6),d("formGroup",o.userForm),u(45),d("ngIf",!o.isEditMode),u(7),K(o.printSettingsExpanded?"bi bi-chevron-up":"bi bi-chevron-down"),u(2),p(o.printSettingsExpanded?"\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644":"\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),u(),d("ngIf",!o.printSettingsExpanded),u(),d("ngIf",o.printSettingsExpanded),u(21),d("ngForOf",o.roles),u(5),d("disabled",!o.userForm.valid),u(2),b(" ",((m=o.userForm.get("id"))==null?null:m.value)>0?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645":"\u062D\u0641\u0638 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"," ")}},dependencies:[F,w,M,W,V,be,D,B,U,j],styles:[".floating-label-input[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-top:1rem}.floating-label-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.75rem;pointer-events:none;color:#6c757d;background-color:#fff;padding:0 4px;font-size:.875rem;transition:.2s ease all;transform-origin:0 0}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-1.2rem);left:.25rem;color:#0d6efd}"]})};function Ca(a,t){if(a&1&&(n(0,"span",50),r(1),i()),a&2){let e=t.$implicit;u(),b(" ",e.role.nameAr," ")}}function Ea(a,t){a&1&&(n(0,"span",51),r(1,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0635\u0644\u0627\u062D\u064A\u0627\u062A"),i())}function Aa(a,t){if(a&1){let e=C();n(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26),l(4,"i",27),i(),n(5,"h3",28),r(6),i(),n(7,"span",29),l(8,"i",30),r(9),i()(),n(10,"div",31)(11,"div",32)(12,"div",33),l(13,"i",34),n(14,"div")(15,"p",35),r(16,"\u0627\u0644\u0647\u0627\u062A\u0641"),i(),n(17,"p",36),r(18),i()()(),n(19,"div",33),l(20,"i",37),n(21,"div")(22,"p",35),r(23,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),i(),n(24,"p",36),r(25),i()()(),n(26,"div",33),l(27,"i",38),n(28,"div")(29,"p",35),r(30,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"),i(),n(31,"p",36),r(32),i()()()(),n(33,"div",39)(34,"p",40),l(35,"i",41),r(36," \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A "),i(),n(37,"div",42),f(38,Ca,2,1,"span",43)(39,Ea,2,0,"span",44),i()(),n(40,"div",45)(41,"button",46),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.openForm(s.id))}),l(42,"i",47),r(43," \u062A\u0639\u062F\u064A\u0644 "),i(),n(44,"button",48),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.changePassword(s.id))}),l(45,"i",49),r(46," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),i()()()()()}if(a&2){let e=t.$implicit;u(6),p(e.nameAr),u(3),b(" ",e.username," "),u(9),p(e.phone||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),u(7),p(e.email||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),u(7),p(e.address||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),u(6),d("ngForOf",e.userRoles),u(),d("ngIf",!e.userRoles||e.userRoles.length===0)}}function wa(a,t){if(a&1&&(n(0,"div",21),f(1,Aa,47,7,"div",22),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e.users)}}function Ia(a,t){if(a&1){let e=C();n(0,"div",52)(1,"div",53),l(2,"i",54),i(),n(3,"h3",55),r(4,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646"),i(),n(5,"p",56),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i(),n(7,"button",10),x("click",function(){y(e);let s=c();return _(s.openForm(null))}),l(8,"i",57),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0645\u0633\u062A\u062E\u062F\u0645 "),i()()}}function Pa(a,t){a&1&&(n(0,"span",68),r(1,"..."),i())}function Fa(a,t){if(a&1){let e=C();n(0,"button",63),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.changePage(s))}),r(1),i()}if(a&2){let e=t.$implicit,o=c(2);N("bg-blue-600",e===o.pageIndex)("text-white",e===o.pageIndex)("bg-gray-100",e!==o.pageIndex)("text-gray-700",e!==o.pageIndex)("hover:bg-gray-200",e!==o.pageIndex),u(),p(e)}}function Oa(a,t){a&1&&(n(0,"span",68),r(1,"..."),i())}function Ta(a,t){if(a&1){let e=C();n(0,"button",63),x("click",function(){y(e);let s=c(2);return _(s.changePage(s.totalPages))}),r(1),i()}if(a&2){let e=c(2);N("bg-blue-600",e.pageIndex===e.totalPages)("text-white",e.pageIndex===e.totalPages)("bg-gray-100",e.pageIndex!==e.totalPages)("text-gray-700",e.pageIndex!==e.totalPages)("hover:bg-gray-200",e.pageIndex!==e.totalPages),u(),p(e.totalPages)}}function Ma(a,t){if(a&1){let e=C();n(0,"div",58)(1,"nav",59)(2,"div",60)(3,"button",61),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex-1))}),l(4,"i",62),i(),n(5,"button",63),x("click",function(){y(e);let s=c();return _(s.changePage(1))}),r(6,"1"),i(),f(7,Pa,2,0,"span",64)(8,Fa,2,11,"button",65)(9,Oa,2,0,"span",64)(10,Ta,2,11,"button",66),n(11,"button",61),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex+1))}),l(12,"i",67),i()()()()}if(a&2){let e=c();u(3),d("disabled",e.pageIndex===1),u(2),N("bg-blue-600",e.pageIndex===1)("text-white",e.pageIndex===1)("bg-gray-100",e.pageIndex!==1)("text-gray-700",e.pageIndex!==1)("hover:bg-gray-200",e.pageIndex!==1),u(2),d("ngIf",e.pageIndex>4),u(),d("ngForOf",e.getPageRange()),u(),d("ngIf",e.pageIndex<e.totalPages-3),u(),d("ngIf",e.totalPages>1),u(),d("disabled",e.pageIndex===e.totalPages||e.totalPages===0)}}var _i=class a{constructor(t,e,o,s,m,E){this.usersService=t;this.lang=e;this.router=o;this.route=s;this.toastr=m;this.fb=E;this.searchForm=this.fb.group({keyword:["",S.required]})}ngOnInit(){this.loadUsers()}loadUsers(t="GET"){t==="GET"?(this.searchForm.reset(),this.users$=this.usersService.GetUsersPagination(this.pageIndex,this.pageSize).pipe(ke(e=>{this.totalPages=Math.ceil(e.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(o,s)=>s+1)}))):this.keyword?.value?this.users$=this.usersService.SearchUsersPagination(this.pageIndex,this.pageSize,this.keyword?.value?.toString()).pipe(ke(e=>{this.totalPages=Math.ceil(e.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(o,s)=>s+1)})):this.toastr.info("please specify the search term!","Search")}openForm(t){t?this.router.navigate(["../users-form"],{relativeTo:this.route,queryParams:{userId:t}}):this.router.navigate(["../users-form"],{relativeTo:this.route})}users$;users;pageIndex=1;pageSize=10;totalPages=1;totalPagesArray=[];searchForm;changePage(t){t>0&&t<=this.totalPages&&(this.pageIndex=t,this.loadUsers())}getPageRange(){let e=[],o=Math.max(2,this.pageIndex-2),s=Math.min(this.totalPages-1,this.pageIndex+2);for(let m=o;m<=s;m++)e.push(m);return e}changePassword(t){this.usersService.ChangePasswordForAdmin(t).subscribe({next:e=>{e?this.toastr.success("Successfully password changed","User"):this.toastr.error("Error while change password","User")},error:e=>{this.toastr.error(e.error,"User")}})}get keyword(){return this.searchForm.get("keyword")}static \u0275fac=function(e){return new(e||a)(v(it),v(G),v(T),v(k),v(ee),v(L))};static \u0275cmp=A({type:a,selectors:[["app-users"]],standalone:!1,decls:30,vars:8,consts:[["noData",""],[1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-people","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"inline-flex","items-center","px-6","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-plus-circle","mr-2","text-lg"],[1,"flex","gap-4",3,"ngSubmit","formGroup"],[1,"flex-1","relative"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","pointer-events-none"],[1,"bi","bi-search","text-gray-400"],["type","text","formControlName","keyword","placeholder","\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646...",1,"w-full","pl-4","pr-10","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-green-600","to-emerald-600","text-white","rounded-xl","font-semibold","hover:from-green-700","hover:to-emerald-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg"],[1,"bi","bi-search","mr-2"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",4,"ngIf","ngIfElse"],["class","bg-white rounded-2xl shadow-lg p-6 mt-8",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["class","group",4,"ngFor","ngForOf"],[1,"group"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","h-full","flex","flex-col"],[1,"bg-gradient-to-br","from-blue-50","to-indigo-100","p-6","text-center"],[1,"w-20","h-20","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-full","mx-auto","flex","items-center","justify-center","group-hover:scale-110","transition-transform","duration-300"],[1,"bi","bi-person","text-white","text-3xl"],[1,"text-xl","font-bold","text-gray-900","mt-4","mb-1"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium","bg-blue-100","text-blue-800"],[1,"bi","bi-person-circle","mr-1"],[1,"p-6","flex","flex-col","flex-grow"],[1,"space-y-3","mb-6"],[1,"flex","items-center","text-gray-600"],[1,"bi","bi-telephone-fill","text-blue-500","mr-3","text-lg"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-sm"],[1,"bi","bi-envelope-fill","text-green-500","mr-3","text-lg"],[1,"bi","bi-house-door-fill","text-purple-500","mr-3","text-lg"],[1,"mb-6"],[1,"text-sm","font-medium","text-gray-500","mb-2","flex","items-center"],[1,"bi","bi-person-badge-fill","text-amber-500","mr-2"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",4,"ngFor","ngForOf"],["class","text-xs text-gray-400",4,"ngIf"],[1,"flex","gap-2","mt-auto"],[1,"flex-1","inline-flex","items-center","justify-center","px-4","py-2","bg-blue-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil","mr-2"],["type","button",1,"flex-1","inline-flex","items-center","justify-center","px-4","py-2","bg-amber-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-amber-700","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-key","mr-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-amber-100","text-amber-800"],[1,"text-xs","text-gray-400"],[1,"bg-white","rounded-2xl","shadow-lg","p-12","text-center"],[1,"w-24","h-24","bg-gray-100","rounded-full","mx-auto","flex","items-center","justify-center","mb-6"],[1,"bi","bi-people","text-gray-400","text-4xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"bi","bi-plus-circle","mr-2"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mt-8"],["aria-label","Page navigation",1,"flex","justify-center"],[1,"flex","items-center","space-x-2","space-x-reverse"],[1,"px-4","py-2","text-gray-500","hover:text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"bi","bi-chevron-right"],[1,"px-4","py-2","rounded-lg","transition-colors","font-medium",3,"click"],["class","px-4 py-2 text-gray-400",4,"ngIf"],["class","px-4 py-2 rounded-lg transition-colors font-medium",3,"bg-blue-600","text-white","bg-gray-100","text-gray-700","hover:bg-gray-200","click",4,"ngFor","ngForOf"],["class","px-4 py-2 rounded-lg transition-colors font-medium",3,"bg-blue-600","text-white","bg-gray-100","text-gray-700","hover:bg-gray-200","click",4,"ngIf"],[1,"bi","bi-chevron-left"],[1,"px-4","py-2","text-gray-400"]],template:function(e,o){if(e&1){let s=C();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),l(6,"i",7),i(),n(7,"div")(8,"h1",8),r(9,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646"),i(),n(10,"p",9),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0648\u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()(),n(12,"button",10),x("click",function(){return y(s),_(o.openForm(null))}),l(13,"i",11),r(14," \u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u062E\u062F\u0645 \u062C\u062F\u064A\u062F "),i()()(),n(15,"div",3)(16,"form",12),x("ngSubmit",function(){return y(s),_(o.loadUsers("SEARCH"))}),n(17,"div",13)(18,"div",14),l(19,"i",15),i(),l(20,"input",16),i(),n(21,"button",17),l(22,"i",18),r(23," \u0628\u062D\u062B "),i()()(),f(24,wa,2,1,"div",19),g(25,"async"),f(26,Ia,10,0,"ng-template",null,0,je)(28,Ma,13,16,"div",20),g(29,"async"),i()()}if(e&2){let s=We(27);u(16),d("formGroup",o.searchForm),u(8),d("ngIf",h(25,4,o.users$))("ngIfElse",s),u(4),d("ngIf",h(29,6,o.users$))}},dependencies:[F,w,W,V,D,B,U,j,me],styles:[".card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{font-size:.875rem}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.badge.bg-secondary[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .5rem}"]})};var Bn=(a,t,e=Dt(It))=>e.GetAllPermissions();var Si=class a{constructor(t,e){this.breadcrumbService=t;this.translate=e}setDashboardBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645",route:null}])}setProductsBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",route:null}])}setProductFormBreadcrumbs(t=!1){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",route:"/admin/products"},{label:t?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0646\u062A\u062C":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062A\u062C \u062C\u062F\u064A\u062F",route:null}])}setCategoriesBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A",route:null}])}setCategoryFormBreadcrumbs(t=!1){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A",route:"/admin/categories"},{label:t?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641":"\u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 \u062C\u062F\u064A\u062F",route:null}])}setSubCategoriesBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A",route:"/admin/categories"},{label:"\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u0641\u0631\u0639\u064A\u0629",route:null}])}setSubCategoryFormBreadcrumbs(t=!1){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A",route:"/admin/categories"},{label:t?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A":"\u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 \u0641\u0631\u0639\u064A \u062C\u062F\u064A\u062F",route:null}])}setStoresBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A",route:null}])}setStoreFormBreadcrumbs(t=!1){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A",route:"/admin/stores"},{label:t?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u0648\u062F\u0639 \u062C\u062F\u064A\u062F",route:null}])}setUsersBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646",route:null}])}setUserFormBreadcrumbs(t=!1){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646",route:"/admin/users"},{label:t?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u062E\u062F\u0645 \u062C\u062F\u064A\u062F",route:null}])}setRolesBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0623\u062F\u0648\u0627\u0631",route:null}])}setRoleFormBreadcrumbs(t=!1){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0623\u062F\u0648\u0627\u0631",route:"/admin/roles"},{label:t?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062F\u0648\u0631":"\u0625\u0636\u0627\u0641\u0629 \u062F\u0648\u0631 \u062C\u062F\u064A\u062F",route:null}])}setOrdersBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0637\u0644\u0628\u0627\u062A",route:null}])}setOrderFormBreadcrumbs(t=!1){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0637\u0644\u0628\u0627\u062A",route:"/admin/order-list"},{label:t?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0637\u0644\u0628":"\u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 \u062C\u062F\u064A\u062F",route:null}])}setInventoryBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0645\u062E\u0632\u0648\u0646",route:null}])}setReportsBreadcrumbs(t="\u0627\u0644\u062A\u0642\u0627\u0631\u064A\u0631"){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u062A\u0642\u0627\u0631\u064A\u0631",route:"/admin/inventory-report"},{label:t,route:null}])}setCompanyBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0634\u0631\u0643\u0629",route:null}])}setCompanyFormBreadcrumbs(){this.breadcrumbService.setFrom([{label:"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629",route:"/admin/dashboard"},{label:"\u0627\u0644\u0634\u0631\u0643\u0629",route:"/admin/company"},{label:"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0634\u0631\u0643\u0629",route:null}])}static \u0275fac=function(e){return new(e||a)(te(Fn),te(Wt))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ra=["productModal"];function Da(a,t){if(a&1){let e=C();n(0,"button",19),x("click",function(){y(e);let s=c();return _(s.openForm(null))}),l(1,"i",20),n(2,"span",21),r(3,"Add Product"),i()()}}function Na(a,t){if(a&1&&(n(0,"option",15),r(1),i()),a&2){let e=t.$implicit,o=c();d("ngValue",e.id),u(),b(" ",o.lang.currentLang==="ar"?e.nameAr:e.nameEn," ")}}function Va(a,t){if(a&1){let e=C();n(0,"button",51),x("click",function(){y(e);let s=c().$implicit,m=c(2);return _(m.openForm(s.id))}),l(1,"i",52),r(2," \u062A\u0639\u062F\u064A\u0644 "),i()}}function La(a,t){if(a&1){let e=C();n(0,"button",53),x("click",function(){y(e);let s=c().$implicit,m=c(2);return _(m.manageInventory(s.id))}),l(1,"i",54),i()}}function Ba(a,t){if(a&1){let e=C();n(0,"div",25)(1,"div",26),l(2,"app-image-uploader",27),n(3,"div",28)(4,"span",29),r(5),i()(),n(6,"div",30)(7,"button",31),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.openForm(s.id))}),l(8,"i",32),i()()(),n(9,"div",33)(10,"h3",34),r(11),i(),n(12,"div",35)(13,"div",36)(14,"span",37),r(15),g(16,"currency"),i()(),n(17,"div",36),l(18,"div",38),n(19,"span",39),r(20),i()()(),n(21,"div",40)(22,"div",41)(23,"span",42),r(24,"\u0627\u0644\u0643\u0648\u062F:"),i(),n(25,"span",43),r(26),i()(),n(27,"div",41)(28,"span",42),r(29,"\u0627\u0644\u0648\u062D\u062F\u0629:"),i(),n(30,"span",43),r(31),i()(),n(32,"div",44)(33,"span",42),r(34,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062E\u0632\u0648\u0646:"),i(),n(35,"div",45),l(36,"i",46),n(37,"span",47),r(38),i()()()(),n(39,"div",48),f(40,Va,3,0,"button",49)(41,La,2,0,"button",50),i()()()}if(a&2){let e=t.$implicit,o=c(2);u(2),d("initialImageUrl",o.imageUrlService.getImageUrl(e.imagePath,o.serverUrl))("readonly",!0),u(3),b(" ",e==null||e.subCategory==null?null:e.subCategory.nameAr," "),u(6),b(" ",e.nameAr," "),u(4),p(Bt(16,16,e.sellingPrice,"\u062F.\u0623","symbol","1.2-2")),u(3),K(o.getTotalStock(e)>0?"bg-green-500":"bg-red-500"),u(),K(o.getTotalStock(e)>0?"text-green-600":"text-red-600"),u(),b(" ",o.getTotalStock(e)>0?o.getTotalStock(e):"\u0646\u0641\u062F"," "),u(6),p(e==null?null:e.code),u(5),p(e==null||e.unit==null?null:e.unit.nameAr),u(7),q("",o.getTotalStock(e)," ",e==null||e.unit==null?null:e.unit.nameAr),u(2),d("ngIf",o.hasAnyPermission(o.permissionsEnum.EDIT_PRODUCT)),u(),d("ngIf",o.hasAnyPermission(o.permissionsEnum.VIEW_INVENTORY_MANAGEMENT))}}function Ua(a,t){if(a&1&&(n(0,"div",22)(1,"div",23),f(2,Ba,42,21,"div",24),i()()),a&2){let e=t.ngIf;u(2),d("ngForOf",e.products)}}function ja(a,t){a&1&&(n(0,"li")(1,"span",63),r(2,"..."),i()())}function Ga(a,t){if(a&1){let e=C();n(0,"li")(1,"button",59),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.changePage(s))}),r(2),i()()}if(a&2){let e=t.$implicit,o=c(2);u(),K(e===o.pageIndex?"bg-blue-600 text-white border-blue-600":"text-gray-500 bg-white"),u(),p(e)}}function Wa(a,t){a&1&&(n(0,"li")(1,"span",63),r(2,"..."),i()())}function $a(a,t){if(a&1){let e=C();n(0,"li")(1,"button",59),x("click",function(){y(e);let s=c(2);return _(s.changePage(s.totalPages))}),r(2),i()()}if(a&2){let e=c(2);u(),K(e.pageIndex===e.totalPages?"bg-blue-600 text-white border-blue-600":"text-gray-500 bg-white"),u(),p(e.totalPages)}}function Ha(a,t){if(a&1){let e=C();n(0,"div",55)(1,"div",56)(2,"nav",57)(3,"ul",45)(4,"li")(5,"button",58),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex-1))}),r(6,"\xAB"),i()(),n(7,"li")(8,"button",59),x("click",function(){y(e);let s=c();return _(s.changePage(1))}),r(9,"1"),i()(),f(10,ja,3,0,"li",60)(11,Ga,3,3,"li",61)(12,Wa,3,0,"li",60)(13,$a,3,3,"li",60),n(14,"li")(15,"button",62),x("click",function(){y(e);let s=c();return _(s.changePage(s.pageIndex+1))}),r(16,"\xBB"),i()()()()()()}if(a&2){let e=c();u(5),d("disabled",e.pageIndex===1),u(3),K(e.pageIndex===1?"bg-blue-600 text-white border-blue-600":"text-gray-500 bg-white"),u(2),d("ngIf",e.pageIndex>4),u(),d("ngForOf",e.getPageRange()),u(),d("ngIf",e.pageIndex<e.totalPages-3),u(),d("ngIf",e.totalPages>1),u(2),d("disabled",e.pageIndex===e.totalPages||e.totalPages===0)}}var Ci=class a{constructor(t,e,o,s,m,E,I,R,P,ne,Ae){this.productService=t;this.categoriesService=e;this.unitsService=o;this.fb=s;this.router=m;this.route=E;this.lang=I;this.toastr=R;this.authService=P;this.adminBreadcrumbService=ne;this.imageUrlService=Ae;this.stores=this.route.snapshot.data.StoresResolver,this.productForm=this.fb.group({id:[null],name:["",S.required],price:[0,S.required]}),this.searchForm=this.fb.group({keyword:[null,S.required]})}ngOnInit(){this.adminBreadcrumbService.setProductsBreadcrumbs(),this.loadProducts(),this.categoriesService.GetCategories().subscribe({next:t=>{this.categories=t},error:t=>{}}),this.unitsService.GetUnits().subscribe({next:t=>{this.units=t},error:t=>{}}),this.serverUrl=this.productService.url.substring(0,this.productService.url.indexOf("api"))}categories;units;products$;pageIndex=1;pageSize=10;totalPages=1;totalPagesArray=[];productForm;searchForm;editingProduct=null;productModalRef;serverUrl="";permissionsEnum=mt;stores=[];storeId=0;hasAnyPermission(...t){return t.some(e=>this.authService.hasPermission(e))}openForm(t){t?this.router.navigate(["../product-form"],{relativeTo:this.route,queryParams:{productId:t}}):this.router.navigate(["../product-form"],{relativeTo:this.route})}manageVariantStock(t,e){this.router.navigate(["../product-form"],{relativeTo:this.route,queryParams:{productId:t,variantId:e,tab:"variants"}})}getVariantStock(t,e,o){return this.variantStockData[`${t}-${e}-${o}`]||0}getTotalVariantStock(t,e){let o=0;return this.stores.forEach(s=>{o+=this.getVariantStock(t,e,s.id)}),o}getVariantStockForStore(t,e,o){return this.getVariantStock(t,e,o)}hasVariantStock(t){return!t.variants||t.variants.length===0?!1:t.variants.some(e=>this.getStoresForVariant(t.id,e.id).length>0)}getMainProductInventories(t){return t.inventories?.filter(e=>!e.variantId)||[]}getTotalVariantsWithStock(t){return t.variants?t.variants.filter(e=>this.getStoresForVariant(t.id,e.id).length>0).length:0}getStoresForVariant(t,e){let o=[],s=this.variantStockData,m=new Set;return Object.keys(s).forEach(E=>{let[I,R,P]=E.split("-").map(Number);I===t&&R===e&&s[E]>0&&m.add(P)}),m.forEach(E=>{let I=this.stores.find(R=>R.id===E);I&&o.push(I)}),o}variantStockData={};loadVariantStockData(t){t.forEach(e=>{e.variants&&e.variants.length>0&&e.variantStockData&&Object.keys(e.variantStockData).forEach(o=>{let s=e.variantStockData[o],m=o.replace("store_","");s.forEach(E=>{let I=`${e.id}-${E.variantId}-${m}`;this.variantStockData[I]=E.availableQuantity})})})}loadProducts(t="GET"){if(t==="GET")this.searchForm.reset(),this.products$=this.productService.GetProductsPagination(this.pageIndex,this.pageSize).pipe(ke(o=>{this.totalPages=Math.ceil(o.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(s,m)=>m+1),this.loadVariantStockData(o.products)}),Me(o=>{let s=o.products.filter(m=>this.authService.hasProduct(m.id));return Oe(se({},o),{products:s,totals:s.length})}));else{var e="";this.keyword?.value&&(e=this.keyword.value?.toString()),this.products$=this.productService.SearchProductsPagination(this.pageIndex,this.pageSize,e,this.storeId).pipe(ke(o=>{this.totalPages=Math.ceil(o.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(s,m)=>m+1)}),Me(o=>{let s=o.products.filter(m=>this.authService.hasProduct(m.id));return Oe(se({},o),{products:s,totals:s.length})}))}}getPageRange(){let e=[],o=Math.max(2,this.pageIndex-2),s=Math.min(this.totalPages-1,this.pageIndex+2);for(let m=o;m<=s;m++)e.push(m);return e}changePage(t){t<1||t>this.totalPages||(this.pageIndex=t,this.keyword.value||this.storeId>0?this.loadProducts("SEARCH"):this.loadProducts())}get keyword(){return this.searchForm.get("keyword")}getTotalStock(t){let e=0;return t.inventories&&t.inventories.length>0&&(e+=t.inventories.reduce((o,s)=>o+(s.quantity||0),0)),t.variants&&t.variants.length>0&&t.variants.forEach(o=>{o.inventories&&o.inventories.length>0&&(e+=o.inventories.reduce((s,m)=>s+(m.quantity||0),0))}),e}manageInventory(t){this.router.navigate(["/admin/inventory-management"],{queryParams:{productId:t}})}static \u0275fac=function(e){return new(e||a)(v(Ee),v(ot),v(rt),v(L),v(T),v(k),v(G),v(ee),v(ce),v(Si),v(Ve))};static \u0275cmp=A({type:a,selectors:[["app-products"]],viewQuery:function(e,o){if(e&1&&Je(Ra,5),e&2){let s;Xe(s=Ze())&&(o.productModalRef=s.first)}},standalone:!1,decls:29,vars:22,consts:[[1,"w-full"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-4","gap-2","sm:gap-0"],[1,"p-2"],[1,"font-bold","text-gray-900","text-lg","sm:text-xl"],["class","inline-flex items-center px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors text-sm sm:text-base",3,"click",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","justify-between","items-start","lg:items-center","mb-4","gap-4"],[1,"p-2","w-full","lg:w-auto"],[1,"flex","flex-col","sm:flex-row","gap-2",3,"formGroup"],[1,"flex-1","min-w-48","sm:min-w-64"],["type","text","aria-label","Search products","autocomplete","off",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","text-sm","sm:text-base",3,"formControlName","placeholder"],[1,"flex","gap-2"],["type","button",1,"px-3","py-2","border","border-gray-300","text-gray-700","bg-white","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","text-sm","sm:text-base",3,"click"],[1,"bi","bi-search"],[1,"bi","bi-x-circle"],[1,"w-full","lg:w-auto","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","text-sm","sm:text-base",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","mb-8",4,"ngIf"],["class","w-full mt-12",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-2","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","text-sm","sm:text-base",3,"click"],[1,"bi","bi-plus-lg","mr-1"],[1,"hidden","sm:inline"],[1,"mb-8"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-3","sm:gap-4","lg:gap-6"],["class","bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 overflow-hidden border border-gray-100 group",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","group"],[1,"relative","w-full","h-40","sm:h-48","lg:h-56","bg-gradient-to-br","from-gray-50","to-gray-100","overflow-hidden"],[3,"initialImageUrl","readonly"],[1,"absolute","top-3","right-3"],[1,"bg-white","bg-opacity-90","backdrop-blur-sm","text-gray-700","text-xs","px-3","py-1","rounded-full","font-medium","shadow-sm"],[1,"absolute","top-3","left-3","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0646\u062A\u062C",1,"w-10","h-10","bg-white","bg-opacity-90","backdrop-blur-sm","rounded-full","flex","items-center","justify-center","shadow-lg","hover:bg-opacity-100","transition-all","duration-200",3,"click"],[1,"bi","bi-pencil-fill","text-gray-700","text-sm"],[1,"p-3","sm:p-4","lg:p-5"],[1,"font-bold","text-gray-900","text-sm","sm:text-base","lg:text-lg","mb-2","line-clamp-2","group-hover:text-blue-600","transition-colors"],[1,"flex","items-center","justify-between","mb-3","sm:mb-4"],[1,"flex","items-center","space-x-1","sm:space-x-2"],[1,"text-lg","sm:text-xl","lg:text-2xl","font-bold","text-green-600"],[1,"w-2","h-2","sm:w-3","sm:h-3","rounded-full"],[1,"text-xs","sm:text-sm","font-medium"],[1,"space-y-2","text-sm"],[1,"flex","justify-between","items-center"],[1,"text-gray-500"],[1,"font-medium","text-gray-900"],[1,"flex","justify-between","items-center","pt-2","border-t","border-gray-100"],[1,"flex","items-center","space-x-1"],[1,"bi","bi-boxes","text-blue-500"],[1,"font-bold","text-blue-600"],[1,"mt-4","flex","space-x-2"],["class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors text-sm font-medium",3,"click",4,"ngIf"],["class","px-4 py-2 border border-gray-300 text-gray-700 bg-white rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors","title","\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646",3,"click",4,"ngIf"],[1,"flex-1","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","text-sm","font-medium",3,"click"],[1,"bi","bi-pencil-fill","mr-2"],["title","\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646",1,"px-4","py-2","border","border-gray-300","text-gray-700","bg-white","rounded-lg","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-boxes"],[1,"w-full","mt-12"],[1,"flex","justify-center","pt-8","border-t","border-gray-200"],["aria-label","Page navigation"],[1,"px-3","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-l-md","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-3","py-2","text-sm","font-medium","border","border-gray-300","hover:bg-gray-50",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"px-3","py-2","text-sm","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-r-md","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"px-3","py-2","text-sm","text-gray-500","bg-white","border","border-gray-300"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),r(4),g(5,"translate"),i()(),n(6,"div",2),f(7,Da,4,0,"button",4),i()(),n(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),l(12,"input",9),g(13,"translate"),i(),n(14,"div",10)(15,"button",11),x("click",function(){return o.loadProducts("SEARCH")}),l(16,"i",12),i(),n(17,"button",11),x("click",function(){return o.loadProducts(o.storeId>0?"SEARCH":"GET")}),l(18,"i",13),i()()()(),n(19,"div",6)(20,"select",14),ue("ngModelChange",function(m){return oe(o.storeId,m)||(o.storeId=m),m}),x("change",function(){return o.loadProducts(o.storeId>0?"SEARCH":"GET")}),n(21,"option",15),r(22),g(23,"translate"),i(),f(24,Na,2,2,"option",16),i()()(),f(25,Ua,3,1,"div",17),g(26,"async"),f(27,Ha,17,8,"div",18),g(28,"async"),i()),e&2&&(u(4),p(h(5,12,"PRODUCTS.TITLE")),u(3),d("ngIf",o.hasAnyPermission(o.permissionsEnum.ADD_PRODUCT)),u(3),d("formGroup",o.searchForm),u(2),d("placeholder",rn(h(13,14,"SHARED.SEARCH")))("formControlName","keyword"),u(8),re("ngModel",o.storeId),u(),d("ngValue",0),u(),p(h(23,16,"FORMS.ALL_BRANCHES")),u(2),d("ngForOf",o.stores),u(),d("ngIf",h(26,18,o.products$)),u(2),d("ngIf",h(28,20,o.products$)))},dependencies:[F,w,Fe,X,Z,V,J,D,B,Re,U,j,me,Se,ve],styles:['.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.group[_ngcontent-%COMP%]:hover   .group-hover\\:opacity-100[_ngcontent-%COMP%]{opacity:1}.group[_ngcontent-%COMP%]:hover   .group-hover\\:text-blue-600[_ngcontent-%COMP%]{color:#2563eb}.group[_ngcontent-%COMP%]:hover   .group-hover\\:scale-105[_ngcontent-%COMP%]{transform:scale(1.05)}.stock-indicator[_ngcontent-%COMP%]{position:relative}.stock-indicator[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8px;height:8px;border-radius:50%;background-color:currentColor;opacity:.3}.transition-all[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.transition-opacity[_ngcontent-%COMP%]{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.transition-colors[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.backdrop-blur-sm[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.btn-modern[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-modern[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-modern[_ngcontent-%COMP%]:hover:before{left:100%}@media (max-width: 640px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr));gap:1rem}}@media (min-width: 641px) and (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 769px) and (max-width: 1024px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width: 1025px) and (max-width: 1280px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width: 1281px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,minmax(0,1fr))}}.image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:1rem 1rem 0 0}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease}.image-container[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.card-content[_ngcontent-%COMP%]{padding:1.25rem}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{line-height:1.4;margin-bottom:.5rem}.price-display[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#059669}.stock-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.stock-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:.75rem;height:.75rem;border-radius:50%}.stock-status[_ngcontent-%COMP%]   .status-dot.in-stock[_ngcontent-%COMP%]{background-color:#10b981}.stock-status[_ngcontent-%COMP%]   .status-dot.out-of-stock[_ngcontent-%COMP%]{background-color:#ef4444}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem}.action-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{flex:1;background-color:#2563eb;color:#fff;border:none;border-radius:.5rem;padding:.5rem 1rem;font-weight:500;transition:all .2s ease}.action-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#1d4ed8;transform:translateY(-1px)}.action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#fff;color:#374151;border:1px solid #d1d5db;border-radius:.5rem;padding:.5rem;transition:all .2s ease}.action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f9fafb;border-color:#9ca3af}']})};function za(a,t){if(a&1){let e=C();n(0,"button",8),x("click",function(){y(e);let s=c();return _(s.onEdit(null))}),l(1,"i",9),r(2," \u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 \u0641\u0631\u0639\u064A "),i()}}function Ya(a,t){if(a&1){let e=C();n(0,"button",28),x("click",function(){y(e);let s=c().$implicit,m=c(2);return _(m.onEdit(s.id))}),l(1,"i",29),r(2," \u062A\u0639\u062F\u064A\u0644 "),i()}}function Qa(a,t){if(a&1&&(n(0,"div",12)(1,"div",13)(2,"div",14),l(3,"app-image-uploader",15),i(),n(4,"div",16)(5,"div",17)(6,"h3",18),r(7),i(),n(8,"p",19),r(9),i()(),n(10,"div",20)(11,"p",21),r(12),g(13,"slice"),i()(),n(14,"div",22)(15,"span",23),l(16,"i",24),r(17),i()(),n(18,"div",25)(19,"span",26),r(20),i(),f(21,Ya,3,0,"button",27),i()()()()),a&2){let e=t.$implicit,o=c(2);u(3),d("initialImageUrl",o.imageUrlService.getImageUrl(e.imagePath,o.serverUrl))("readonly",!0),u(4),b(" ",e.nameAr," "),u(2),p(e.nameEn),u(2),d("title",e.description),u(),b(" ",((e.description==null?null:e.description.length)||0)>60?et(13,11,e.description,0,60)+"...":e.description," "),u(3),d("ngClass",e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),d("ngClass",e.isActive?"bi-check-circle":"bi-x-circle"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(3),b("ID: ",e.id),u(),d("ngIf",o.authService.hasPermission("EDIT_SUBCATEGORY"))}}function Ka(a,t){if(a&1&&(n(0,"div",10),f(1,Qa,22,15,"div",11),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e)}}function Ja(a,t){if(a&1){let e=C();n(0,"button",36),x("click",function(){y(e);let s=c(2);return _(s.onEdit(null))}),l(1,"i",9),r(2," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u062A\u0635\u0646\u064A\u0641 \u0641\u0631\u0639\u064A "),i()}}function Xa(a,t){if(a&1&&(n(0,"div",30)(1,"div",31),l(2,"i",32),i(),n(3,"h3",33),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0641\u0631\u0639\u064A\u0629"),i(),n(5,"p",34),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0641\u0631\u0639\u064A\u0629 \u0645\u062A\u0627\u062D\u0629"),i(),f(7,Ja,3,0,"button",35),i()),a&2){let e=c();u(7),d("ngIf",e.authService.hasPermission("ADD_SUBCATEGORY"))}}var Ei=class a{constructor(t,e,o,s,m,E){this.subCategoryService=t;this.router=e;this.route=o;this.lang=s;this.authService=m;this.imageUrlService=E}ngOnInit(){this.loadcategorys(),this.serverUrl=this.subCategoryService.url.substring(0,this.subCategoryService.url.indexOf("api"))}subCategorys$;serverUrl="";loadcategorys(){this.subCategorys$=this.subCategoryService.GetSubCategories().pipe(Me(t=>t.filter(e=>this.authService.hasSubCategory(e.id))))}onEdit(t){t?this.router.navigate(["../sub-category-form"],{relativeTo:this.route,queryParams:{categoryId:t}}):this.router.navigate(["../sub-category-form"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(zt),v(T),v(k),v(G),v(ce),v(Ve))};static \u0275cmp=A({type:a,selectors:[["app-sub-category"]],standalone:!1,decls:13,vars:7,consts:[["dir","rtl",1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-green-50","to-emerald-100","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mt-4 sm:mt-0 inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105","title","\u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 \u0641\u0631\u0639\u064A",3,"click",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",4,"ngIf"],["class","text-center py-16",4,"ngIf"],["title","\u0625\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 \u0641\u0631\u0639\u064A",1,"mt-4","sm:mt-0","inline-flex","items-center","px-6","py-3","bg-green-600","text-white","rounded-xl","font-semibold","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105",3,"click"],[1,"bi","bi-plus-lg","mr-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-6"],["class","group h-full",4,"ngFor","ngForOf"],[1,"group","h-full"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","h-full","flex","flex-col"],[1,"w-full","h-48","bg-gradient-to-br","from-green-100","to-emerald-200","flex","items-center","justify-center","flex-shrink-0","overflow-hidden"],[3,"initialImageUrl","readonly"],[1,"p-6","flex","flex-col","flex-grow"],[1,"text-center","mb-4"],[1,"font-bold","text-gray-900","text-lg","mb-1","group-hover:text-green-600","transition-colors"],[1,"text-gray-500","text-sm"],[1,"flex-grow","mb-4"],[1,"text-gray-600","text-sm","leading-relaxed","min-h-[3rem]",3,"title"],[1,"text-center","mb-4","flex-shrink-0"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"bi","mr-1",3,"ngClass"],[1,"flex","justify-between","items-center","pt-4","border-t","border-gray-100","flex-shrink-0"],[1,"text-xs","text-gray-500"],["class","inline-flex items-center px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors","title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A",3,"click",4,"ngIf"],["title","\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A",1,"inline-flex","items-center","px-3","py-2","bg-green-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-square","mr-1"],[1,"text-center","py-16"],[1,"w-24","h-24","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-tags","text-gray-400","text-3xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["class","inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-6","py-3","bg-green-600","text-white","rounded-xl","font-semibold","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","duration-200",3,"click"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),r(5,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u0641\u0631\u0639\u064A\u0629"),i(),n(6,"p",4),r(7,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A \u0627\u0644\u0641\u0631\u0639\u064A\u0629 \u0644\u0644\u0645\u0646\u062A\u062C\u0627\u062A"),i()(),f(8,za,3,0,"button",5),i(),f(9,Ka,2,1,"div",6),g(10,"async"),f(11,Xa,8,1,"div",7),g(12,"async"),i()()),e&2){let s;u(8),d("ngIf",o.authService.hasPermission("ADD_SUBCATEGORY")),u(),d("ngIf",h(10,3,o.subCategorys$)),u(2),d("ngIf",((s=h(12,5,o.subCategorys$))==null?null:s.length)===0)}},dependencies:[fe,F,w,Fe,M,me,Ye],encapsulation:2})};function Za(a,t){a&1&&(n(0,"div",50),l(1,"i",51),r(2," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A \u0645\u0637\u0644\u0648\u0628 "),i())}function el(a,t){a&1&&(n(0,"div",50),l(1,"i",51),r(2," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A \u0645\u0637\u0644\u0648\u0628 "),i())}function tl(a,t){if(a&1&&(n(0,"option",28),r(1),i()),a&2){let e=t.$implicit;d("ngValue",e.id),u(),p(e.nameAr)}}function il(a,t){a&1&&(n(0,"div",50),l(1,"i",51),r(2," \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0631\u0626\u064A\u0633\u064A \u0645\u0637\u0644\u0648\u0628 "),i())}var Ai=class a{constructor(t,e,o,s,m,E){this.fb=t;this.subCategoryService=e;this.router=o;this.route=s;this.toastr=m;this.imageUrlService=E;this.categories=this.route.snapshot.data.categoriesResolver}subCategoryForm;categories=[];serverUrl=Y.resourcesUrl||"";ngOnInit(){this.initializingForm(null),this.route.queryParams.subscribe(t=>{let e=+t.categoryId;e&&this.subCategoryService.GetSubCategoryById(e).subscribe({next:o=>{this.initializingForm(o)},error:o=>{}})})}initializingForm(t){this.subCategoryForm=this.fb.group({id:[t?t.id:0],nameEn:[t?t.nameEn:"",S.required],nameAr:[t?t.nameAr:"",S.required],categoryId:[t?t.categoryId:null,S.required],description:[t?t.description:""],imagePath:[t?t.imagePath:""],image:[null],isActive:[t?t.isActive:!0]})}onSubmit(){if(this.subCategoryForm.valid){let t=new FormData;t.append("id",this.subCategoryForm.get("id")?.value),t.append("nameEn",this.subCategoryForm.get("nameEn")?.value),t.append("nameAr",this.subCategoryForm.get("nameAr")?.value),t.append("categoryId",this.subCategoryForm.get("categoryId")?.value),t.append("description",this.subCategoryForm.get("description")?.value),t.append("isActive",this.subCategoryForm.get("isActive")?.value);let e=this.subCategoryForm.get("image")?.value;e instanceof File&&t.append("image",e,e.name),this.subCategoryService.SaveSubCategory(t).subscribe({next:o=>{o?(this.toastr.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u062A\u0635\u0646\u064A\u0641 \u0628\u0646\u062C\u0627\u062D","subCategory"),this.router.navigate(["../sub-category"],{relativeTo:this.route})):this.toastr.error(o,"subCategory")},error:o=>{this.toastr.error(o.error,"subCategory")}})}}cancel(){this.router.navigate(["../sub-category"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||a)(v(L),v(zt),v(T),v(k),v(ee),v(Ve))};static \u0275cmp=A({type:a,selectors:[["app-sub-category-form"]],standalone:!1,decls:83,vars:10,consts:[[1,"min-h-screen","bg-gradient-to-br","from-purple-50","to-pink-100","p-4","md:p-6"],[1,"max-w-4xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-xl","mb-8","overflow-hidden"],[1,"bg-gradient-to-r","from-purple-600","to-pink-700","px-6","py-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-12","h-12","bg-white","bg-opacity-20","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-diagram-3","text-white","text-2xl"],[1,"text-2xl","font-bold","text-white"],[1,"text-purple-100","mt-1"],[1,"px-4","py-2","bg-white","bg-opacity-20","text-white","rounded-lg","hover:bg-opacity-30","transition-colors",3,"click"],[1,"bi","bi-arrow-right","mr-2"],[1,"space-y-8",3,"formGroup"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600","px-6","py-4"],[1,"text-xl","font-bold","text-white","flex","items-center"],[1,"bi","bi-info-circle","mr-3"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-translate","mr-2","text-purple-600"],["type","text","formControlName","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],["class","text-red-500 text-sm flex items-center",4,"ngIf"],["type","text","formControlName","nameEn","placeholder","Enter subcategory name in English",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"mt-6","space-y-2"],[1,"bi","bi-tags","mr-2","text-purple-600"],["formControlName","categoryId",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"bi","bi-file-text","mr-2","text-purple-600"],["formControlName","description","rows","4","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641\u0627\u064B \u0645\u0641\u0635\u0644\u0627\u064B \u0644\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A...",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors","resize-none"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","px-6","py-4"],[1,"bi","bi-image","mr-3"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bi","bi-camera","mr-2","text-blue-600"],[1,"border-2","border-dashed","border-gray-300","rounded-xl","p-4","hover:border-blue-400","transition-colors"],["formControlName","image",3,"initialImageUrl"],[1,"bi","bi-toggle-on","mr-2","text-blue-600"],[1,"flex","items-center","space-x-3","p-4","bg-gray-50","rounded-xl"],["type","checkbox","formControlName","isActive",1,"h-6","w-6","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-white","rounded-2xl","shadow-xl","p-6"],[1,"flex","flex-col","sm:flex-row","justify-end","gap-4"],["type","button",1,"w-full","sm:w-auto","px-8","py-3","bg-gray-500","text-white","rounded-xl","hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"],[1,"bi","bi-x-circle","mr-2"],["type","button",1,"w-full","sm:w-auto","px-8","py-3","bg-gradient-to-r","from-purple-600","to-pink-600","text-white","rounded-xl","hover:from-purple-700","hover:to-pink-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","font-semibold","shadow-lg",3,"click","disabled"],[1,"bi","bi-check-circle","mr-2"],["type","hidden","formControlName","id"],[1,"text-red-500","text-sm","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),l(7,"i",7),i(),n(8,"div")(9,"h1",8),r(10," \u0625\u0636\u0627\u0641\u0629 / \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A "),i(),n(11,"p",9),r(12,"\u0625\u062F\u0627\u0631\u0629 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A \u0648\u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),i()()(),n(13,"button",10),x("click",function(){return o.cancel()}),l(14,"i",11),r(15," \u0627\u0644\u0639\u0648\u062F\u0629 "),i()()()(),n(16,"form",12)(17,"div",13)(18,"div",14)(19,"h2",15),l(20,"i",16),r(21," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i()(),n(22,"div",17)(23,"div",18)(24,"div",19)(25,"label",20),l(26,"i",21),r(27," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A (\u0639\u0631\u0628\u064A) * "),i(),l(28,"input",22),f(29,Za,3,0,"div",23),i(),n(30,"div",19)(31,"label",20),l(32,"i",21),r(33," \u0627\u0633\u0645 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A (\u0625\u0646\u062C\u0644\u064A\u0632\u064A) * "),i(),l(34,"input",24),f(35,el,3,0,"div",23),i()(),n(36,"div",25)(37,"label",20),l(38,"i",26),r(39," \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0631\u0626\u064A\u0633\u064A * "),i(),n(40,"select",27)(41,"option",28),r(42,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0631\u0626\u064A\u0633\u064A"),i(),f(43,tl,2,2,"option",29),i(),f(44,il,3,0,"div",23),i(),n(45,"div",25)(46,"label",20),l(47,"i",30),r(48," \u0627\u0644\u0648\u0635\u0641 "),i(),l(49,"textarea",31),i()()(),n(50,"div",13)(51,"div",32)(52,"h2",15),l(53,"i",33),r(54," \u0627\u0644\u0635\u0648\u0631\u0629 \u0648\u0627\u0644\u062D\u0627\u0644\u0629 "),i()(),n(55,"div",17)(56,"div",34)(57,"div",19)(58,"label",20),l(59,"i",35),r(60," \u0635\u0648\u0631\u0629 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A "),i(),n(61,"div",36),l(62,"app-image-uploader",37),i()(),n(63,"div",19)(64,"label",20),l(65,"i",38),r(66," \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u0635\u0646\u064A\u0641 \u0627\u0644\u0641\u0631\u0639\u064A "),i(),n(67,"div",39),l(68,"input",40),n(69,"div")(70,"span",41),r(71),i(),n(72,"p",42),r(73),i()()()()()()(),n(74,"div",43)(75,"div",44)(76,"button",45),x("click",function(){return o.cancel()}),l(77,"i",46),r(78," \u0625\u0644\u063A\u0627\u0621 "),i(),n(79,"button",47),x("click",function(){return o.onSubmit()}),l(80,"i",48),r(81," \u062D\u0641\u0638 "),i()()(),l(82,"input",49),i()()()),e&2){let s,m,E,I,R,P;u(16),d("formGroup",o.subCategoryForm),u(13),d("ngIf",((s=o.subCategoryForm.get("nameAr"))==null?null:s.invalid)&&((s=o.subCategoryForm.get("nameAr"))==null?null:s.touched)),u(6),d("ngIf",((m=o.subCategoryForm.get("nameEn"))==null?null:m.invalid)&&((m=o.subCategoryForm.get("nameEn"))==null?null:m.touched)),u(6),d("ngValue",null),u(2),d("ngForOf",o.categories),u(),d("ngIf",((E=o.subCategoryForm.get("categoryId"))==null?null:E.invalid)&&((E=o.subCategoryForm.get("categoryId"))==null?null:E.touched)),u(18),d("initialImageUrl",o.imageUrlService.getImageUrl((I=o.subCategoryForm.get("imagePath"))==null?null:I.value,o.serverUrl)),u(9),b(" ",(R=o.subCategoryForm.get("isActive"))!=null&&R.value?"\u062A\u0635\u0646\u064A\u0641 \u0641\u0631\u0639\u064A \u0646\u0634\u0637":"\u062A\u0635\u0646\u064A\u0641 \u0641\u0631\u0639\u064A \u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(2),b(" ",(P=o.subCategoryForm.get("isActive"))!=null&&P.value?"\u0633\u064A\u0638\u0647\u0631 \u0641\u064A \u0627\u0644\u0642\u0648\u0627\u0626\u0645":"\u0644\u0646 \u064A\u0638\u0647\u0631 \u0641\u064A \u0627\u0644\u0642\u0648\u0627\u0626\u0645"," "),u(6),d("disabled",o.subCategoryForm.invalid)}},dependencies:[F,w,Fe,W,X,Z,V,be,J,D,B,U,j],encapsulation:2})};var rl=a=>({background:a}),ol=a=>[a,"JOD","symbol","1.2-2","ar"];function ul(a,t){if(a&1&&(n(0,"div",49)(1,"div",50),l(2,"i",51),i(),n(3,"div")(4,"p",40),r(5,"\u0639\u062F\u062F \u0627\u0644\u0645\u0648\u0627\u062F"),i(),n(6,"p",41),r(7),i()()()),a&2){let e=c().$implicit;u(7),b("",e.items.length," \u0645\u0627\u062F\u0629")}}function al(a,t){if(a&1){let e=C();n(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",4)(4,"div",5)(5,"div",30),l(6,"i",31),i(),n(7,"div")(8,"h3",32),r(9),i(),n(10,"p",33),r(11),i()()(),n(12,"div",34)(13,"span",35),r(14),i()()()(),n(15,"div",36)(16,"div",37)(17,"div",38),l(18,"i",39),i(),n(19,"div")(20,"p",40),r(21,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0637\u0644\u0628"),i(),n(22,"p",41),r(23),g(24,"date"),i()()(),n(25,"div",37)(26,"div",42),l(27,"i",43),i(),n(28,"div")(29,"p",40),r(30,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A"),i(),n(31,"p",44),r(32),g(33,"currency"),i()()(),f(34,ul,8,1,"div",45),n(35,"div",46)(36,"button",47),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.openForm(s.id))}),l(37,"i",48),r(38," \u0641\u062A\u062D \u0627\u0644\u0637\u0644\u0628 "),i()()()()()}if(a&2){let e=t.$implicit,o=c(2);u(2),d("ngStyle",ge(16,rl,"linear-gradient(135deg, "+o.getStatusColor((e==null?null:e.statusId)-1)+", "+o.getStatusColor((e==null?null:e.statusId)-1)+"dd)")),u(7),p(e.orderType==null?null:e.orderType.nameAr),u(2),b("\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628: ",e.id),u(3),b(" ",e.status==null?null:e.status.nameAr," "),u(9),p(Q(24,7,e.orderDate,"yyyy-MM-dd")),u(9),p(Ie(33,10,ge(18,ol,e.totalAmount))),u(2),d("ngIf",e.items&&e.items.length>0)}}function ll(a,t){if(a&1&&(n(0,"div",25),f(1,al,39,20,"div",26),i()),a&2){let e=t.ngIf;u(),d("ngForOf",e.orders)}}function sl(a,t){if(a&1){let e=C();n(0,"div",53)(1,"div",54),l(2,"i",55),i(),n(3,"h3",56),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0637\u0644\u0628\u0627\u062A"),i(),n(5,"p",57),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0637\u0644\u0628\u0627\u062A \u062A\u0637\u0627\u0628\u0642 \u0627\u0644\u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0645\u062D\u062F\u062F\u0629"),i(),n(7,"button",58),x("click",function(){y(e);let s=c(2);return _(s.openForm(null))}),l(8,"i",59),r(9," \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u062C\u062F\u064A\u062F "),i()()}}function dl(a,t){if(a&1&&(n(0,"div"),f(1,sl,10,0,"div",52),i()),a&2){let e=t.ngIf;u(),d("ngIf",!e.orders||e.orders.length===0)}}function ml(a,t){a&1&&(n(0,"div",53),l(1,"div",60),n(2,"p",61),r(3,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0637\u0644\u0628\u0627\u062A..."),i()())}function cl(a,t){a&1&&(n(0,"span",72),r(1,"..."),i())}function pl(a,t){if(a&1){let e=C();n(0,"button",67),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.changePage(s))}),r(1),i()}if(a&2){let e=t.$implicit,o=c(2);N("bg-emerald-600",e===+o.pageIndex)("text-white",e===+o.pageIndex)("bg-gray-100",e!==+o.pageIndex)("text-gray-700",e!==+o.pageIndex)("hover:bg-gray-200",e!==+o.pageIndex),u(),b(" ",e," ")}}function gl(a,t){a&1&&(n(0,"span",72),r(1,"..."),i())}function fl(a,t){if(a&1){let e=C();n(0,"button",67),x("click",function(){y(e);let s=c(2);return _(s.changePage(s.totalPages))}),r(1),i()}if(a&2){let e=c(2);N("bg-emerald-600",+e.pageIndex===e.totalPages)("text-white",+e.pageIndex===e.totalPages)("bg-gray-100",+e.pageIndex!==e.totalPages)("text-gray-700",+e.pageIndex!==e.totalPages)("hover:bg-gray-200",+e.pageIndex!==e.totalPages),u(),b(" ",e.totalPages," ")}}function bl(a,t){if(a&1){let e=C();n(0,"div",62)(1,"nav",63)(2,"div",64)(3,"button",65),x("click",function(){y(e);let s=c();return _(s.changePage(+s.pageIndex-1))}),l(4,"i",66),i(),n(5,"button",67),x("click",function(){y(e);let s=c();return _(s.changePage(1))}),r(6," 1 "),i(),f(7,cl,2,0,"span",68)(8,pl,2,11,"button",69)(9,gl,2,0,"span",68)(10,fl,2,11,"button",70),n(11,"button",65),x("click",function(){y(e);let s=c();return _(s.changePage(+s.pageIndex+1))}),l(12,"i",71),i()()()()}if(a&2){let e=c();u(3),d("disabled",+e.pageIndex==1),u(2),N("bg-emerald-600",+e.pageIndex==1)("text-white",+e.pageIndex==1)("bg-gray-100",+e.pageIndex!=1)("text-gray-700",+e.pageIndex!=1)("hover:bg-gray-200",+e.pageIndex!=1),u(2),d("ngIf",+e.pageIndex>4),u(),d("ngForOf",e.getPageRange()),u(),d("ngIf",+e.pageIndex<e.totalPages-3),u(),d("ngIf",e.totalPages>1),u(),d("disabled",+e.pageIndex===e.totalPages||e.totalPages===0)}}var wi=class a{constructor(t,e,o,s,m,E,I,R){this.orderService=t;this.productService=e;this.statusService=o;this.customerService=s;this.router=m;this.route=E;this.lang=I;this.fb=R;this.filter=this.fb.group({orderTypeId:[0]})}ngOnInit(){this.loadOrders(),this.products=this.route.snapshot.data.productsResolver,this.statuses=this.route.snapshot.data.statusesResolver,this.customers=this.route.snapshot.data.customersRsolver}orders$;pageIndex=1;pageSize=10;totalPages=1;totalPagesArray=[];statuses=[];customers=[];products=[];filter;openForm(t){t?this.router.navigate(["../order-items-list"],{relativeTo:this.route,queryParams:{orderId:t}}):this.router.navigate(["../order-items-list"],{relativeTo:this.route})}loadOrders(){this.orders$=this.orderService.GetOrdersPagination(this.pageIndex,this.pageSize,+this.OrderTypeId.value).pipe(ke(t=>{this.totalPages=Math.ceil(t.totals/this.pageSize),this.totalPagesArray=Array.from({length:this.totalPages},(e,o)=>o+1)}),Me(t=>Oe(se({},t),{orders:t.orders.map(e=>Oe(se({},e),{statusColor:this.getStatusColor(e.statusId-1)}))})))}changePage(t){t<1||t>this.totalPages||(this.pageIndex=t,this.loadOrders())}getPageRange(){let e=[],o=Math.max(2,this.pageIndex-2),s=Math.min(this.totalPages-1,this.pageIndex+2);for(let m=o;m<=s;m++)e.push(m);return e}getStatusColor(t){return En[t]||"#9E9E9E"}get OrderTypeId(){return this.filter.get("orderTypeId")}static \u0275fac=function(e){return new(e||a)(v(Ht),v(Ee),v(yn),v(ft),v(T),v(k),v(G),v(L))};static \u0275cmp=A({type:a,selectors:[["app-order-list"]],standalone:!1,decls:37,vars:11,consts:[["loadingTemplate",""],["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-emerald-500","to-teal-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-list-ul","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8",3,"formGroup"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-funnel","mr-3","text-emerald-600"],[1,"flex","justify-center"],[1,"w-full","max-w-md"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-tag","mr-2","text-emerald-600"],["id","orderTypeId","formControlName","orderTypeId",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-emerald-500","focus:border-emerald-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"change"],["value","0"],["value","1"],["value","2"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","bg-white rounded-2xl shadow-lg p-6 mt-8",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["class","group h-full",4,"ngFor","ngForOf"],[1,"group","h-full"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","transform","hover:scale-105","overflow-hidden","border","border-gray-100","h-full","flex","flex-col"],[1,"p-4",3,"ngStyle"],[1,"w-10","h-10","bg-white","bg-opacity-20","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-box-seam","text-white","text-lg"],[1,"text-white","font-bold","text-lg"],[1,"text-white","text-opacity-90","text-sm"],[1,"text-right"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-white","bg-opacity-20","text-white"],[1,"p-6","flex","flex-col","flex-grow"],[1,"flex","items-center","mb-4"],[1,"w-8","h-8","bg-gradient-to-br","from-emerald-100","to-teal-100","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-calendar-date","text-emerald-600","text-sm"],[1,"text-sm","text-gray-500"],[1,"font-semibold","text-gray-900"],[1,"w-8","h-8","bg-gradient-to-br","from-amber-100","to-orange-100","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-cash-coin","text-amber-600","text-sm"],[1,"font-bold","text-gray-900","text-lg"],["class","flex items-center mb-6",4,"ngIf"],[1,"mt-auto"],[1,"w-full","inline-flex","items-center","justify-center","px-4","py-3","bg-gradient-to-r","from-emerald-600","to-teal-600","text-white","rounded-xl","font-semibold","hover:from-emerald-700","hover:to-teal-700","focus:outline-none","focus:ring-2","focus:ring-emerald-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-cart-plus","mr-2"],[1,"flex","items-center","mb-6"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-100","to-indigo-100","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-list-ul","text-blue-600","text-sm"],["class","bg-white rounded-2xl shadow-lg p-12 text-center",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","p-12","text-center"],[1,"w-24","h-24","bg-gray-100","rounded-full","mx-auto","flex","items-center","justify-center","mb-6"],[1,"bi","bi-list-ul","text-gray-400","text-4xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"inline-flex","items-center","px-6","py-3","bg-gradient-to-r","from-emerald-600","to-teal-600","text-white","rounded-xl","font-semibold","hover:from-emerald-700","hover:to-teal-700","focus:outline-none","focus:ring-2","focus:ring-emerald-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-plus-circle","mr-2"],[1,"w-16","h-16","border-4","border-emerald-600","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-4"],[1,"text-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mt-8"],["aria-label","Page navigation",1,"flex","justify-center"],[1,"flex","items-center","space-x-2","space-x-reverse"],[1,"px-3","py-2","text-gray-500","hover:text-gray-700","hover:bg-gray-100","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"bi","bi-chevron-right","text-lg"],[1,"px-4","py-2","rounded-lg","font-medium","transition-colors",3,"click"],["class","px-2 text-gray-500",4,"ngIf"],["class","px-4 py-2 rounded-lg font-medium transition-colors",3,"bg-emerald-600","text-white","bg-gray-100","text-gray-700","hover:bg-gray-200","click",4,"ngFor","ngForOf"],["class","px-4 py-2 rounded-lg font-medium transition-colors",3,"bg-emerald-600","text-white","bg-gray-100","text-gray-700","hover:bg-gray-200","click",4,"ngIf"],[1,"bi","bi-chevron-left","text-lg"],[1,"px-2","text-gray-500"]],template:function(e,o){if(e&1){let s=C();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),l(6,"i",7),i(),n(7,"div")(8,"h1",8),r(9,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062A"),i(),n(10,"p",9),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0648\u0645\u062A\u0627\u0628\u0639\u0629 \u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0628\u0627\u062A \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i()()()()(),n(12,"div",10)(13,"h2",11),l(14,"i",12),r(15," \u062A\u0635\u0641\u064A\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062A "),i(),n(16,"div",13)(17,"div",14)(18,"div",15)(19,"label",16),l(20,"i",17),r(21," \u0646\u0648\u0639 \u0627\u0644\u0637\u0644\u0628 "),i(),n(22,"select",18),x("change",function(){return y(s),_(o.loadOrders())}),n(23,"option",19),r(24,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0628\u0627\u062A"),i(),n(25,"option",20),r(26,"\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0634\u0631\u0627\u0621"),i(),n(27,"option",21),r(28,"\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0628\u064A\u0639"),i()()()()()(),f(29,ll,2,1,"div",22),g(30,"async"),f(31,dl,2,1,"div",23),g(32,"async"),f(33,ml,4,0,"ng-template",null,0,je)(35,bl,13,16,"div",24),g(36,"async"),i()()}if(e&2){let s=We(34);u(12),d("formGroup",o.filter),u(17),d("ngIf",h(30,5,o.orders$)),u(2),d("ngIf",h(32,7,o.orders$))("ngIfElse",s),u(4),d("ngIf",h(36,9,o.orders$))}},dependencies:[F,w,ln,M,X,Z,J,D,B,U,j,me,Se,_e],styles:['.floating-label-input[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding-top:1rem;height:auto}.floating-label-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.75rem;pointer-events:none;color:#6c757d;background-color:#fff;padding:0 4px;font-size:.875em;transition:.2s ease all;transform-origin:0 0}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not([value=""]) + label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-1.2rem);left:.25rem;color:#0d6efd}.floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-top:1.5rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}.min-w-100px[_ngcontent-%COMP%]{min-width:100px}.min-w-120px[_ngcontent-%COMP%]{min-width:120px}.min-w-150px[_ngcontent-%COMP%]{min-width:150px}.min-w-200px[_ngcontent-%COMP%]{min-width:200px}.table[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.875rem;padding:.375rem .75rem;height:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}']})};var xl=["printSection"],Pt=a=>[a,"JOD","symbol","1.2-2","ar"];function vl(a,t){if(a&1&&(n(0,"div",19)(1,"h2",52),l(2,"i",53),r(3," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0637\u0644\u0628 "),i(),n(4,"div",54)(5,"div",55)(6,"label",56),l(7,"i",57),r(8," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0637\u0644\u0628 "),i(),n(9,"div",58),r(10),g(11,"date"),i()(),n(12,"div",55)(13,"label",56),l(14,"i",59),r(15," \u0627\u0644\u0632\u0628\u0648\u0646 "),i(),n(16,"div",58),r(17),i()(),n(18,"div",55)(19,"label",56),l(20,"i",60),r(21," \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A "),i(),n(22,"div",58),r(23),g(24,"currency"),i()()()()),a&2){let e=t.ngIf,o=c(2);u(10),b(" ",Q(11,3,e.orderDate,"yyyy-MM-dd")," "),u(7),b(" ",o.getCustomerName(e.customerId)," "),u(6),b(" ",Ie(24,6,ge(12,Pt,e.totalAmount))," ")}}function hl(a,t){if(a&1&&(n(0,"tr",72)(1,"td",73),r(2),i(),n(3,"td",74),r(4),i(),n(5,"td",74),r(6),i(),n(7,"td",74),r(8),i(),n(9,"td",74),r(10),i(),n(11,"td",74),r(12),i(),n(13,"td",74),r(14),g(15,"currency"),i(),n(16,"td",73),r(17),g(18,"currency"),i()()),a&2){let e=t.$implicit,o=t.index,s=c(3);u(2),b(" ",o+1," "),u(2),b(" ",s.getCategoryName(e.product==null?null:e.product.subCategoryId)," "),u(2),b(" ",e.product==null?null:e.product.code," "),u(2),b(" ",e.product==null?null:e.product.nameAr," "),u(2),b(" ",s.getUnitName(e.product==null?null:e.product.unitId)," "),u(2),b(" ",e.quantity," "),u(2),b(" ",Ie(15,8,ge(20,Pt,e.unitPrice))," "),u(3),b(" ",Ie(18,14,ge(22,Pt,e.quantity*e.unitPrice))," ")}}function yl(a,t){a&1&&(n(0,"tr")(1,"td",75)(2,"div",76)(3,"div",77),l(4,"i",78),i(),n(5,"h3",79),r(6,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0646\u0627\u0635\u0631"),i(),n(7,"p",80),r(8,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0639\u0646\u0627\u0635\u0631 \u0641\u064A \u0647\u0630\u0627 \u0627\u0644\u0637\u0644\u0628"),i()()()())}function _l(a,t){if(a&1&&(n(0,"div",61)(1,"div",62)(2,"div",40)(3,"h2",63),l(4,"i",64),r(5," \u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0637\u0644\u0628 "),i(),n(6,"div",41),r(7),i()()(),n(8,"div",65)(9,"table",66)(10,"thead",67)(11,"tr")(12,"th",68),r(13,"#"),i(),n(14,"th",68),r(15,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),i(),n(16,"th",68),r(17,"\u0627\u0644\u0643\u0648\u062F"),i(),n(18,"th",68),r(19,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(20,"th",68),r(21,"\u0627\u0644\u0648\u062D\u062F\u0629"),i(),n(22,"th",68),r(23,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(24,"th",68),r(25,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639"),i(),n(26,"th",68),r(27,"\u0627\u0644\u0645\u062C\u0645\u0648\u0639"),i()()(),n(28,"tbody",69),f(29,hl,19,24,"tr",70)(30,yl,9,0,"tr",71),i()()()()),a&2){let e=t.ngIf;u(7),b(" \u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0639\u0646\u0627\u0635\u0631: ",e.items.length||0," "),u(22),d("ngForOf",e.items),u(),d("ngIf",!e.items||e.items.length===0)}}function Sl(a,t){if(a&1){let e=C();n(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"div",22),l(6,"i",23),i(),n(7,"div")(8,"h1",24),r(9),i(),n(10,"p",25),r(11),i()()(),n(12,"div",26)(13,"span",27),l(14,"i",28),r(15," \u062D\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628 "),i(),n(16,"div",29)(17,"button",30),x("click",function(){y(e);let s=c();return _(s.printOrder())}),l(18,"i",31),r(19," \u0637\u0628\u0627\u0639\u0629 \u0633\u0631\u064A\u0639\u0629 "),i(),n(20,"div",32)(21,"div",33)(22,"button",34),x("click",function(){y(e);let s=c();return _(s.printOrderPDF())}),l(23,"i",35),r(24," \u0637\u0628\u0627\u0639\u0629 PDF "),i(),n(25,"button",34),x("click",function(){y(e);let s=c();return _(s.downloadOrderPDF())}),l(26,"i",36),r(27," \u062A\u062D\u0645\u064A\u0644 PDF "),i()()()()()()(),f(28,vl,25,14,"div",37),g(29,"async"),f(30,_l,31,3,"div",38),g(31,"async"),n(32,"div",39)(33,"div",40)(34,"div",41),l(35,"i",42),r(36," \u0635\u0641\u062D\u0629 \u0639\u0631\u0636 \u0627\u0644\u0637\u0644\u0628 - \u0644\u0644\u0637\u0628\u0627\u0639\u0629 \u0641\u0642\u0637 "),i(),n(37,"div",43)(38,"button",44),x("click",function(){y(e);let s=c();return _(s.goBack())}),l(39,"i",45),r(40," \u0627\u0644\u0639\u0648\u062F\u0629 "),i(),n(41,"div",46)(42,"button",47),x("click",function(){y(e);let s=c();return _(s.printOrder())}),l(43,"i",31),r(44," \u0637\u0628\u0627\u0639\u0629 \u0633\u0631\u064A\u0639\u0629 "),i(),n(45,"button",48),x("click",function(){y(e);let s=c();return _(s.printOrderPDF())}),l(46,"i",49),r(47," \u0637\u0628\u0627\u0639\u0629 PDF "),i(),n(48,"button",50),x("click",function(){y(e);let s=c();return _(s.downloadOrderPDF())}),l(49,"i",51),r(50," \u062A\u062D\u0645\u064A\u0644 PDF "),i()()()()()()()}if(a&2){let e=t.ngIf,o=c();u(9),b(" ",e.orderTypeId==1?"\u062A\u0641\u0627\u0635\u064A\u0644 \u0637\u0644\u0628 \u0627\u0644\u0634\u0631\u0627\u0621":"\u062A\u0641\u0627\u0635\u064A\u0644 \u0637\u0644\u0628 \u0627\u0644\u0628\u064A\u0639"," "),u(2),b("\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628: ",e.id),u(17),d("ngIf",h(29,4,o.order$)),u(2),d("ngIf",h(31,6,o.order$))}}function Cl(a,t){if(a&1&&(n(0,"tr",81)(1,"td",82),r(2),i(),n(3,"td",83),r(4),i(),n(5,"td",83),r(6),i(),n(7,"td",83),r(8),i(),n(9,"td",83),r(10),i(),n(11,"td",82),r(12),i(),n(13,"td",84),r(14),g(15,"currency"),i(),n(16,"td",85),r(17),g(18,"currency"),i()()),a&2){let e=t.$implicit,o=t.index,s=c();u(2),p(o+1),u(2),p(s.getCategoryName(e.product==null?null:e.product.subCategoryId)),u(2),p(e.product==null?null:e.product.code),u(2),p(e.product==null?null:e.product.nameAr),u(2),p(s.getUnitName(e.product==null?null:e.product.unitId)),u(2),p(e.quantity),u(2),p(Ie(15,8,ge(20,Pt,e.unitPrice))),u(3),p(Ie(18,14,ge(22,Pt,e.quantity*e.unitPrice)))}}var Ii=class a{constructor(t,e,o,s,m,E,I){this.orderService=t;this.route=e;this.router=o;this.lang=s;this.printService=m;this.pdfPrintService=E;this.toastr=I;this.subCategories=this.route.snapshot.data.subCategoriesResolver,this.products=this.route.snapshot.data.productsResolver,this.statuses=this.route.snapshot.data.statusesResolver,this.customers=this.route.snapshot.data.suppliersResolver,this.suppliers=this.route.snapshot.data.customersRsolver,this.units=this.route.snapshot.data.unitsResolver}ngOnInit(){this.route.queryParams.subscribe(t=>{let e=+t.orderId;e&&(this.orderId=e,this.order$=this.orderService.GetOrderById(e))})}printSection;order$;orderId=0;statuses=[];customers=[];suppliers=[];products=[];subCategories;statusEnum=Cn;units=[];currentDate=new Date;getCustomerName(t){if(!t)return"";let e=this.customers.find(o=>o.id===t);return e?this.lang.currentLang==="ar"?e.nameAr:e.nameEn:""}getSupplierName(t){if(!t)return"";let e=this.suppliers.find(o=>o.id===t);return e?e.name:""}getCategoryName(t){if(!t)return"";let e=this.subCategories.find(o=>o.id===t);return e?this.lang.currentLang==="ar"?e.nameAr:e.nameEn:""}getProductName(t){if(!t)return"";let e=this.products.find(o=>o.id===t);return e?this.lang.currentLang==="ar"?e.nameAr:e.nameEn:""}getUnitName(t){if(!t)return"";let e=this.units.find(o=>o.id===t);return e?this.lang.currentLang==="ar"?e.nameAr:e.nameEn:""}goBack(){this.router.navigate(["../order-list"],{relativeTo:this.route})}printOrder(){if(this.printSection){let t=`\u0637\u0644\u0628 \u0631\u0642\u0645 ${this.orderId}`;this.printService.printHtml(this.printSection.nativeElement.innerHTML,t)}else this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0637\u0628\u0627\u0639\u0629","\u062E\u0637\u0623")}printOrderPDF(){return we(this,null,function*(){try{if(!this.printSection){this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0637\u0628\u0627\u0639\u0629","\u062E\u0637\u0623");return}let t=`\u0637\u0644\u0628 \u0631\u0642\u0645 ${this.orderId}`;(yield this.pdfPrintService.isServiceAvailable())?yield this.pdfPrintService.printPDF(this.printSection.nativeElement.innerHTML,t,"order"):this.printOrder()}catch{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u0637\u0628\u0627\u0639\u0629 PDF","\u062E\u0637\u0623"),this.printOrder()}})}downloadOrderPDF(){return we(this,null,function*(){try{if(!this.printSection){this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0637\u0628\u0627\u0639\u0629","\u062E\u0637\u0623");return}let t=`\u0637\u0644\u0628 \u0631\u0642\u0645 ${this.orderId}`;(yield this.pdfPrintService.isServiceAvailable())?yield this.pdfPrintService.downloadPDF(this.printSection.nativeElement.innerHTML,t,"order"):this.toastr.warning("\u062E\u062F\u0645\u0629 PDF \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\u0629 \u062D\u0627\u0644\u064A\u0627\u064B","\u062A\u062D\u0630\u064A\u0631")}catch{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 PDF","\u062E\u0637\u0623")}})}static \u0275fac=function(e){return new(e||a)(v(Ht),v(k),v(T),v(G),v(bt),v(hn),v(ee))};static \u0275cmp=A({type:a,selectors:[["app-order-items-list"]],viewQuery:function(e,o){if(e&1&&Je(xl,5),e&2){let s;Xe(s=Ze())&&(o.printSection=s.first)}},standalone:!1,decls:58,vars:36,consts:[["printSection",""],["class","min-h-screen bg-gray-50 py-8","dir","rtl",4,"ngIf"],[1,"print-section",2,"display","none"],["dir","rtl",1,"print-container",2,"font-family","'Arial', sans-serif","max-width","800px","margin","0 auto","padding","20px","background","white"],[1,"print-header",2,"text-align","center","margin-bottom","30px","border-bottom","2px solid #333","padding-bottom","20px"],[2,"color","#333","margin","0","font-size","28px","font-weight","bold"],[2,"color","#666","margin","10px 0 0 0","font-size","16px"],[1,"print-order-info",2,"margin-bottom","30px"],[2,"color","#333","font-size","20px","margin-bottom","15px","border-bottom","1px solid #ddd","padding-bottom","10px"],[2,"display","grid","grid-template-columns","1fr 1fr","gap","20px"],[1,"print-items"],[2,"width","100%","border-collapse","collapse","margin-bottom","20px"],[2,"background-color","#f8f9fa"],[2,"border","1px solid #ddd","padding","12px","text-align","right","font-weight","bold"],["style","border-bottom: 1px solid #eee;",4,"ngFor","ngForOf"],[1,"print-footer",2,"margin-top","40px","padding-top","20px","border-top","2px solid #333","text-align","center","color","#666","font-size","14px"],[2,"margin","0"],["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-list-ul","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3","space-x-reverse"],[1,"inline-flex","items-center","px-4","py-2","rounded-full","text-sm","font-medium","text-white","bg-blue-500"],[1,"bi","bi-circle-fill","mr-2","text-xs"],[1,"relative"],[1,"inline-flex","items-center","px-4","py-2","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-printer","mr-2"],[1,"absolute","top-full","left-0","mt-2","w-48","bg-white","rounded-lg","shadow-lg","border","border-gray-200","z-10"],[1,"py-2"],[1,"w-full","text-right","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","flex","items-center",3,"click"],[1,"bi","bi-file-pdf","mr-2","text-red-600"],[1,"bi","bi-download","mr-2","text-green-600"],["class","bg-white rounded-2xl shadow-lg p-6 mb-8",4,"ngIf"],["class","bg-white rounded-2xl shadow-lg overflow-hidden",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mt-8"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-gray-500"],[1,"bi","bi-info-circle","mr-2"],[1,"flex","space-x-4","space-x-reverse"],["type","button",1,"px-6","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-arrow-right","mr-2"],[1,"flex","space-x-3","space-x-reverse"],["type","button",1,"px-6","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-blue-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],["type","button",1,"px-6","py-3","bg-gradient-to-r","from-red-600","to-pink-600","text-white","rounded-xl","font-semibold","hover:from-red-700","hover:to-pink-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-file-pdf","mr-2"],["type","button",1,"px-6","py-3","bg-gradient-to-r","from-green-600","to-emerald-600","text-white","rounded-xl","font-semibold","hover:from-green-700","hover:to-emerald-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-download","mr-2"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-info-circle","mr-3","text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-calendar","mr-2","text-blue-600"],[1,"w-full","px-4","py-3","bg-gray-100","rounded-xl","text-gray-700","font-medium"],[1,"bi","bi-person","mr-2","text-blue-600"],[1,"bi","bi-currency-dollar","mr-2","text-blue-600"],[1,"bg-white","rounded-2xl","shadow-lg","overflow-hidden"],[1,"p-6","border-b","border-gray-200"],[1,"text-xl","font-bold","text-gray-900","flex","items-center"],[1,"bi","bi-list-ul","mr-3","text-blue-600"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],["colspan","8",1,"px-6","py-12","text-center"],[1,"flex","flex-col","items-center"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],[1,"bi","bi-list-ul","text-gray-400","text-2xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500"],[2,"border-bottom","1px solid #eee"],[2,"border","1px solid #ddd","padding","10px","text-align","center"],[2,"border","1px solid #ddd","padding","10px"],[2,"border","1px solid #ddd","padding","10px","text-align","left"],[2,"border","1px solid #ddd","padding","10px","text-align","left","font-weight","bold"]],template:function(e,o){if(e&1&&(f(0,Sl,51,8,"div",1),g(1,"async"),n(2,"div",2,0)(4,"div",3)(5,"div",4)(6,"h1",5),r(7),g(8,"async"),i(),n(9,"p",6),r(10),g(11,"async"),g(12,"async"),g(13,"date"),i()(),n(14,"div",7)(15,"h2",8),r(16," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0637\u0644\u0628 "),i(),n(17,"div",9)(18,"div")(19,"strong"),r(20,"\u0627\u0644\u0632\u0628\u0648\u0646:"),i(),r(21),g(22,"async"),i(),n(23,"div")(24,"strong"),r(25,"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A:"),i(),r(26),g(27,"async"),g(28,"currency"),i()()(),n(29,"div",10)(30,"h2",8),r(31," \u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0637\u0644\u0628 "),i(),n(32,"table",11)(33,"thead")(34,"tr",12)(35,"th",13),r(36,"#"),i(),n(37,"th",13),r(38,"\u0627\u0644\u062A\u0635\u0646\u064A\u0641"),i(),n(39,"th",13),r(40,"\u0627\u0644\u0643\u0648\u062F"),i(),n(41,"th",13),r(42,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(43,"th",13),r(44,"\u0627\u0644\u0648\u062D\u062F\u0629"),i(),n(45,"th",13),r(46,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(47,"th",13),r(48,"\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639"),i(),n(49,"th",13),r(50,"\u0627\u0644\u0645\u062C\u0645\u0648\u0639"),i()()(),n(51,"tbody"),f(52,Cl,19,24,"tr",14),g(53,"async"),i()()(),n(54,"div",15)(55,"p",16),r(56),g(57,"date"),i()()()()),e&2){let s,m,E,I,R;d("ngIf",h(1,8,o.order$)),u(7),b(" ",((s=h(8,10,o.order$))==null?null:s.orderTypeId)==1?"\u062A\u0641\u0627\u0635\u064A\u0644 \u0637\u0644\u0628 \u0627\u0644\u0634\u0631\u0627\u0621":"\u062A\u0641\u0627\u0635\u064A\u0644 \u0637\u0644\u0628 \u0627\u0644\u0628\u064A\u0639"," "),u(3),q(" \u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628: ",(m=h(11,12,o.order$))==null?null:m.id," | \u0627\u0644\u062A\u0627\u0631\u064A\u062E: ",Q(13,16,(m=h(12,14,o.order$))==null?null:m.orderDate,"yyyy-MM-dd")," "),u(11),b(" ",o.getCustomerName(((E=h(22,19,o.order$))==null?null:E.customerId)||null)," "),u(5),b(" ",Ie(28,23,ge(34,Pt,(I=h(27,21,o.order$))==null?null:I.totalAmount))," "),u(26),d("ngForOf",(R=h(53,29,o.order$))==null?null:R.items),u(4),b("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0647\u0630\u0627 \u0627\u0644\u062A\u0642\u0631\u064A\u0631 \u0641\u064A ",Q(57,31,o.currentDate,"yyyy-MM-dd HH:mm"))}},dependencies:[F,w,M,me,Se,_e],styles:['.status-cell[_ngcontent-%COMP%]{font-weight:700;color:#fff;text-align:center;padding:8px 12px;border-radius:4px;align-content:center}.d-flex[_ngcontent-%COMP%]{display:flex}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between}.align-items-center[_ngcontent-%COMP%]{align-items:center}.gap-3[_ngcontent-%COMP%]{gap:1rem}.badge[_ngcontent-%COMP%]{font-size:.9rem;box-shadow:0 2px 4px #0000000d;transition:transform .2s ease}.badge[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.btn[_ngcontent-%COMP%]   i.bi[_ngcontent-%COMP%]{font-size:1.1rem}.floating-label-input[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding-top:1rem;height:auto}.floating-label-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.75rem;pointer-events:none;color:#6c757d;background-color:#fff;padding:0 4px;font-size:.875em;transition:.2s ease all;transform-origin:0 0}.floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-textarea[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not([value=""]) + label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-1.2rem);left:.25rem;color:#0d6efd}.floating-label-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-top:1.5rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}.min-w-100px[_ngcontent-%COMP%]{min-width:100px}.min-w-120px[_ngcontent-%COMP%]{min-width:120px}.min-w-150px[_ngcontent-%COMP%]{min-width:150px}.min-w-200px[_ngcontent-%COMP%]{min-width:200px}.table[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.875rem;padding:.375rem .75rem;height:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}']})};var Pi=class a{constructor(t){this.http=t}baseUrl=`${Y.baseUrl}/StoreTransfer`;getTransfers(){return this.http.get(this.baseUrl)}getTransferById(t){return this.http.get(`${this.baseUrl}/${t}`)}getTransferWithItems(t){return this.http.get(`${this.baseUrl}/with-items/${t}`)}getTransfersByStore(t,e=!0){return this.http.get(`${this.baseUrl}/by-store/${t}?isFromStore=${e}`)}getTransfersByStatus(t){return this.http.get(`${this.baseUrl}/by-status/${t}`)}createTransfer(t){return this.http.post(this.baseUrl,t)}updateTransfer(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}deleteTransfer(t){return this.http.delete(`${this.baseUrl}/${t}`)}completeTransfer(t){return this.http.post(`${this.baseUrl}/${t}/complete`,{})}cancelTransfer(t){return this.http.post(`${this.baseUrl}/${t}/cancel`,{})}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};function Al(a,t){if(a&1&&(n(0,"option",46),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),p(e.nameAr)}}function wl(a,t){if(a&1&&(n(0,"option",46),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),p(e.nameAr)}}function Il(a,t){a&1&&(n(0,"p",47),r(1," \u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u0625\u0644\u0649 \u0646\u0641\u0633 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639. "),i())}function Pl(a,t){a&1&&(n(0,"div",48)(1,"div",49),l(2,"i",50),i(),n(3,"p",51),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0646\u0627\u0635\u0631 \u0641\u064A \u0627\u0644\u062A\u062D\u0648\u064A\u0644"),i(),n(5,"p",52),r(6,'\u0627\u0636\u063A\u0637 \u0639\u0644\u0649 "\u0625\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631" \u0644\u0628\u062F\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A'),i()())}function Fl(a,t){if(a&1&&(n(0,"option",46),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),b(" ",e.nameAr," ")}}function Ol(a,t){if(a&1){let e=C();n(0,"div",55)(1,"div",56)(2,"div",17)(3,"label",18),r(4,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(5,"select",57),x("change",function(s){let m=y(e).index,E=c(2);return _(E.onProductChange(m,s))}),n(6,"option",27),r(7,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0646\u062A\u062C"),i(),f(8,Fl,2,2,"option",28),i()(),n(9,"div",17)(10,"label",18),r(11,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),l(12,"input",58),i(),n(13,"div",17)(14,"label",18),r(15,"\u062A\u0643\u0644\u0641\u0629 \u0627\u0644\u0648\u062D\u062F\u0629"),i(),l(16,"input",59),i(),n(17,"div",17)(18,"label",18),r(19,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),i(),l(20,"input",60),i(),n(21,"div",17)(22,"label",61),r(23,"\u0625\u062C\u0631\u0627\u0621"),i(),n(24,"button",62),x("click",function(){let s=y(e).index,m=c(2);return _(m.removeTransferItem(s))}),l(25,"i",63),r(26," \u062D\u0630\u0641 "),i()()()()}if(a&2){let e=t.index,o=c(2);d("formGroupName",e),u(8),d("ngForOf",o.products)}}function Tl(a,t){if(a&1&&(n(0,"div",53),f(1,Ol,27,2,"div",54),i()),a&2){let e=c();u(),d("ngForOf",e.items.controls)}}var kt=class a{constructor(t,e,o,s,m,E,I){this.fb=t;this.transferService=e;this.storeService=o;this.productService=s;this.notification=m;this.router=E;this.route=I}transferForm;stores=[];products=[];isEditMode=!1;transferId=null;ngOnInit(){this.initializeForm(),this.loadData(),this.route.queryParams.subscribe(t=>{let e=+t.id;e&&(this.isEditMode=!0,this.transferId=e,this.loadTransfer(e))})}initializeForm(){this.transferForm=this.fb.group({id:[0],transferDate:[new Date().toISOString().split("T")[0],S.required],notes:[""],fromStoreId:[null,S.required],toStoreId:[null,S.required],statusId:[1],items:this.fb.array([])},{validators:this.storesMustDifferValidator}),this.transferForm.get("fromStoreId")?.valueChanges.subscribe(t=>{let e=this.transferForm.get("toStoreId");e&&(e.value===t&&e.setValue(null),e.updateValueAndValidity({emitEvent:!1}))})}loadData(){this.storeService.GetStores().subscribe({next:t=>this.stores=t}),this.productService.GetProducts().subscribe({next:t=>this.products=t})}loadTransfer(t){this.transferService.getTransferWithItems(t).subscribe({next:e=>{this.transferForm.patchValue({id:e.id,transferDate:e.transferDate.split("T")[0],notes:e.notes,fromStoreId:e.fromStoreId,toStoreId:e.toStoreId,statusId:e.statusId}),e.items.forEach(o=>{this.addTransferItem(o.productId,o.quantity,o.unitCost,o.notes)})},error:()=>{this.notification.error("Error loading transfer","Store Transfer")}})}get items(){return this.transferForm.get("items")}addTransferItem(t=0,e=0,o=0,s=""){let m=this.fb.group({id:[0],productId:[t,S.required],quantity:[e,[S.required,S.min(.01)]],unitCost:[o,[S.required,S.min(0)]],notes:[s]});this.items.push(m)}removeTransferItem(t){this.items.removeAt(t)}onProductChange(t,e){let s=+e.target.value,m=this.products.find(E=>E.id===s);m&&this.items.at(t).patchValue({unitCost:m.costPrice})}saveTransfer(){if(this.transferForm.valid&&this.items.length>0){let t=this.transferForm.value;this.isEditMode&&this.transferId?this.transferService.updateTransfer(this.transferId,t).subscribe({next:()=>{this.notification.success("Transfer updated successfully","Store Transfer"),this.resetFormState(),this.router.navigate(["/admin/store-transfers"])},error:()=>{this.notification.error("Error updating transfer","Store Transfer")}}):this.transferService.createTransfer(t).subscribe({next:e=>{this.notification.success("Transfer created successfully","Store Transfer"),e?.id?this.completeTransfer(e.id):this.notification.warning("Transfer saved but could not be completed automatically. Please complete it manually.","Store Transfer")},error:()=>{this.notification.error("Error creating transfer","Store Transfer")}})}else this.notification.warning("Please fill in all required fields and add at least one item","Store Transfer")}completeTransfer(t){this.transferService.completeTransfer(t).subscribe({next:()=>{this.notification.success("Transfer completed and inventory updated successfully","Store Transfer"),this.resetFormState()},error:()=>{this.notification.error("Transfer saved but failed to complete. Please try again from the transfers list.","Store Transfer")}})}cancel(){this.resetFormState()}getProductName(t){let e=this.products.find(o=>o.id===t);return e?e.nameAr:""}getStoreName(t){let e=this.stores.find(o=>o.id===t);return e?e.nameAr:""}get destinationStores(){let t=this.transferForm?.get("fromStoreId")?.value;return this.stores.filter(e=>e.id!==t)}storesMustDifferValidator=t=>{let e=t.get("fromStoreId")?.value,o=t.get("toStoreId")?.value;return e&&o&&e===o?(t.get("toStoreId")?.setErrors({sameStore:!0}),{sameStore:!0}):null};resetFormState(){this.isEditMode=!1,this.transferId=null,this.items.clear(),this.transferForm.reset({id:0,transferDate:new Date().toISOString().split("T")[0],notes:"",fromStoreId:null,toStoreId:null,statusId:1,items:[]}),this.transferForm.markAsPristine(),this.transferForm.markAsUntouched()}static \u0275fac=function(e){return new(e||a)(v(L),v(Pi),v(Ne),v(Ee),v(Ge),v(T),v(k))};static \u0275cmp=A({type:a,selectors:[["app-store-transfer-form"]],standalone:!1,decls:77,vars:9,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-indigo-500","to-purple-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-arrow-left-right","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-info-circle","text-indigo-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-calendar","mr-2","text-indigo-600"],[1,"text-red-500"],["type","date","formControlName","transferDate","id","transferDate",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-file-text","mr-2","text-indigo-600"],["formControlName","notes","id","notes","rows","3","placeholder","\u0623\u062F\u062E\u0644 \u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],[1,"bi","bi-building","mr-3","text-purple-600"],[1,"bi","bi-arrow-right-circle","mr-2","text-red-600"],["formControlName","fromStoreId","id","fromStoreId",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-red-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"bi","bi-arrow-left-circle","mr-2","text-green-600"],["formControlName","toStoreId","id","toStoreId",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["class","text-sm text-red-500 mt-1",4,"ngIf"],[1,"pb-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-xl","font-bold","text-gray-900","flex","items-center"],[1,"bi","bi-box","mr-3","text-amber-600"],["type","button",1,"inline-flex","items-center","px-4","py-2","bg-gradient-to-r","from-amber-600","to-orange-600","text-white","rounded-xl","font-semibold","hover:from-amber-700","hover:to-orange-700","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-plus-circle","mr-2"],["formArrayName","items",1,"bg-gray-50","rounded-xl","p-6"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-indigo-600","to-purple-600","text-white","rounded-xl","font-semibold","hover:from-indigo-700","hover:to-purple-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"],[3,"value"],[1,"text-sm","text-red-500","mt-1"],[1,"text-center","py-8"],[1,"w-16","h-16","bg-gray-200","rounded-full","mx-auto","flex","items-center","justify-center","mb-4"],[1,"bi","bi-box","text-gray-400","text-2xl"],[1,"text-gray-500"],[1,"text-sm","text-gray-400"],[1,"space-y-4"],["class","bg-white rounded-xl p-6 border border-gray-200 hover:border-amber-300 transition-colors",3,"formGroupName",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","p-6","border","border-gray-200","hover:border-amber-300","transition-colors",3,"formGroupName"],[1,"grid","grid-cols-1","md:grid-cols-5","gap-4","items-end"],["formControlName","productId",1,"w-full","px-3","py-2","border-2","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"change"],["type","number","formControlName","quantity","step","0.01","min","0.01","placeholder","0.00",1,"w-full","px-3","py-2","border-2","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","unitCost","step","0.01","min","0","placeholder","0.00",1,"w-full","px-3","py-2","border-2","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","notes","placeholder","\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629",1,"w-full","px-3","py-2","border-2","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:border-amber-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"block","text-sm","font-semibold","text-gray-700","opacity-0"],["type","button",1,"w-full","px-4","py-2","bg-red-600","text-white","rounded-lg","font-semibold","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-trash","mr-2"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u062A\u062D\u0648\u064A\u0644\u0627\u062A \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u0628\u064A\u0646 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.saveTransfer()}),n(16,"div",13)(17,"h2",14),l(18,"i",15),r(19," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i(),n(20,"div",16)(21,"div",17)(22,"label",18),l(23,"i",19),r(24," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u062D\u0648\u064A\u0644 "),n(25,"span",20),r(26,"*"),i()(),l(27,"input",21),i(),n(28,"div",17)(29,"label",18),l(30,"i",22),r(31," \u0645\u0644\u0627\u062D\u0638\u0627\u062A "),i(),l(32,"textarea",23),i()()(),n(33,"div",13)(34,"h2",14),l(35,"i",24),r(36," \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A "),i(),n(37,"div",16)(38,"div",17)(39,"label",18),l(40,"i",25),r(41," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0627\u0644\u0645\u0635\u062F\u0631 "),n(42,"span",20),r(43,"*"),i()(),n(44,"select",26)(45,"option",27),r(46,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0627\u0644\u0645\u0635\u062F\u0631"),i(),f(47,Al,2,2,"option",28),i()(),n(48,"div",17)(49,"label",18),l(50,"i",29),r(51," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0627\u0644\u0648\u062C\u0647\u0629 "),n(52,"span",20),r(53,"*"),i()(),n(54,"select",30)(55,"option",27),r(56,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0627\u0644\u0648\u062C\u0647\u0629"),i(),f(57,wl,2,2,"option",28),i(),f(58,Il,2,0,"p",31),i()()(),n(59,"div",32)(60,"div",33)(61,"h2",34),l(62,"i",35),r(63," \u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u062A\u062D\u0648\u064A\u0644 "),i(),n(64,"button",36),x("click",function(){return o.addTransferItem()}),l(65,"i",37),r(66," \u0625\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 "),i()(),n(67,"div",38),f(68,Pl,7,0,"div",39)(69,Tl,2,1,"div",40),i()(),n(70,"div",41)(71,"button",42),x("click",function(){return o.cancel()}),l(72,"i",43),r(73," \u0625\u0644\u063A\u0627\u0621 "),i(),n(74,"button",44),l(75,"i",45),r(76),i()()()()()()),e&2){let s;u(9),b(" ",o.isEditMode?"\u062A\u0639\u062F\u064A\u0644 \u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639":"\u0625\u0646\u0634\u0627\u0621 \u062A\u062D\u0648\u064A\u0644 \u0645\u0633\u062A\u0648\u062F\u0639 \u062C\u062F\u064A\u062F"," "),u(6),d("formGroup",o.transferForm),u(32),d("ngForOf",o.stores),u(10),d("ngForOf",o.destinationStores),u(),d("ngIf",o.transferForm.hasError("sameStore")&&((s=o.transferForm.get("toStoreId"))==null?null:s.touched)),u(10),d("ngIf",o.items.length===0),u(),d("ngIf",o.items.length>0),u(5),d("disabled",o.transferForm.invalid||o.items.length===0),u(2),b(" ",o.isEditMode?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062A\u062D\u0648\u064A\u0644":"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062A\u062D\u0648\u064A\u0644"," ")}},dependencies:[F,w,M,W,X,Z,V,xe,J,D,B,Ce,U,j,jt,Gt],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border:none}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.25rem;padding:.375rem .75rem}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:none;font-weight:600}.btn[_ngcontent-%COMP%]{border-radius:.25rem;padding:.375rem .75rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#004085}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62;border-color:#4e555b}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333;border-color:#bd2130}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.text-right[_ngcontent-%COMP%]{text-align:right!important}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem!important}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}"]})};function Ml(a,t){if(a&1&&(n(0,"option",41),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),p(e.nameAr)}}function kl(a,t){if(a&1&&(n(0,"option",41),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),p(e.nameAr)}}function Rl(a,t){a&1&&(n(0,"tr")(1,"td",42)(2,"div",43),l(3,"div",44),n(4,"p",45),r(5,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()()()())}function Dl(a,t){if(a&1){let e=C();n(0,"tr",46)(1,"td",47)(2,"div",4)(3,"div",48),l(4,"i",49),i(),n(5,"div")(6,"div",50),r(7),i(),n(8,"div",51),r(9),i()()()(),n(10,"td",47)(11,"div",4)(12,"div",52),l(13,"i",53),i(),n(14,"span",50),r(15),i()()(),n(16,"td",47)(17,"span",54),l(18,"i",55),r(19),i()(),n(20,"td",47)(21,"div",56)(22,"input",57),ue("ngModelChange",function(s){let m=y(e).$implicit;return oe(m.quantity,s)||(m.quantity=s),_(s)}),i(),n(23,"button",58),x("click",function(){let s=y(e).$implicit,m=c();return _(m.adjustInventory(s,s.quantity))}),l(24,"i",59),r(25," \u062A\u062D\u062F\u064A\u062B "),i()()(),n(26,"td",60)(27,"div",4),l(28,"i",61),r(29),g(30,"date"),i()(),n(31,"td",62)(32,"button",63),x("click",function(){let s=y(e).$implicit,m=c();return _(m.viewHistory(s))}),l(33,"i",64),r(34," \u0627\u0644\u062A\u0627\u0631\u064A\u062E "),i()()()}if(a&2){let e=t.$implicit,o=c();N("bg-amber-50",e.quantity<10),u(7),p(o.getProductName(e.productId)),u(2),b("ID: ",e.productId),u(6),p(o.getStoreName(e.storeId)),u(2),d("ngClass",e.quantity<10?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),u(),d("ngClass",e.quantity<10?"bi-exclamation-triangle":"bi-check-circle"),u(),b(" ",e.quantity," "),u(3),re("ngModel",e.quantity),u(7),b(" ",Q(30,10,e.updatedAt,"short")," ")}}function Nl(a,t){a&1&&(n(0,"tr")(1,"td",42)(2,"div",43)(3,"div",65),l(4,"i",66),i(),n(5,"h3",67),r(6,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0633\u062C\u0644\u0627\u062A \u0645\u062E\u0632\u0648\u0646"),i(),n(7,"p",68),r(8,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0633\u062C\u0644\u0627\u062A \u0645\u062E\u0632\u0648\u0646 \u062A\u0637\u0627\u0628\u0642 \u0627\u0644\u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0645\u062D\u062F\u062F\u0629"),i()()()())}var Fi=class a{constructor(t,e,o,s){this.inventoryService=t;this.storeService=e;this.productService=o;this.authService=s}inventories=[];stores=[];products=[];selectedStoreId=null;selectedProductId=null;loading=!1;searchKeyword="";ngOnInit(){this.loadStores(),this.loadProducts(),this.loadInventories()}loadStores(){this.storeService.GetStores().subscribe({next:t=>this.stores=t})}loadProducts(){this.productService.GetProducts().subscribe({next:t=>{this.products=t.filter(e=>this.authService.hasProduct(e.id))}})}loadInventories(){this.loading=!0,this.selectedStoreId?this.inventoryService.GetInventoryByStore(this.selectedStoreId).subscribe({next:t=>{this.inventories=t,this.loading=!1},error:t=>{this.loading=!1}}):this.selectedProductId?this.inventoryService.GetInventoryByProduct(this.selectedProductId).subscribe({next:t=>{this.inventories=t,this.loading=!1},error:t=>{this.loading=!1}}):this.inventoryService.GetAllInventory().subscribe({next:t=>{this.inventories=t,this.loading=!1},error:t=>{this.loading=!1}})}onStoreChange(){this.selectedProductId=null,this.loadInventories()}onProductChange(){this.selectedStoreId=null,this.loadInventories()}onSearchChange(){this.loadInventories()}clearFilters(){this.selectedStoreId=null,this.selectedProductId=null,this.searchKeyword="",this.loadInventories()}adjustInventory(t,e){e!==t.quantity&&this.inventoryService.AdjustInventory(t.id,e,"Manual adjustment").subscribe({next:o=>{this.loadInventories()},error:o=>{}})}getProductName(t){let e=this.products.find(o=>o.id===t);return e?e.nameAr:"Unknown Product"}getStoreName(t){let e=this.stores.find(o=>o.id===t);return e?e.nameAr:"Unknown Store"}getLowStockItems(){this.loading=!0,this.inventoryService.GetLowStockItems().subscribe({next:t=>{this.inventories=t,this.loading=!1},error:t=>{this.loading=!1}})}viewHistory(t){}static \u0275fac=function(e){return new(e||a)(v(lt),v(Ne),v(Ee),v(ce))};static \u0275cmp=A({type:a,selectors:[["app-inventory-management"]],standalone:!1,decls:72,vars:8,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","flex-col","gap-4","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-cyan-500","to-blue-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-clipboard-data","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","flex-col","sm:flex-row","items-stretch","sm:items-center","gap-3"],[1,"inline-flex","items-center","justify-center","px-4","py-3","sm:py-2","bg-gradient-to-r","from-amber-600","to-orange-600","text-white","rounded-xl","font-semibold","hover:from-amber-700","hover:to-orange-700","focus:outline-none","focus:ring-2","focus:ring-amber-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg","w-full","sm:w-auto",3,"click"],[1,"bi","bi-exclamation-triangle","mr-2"],[1,"inline-flex","items-center","justify-center","px-4","py-3","sm:py-2","bg-gray-600","text-white","rounded-xl","font-semibold","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg","w-full","sm:w-auto",3,"click"],[1,"bi","bi-arrow-clockwise","mr-2"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-funnel","mr-3","text-cyan-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-building","mr-2","text-cyan-600"],["id","storeFilter",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"bi","bi-box","mr-2","text-cyan-600"],["id","productFilter",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"ngModelChange","change","ngModel"],[1,"bi","bi-search","mr-2","text-cyan-600"],["type","text","id","searchKeyword","placeholder","\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A...",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","transition-all","duration-200","bg-gray-50","focus:bg-white",3,"ngModelChange","input","ngModel"],[1,"bg-white","rounded-2xl","shadow-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-cyan-500","to-blue-600"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bi","bi-box","mr-2"],[1,"bi","bi-building","mr-2"],[1,"bi","bi-hash","mr-2"],[1,"bi","bi-pencil","mr-2"],[1,"bi","bi-clock","mr-2"],[1,"bi","bi-gear","mr-2"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngIf"],["class","hover:bg-gray-50 transition-colors",3,"bg-amber-50",4,"ngFor","ngForOf"],[3,"value"],["colspan","6",1,"px-6","py-12","text-center"],[1,"flex","flex-col","items-center"],[1,"w-12","h-12","border-4","border-cyan-600","border-t-transparent","rounded-full","animate-spin","mb-4"],[1,"text-gray-600"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap"],[1,"w-10","h-10","bg-gradient-to-br","from-cyan-100","to-blue-100","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"bi","bi-box","text-cyan-600"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"w-8","h-8","bg-gradient-to-br","from-orange-100","to-red-100","rounded-lg","flex","items-center","justify-center","mr-2"],[1,"bi","bi-building","text-orange-600","text-sm"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"bi","mr-1",3,"ngClass"],[1,"flex","items-center","space-x-2","space-x-reverse"],["type","number","step","0.01","min","0",1,"w-20","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-cyan-500","text-sm",3,"ngModelChange","ngModel"],[1,"inline-flex","items-center","px-3","py-2","bg-cyan-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-cyan-700","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-check-lg","mr-1"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"bi","bi-clock","mr-2","text-gray-400"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"inline-flex","items-center","px-3","py-2","bg-blue-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-clock-history","mr-2"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],[1,"bi","bi-clipboard-data","text-gray-400","text-2xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646"),i(),n(10,"p",8),r(11,"\u0645\u0631\u0627\u0642\u0628\u0629 \u0648\u0625\u062F\u0627\u0631\u0629 \u0645\u0633\u062A\u0648\u064A\u0627\u062A \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0641\u064A \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i()()(),n(12,"div",9)(13,"button",10),x("click",function(){return o.getLowStockItems()}),l(14,"i",11),r(15," \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0645\u0646\u062E\u0641\u0636 "),i(),n(16,"button",12),x("click",function(){return o.clearFilters()}),l(17,"i",13),r(18," \u0645\u0633\u062D \u0627\u0644\u0641\u0644\u0627\u062A\u0631 "),i()()()(),n(19,"div",2)(20,"h2",14),l(21,"i",15),r(22," \u0641\u0644\u0627\u062A\u0631 \u0627\u0644\u0628\u062D\u062B "),i(),n(23,"div",16)(24,"div",17)(25,"label",18),l(26,"i",19),r(27," \u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 "),i(),n(28,"select",20),ue("ngModelChange",function(m){return oe(o.selectedStoreId,m)||(o.selectedStoreId=m),m}),x("change",function(){return o.onStoreChange()}),n(29,"option",21),r(30,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i(),f(31,Ml,2,2,"option",22),i()(),n(32,"div",17)(33,"label",18),l(34,"i",23),r(35," \u062A\u0635\u0641\u064A\u0629 \u062D\u0633\u0628 \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(36,"select",24),ue("ngModelChange",function(m){return oe(o.selectedProductId,m)||(o.selectedProductId=m),m}),x("change",function(){return o.onProductChange()}),n(37,"option",21),r(38,"\u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A"),i(),f(39,kl,2,2,"option",22),i()(),n(40,"div",17)(41,"label",18),l(42,"i",25),r(43," \u0627\u0644\u0628\u062D\u062B "),i(),n(44,"input",26),ue("ngModelChange",function(m){return oe(o.searchKeyword,m)||(o.searchKeyword=m),m}),x("input",function(){return o.onSearchChange()}),i()()()(),n(45,"div",27)(46,"div",28)(47,"table",29)(48,"thead",30)(49,"tr")(50,"th",31),l(51,"i",32),r(52," \u0627\u0644\u0645\u0646\u062A\u062C "),i(),n(53,"th",31),l(54,"i",33),r(55," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 "),i(),n(56,"th",31),l(57,"i",34),r(58," \u0627\u0644\u0643\u0645\u064A\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 "),i(),n(59,"th",31),l(60,"i",35),r(61," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0643\u0645\u064A\u0629 "),i(),n(62,"th",31),l(63,"i",36),r(64," \u0622\u062E\u0631 \u062A\u062D\u062F\u064A\u062B "),i(),n(65,"th",31),l(66,"i",37),r(67," \u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A "),i()()(),n(68,"tbody",38),f(69,Rl,6,0,"tr",39)(70,Dl,35,13,"tr",40)(71,Nl,9,0,"tr",39),i()()()()()()),e&2&&(u(28),re("ngModel",o.selectedStoreId),u(3),d("ngForOf",o.stores),u(5),re("ngModel",o.selectedProductId),u(3),d("ngForOf",o.products),u(5),re("ngModel",o.searchKeyword),u(25),d("ngIf",o.loading),u(),d("ngForOf",o.inventories),u(),d("ngIf",!o.loading&&o.inventories.length===0))},dependencies:[fe,F,w,M,X,Z,V,xe,J,D,Ce,Re,_e],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border:none}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#343a40;color:#fff;border:none;font-weight:600}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#0000000d}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000013}.table-warning[_ngcontent-%COMP%]{background-color:#fff3cd!important}.badge[_ngcontent-%COMP%]{font-size:.875em}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545}.badge-success[_ngcontent-%COMP%]{background-color:#28a745}.btn-group[_ngcontent-%COMP%]{display:flex;gap:.25rem}.input-group-sm[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%], .input-group-sm[_ngcontent-%COMP%] > .input-group-append[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{font-size:.875rem}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.text-center[_ngcontent-%COMP%]{text-align:center!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.25rem}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}"]})};function Vl(a,t){if(a&1&&(n(0,"option",65),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),q(" ",e.nameAr," (",e.code,") ")}}function Ll(a,t){a&1&&(n(0,"div",66),l(1,"i",67),r(2," \u0627\u0644\u0645\u0646\u062A\u062C \u0645\u0637\u0644\u0648\u0628 "),i())}function Bl(a,t){if(a&1&&(n(0,"option",65),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),b(" ",e.nameAr," ")}}function Ul(a,t){a&1&&(n(0,"div",66),l(1,"i",67),r(2," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0645\u0637\u0644\u0648\u0628 "),i())}function jl(a,t){a&1&&(n(0,"div",66),l(1,"i",67),r(2," \u0627\u0644\u0643\u0645\u064A\u0629 \u0645\u0637\u0644\u0648\u0628\u0629 \u0648\u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631 "),i())}function Gl(a,t){a&1&&l(0,"i",68)}function Wl(a,t){a&1&&l(0,"i",69)}function $l(a,t){if(a&1&&(n(0,"option",52),r(1),i()),a&2){let e=t.$implicit;d("ngValue",e.id),u(),b(" ",e.nameAr," ")}}function Hl(a,t){a&1&&l(0,"i",70)}function ql(a,t){a&1&&l(0,"i",69)}function zl(a,t){a&1&&l(0,"i",83)}function Yl(a,t){if(a&1){let e=C();n(0,"div",71),x("click",function(){let s=y(e).$implicit,m=c();return _(m.toggleProductSelection(s))}),n(1,"div",72)(2,"div",73)(3,"h4",74),r(4),i(),n(5,"p",75),r(6),i(),n(7,"div",76)(8,"span",77),r(9),g(10,"currency"),i(),n(11,"span",78),r(12,"\u2022"),i(),n(13,"span",79),r(14),i()()(),n(15,"div",80)(16,"div",81),f(17,zl,1,0,"i",82),i()()()()}if(a&2){let e=t.$implicit,o=c();N("bg-blue-50",o.isProductSelected(e))("border-blue-300",o.isProductSelected(e)),u(4),p(e.nameAr),u(2),p(e.code),u(3),p(Bt(10,15,e.sellingPrice,"\u062F.\u0623","symbol","1.2-2")),u(5),p(e.unit==null?null:e.unit.nameAr),u(2),N("bg-blue-600",o.isProductSelected(e))("border-blue-600",o.isProductSelected(e))("border-gray-300",!o.isProductSelected(e)),u(),d("ngIf",o.isProductSelected(e))}}function Ql(a,t){a&1&&(n(0,"div",84),l(1,"i",85),n(2,"p"),r(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0646\u062A\u062C\u0627\u062A \u0645\u062A\u0627\u062D\u0629"),i()())}var Oi=class a{constructor(t,e,o,s,m,E){this.fb=t;this.inventoryService=e;this.productService=o;this.storeService=s;this.notification=m;this.authService=E}initialStockForm;products=[];stores=[];loading=!1;selectedProducts=[];bulkQuantity=0;bulkStoreId=null;ngOnInit(){this.initializeForm(),this.loadProducts(),this.loadStores()}initializeForm(){this.initialStockForm=this.fb.group({productId:[null,S.required],storeId:[null,S.required],quantity:[0,[S.required,S.min(.01)]]})}loadProducts(){this.productService.GetProducts().subscribe({next:t=>{this.products=(t||[]).filter(e=>this.authService.hasProduct(e.id))},error:t=>{this.notification.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A","Initial Stock Setup")}})}loadStores(){this.storeService.GetStores().subscribe({next:t=>{this.stores=t||[]},error:t=>{this.notification.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A","Initial Stock Setup")}})}addInitialStock(){if(this.initialStockForm.valid){let t=this.initialStockForm.value;this.loading=!0,this.inventoryService.SingleInitialStockSetup(t).subscribe({next:e=>{this.loading=!1,this.notification.success("\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A \u0628\u0646\u062C\u0627\u062D","Initial Stock Setup"),this.initialStockForm.reset(),this.initialStockForm.patchValue({quantity:0})},error:e=>{this.loading=!1,this.notification.error(e.error||"\u062E\u0637\u0623 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A","Initial Stock Setup")}})}else this.notification.error("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629","Initial Stock Setup")}selectAllProducts(){this.selectedProducts=[...this.products]}clearSelection(){this.selectedProducts=[]}toggleProductSelection(t){let e=this.selectedProducts.findIndex(o=>o.id===t.id);e>-1?this.selectedProducts.splice(e,1):this.selectedProducts.push(t)}isProductSelected(t){return this.selectedProducts.some(e=>e.id===t.id)}bulkCreateInitialStock(){if(this.selectedProducts.length===0){this.notification.error("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0646\u062A\u062C \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644","Bulk Initial Stock");return}if(!this.bulkStoreId){this.notification.error("\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639","Bulk Initial Stock");return}if(this.bulkQuantity<=0){this.notification.error("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0643\u0645\u064A\u0629 \u0635\u062D\u064A\u062D\u0629","Bulk Initial Stock");return}this.loading=!0;let t={productIds:this.selectedProducts.map(e=>e.id),storeId:this.bulkStoreId,quantity:this.bulkQuantity};this.inventoryService.BulkInitialStockSetup(t).subscribe({next:e=>{this.loading=!1,this.notification.success(`\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A \u0644\u0640 ${this.selectedProducts.length} \u0645\u0646\u062A\u062C \u0628\u0646\u062C\u0627\u062D`,"Bulk Initial Stock"),this.clearSelection(),this.bulkQuantity=0,this.bulkStoreId=null},error:e=>{this.loading=!1,this.notification.error(e.error||"\u062E\u0637\u0623 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A \u0627\u0644\u0645\u062C\u0645\u0639","Bulk Initial Stock")}})}get productId(){return this.initialStockForm.get("productId")}get storeId(){return this.initialStockForm.get("storeId")}get quantity(){return this.initialStockForm.get("quantity")}static \u0275fac=function(e){return new(e||a)(v(L),v(lt),v(Ee),v(Ne),v(Ge),v(ce))};static \u0275cmp=A({type:a,selectors:[["app-initial-stock-setup"]],decls:105,vars:22,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-green-500","to-emerald-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-boxes","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","items-center","space-x-3","space-x-reverse"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-600","text-white","rounded-xl","font-semibold","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-arrow-clockwise","mr-2"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden","mb-8"],[1,"bg-gradient-to-r","from-green-500","to-emerald-600","px-6","py-4"],[1,"text-xl","font-bold","text-white","flex","items-center"],[1,"bi","bi-plus-circle","mr-3"],[1,"p-6"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-box","mr-2","text-green-600"],["formControlName","productId",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-red-500 text-sm flex items-center",4,"ngIf"],[1,"bi","bi-building","mr-2","text-green-600"],["formControlName","storeId",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"bi","bi-123","mr-2","text-green-600"],[1,"relative"],["type","number","step","0.01","formControlName","quantity","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"absolute","left-3","top-3","text-gray-500"],[1,"mt-6","flex","justify-end"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-green-500","to-emerald-600","text-white","rounded-xl","font-semibold","hover:from-green-600","hover:to-emerald-700","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"disabled"],["class","bi bi-plus-circle mr-2",4,"ngIf"],["class","bi bi-hourglass-split mr-2 animate-spin",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","px-6","py-4"],[1,"bi","bi-layers","mr-3"],[1,"mb-6","p-4","bg-blue-50","rounded-xl"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-blue-900"],[1,"flex","space-x-2","space-x-reverse"],["type","button",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors","text-sm",3,"click"],[1,"bi","bi-check-all","mr-1"],["type","button",1,"px-4","py-2","bg-gray-600","text-white","rounded-lg","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-colors","text-sm",3,"click"],[1,"bi","bi-x-circle","mr-1"],[1,"text-sm","text-blue-700"],[1,"bi","bi-info-circle","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"bi","bi-building","mr-2","text-blue-600"],[1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"bi","bi-123","mr-2","text-blue-600"],["type","number","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","justify-end","mb-6"],["type","button",1,"px-8","py-3","bg-gradient-to-r","from-blue-500","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-blue-600","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"click","disabled"],["class","bi bi-layers mr-2",4,"ngIf"],[1,"border-t","border-gray-200","pt-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4","flex","items-center"],[1,"bi","bi-list-ul","mr-2","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","p-4 border border-gray-200 rounded-xl hover:border-blue-300 transition-colors cursor-pointer",3,"bg-blue-50","border-blue-300","click",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500",4,"ngIf"],[3,"value"],[1,"text-red-500","text-sm","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"],[1,"bi","bi-plus-circle","mr-2"],[1,"bi","bi-hourglass-split","mr-2","animate-spin"],[1,"bi","bi-layers","mr-2"],[1,"p-4","border","border-gray-200","rounded-xl","hover:border-blue-300","transition-colors","cursor-pointer",3,"click"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"font-semibold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600","mb-2"],[1,"flex","items-center","space-x-2","space-x-reverse","text-sm"],[1,"text-green-600","font-medium"],[1,"text-gray-400"],[1,"text-gray-500"],[1,"ml-3"],[1,"w-5","h-5","rounded","border-2","flex","items-center","justify-center"],["class","bi bi-check text-white text-xs",4,"ngIf"],[1,"bi","bi-check","text-white","text-xs"],[1,"text-center","py-8","text-gray-500"],[1,"bi","bi-box","text-4xl","mb-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9,"\u0625\u0639\u062F\u0627\u062F \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A"),i(),n(10,"p",8),r(11,"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A \u0644\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u0641\u064A \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639\u0627\u062A"),i()()(),n(12,"div",9)(13,"button",10),x("click",function(){return o.loadProducts()}),l(14,"i",11),r(15," \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0642\u0627\u0626\u0645\u0629 "),i()()()(),n(16,"div",12)(17,"div",13)(18,"h2",14),l(19,"i",15),r(20," \u0625\u0636\u0627\u0641\u0629 \u0645\u062E\u0632\u0648\u0646 \u0627\u0628\u062A\u062F\u0627\u0626\u064A \u0644\u0645\u0646\u062A\u062C \u0648\u0627\u062D\u062F "),i()(),n(21,"div",16)(22,"form",17),x("ngSubmit",function(){return o.addInitialStock()}),n(23,"div",18)(24,"div",19)(25,"label",20),l(26,"i",21),r(27," \u0627\u0644\u0645\u0646\u062A\u062C * "),i(),n(28,"select",22)(29,"option",23),r(30,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0646\u062A\u062C"),i(),f(31,Vl,2,3,"option",24),i(),f(32,Ll,3,0,"div",25),i(),n(33,"div",19)(34,"label",20),l(35,"i",26),r(36," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 * "),i(),n(37,"select",27)(38,"option",23),r(39,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),f(40,Bl,2,2,"option",24),i(),f(41,Ul,3,0,"div",25),i(),n(42,"div",19)(43,"label",20),l(44,"i",28),r(45," \u0627\u0644\u0643\u0645\u064A\u0629 * "),i(),n(46,"div",29),l(47,"input",30),n(48,"span",31),r(49,"\u0643\u0645\u064A\u0629"),i()(),f(50,jl,3,0,"div",25),i()(),n(51,"div",32)(52,"button",33),f(53,Gl,1,0,"i",34)(54,Wl,1,0,"i",35),r(55),i()()()()(),n(56,"div",36)(57,"div",37)(58,"h2",14),l(59,"i",38),r(60," \u0625\u0636\u0627\u0641\u0629 \u0645\u062E\u0632\u0648\u0646 \u0627\u0628\u062A\u062F\u0627\u0626\u064A \u0645\u062C\u0645\u0639 "),i()(),n(61,"div",16)(62,"div",39)(63,"div",40)(64,"h3",41),r(65,"\u0627\u0644\u062A\u062D\u0643\u0645 \u0641\u064A \u0627\u0644\u0627\u062E\u062A\u064A\u0627\u0631"),i(),n(66,"div",42)(67,"button",43),x("click",function(){return o.selectAllProducts()}),l(68,"i",44),r(69," \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0643\u0644 "),i(),n(70,"button",45),x("click",function(){return o.clearSelection()}),l(71,"i",46),r(72," \u0645\u0633\u062D \u0627\u0644\u0627\u062E\u062A\u064A\u0627\u0631 "),i()()(),n(73,"div",47),l(74,"i",48),r(75),i()(),n(76,"div",49)(77,"div",19)(78,"label",20),l(79,"i",50),r(80," \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 \u0644\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0645\u062C\u0645\u0639 * "),i(),n(81,"select",51),ue("ngModelChange",function(m){return oe(o.bulkStoreId,m)||(o.bulkStoreId=m),m}),n(82,"option",52),r(83,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),f(84,$l,2,2,"option",53),i()(),n(85,"div",19)(86,"label",20),l(87,"i",54),r(88," \u0627\u0644\u0643\u0645\u064A\u0629 \u0644\u0644\u0645\u0646\u062A\u062C\u0627\u062A \u0627\u0644\u0645\u062E\u062A\u0627\u0631\u0629 * "),i(),n(89,"div",29)(90,"input",55),ue("ngModelChange",function(m){return oe(o.bulkQuantity,m)||(o.bulkQuantity=m),m}),i(),n(91,"span",31),r(92,"\u0643\u0645\u064A\u0629"),i()()()(),n(93,"div",56)(94,"button",57),x("click",function(){return o.bulkCreateInitialStock()}),f(95,Hl,1,0,"i",58)(96,ql,1,0,"i",35),r(97),i()(),n(98,"div",59)(99,"h3",60),l(100,"i",61),r(101," \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A "),i(),n(102,"div",62),f(103,Yl,18,20,"div",63),i(),f(104,Ql,4,0,"div",64),i()()()()()),e&2&&(u(22),d("formGroup",o.initialStockForm),u(9),d("ngForOf",o.products),u(),d("ngIf",(o.productId==null?null:o.productId.invalid)&&(o.productId==null?null:o.productId.touched)),u(8),d("ngForOf",o.stores),u(),d("ngIf",(o.storeId==null?null:o.storeId.invalid)&&(o.storeId==null?null:o.storeId.touched)),u(9),d("ngIf",(o.quantity==null?null:o.quantity.invalid)&&(o.quantity==null?null:o.quantity.touched)),u(2),d("disabled",o.initialStockForm.invalid||o.loading),u(),d("ngIf",!o.loading),u(),d("ngIf",o.loading),u(),b(" ",o.loading?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A"," "),u(20),q(" \u062A\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 ",o.selectedProducts.length," \u0645\u0646 \u0623\u0635\u0644 ",o.products.length," \u0645\u0646\u062A\u062C "),u(6),re("ngModel",o.bulkStoreId),u(),d("ngValue",null),u(2),d("ngForOf",o.stores),u(6),re("ngModel",o.bulkQuantity),u(4),d("disabled",o.selectedProducts.length===0||!o.bulkStoreId||o.bulkQuantity<=0||o.loading),u(),d("ngIf",!o.loading),u(),d("ngIf",o.loading),u(),b(" ",o.loading?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062E\u0632\u0648\u0646 \u0627\u0644\u0645\u062C\u0645\u0639 ("+o.selectedProducts.length+" \u0645\u0646\u062A\u062C)"," "),u(6),d("ngForOf",o.products),u(),d("ngIf",o.products.length===0))},dependencies:[Pe,F,w,De,W,X,Z,V,xe,J,D,B,U,j,Qe,Re,Ke,Se],styles:[".initial-stock-setup[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{transition:all .3s ease}.initial-stock-setup[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}.initial-stock-setup[_ngcontent-%COMP%]   .product-card.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-color:#3b82f6}.initial-stock-setup[_ngcontent-%COMP%]   .bulk-controls[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border:1px solid #bae6fd}.initial-stock-setup[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1px solid #bbf7d0}.initial-stock-setup[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.initial-stock-setup[_ngcontent-%COMP%]   .gradient-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);transition:all .3s ease}.initial-stock-setup[_ngcontent-%COMP%]   .gradient-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);transform:translateY(-1px);box-shadow:0 10px 25px #10b9814d}.initial-stock-setup[_ngcontent-%COMP%]   .bulk-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);transition:all .3s ease}.initial-stock-setup[_ngcontent-%COMP%]   .bulk-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-1px);box-shadow:0 10px 25px #3b82f64d}"]})};var Ti=class a{constructor(t){this.http=t}url=`${Y.baseUrl}/Inventory/`;setupInitialStock(t){return this.http.post(`${this.url}initial-stock-setup`,t)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};function Jl(a,t){a&1&&(n(0,"div",11)(1,"div",12)(2,"span",13),r(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()(),n(4,"p",14),r(5,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A..."),i()())}function Xl(a,t){a&1&&(n(0,"div",31),l(1,"i",32),n(2,"p"),r(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0646\u0627\u0635\u0631 \u0645\u0636\u0627\u0641\u0629"),i(),n(4,"p",33),r(5,'\u0627\u0636\u063A\u0637 \u0639\u0644\u0649 "\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062A\u062C" \u0644\u0628\u062F\u0621 \u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A'),i()())}function Zl(a,t){if(a&1&&(n(0,"option",62),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),q(" ",e.nameAr," (",e.code,") ")}}function es(a,t){a&1&&(n(0,"div",63),r(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0646\u062A\u062C "),i())}function ts(a,t){if(a&1&&(n(0,"option",62),r(1),i()),a&2){let e=t.$implicit;d("value",e.id),u(),b(" ",e.name," ")}}function is(a,t){a&1&&(n(0,"div",63),r(1," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639 "),i())}function ns(a,t){a&1&&(n(0,"div"),r(1,"\u0627\u0644\u0643\u0645\u064A\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"),i())}function rs(a,t){a&1&&(n(0,"div"),r(1,"\u0627\u0644\u0643\u0645\u064A\u0629 \u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0623\u0648 \u062A\u0633\u0627\u0648\u064A 0"),i())}function os(a,t){if(a&1&&(n(0,"div",63),f(1,ns,2,0,"div",29)(2,rs,2,0,"div",29),i()),a&2){let e,o,s=c().$implicit;u(),d("ngIf",(e=s.get("quantity"))==null||e.errors==null?null:e.errors.required),u(),d("ngIf",(o=s.get("quantity"))==null||o.errors==null?null:o.errors.min)}}function us(a,t){if(a&1){let e=C();n(0,"tr",52)(1,"td",53),r(2),i(),n(3,"td")(4,"select",54)(5,"option",55),r(6,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0646\u062A\u062C"),i(),f(7,Zl,2,3,"option",56),i(),f(8,es,2,0,"div",57),i(),n(9,"td")(10,"select",58)(11,"option",55),r(12,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),f(13,ts,2,2,"option",56),i(),f(14,is,2,0,"div",57),i(),n(15,"td"),l(16,"input",59),f(17,os,3,2,"div",57),i(),n(18,"td")(19,"button",60),x("click",function(){let s=y(e).index,m=c(3);return _(m.removeStockItem(s))}),l(20,"i",61),i()()()}if(a&2){let e,o,s,m,E,I,R=t.$implicit,P=t.index,ne=c(3);d("formGroupName",P),u(2),p(P+1),u(2),N("is-invalid",((e=R.get("productId"))==null?null:e.invalid)&&((e=R.get("productId"))==null?null:e.touched)),u(3),d("ngForOf",ne.products),u(),d("ngIf",((o=R.get("productId"))==null?null:o.invalid)&&((o=R.get("productId"))==null?null:o.touched)),u(2),N("is-invalid",((s=R.get("storeId"))==null?null:s.invalid)&&((s=R.get("storeId"))==null?null:s.touched)),u(3),d("ngForOf",ne.stores),u(),d("ngIf",((m=R.get("storeId"))==null?null:m.invalid)&&((m=R.get("storeId"))==null?null:m.touched)),u(2),N("is-invalid",((E=R.get("quantity"))==null?null:E.invalid)&&((E=R.get("quantity"))==null?null:E.touched)),u(),d("ngIf",((I=R.get("quantity"))==null?null:I.invalid)&&((I=R.get("quantity"))==null?null:I.touched)),u(2),d("disabled",ne.isSubmitting)}}function as(a,t){if(a&1&&(n(0,"div")(1,"div",34)(2,"table",35)(3,"thead",36)(4,"tr")(5,"th",37),r(6,"#"),i(),n(7,"th",38),r(8,"\u0627\u0644\u0645\u0646\u062A\u062C"),i(),n(9,"th",39),r(10,"\u0627\u0644\u0645\u0633\u062A\u0648\u062F\u0639"),i(),n(11,"th",40),r(12,"\u0627\u0644\u0643\u0645\u064A\u0629"),i(),n(13,"th",41),r(14,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),i()()(),n(15,"tbody",42),f(16,us,21,14,"tr",43),i()()(),n(17,"div",44)(18,"div",45)(19,"div",46)(20,"div",22)(21,"h6",47),l(22,"i",48),r(23," \u0645\u0644\u062E\u0635 \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A "),i(),n(24,"div",15)(25,"div",49)(26,"p",2)(27,"strong"),r(28,"\u0639\u062F\u062F \u0627\u0644\u0639\u0646\u0627\u0635\u0631:"),i()(),n(29,"p",50),r(30),i()(),n(31,"div",49)(32,"p",2)(33,"strong"),r(34,"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0645\u064A\u0629:"),i()(),n(35,"p",51),r(36),g(37,"number"),i()()()()()()()()),a&2){let e=c(2);u(16),d("ngForOf",e.itemsFormArray.controls),u(14),p(e.getTotalItems()),u(6),p(Q(37,3,e.getTotalQuantity(),"1.2-2"))}}function ls(a,t){a&1&&l(0,"span",68)}function ss(a,t){a&1&&l(0,"i",69)}function ds(a,t){if(a&1&&(n(0,"div",64)(1,"button",65),f(2,ls,1,0,"span",66)(3,ss,1,0,"i",67),r(4),i()()),a&2){let e=c(2);u(),d("disabled",e.initialStockForm.invalid||e.isSubmitting),u(),d("ngIf",e.isSubmitting),u(),d("ngIf",!e.isSubmitting),u(),b(" ",e.isSubmitting?"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...":"\u062D\u0641\u0638 \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A"," ")}}function ms(a,t){if(a&1){let e=C();n(0,"div",15)(1,"div",16)(2,"form",17),x("ngSubmit",function(){y(e);let s=c();return _(s.onSubmit())}),n(3,"div",18)(4,"div",19)(5,"h6",20),l(6,"i",21),r(7," \u0645\u0644\u0627\u062D\u0638\u0627\u062A "),i()(),n(8,"div",22)(9,"textarea",23),r(10,"            "),i()()(),n(11,"div",24)(12,"div",25)(13,"h6",20),l(14,"i",26),r(15," \u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A "),i(),n(16,"span",27),r(17),i()(),n(18,"div",22),f(19,Xl,6,0,"div",28)(20,as,38,6,"div",29),i()(),f(21,ds,5,4,"div",30),i()()()}if(a&2){let e=c();u(2),d("formGroup",e.initialStockForm),u(15),b("",e.getTotalItems()," \u0639\u0646\u0635\u0631"),u(2),d("ngIf",e.itemsFormArray.length===0),u(),d("ngIf",e.itemsFormArray.length>0),u(),d("ngIf",e.itemsFormArray.length>0)}}var Mi=class a{constructor(t,e,o,s,m,E){this.fb=t;this.initialStockService=e;this.productsService=o;this.storeService=s;this.toastr=m;this.router=E;this.initializeForm()}initialStockForm;products=[];stores=[];isLoading=!1;isSubmitting=!1;ngOnInit(){this.loadData()}initializeForm(){this.initialStockForm=this.fb.group({notes:[""],items:this.fb.array([])})}get itemsFormArray(){return this.initialStockForm.get("items")}loadData(){this.isLoading=!0,Promise.all([this.productsService.GetProducts().toPromise(),this.storeService.GetActiveStores().toPromise()]).then(([t,e])=>{this.products=t||[],this.stores=e||[],this.isLoading=!1}).catch(t=>{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A","\u062E\u0637\u0623"),this.isLoading=!1})}addStockItem(){let t=this.fb.group({productId:[null,S.required],storeId:[null,S.required],quantity:[0,[S.required,S.min(0)]]});this.itemsFormArray.push(t)}removeStockItem(t){this.itemsFormArray.removeAt(t)}getProductName(t){let e=this.products.find(o=>o.id===t);return e?e.nameAr:""}getStoreName(t){let e=this.stores.find(o=>o.id===t);return e?e.name:""}onSubmit(){if(this.initialStockForm.valid&&this.itemsFormArray.length>0){this.isSubmitting=!0;let t=this.initialStockForm.value,e=t.items.map(o=>({productId:o.productId,storeId:o.storeId,quantity:o.quantity}));this.initialStockService.setupInitialStock({items:e,notes:t.notes}).subscribe({next:o=>{o.success?(this.toastr.success("\u062A\u0645 \u0625\u0639\u062F\u0627\u062F \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A \u0628\u0646\u062C\u0627\u062D","\u0646\u062C\u062D"),this.router.navigate(["/admin/inventory-report"])):this.toastr.error("\u0641\u0634\u0644 \u0641\u064A \u0625\u0639\u062F\u0627\u062F \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A","\u062E\u0637\u0623"),this.isSubmitting=!1},error:o=>{this.toastr.error("\u062E\u0637\u0623 \u0641\u064A \u0625\u0639\u062F\u0627\u062F \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A","\u062E\u0637\u0623"),this.isSubmitting=!1}})}else this.toastr.warning("\u064A\u0631\u062C\u0649 \u0625\u0636\u0627\u0641\u0629 \u0639\u0646\u0635\u0631 \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644","\u062A\u062D\u0630\u064A\u0631")}clearForm(){this.itemsFormArray.clear(),this.initialStockForm.patchValue({notes:""})}getTotalItems(){return this.itemsFormArray.length}getTotalQuantity(){return this.itemsFormArray.controls.reduce((t,e)=>t+(e.get("quantity")?.value||0),0)}static \u0275fac=function(e){return new(e||a)(v(L),v(Ti),v(Ee),v(Ne),v(ee),v(T))};static \u0275cmp=A({type:a,selectors:[["app-initial-stock"]],standalone:!1,decls:20,vars:13,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-1"],[1,"bi","bi-box-seam","me-2"],[1,"text-muted","mb-0"],[1,"btn","btn-outline-secondary","me-2",3,"click","disabled"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"bi","bi-plus-circle","me-1"],["class","text-center py-5",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"row"],[1,"col-12"],[3,"ngSubmit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"bi","bi-chat-text","me-2"],[1,"card-body"],["formControlName","notes","rows","3","placeholder","\u0623\u0636\u0641 \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u062D\u0648\u0644 \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0627\u0628\u062A\u062F\u0627\u0626\u064A (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)",1,"form-control"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-list-ul","me-2"],[1,"badge","bg-primary"],["class","text-center py-5 text-muted",4,"ngIf"],[4,"ngIf"],["class","d-flex justify-content-end mt-4",4,"ngIf"],[1,"text-center","py-5","text-muted"],[1,"bi","bi-inbox","fs-1","mb-3"],[1,"small"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-light"],["width","5%"],["width","25%"],["width","20%"],["width","15%"],["width","10%"],["formArrayName","items"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-md-6"],[1,"card","bg-light"],[1,"card-title"],[1,"bi","bi-info-circle","me-2"],[1,"col-6"],[1,"mb-0","text-primary","fs-5"],[1,"mb-0","text-success","fs-5"],[3,"formGroupName"],[1,"text-center"],["formControlName","productId",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","storeId",1,"form-select"],["type","number","formControlName","quantity","min","0","step","0.01",1,"form-control"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"bi","bi-trash"],[3,"value"],[1,"invalid-feedback"],[1,"d-flex","justify-content-end","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","bi bi-check-circle me-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-circle","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h4",2),l(4,"i",3),r(5),g(6,"translate"),i(),n(7,"p",4),r(8),g(9,"translate"),i()(),n(10,"div")(11,"button",5),x("click",function(){return o.clearForm()}),l(12,"i",6),r(13," \u0645\u0633\u062D \u0627\u0644\u0643\u0644 "),i(),n(14,"button",7),x("click",function(){return o.addStockItem()}),l(15,"i",8),r(16),g(17,"translate"),i()()(),f(18,Jl,6,0,"div",9)(19,ms,22,5,"div",10),i()),e&2&&(u(5),b(" ",h(6,7,"INITIAL_STOCK.TITLE")," "),u(3),p(h(9,9,"INITIAL_STOCK.DESCRIPTION")),u(3),d("disabled",o.isSubmitting),u(3),d("disabled",o.isSubmitting),u(2),b(" ",h(17,11,"INITIAL_STOCK.ADD_PRODUCT")," "),u(2),d("ngIf",o.isLoading),u(),d("ngIf",!o.isLoading))},dependencies:[F,w,W,X,Z,V,xe,J,D,B,Ce,U,j,jt,Gt,ze,ve],styles:[".container-fluid[_ngcontent-%COMP%]{padding:1.5rem}.card[_ngcontent-%COMP%]{border:1px solid #e3e6f0;border-radius:.5rem;box-shadow:0 .15rem 1.75rem #3a3b4526}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fc;border-bottom:1px solid #e3e6f0;font-weight:600}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;font-weight:600;color:#5a5c69;background-color:#f8f9fc}.btn[_ngcontent-%COMP%]{border-radius:.35rem;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:#4e73df;border-color:#4e73df}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2e59d9;border-color:#2e59d9}.btn-outline-primary[_ngcontent-%COMP%]{color:#4e73df;border-color:#4e73df}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#4e73df;border-color:#4e73df}.btn-outline-danger[_ngcontent-%COMP%]{color:#e74a3b;border-color:#e74a3b}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#e74a3b;border-color:#e74a3b}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:.35rem;border:1px solid #d1d3e2}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#4e73df;box-shadow:0 0 0 .2rem #4e73df40}.invalid-feedback[_ngcontent-%COMP%]{display:block;font-size:.875rem}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}.text-muted[_ngcontent-%COMP%]{color:#858796!important}.text-primary[_ngcontent-%COMP%]{color:#4e73df!important}.text-success[_ngcontent-%COMP%]{color:#1cc88a!important}.fs-1[_ngcontent-%COMP%]{font-size:3rem!important}.fs-5[_ngcontent-%COMP%]{font-size:1.25rem!important}@media (prefers-color-scheme: dark){.card[_ngcontent-%COMP%]{background-color:#2d3748;border-color:#4a5568}.card-header[_ngcontent-%COMP%]{background-color:#1a202c;border-bottom-color:#4a5568}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1a202c;color:#e2e8f0}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{background-color:#2d3748;border-color:#4a5568;color:#e2e8f0}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{background-color:#2d3748;border-color:#4e73df;color:#e2e8f0}}"]})};var cs=a=>[a,"JOD","symbol","1.2-2","ar"];function ps(a,t){if(a&1){let e=C();n(0,"button",14),x("click",function(){y(e);let s=c();return _(s.resetModifierForm())}),l(1,"i",15),r(2," \u0625\u0636\u0627\u0641\u0629 \u0645\u0643\u0648\u0646 \u062C\u062F\u064A\u062F "),i()}}function gs(a,t){a&1&&(n(0,"div",57),l(1,"i",58),r(2," \u0627\u0633\u0645 \u0627\u0644\u0645\u0643\u0648\u0646 \u0645\u0637\u0644\u0648\u0628 "),i())}function fs(a,t){if(a&1){let e=C();n(0,"div",16)(1,"div",17)(2,"h2",18),l(3,"i",19),r(4),i()(),n(5,"div",20)(6,"form",21),x("ngSubmit",function(){y(e);let s=c();return _(s.onModifierSubmit())}),n(7,"div",22)(8,"div",23)(9,"label",24),l(10,"i",25),r(11," \u0627\u0633\u0645 \u0627\u0644\u0645\u0643\u0648\u0646 * "),i(),l(12,"input",26),f(13,gs,3,0,"div",27),i(),n(14,"div",23)(15,"label",24),l(16,"i",28),r(17," \u0643\u0648\u062F \u0627\u0644\u0645\u0643\u0648\u0646 "),i(),l(18,"input",29),i()(),n(19,"div",23)(20,"label",24),l(21,"i",30),r(22," \u0627\u0644\u0648\u0635\u0641 "),i(),l(23,"textarea",31),i(),n(24,"div",32)(25,"div",23)(26,"label",24),l(27,"i",33),r(28," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631 "),i(),n(29,"div",34),l(30,"input",35),n(31,"span",36),r(32,"\u062F.\u0623"),i()()(),n(33,"div",23)(34,"label",24),l(35,"i",37),r(36," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0643\u0644\u0641\u0629 "),i(),n(37,"div",34),l(38,"input",38),n(39,"span",36),r(40,"\u062F.\u0623"),i()()(),n(41,"div",23)(42,"label",24),l(43,"i",39),r(44," \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0627\u062E\u062A\u064A\u0627\u0631 "),i(),l(45,"input",40),i(),n(46,"div",23)(47,"label",24),l(48,"i",41),r(49," \u062A\u0631\u062A\u064A\u0628 \u0627\u0644\u0639\u0631\u0636 "),i(),l(50,"input",42),i()(),n(51,"div",43)(52,"div",23)(53,"label",24),l(54,"i",44),r(55," \u0645\u0637\u0644\u0648\u0628 "),i(),n(56,"div",45),l(57,"input",46),n(58,"span",47),r(59,"\u0645\u0643\u0648\u0646 \u0645\u0637\u0644\u0648\u0628"),i()()(),n(60,"div",23)(61,"label",24),l(62,"i",48),r(63," \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u062A\u0639\u062F\u062F "),i(),n(64,"div",45),l(65,"input",49),n(66,"span",47),r(67,"\u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u062A\u0639\u062F\u062F"),i()()(),n(68,"div",23)(69,"label",24),l(70,"i",50),r(71," \u0646\u0634\u0637 "),i(),n(72,"div",45),l(73,"input",51),n(74,"span",47),r(75,"\u0645\u0643\u0648\u0646 \u0646\u0634\u0637"),i()()()(),n(76,"div",52)(77,"button",53),x("click",function(){y(e);let s=c();return _(s.cancelEdit())}),l(78,"i",54),r(79," \u0625\u0644\u063A\u0627\u0621 "),i(),n(80,"button",55),l(81,"i",56),r(82),i()()()()()}if(a&2){let e,o=c();u(4),b(" ",o.isEditing?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0643\u0648\u0646":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0643\u0648\u0646 \u062C\u062F\u064A\u062F"," "),u(2),d("formGroup",o.modifierForm),u(7),d("ngIf",((e=o.modifierForm.get("name"))==null?null:e.invalid)&&((e=o.modifierForm.get("name"))==null?null:e.touched)),u(67),d("disabled",o.modifierForm.invalid),u(2),b(" ",o.isEditing?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0643\u0648\u0646":"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u0643\u0648\u0646"," ")}}function bs(a,t){if(a&1){let e=C();n(0,"tr",67),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.selectModifier(s))}),n(1,"td",68),r(2),i(),n(3,"td",69),r(4),i(),n(5,"td",69)(6,"span",70),r(7),i()(),n(8,"td",69),r(9),i(),n(10,"td",69),r(11),i(),n(12,"td",69)(13,"span",70),r(14),i()(),n(15,"td",69)(16,"div",71),x("click",function(s){return y(e),_(s.stopPropagation())}),n(17,"button",72),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.editModifier(s))}),l(18,"i",73),i(),n(19,"button",74),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.deleteModifier(s))}),l(20,"i",75),i()()()()}if(a&2){let e=t.$implicit;u(2),p(e.name),u(2),p(e.code||"-"),u(2),K(e.isMultiple?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),u(),b(" ",e.isMultiple?"\u0645\u062A\u0639\u062F\u062F":"\u0648\u0627\u062D\u062F"," "),u(2),p(e.maxSelections),u(2),p((e.options==null?null:e.options.length)||0),u(2),K(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function xs(a,t){if(a&1&&(n(0,"div",16)(1,"div",59)(2,"h2",18),l(3,"i",60),r(4," \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629 "),i()(),n(5,"div",20)(6,"div",61)(7,"table",62)(8,"thead",63)(9,"tr")(10,"th",64),r(11,"\u0627\u0644\u0627\u0633\u0645"),i(),n(12,"th",64),r(13,"\u0627\u0644\u0643\u0648\u062F"),i(),n(14,"th",64),r(15,"\u0627\u0644\u0646\u0648\u0639"),i(),n(16,"th",64),r(17,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649"),i(),n(18,"th",64),r(19,"\u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A"),i(),n(20,"th",64),r(21,"\u0627\u0644\u062D\u0627\u0644\u0629"),i(),n(22,"th",64),r(23,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),i()()(),n(24,"tbody",65),f(25,bs,21,10,"tr",66),i()()()()()),a&2){let e=c();u(25),d("ngForOf",e.modifiers)}}function vs(a,t){if(a&1){let e=C();n(0,"button",14),x("click",function(){y(e);let s=c(2);return _(s.resetOptionForm())}),l(1,"i",15),r(2," \u0625\u0636\u0627\u0641\u0629 \u062E\u064A\u0627\u0631 "),i()}}function hs(a,t){a&1&&(n(0,"div",57),l(1,"i",58),r(2," \u0627\u0633\u0645 \u0627\u0644\u062E\u064A\u0627\u0631 \u0645\u0637\u0644\u0648\u0628 "),i())}function ys(a,t){if(a&1){let e=C();n(0,"div",79)(1,"form",21),x("ngSubmit",function(){y(e);let s=c(2);return _(s.onOptionSubmit())}),n(2,"div",22)(3,"div",23)(4,"label",24),l(5,"i",80),r(6," \u0627\u0633\u0645 \u0627\u0644\u062E\u064A\u0627\u0631 * "),i(),l(7,"input",81),f(8,hs,3,0,"div",27),i(),n(9,"div",23)(10,"label",24),l(11,"i",39),r(12," \u0643\u0648\u062F \u0627\u0644\u062E\u064A\u0627\u0631 "),i(),l(13,"input",82),i()(),n(14,"div",23)(15,"label",24),l(16,"i",83),r(17," \u0627\u0644\u0648\u0635\u0641 "),i(),l(18,"textarea",84),i(),n(19,"div",32)(20,"div",23)(21,"label",24),l(22,"i",33),r(23," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631 "),i(),n(24,"div",34),l(25,"input",35),n(26,"span",36),r(27,"\u062F.\u0623"),i()()(),n(28,"div",23)(29,"label",24),l(30,"i",37),r(31," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0643\u0644\u0641\u0629 "),i(),n(32,"div",34),l(33,"input",38),n(34,"span",36),r(35,"\u062F.\u0623"),i()()(),n(36,"div",23)(37,"label",24),l(38,"i",85),r(39," \u062A\u0631\u062A\u064A\u0628 \u0627\u0644\u0639\u0631\u0636 "),i(),l(40,"input",86),i(),n(41,"div",23)(42,"label",24),l(43,"i",87),r(44," \u0627\u0641\u062A\u0631\u0627\u0636\u064A "),i(),n(45,"div",45),l(46,"input",88),n(47,"span",47),r(48,"\u062E\u064A\u0627\u0631 \u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i()()()(),n(49,"div",52)(50,"button",53),x("click",function(){y(e);let s=c(2);return _(s.resetOptionForm())}),l(51,"i",54),r(52," \u0625\u0644\u063A\u0627\u0621 "),i(),n(53,"button",89),l(54,"i",56),r(55),i()()()()}if(a&2){let e,o=c(2);u(),d("formGroup",o.optionForm),u(7),d("ngIf",((e=o.optionForm.get("name"))==null?null:e.invalid)&&((e=o.optionForm.get("name"))==null?null:e.touched)),u(45),d("disabled",o.optionForm.invalid),u(2),b(" ",o.isEditingOption?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062E\u064A\u0627\u0631":"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062E\u064A\u0627\u0631"," ")}}function _s(a,t){a&1&&(n(0,"span",95),r(1,"\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i())}function Ss(a,t){if(a&1){let e=C();n(0,"tr",92)(1,"td",68),r(2),i(),n(3,"td",69),r(4),i(),n(5,"td",69),r(6),g(7,"currency"),i(),n(8,"td",69),f(9,_s,2,0,"span",93),i(),n(10,"td",69)(11,"span",70),r(12),i()(),n(13,"td",69)(14,"div",94)(15,"button",72),x("click",function(){let s=y(e).$implicit,m=c(3);return _(m.editModifierOption(s))}),l(16,"i",73),i(),n(17,"button",74),x("click",function(){let s=y(e).$implicit,m=c(3);return _(m.deleteModifierOption(s))}),l(18,"i",75),i()()()()}if(a&2){let e=t.$implicit;u(2),p(e.name),u(2),p(e.code||"-"),u(2),p(Ie(7,7,ge(13,cs,e.priceAdjustment))),u(3),d("ngIf",e.isDefault),u(2),K(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," ")}}function Cs(a,t){if(a&1&&(n(0,"div",61)(1,"table",62)(2,"thead",90)(3,"tr")(4,"th",64),r(5,"\u0627\u0644\u0627\u0633\u0645"),i(),n(6,"th",64),r(7,"\u0627\u0644\u0643\u0648\u062F"),i(),n(8,"th",64),r(9,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0633\u0639\u0631"),i(),n(10,"th",64),r(11,"\u0627\u0641\u062A\u0631\u0627\u0636\u064A"),i(),n(12,"th",64),r(13,"\u0627\u0644\u062D\u0627\u0644\u0629"),i(),n(14,"th",64),r(15,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),i()()(),n(16,"tbody",65),f(17,Ss,19,15,"tr",91),i()()()),a&2){let e=c(2);u(17),d("ngForOf",e.selectedModifier.options)}}function Es(a,t){if(a&1&&(n(0,"div",16)(1,"div",76)(2,"div",4)(3,"h2",18),l(4,"i",60),r(5),i(),f(6,vs,3,0,"button",10),i()(),n(7,"div",20),f(8,ys,56,4,"div",77)(9,Cs,18,1,"div",78),i()()),a&2){let e=c();u(5),b(" \u062E\u064A\u0627\u0631\u0627\u062A ",e.selectedModifier.name," "),u(),d("ngIf",!e.isEditingOption),u(2),d("ngIf",e.isEditingOption||e.selectedModifier.options&&e.selectedModifier.options.length===0||e.showAddOptionForm),u(),d("ngIf",e.selectedModifier.options&&e.selectedModifier.options.length>0)}}function As(a,t){a&1&&(n(0,"div",96)(1,"div",97),l(2,"div",98),n(3,"span",99),r(4,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()()())}function ws(a,t){if(a&1){let e=C();n(0,"div",100)(1,"div",101)(2,"div",102),l(3,"i",103),i(),n(4,"h4",104),r(5,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0643\u0648\u0646\u0627\u062A"),i(),n(6,"p",105),r(7,"\u0623\u0646\u0634\u0626 \u0623\u0648\u0644 \u0645\u0643\u0648\u0646 \u0644\u0644\u0628\u062F\u0621. \u064A\u0645\u0643\u0646 \u0625\u0639\u0627\u062F\u0629 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0639\u0628\u0631 \u0645\u0646\u062A\u062C\u0627\u062A \u0645\u062A\u0639\u062F\u062F\u0629."),i(),n(8,"button",106),x("click",function(){y(e);let s=c();return _(s.resetModifierForm())}),l(9,"i",15),r(10," \u0625\u0636\u0627\u0641\u0629 \u0645\u0643\u0648\u0646 \u062C\u062F\u064A\u062F "),i()()()}}var Ft=class a{constructor(t,e){this.fb=t;this.modifierService=e;this.modifierForm=this.fb.group({name:["",S.required],code:[""],description:[""],priceAdjustment:[0],costAdjustment:[0],isRequired:[!1],isMultiple:[!1],maxSelections:[1,[S.required,S.min(1)]],isActive:[!0],displayOrder:[0]}),this.optionForm=this.fb.group({name:["",S.required],code:[""],description:[""],priceAdjustment:[0],costAdjustment:[0],isActive:[!0],isDefault:[!1],displayOrder:[0]})}modifiers=[];modifierForm;optionForm;isEditing=!1;isEditingOption=!1;editingModifierId;editingOptionId;selectedModifier;loading=!1;showAddModifierForm=!1;showAddOptionForm=!1;ngOnInit(){this.loadModifiers()}loadModifiers(){this.loading=!0,this.modifierService.getAllModifiers().subscribe({next:t=>{this.modifiers=t,this.loading=!1},error:t=>{this.loading=!1}})}loadModifierOptions(t){this.modifierService.getModifierOptions(t).subscribe({next:e=>{let o=this.modifiers.find(s=>s.id===t);o&&(o.options=e)},error:e=>{}})}onModifierSubmit(){if(this.modifierForm.valid){let t=this.modifierForm.value,e={name:t.name,code:t.code,description:t.description,priceAdjustment:t.priceAdjustment,costAdjustment:t.costAdjustment,isRequired:t.isRequired,isMultiple:t.isMultiple,maxSelections:t.maxSelections,isActive:t.isActive,displayOrder:t.displayOrder};this.isEditing&&this.editingModifierId?this.updateModifier(e):this.createModifier(e)}}createModifier(t){this.modifierService.createModifier(t).subscribe({next:e=>{this.modifiers.push(e),this.showAddModifierForm=!1,this.resetModifierForm()},error:e=>{}})}updateModifier(t){this.editingModifierId&&this.modifierService.updateModifier(this.editingModifierId,se({id:this.editingModifierId},t)).subscribe({next:e=>{let o=this.modifiers.findIndex(s=>s.id===this.editingModifierId);o!==-1&&(this.modifiers[o]=e),this.showAddModifierForm=!1,this.resetModifierForm()},error:e=>{}})}onOptionSubmit(){if(this.optionForm.valid&&this.selectedModifier){let t=this.optionForm.value,e={modifierId:this.selectedModifier.id,name:t.name,code:t.code,description:t.description,priceAdjustment:t.priceAdjustment,costAdjustment:t.costAdjustment,isActive:t.isActive,isDefault:t.isDefault,displayOrder:t.displayOrder};this.isEditingOption&&this.editingOptionId?this.updateModifierOption(e):this.createModifierOption(e)}}createModifierOption(t){this.modifierService.createModifierOption(this.selectedModifier.id,t).subscribe({next:e=>{this.selectedModifier.options||(this.selectedModifier.options=[]),this.selectedModifier.options.push(e),this.showAddOptionForm=!1,this.resetOptionForm()},error:e=>{}})}updateModifierOption(t){this.editingOptionId&&this.modifierService.updateModifierOption(this.editingOptionId,se({id:this.editingOptionId},t)).subscribe({next:e=>{if(this.selectedModifier?.options){let o=this.selectedModifier.options.findIndex(s=>s.id===this.editingOptionId);o!==-1&&(this.selectedModifier.options[o]=e)}this.showAddOptionForm=!1,this.resetOptionForm()},error:e=>{}})}selectModifier(t){this.selectedModifier=t,this.loadModifierOptions(t.id)}editModifier(t){this.isEditing=!0,this.showAddModifierForm=!1,this.editingModifierId=t.id,this.modifierForm.patchValue({name:t.name,code:t.code,description:t.description,priceAdjustment:t.priceAdjustment,costAdjustment:t.costAdjustment,isRequired:t.isRequired,isMultiple:t.isMultiple,maxSelections:t.maxSelections,isActive:t.isActive,displayOrder:t.displayOrder})}editModifierOption(t){this.isEditingOption=!0,this.showAddOptionForm=!1,this.editingOptionId=t.id,this.optionForm.patchValue({name:t.name,code:t.code,description:t.description,priceAdjustment:t.priceAdjustment,costAdjustment:t.costAdjustment,isActive:t.isActive,isDefault:t.isDefault,displayOrder:t.displayOrder})}deleteModifier(t){t.id&&confirm("Are you sure you want to delete this modifier?")&&this.modifierService.deleteModifier(t.id).subscribe({next:()=>{this.modifiers=this.modifiers.filter(e=>e.id!==t.id)},error:e=>{}})}deleteModifierOption(t){t.id&&confirm("Are you sure you want to delete this option?")&&this.modifierService.deleteModifierOption(t.id).subscribe({next:()=>{this.selectedModifier?.options&&(this.selectedModifier.options=this.selectedModifier.options.filter(e=>e.id!==t.id))},error:e=>{}})}resetModifierForm(){this.modifierForm.reset({name:"",code:"",description:"",priceAdjustment:0,costAdjustment:0,isRequired:!1,isMultiple:!1,maxSelections:1,isActive:!0,displayOrder:0}),this.isEditing=!1,this.editingModifierId=void 0,this.showAddModifierForm=!0}resetOptionForm(){this.optionForm.reset({name:"",code:"",description:"",priceAdjustment:0,costAdjustment:0,isActive:!0,isDefault:!1,displayOrder:0}),this.isEditingOption=!1,this.editingOptionId=void 0,this.showAddOptionForm=!0}cancelEdit(){this.showAddModifierForm=!1,this.showAddOptionForm=!1,this.resetModifierForm(),this.resetOptionForm()}static \u0275fac=function(e){return new(e||a)(v(L),v(at))};static \u0275cmp=A({type:a,selectors:[["app-modifier-management"]],decls:19,vars:6,consts:[[1,"min-h-screen","bg-gradient-to-br","from-indigo-50","to-purple-100","p-4","md:p-6"],[1,"max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-xl","mb-8","overflow-hidden"],[1,"bg-gradient-to-r","from-indigo-600","to-purple-700","px-6","py-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"w-12","h-12","bg-white","bg-opacity-20","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-gear","text-white","text-2xl"],[1,"text-2xl","font-bold","text-white"],[1,"text-indigo-100","mt-1"],["class","px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors",3,"click",4,"ngIf"],["class","bg-white rounded-2xl shadow-xl overflow-hidden mb-8",4,"ngIf"],["class","bg-white rounded-2xl shadow-xl p-6 text-center",4,"ngIf"],["class","bg-white rounded-2xl shadow-xl p-12 text-center",4,"ngIf"],[1,"px-4","py-2","bg-white","bg-opacity-20","text-white","rounded-lg","hover:bg-opacity-30","transition-colors",3,"click"],[1,"bi","bi-plus-lg","mr-2"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden","mb-8"],[1,"bg-gradient-to-r","from-indigo-500","to-purple-600","px-6","py-4"],[1,"text-xl","font-bold","text-white","flex","items-center"],[1,"bi","bi-plus-circle","mr-3"],[1,"p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"bi","bi-tag","mr-2","text-indigo-600"],["type","text","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u0627\u0644\u062D\u062C\u0645\u060C \u0627\u0644\u0644\u0648\u0646\u060C \u0627\u0644\u0625\u0636\u0627\u0641\u0627\u062A",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors"],["class","text-red-500 text-sm flex items-center",4,"ngIf"],[1,"bi","bi-hash","mr-2","text-indigo-600"],["type","text","formControlName","code","placeholder","\u0645\u062B\u0627\u0644: SIZE, COLOR, TOPPINGS",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors"],[1,"bi","bi-file-text","mr-2","text-indigo-600"],["formControlName","description","rows","3","placeholder","\u0648\u0635\u0641 \u0627\u062E\u062A\u064A\u0627\u0631\u064A \u0644\u0644\u0645\u0643\u0648\u0646",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors","resize-none"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bi","bi-currency-dollar","mr-2","text-green-600"],[1,"relative"],["type","number","formControlName","priceAdjustment","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"absolute","left-3","top-3","text-gray-500"],[1,"bi","bi-cart-dash","mr-2","text-green-600"],["type","number","formControlName","costAdjustment","step","0.01","placeholder","0.00",1,"w-full","px-4","py-3","pl-10","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-green-500","transition-colors"],[1,"bi","bi-hash","mr-2","text-purple-600"],["type","number","formControlName","maxSelections","min","1","placeholder","1",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"bi","bi-sort-numeric-down","mr-2","text-purple-600"],["type","number","formControlName","displayOrder","placeholder","0",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bi","bi-exclamation-triangle","mr-2","text-orange-600"],[1,"flex","items-center","space-x-3","p-3","bg-gray-50","rounded-xl"],["type","checkbox","formControlName","isRequired",1,"h-5","w-5","text-orange-600","focus:ring-orange-500","border-gray-300","rounded"],[1,"text-sm","text-gray-700"],[1,"bi","bi-list-check","mr-2","text-blue-600"],["type","checkbox","formControlName","isMultiple",1,"h-5","w-5","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],[1,"bi","bi-toggle-on","mr-2","text-green-600"],["type","checkbox","formControlName","isActive",1,"h-5","w-5","text-green-600","focus:ring-green-500","border-gray-300","rounded"],[1,"flex","flex-col","sm:flex-row","justify-end","gap-4","pt-6","border-t","border-gray-200"],["type","button",1,"w-full","sm:w-auto","px-6","py-3","bg-gray-500","text-white","rounded-xl","hover:bg-gray-600","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"],[1,"bi","bi-x-circle","mr-2"],["type","submit",1,"w-full","sm:w-auto","px-6","py-3","bg-gradient-to-r","from-indigo-600","to-purple-600","text-white","rounded-xl","hover:from-indigo-700","hover:to-purple-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","font-semibold","shadow-lg",3,"disabled"],[1,"bi","bi-check-circle","mr-2"],[1,"text-red-500","text-sm","flex","items-center"],[1,"bi","bi-exclamation-circle","mr-1"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600","px-6","py-4"],[1,"bi","bi-list-ul","mr-3"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-blue-500","to-indigo-600"],[1,"px-6","py-4","text-right","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition-colors","cursor-pointer",3,"click"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"flex","space-x-2",3,"click"],["title","\u062A\u0639\u062F\u064A\u0644",1,"px-3","py-1","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil-fill"],["title","\u062D\u0630\u0641",1,"px-3","py-1","bg-red-600","text-white","rounded-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-trash-fill"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600","px-6","py-4"],["class","bg-gray-50 rounded-xl p-6 mb-6",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"bg-gray-50","rounded-xl","p-6","mb-6"],[1,"bi","bi-tag","mr-2","text-purple-600"],["type","text","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u0635\u063A\u064A\u0631\u060C \u0623\u062D\u0645\u0631\u060C \u062C\u0628\u0646 \u0625\u0636\u0627\u0641\u064A",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],["type","text","formControlName","code","placeholder","\u0645\u062B\u0627\u0644: SMALL, RED, CHEESE",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors"],[1,"bi","bi-file-text","mr-2","text-purple-600"],["formControlName","description","rows","2","placeholder","\u0648\u0635\u0641 \u0627\u062E\u062A\u064A\u0627\u0631\u064A \u0644\u0644\u062E\u064A\u0627\u0631",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-colors","resize-none"],[1,"bi","bi-sort-numeric-down","mr-2","text-indigo-600"],["type","number","formControlName","displayOrder","placeholder","0",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors"],[1,"bi","bi-star","mr-2","text-indigo-600"],["type","checkbox","formControlName","isDefault",1,"h-5","w-5","text-indigo-600","focus:ring-indigo-500","border-gray-300","rounded"],["type","submit",1,"w-full","sm:w-auto","px-6","py-3","bg-gradient-to-r","from-purple-600","to-pink-600","text-white","rounded-xl","hover:from-purple-700","hover:to-pink-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200","font-semibold","shadow-lg",3,"disabled"],[1,"bg-gradient-to-r","from-purple-500","to-pink-600"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition-colors"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",4,"ngIf"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-indigo-100","text-indigo-800"],[1,"bg-white","rounded-2xl","shadow-xl","p-6","text-center"],[1,"inline-flex","items-center","px-4","py-2","bg-indigo-50","rounded-lg"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-indigo-600","mr-3"],[1,"text-indigo-600","font-medium"],[1,"bg-white","rounded-2xl","shadow-xl","p-12","text-center"],[1,"flex","flex-col","items-center"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],[1,"bi","bi-gear","text-gray-400","text-2xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"px-6","py-3","bg-indigo-600","text-white","rounded-xl","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","transition-all","duration-200","font-semibold",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),l(7,"i",7),i(),n(8,"div")(9,"h1",8),r(10," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A "),i(),n(11,"p",9),r(12,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0643\u0648\u0646\u0627\u062A \u0648\u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A \u0644\u0644\u0645\u0646\u062A\u062C\u0627\u062A"),i()()(),f(13,ps,3,0,"button",10),i()()(),f(14,fs,83,5,"div",11)(15,xs,26,1,"div",11)(16,Es,10,4,"div",11)(17,As,5,0,"div",12)(18,ws,11,0,"div",13),i()()),e&2&&(u(13),d("ngIf",!o.isEditing),u(),d("ngIf",o.isEditing||o.modifiers.length===0||o.showAddModifierForm),u(),d("ngIf",o.modifiers.length>0),u(),d("ngIf",o.selectedModifier),u(),d("ngIf",o.loading),u(),d("ngIf",!o.loading&&o.modifiers.length===0&&!o.isEditing))},dependencies:[Pe,F,w,De,W,V,xe,be,D,B,Ce,U,j,Se],styles:[".modifier-management-container[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;border-radius:8px;margin:1rem 0}.modifier-management-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:2px solid #e9ecef}.modifier-management-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#495057;font-weight:600}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:1rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:.75rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin-bottom:.25rem;display:block;font-size:.9rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:4px;padding:.5rem .75rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;font-size:.9rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:.5rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin-right:.5rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:.9rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;padding-top:.75rem;border-top:1px solid #e9ecef}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:4px;font-weight:500;transition:all .15s ease-in-out;font-size:.9rem}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover, .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838;border-color:#1e7e34}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%], .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .modifier-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover, .modifier-management-container[_ngcontent-%COMP%]   .option-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.modifier-management-container[_ngcontent-%COMP%]   .modifiers-list[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:1rem}.modifier-management-container[_ngcontent-%COMP%]   .modifiers-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding:.75rem 1rem;margin:0;background:#f8f9fa;border-bottom:1px solid #e9ecef;color:#495057;font-weight:600;font-size:1rem}.modifier-management-container[_ngcontent-%COMP%]   .modifiers-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin:0}.modifier-management-container[_ngcontent-%COMP%]   .modifiers-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600;color:#495057;padding:.75rem;font-size:.9rem}.modifier-management-container[_ngcontent-%COMP%]   .modifiers-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .15s ease-in-out}.modifier-management-container[_ngcontent-%COMP%]   .modifiers-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.modifier-management-container[_ngcontent-%COMP%]   .modifiers-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:middle;font-size:.9rem}.modifier-management-container[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75em;font-weight:500}.modifier-management-container[_ngcontent-%COMP%]   .badge.badge-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .badge.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .badge.badge-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .badge.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:2rem}.modifier-management-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem;color:#007bff}.modifier-management-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6c757d}.modifier-management-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:.75rem;color:#495057;font-size:1rem}.modifier-management-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.9em}.modifier-management-container[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#004085}.modifier-management-container[_ngcontent-%COMP%]   .btn.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875em;border-radius:3px}.modifier-management-container[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545;color:#fff}.modifier-management-container[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333;border-color:#bd2130}"]})};var ki=class a{constructor(t){this.http=t}apiUrl=`${Y.baseUrl}/ActivityLog`;getUserActivityLogs(t={}){let e=new Ut;return t.userId&&(e=e.set("userId",t.userId.toString())),t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate)),t.action&&(e=e.set("action",t.action)),t.module&&(e=e.set("module",t.module)),t.page&&(e=e.set("page",t.page.toString())),t.pageSize&&(e=e.set("pageSize",t.pageSize.toString())),this.http.get(`${this.apiUrl}/GetUserActivityLogs`,{params:e}).pipe(Me(o=>({data:o.data.map(s=>Oe(se({},s),{username:s.userName||"Unknown User"})),totalCount:o.totalCount})))}getAllActivityLogs(t={}){let e=new Ut;return t.startDate&&(e=e.set("startDate",t.startDate)),t.endDate&&(e=e.set("endDate",t.endDate)),t.action&&(e=e.set("action",t.action)),t.module&&(e=e.set("module",t.module)),t.page&&(e=e.set("page",t.page.toString())),t.pageSize&&(e=e.set("pageSize",t.pageSize.toString())),this.http.get(`${this.apiUrl}/GetAllActivityLogs`,{params:e}).pipe(Me(o=>({data:o.data.map(s=>Oe(se({},s),{username:s.userName||"Unknown User"})),totalCount:o.totalCount})))}clearOldLogs(t){return this.http.delete(`${this.apiUrl}/ClearOldActivityLogs`,{params:new Ut().set("daysToKeep",t)})}deleteActivityLog(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ps=(a,t,e)=>({start:a,end:t,total:e}),Fs=(a,t,e,o,s)=>({"bg-green-100 text-green-800":a,"bg-yellow-100 text-yellow-800":t,"bg-red-100 text-red-800":e,"bg-blue-100 text-blue-800":o,"bg-gray-100 text-gray-800":s});function Os(a,t){if(a&1){let e=C();n(0,"button",9),x("click",function(){y(e);let s=c();return _(s.clearOldLogs())}),l(1,"i",74),r(2),g(3,"translate"),i()}a&2&&(u(2),b(" ",h(3,1,"COMMON.CLEAR_OLD_LOGS")," "))}function Ts(a,t){if(a&1&&(n(0,"option",75),r(1),i()),a&2){let e=t.$implicit;d("value",e),u(),p(e)}}function Ms(a,t){if(a&1&&(n(0,"option",75),r(1),i()),a&2){let e=t.$implicit;d("value",e),u(),p(e)}}function ks(a,t){a&1&&(n(0,"tr")(1,"td",76)(2,"div",77),l(3,"div",78),n(4,"p",79),r(5),g(6,"translate"),i()()()()),a&2&&(u(5),p(h(6,1,"COMMON.LOADING_ACTIVITY_LOGS")))}function Rs(a,t){if(a&1){let e=C();n(0,"tr",80),x("click",function(){let s=y(e).$implicit,m=c();return _(m.showLogDetails(s))}),n(1,"td",81)(2,"div",82)(3,"div",83),r(4),i(),n(5,"div")(6,"div",84),r(7),g(8,"translate"),i(),n(9,"div",85),r(10),g(11,"translate"),i()()()(),n(12,"td",81)(13,"span",86),r(14),g(15,"translate"),i()(),n(16,"td",81)(17,"span",87),r(18),g(19,"translate"),i()(),n(20,"td",81)(21,"div",88),r(22),g(23,"date"),i(),n(24,"div",85),r(25),g(26,"date"),i()(),n(27,"td",81)(28,"code",89),r(29),i()(),n(30,"td",90)(31,"button",91),x("click",function(s){let m=y(e).$implicit;return c().showLogDetails(m),_(s.stopPropagation())}),l(32,"i",92),r(33),g(34,"translate"),i()()()}if(a&2){let e=t.$implicit,o=c();u(3),Li("background","linear-gradient(135deg, "+o.getUserAvatarColor(e.userId)+" 0%, "+o.getUserAvatarColor(e.userId)+"dd 100%)"),u(),b(" ",(e.username||"U").charAt(0).toUpperCase()," "),u(3),p(e.username||h(8,13,"COMMON.UNKNOWN_USER")),u(3),q("",h(11,15,"COMMON.USER_ID"),": ",e.userId||"N/A"),u(3),d("ngClass",an(29,Fs,e.action==="CREATE"||e.action==="Login",e.action==="UPDATE",e.action==="DELETE"||e.action==="Logout",e.action==="VIEW",!e.action||e.action==="UNKNOWN")),u(),b(" ",e.action||h(15,17,"COMMON.UNKNOWN")," "),u(4),b(" ",e.module||h(19,19,"COMMON.UNKNOWN")," "),u(4),b(" ",Q(23,21,e.timestamp||o.getCurrentDate(),"MMM dd, yyyy")," "),u(3),b(" ",Q(26,24,e.timestamp||o.getCurrentDate(),"h:mm:ss a")," "),u(4),p(e.ipAddress||"N/A"),u(4),b(" ",h(34,27,"COMMON.VIEW")," ")}}function Ds(a,t){a&1&&(n(0,"tr")(1,"td",76)(2,"div",93)(3,"div",94),l(4,"i",95),i(),n(5,"h4",96),r(6),g(7,"translate"),i(),n(8,"p",97),r(9),g(10,"translate"),i()()()()),a&2&&(u(6),p(h(7,2,"COMMON.NO_LOGS_FOUND")),u(3),p(h(10,4,"COMMON.TRY_ADJUSTING_FILTERS")))}function Ns(a,t){if(a&1){let e=C();n(0,"button",105),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.onPageChange(s))}),r(1),i()}if(a&2){let e=t.$implicit,o=c(2);N("bg-blue-600",e===o.currentPage)("text-white",e===o.currentPage)("bg-white",e!==o.currentPage)("border",e!==o.currentPage)("border-gray-300",e!==o.currentPage)("hover:bg-gray-50",e!==o.currentPage),u(),b(" ",e," ")}}function Vs(a,t){if(a&1){let e=C();n(0,"div",98)(1,"div",99),r(2),g(3,"translate"),g(4,"translate"),i(),n(5,"div",100)(6,"button",101),x("click",function(){y(e);let s=c();return _(s.onPageChange(s.currentPage-1))}),l(7,"i",102),i(),f(8,Ns,2,13,"button",103),n(9,"button",101),x("click",function(){y(e);let s=c();return _(s.onPageChange(s.currentPage+1))}),l(10,"i",104),i()()()}if(a&2){let e=c();u(2),nn(" ",h(3,7,"COMMON.PAGE")," ",e.currentPage," ",h(4,9,"COMMON.OF")," ",e.getTotalPages()," "),u(4),d("disabled",e.currentPage===1),u(2),d("ngForOf",e.getPageNumbers()),u(),d("disabled",e.currentPage===e.getTotalPages())}}function Ls(a,t){if(a&1&&(n(0,"div",106)(1,"div",107)(2,"div",108)(3,"div",109)(4,"div",110),l(5,"i",111),i(),n(6,"h6",112),r(7),g(8,"translate"),i()(),n(9,"div",113)(10,"div",114),r(11),i(),n(12,"div")(13,"h5",115),r(14),g(15,"translate"),i(),n(16,"p",79),r(17),g(18,"translate"),i()()()(),n(19,"div",108)(20,"div",109)(21,"div",116),l(22,"i",117),i(),n(23,"h6",112),r(24),g(25,"translate"),i()(),n(26,"div",118)(27,"div")(28,"label",119),r(29),g(30,"translate"),i(),n(31,"span",120),r(32),g(33,"translate"),i()(),n(34,"div")(35,"label",119),r(36),g(37,"translate"),i(),n(38,"span",121),r(39),g(40,"translate"),i()(),n(41,"div",122)(42,"label",119),r(43),g(44,"translate"),i(),n(45,"span",123),r(46),g(47,"date"),i()()()(),n(48,"div",108)(49,"div",109)(50,"div",124),l(51,"i",125),i(),n(52,"h6",112),r(53),g(54,"translate"),i()(),n(55,"div",126)(56,"div")(57,"label",119),r(58),g(59,"translate"),i(),n(60,"code",127),r(61),i()(),n(62,"div")(63,"label",119),r(64),g(65,"translate"),i(),n(66,"div",128),r(67),g(68,"translate"),i()()()()()()),a&2){let e=c();u(7),p(h(8,19,"COMMON.USER_INFO")),u(3),Li("background","linear-gradient(135deg, "+e.getUserAvatarColor(e.selectedLog.userId)+" 0%, "+e.getUserAvatarColor(e.selectedLog.userId)+"dd 100%)"),u(),b(" ",(e.selectedLog.username||"U").charAt(0).toUpperCase()," "),u(3),p(e.selectedLog.username||h(15,21,"COMMON.UNKNOWN_USER")),u(3),q("",h(18,23,"COMMON.USER_ID"),": ",e.selectedLog.userId||"N/A"),u(7),p(h(25,25,"COMMON.ACTIVITY_DETAILS")),u(5),p(h(30,27,"COMMON.ACTION")),u(3),b(" ",e.selectedLog.action||h(33,29,"COMMON.UNKNOWN")," "),u(4),p(h(37,31,"COMMON.MODULE")),u(3),b(" ",e.selectedLog.module||h(40,33,"COMMON.UNKNOWN")," "),u(4),p(h(44,35,"COMMON.TIMESTAMP")),u(3),p(Q(47,37,e.selectedLog.timestamp||e.getCurrentDate(),"full")),u(7),p(h(54,40,"COMMON.TECHNICAL_DETAILS")),u(5),p(h(59,42,"COMMON.IP_ADDRESS")),u(3),p(e.selectedLog.ipAddress||"N/A"),u(3),p(h(65,44,"COMMON.DETAILS")),u(3),b(" ",e.selectedLog.details||h(68,46,"COMMON.NO_ADDITIONAL_DETAILS")," ")}}var Ot=class a{constructor(t,e,o,s){this.activityLogService=t;this.notificationService=e;this.authService=o;this.languageService=s}stats=null;activityLogs=[];totalCount=0;currentPage=1;pageSize=20;loading=!1;selectedLog=null;isRTL=!1;filter={page:1,pageSize:20};availableActions=["Login","Logout","CREATE","UPDATE","DELETE","VIEW","CLEAR_LOGS"];availableModules=["Authentication","Users","Roles","Products","Categories","Orders","Inventory","WorkingHours","WorkingHoursException","ActivityLog"];permissionsEnum=mt;ngOnInit(){this.updateRTL(),this.loadActivityLogs()}updateRTL(){this.isRTL=this.languageService.currentLang==="ar"}ngDoCheck(){this.languageService.currentLang==="ar"!==this.isRTL&&this.updateRTL()}loadActivityLogs(){this.loading=!0,this.filter.page=this.currentPage,this.filter.pageSize=this.pageSize,this.activityLogService.getAllActivityLogs(this.filter).subscribe({next:t=>{this.activityLogs=t.data,this.totalCount=t.totalCount,this.loading=!1},error:t=>{this.notificationService.error("Failed to load activity logs"),this.loading=!1}})}hasPermission(t){return this.authService.hasPermission(t)}applyFilter(){this.currentPage=1,this.loadActivityLogs()}clearFilters(){this.filter={page:1,pageSize:this.pageSize},this.currentPage=1,this.loadActivityLogs()}showLogDetails(t){this.selectedLog=Oe(se({},t),{username:t.username||"Unknown User",action:t.action||"Unknown",module:t.module||"Unknown",ipAddress:t.ipAddress||"N/A",details:t.details||"No details available",timestamp:t.timestamp||new Date().toISOString()});let e=document.getElementById("logDetailsModal");if(e){let o=window.bootstrap;o&&new o.Modal(e).show()}}closeLogDetails(){this.selectedLog=null}clearOldLogs(){confirm("Are you sure you want to clear activity logs older than 90 days? This action cannot be undone.")&&this.notificationService.success("Clear old logs functionality will be implemented soon.")}onPageChange(t){this.currentPage=t,this.loadActivityLogs()}onFilterChange(){this.currentPage=1,this.loadActivityLogs()}deleteLog(t){confirm("Are you sure you want to delete this log entry?")&&this.notificationService.success("Delete log functionality will be implemented soon.")}formatDate(t){return new Date(t).toLocaleString()}getActionClass(t){return{Login:"badge-success",Logout:"badge-info",CREATE:"badge-primary",UPDATE:"badge-warning",DELETE:"badge-danger",VIEW:"badge-secondary",CLEAR_LOGS:"badge-dark"}[t]||"badge-secondary"}getModuleClass(t){return{Authentication:"text-primary",Users:"text-success",Roles:"text-info",Products:"text-warning",Categories:"text-danger",Orders:"text-purple",Inventory:"text-orange",WorkingHours:"text-teal",WorkingHoursException:"text-teal",ActivityLog:"text-muted"}[t]||"text-muted"}getPageNumbers(){let t=this.getTotalPages(),e=[],o=Math.max(1,this.currentPage-2),s=Math.min(t,this.currentPage+2);for(let m=o;m<=s;m++)e.push(m);return e}getTotalPages(){return Math.ceil(this.totalCount/this.pageSize)}getUniqueUsers(){return new Set(this.activityLogs.map(e=>e.userId)).size}Math=Math;getCurrentDate(){return new Date}trackByLogId(t,e){return e.id}getUserAvatarColor(t){let e=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c","#34495e","#e67e22","#95a5a6","#f1c40f"];return e[t%e.length]}static \u0275fac=function(e){return new(e||a)(v(ki),v(Ge),v(ce),v(G))};static \u0275cmp=A({type:a,selectors:[["app-activity-logs"]],decls:168,vars:109,consts:[[1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-blue-50","to-indigo-100","py-6","px-4","sm:px-6","lg:px-8",3,"dir"],[1,"max-w-7xl","mx-auto","mb-8"],[1,"bg-gradient-to-r","from-blue-600","via-indigo-600","to-purple-600","rounded-2xl","shadow-xl","p-6","sm:p-8","text-white"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","sm:text-4xl","font-bold","mb-2","flex","items-center","gap-3"],[1,"bi","bi-activity","text-4xl"],[1,"text-blue-100","text-lg"],[1,"flex","flex-wrap","gap-3"],["class","px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 hover:scale-105",3,"click",4,"ngIf"],[1,"px-4","py-2","bg-white/20","hover:bg-white/30","backdrop-blur-sm","rounded-xl","font-semibold","transition-all","duration-200","flex","items-center","gap-2","hover:scale-105",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","hover:shadow-xl","transition-all","duration-300","transform","hover:-translate-y-1","border-l-4","border-blue-500"],[1,"flex","items-center","justify-between"],[1,"text-gray-500","text-sm","font-medium","mb-1"],[1,"text-3xl","font-bold","text-gray-900"],[1,"w-14","h-14","bg-gradient-to-br","from-blue-500","to-blue-600","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-list-ul","text-white","text-2xl"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","hover:shadow-xl","transition-all","duration-300","transform","hover:-translate-y-1","border-l-4","border-green-500"],[1,"w-14","h-14","bg-gradient-to-br","from-green-500","to-green-600","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-check-circle","text-white","text-2xl"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","hover:shadow-xl","transition-all","duration-300","transform","hover:-translate-y-1","border-l-4","border-purple-500"],[1,"w-14","h-14","bg-gradient-to-br","from-purple-500","to-purple-600","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-people","text-white","text-2xl"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","hover:shadow-xl","transition-all","duration-300","transform","hover:-translate-y-1","border-l-4","border-orange-500"],[1,"w-14","h-14","bg-gradient-to-br","from-orange-500","to-orange-600","rounded-xl","flex","items-center","justify-center"],[1,"bi","bi-clock","text-white","text-2xl"],[1,"bg-white","rounded-2xl","shadow-lg","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200"],[1,"text-xl","font-bold","text-gray-800","flex","items-center","gap-2"],[1,"bi","bi-funnel","text-blue-600"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],["type","date",1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200",3,"ngModelChange","ngModel"],[1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","gap-3","justify-end"],[1,"px-6","py-2","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-blue-700","hover:to-indigo-700","transition-all","duration-200","flex","items-center","gap-2","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-search"],[1,"px-6","py-2","bg-gray-200","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-300","transition-all","duration-200","flex","items-center","gap-2",3,"click"],[1,"bi","bi-x-circle"],[1,"max-w-7xl","mx-auto"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200","flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"bi","bi-table","text-blue-600"],[1,"text-sm","text-gray-600","bg-white","px-4","py-2","rounded-lg","shadow-sm"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-50"],[1,"px-6","py-4","text-left","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],[1,"bi","bi-person","mr-2"],[1,"bi","bi-lightning","mr-2"],[1,"bi","bi-grid","mr-2"],[1,"bi","bi-clock","mr-2"],[1,"bi","bi-geo-alt","mr-2"],[1,"px-6","py-4","text-center","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],[1,"bi","bi-gear","mr-2"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngIf"],["class","hover:bg-blue-50 transition-colors duration-150 cursor-pointer",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["class","bg-gray-50 px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row justify-between items-center gap-4",4,"ngIf"],["id","logDetailsModal","tabindex","-1","aria-labelledby","logDetailsModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-centered"],[1,"modal-content","rounded-2xl","border-0","shadow-2xl"],[1,"modal-header","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-t-2xl","px-6","py-4","border-0"],["id","logDetailsModalLabel",1,"modal-title","text-xl","font-bold","flex","items-center","gap-2"],[1,"bi","bi-info-circle"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],["class","modal-body p-6 bg-gray-50",4,"ngIf"],[1,"modal-footer","bg-gray-50","rounded-b-2xl","px-6","py-4","border-0"],["type","button","data-bs-dismiss","modal",1,"px-6","py-2","bg-gray-200","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-300","transition-all","duration-200"],[1,"bi","bi-x-circle","mr-2"],[1,"bi","bi-trash"],[3,"value"],["colspan","6",1,"px-6","py-12"],[1,"flex","flex-col","items-center","justify-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600","mb-4"],[1,"text-gray-600"],[1,"hover:bg-blue-50","transition-colors","duration-150","cursor-pointer",3,"click"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","text-white","font-bold","text-sm","shadow-lg"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"px-3","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-3","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-indigo-100","text-indigo-800"],[1,"text-sm","text-gray-900","font-medium"],[1,"px-2","py-1","bg-gray-100","text-gray-800","rounded","text-sm","font-mono"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"px-3","py-1","bg-blue-100","text-blue-700","hover:bg-blue-200","rounded-lg","text-sm","font-semibold","transition-colors","duration-200","flex","items-center","gap-1","mx-auto",3,"click"],[1,"bi","bi-eye"],[1,"flex","flex-col","items-center","justify-center","text-center"],[1,"w-20","h-20","bg-gray-100","rounded-full","flex","items-center","justify-center","mb-4"],[1,"bi","bi-inbox","text-gray-400","text-4xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500"],[1,"bg-gray-50","px-6","py-4","border-t","border-gray-200","flex","flex-col","sm:flex-row","justify-between","items-center","gap-4"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","gap-2"],[1,"px-4","py-2","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200",3,"click","disabled"],[1,"bi","bi-chevron-left"],["class","px-4 py-2 rounded-lg font-semibold transition-all duration-200",3,"bg-blue-600","text-white","bg-white","border","border-gray-300","hover:bg-gray-50","click",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"px-4","py-2","rounded-lg","font-semibold","transition-all","duration-200",3,"click"],[1,"modal-body","p-6","bg-gray-50"],[1,"space-y-6"],[1,"bg-white","rounded-xl","p-6","shadow-sm"],[1,"flex","items-center","gap-3","mb-4","pb-3","border-b","border-gray-200"],[1,"w-10","h-10","bg-gradient-to-br","from-blue-500","to-indigo-600","rounded-lg","flex","items-center","justify-center"],[1,"bi","bi-person","text-white"],[1,"text-lg","font-bold","text-gray-900"],[1,"flex","items-center","gap-4"],[1,"w-16","h-16","rounded-full","flex","items-center","justify-center","text-white","font-bold","text-xl","shadow-lg"],[1,"text-xl","font-bold","text-gray-900"],[1,"w-10","h-10","bg-gradient-to-br","from-green-500","to-emerald-600","rounded-lg","flex","items-center","justify-center"],[1,"bi","bi-activity","text-white"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-semibold","text-gray-600","mb-2"],[1,"px-3","py-1","inline-flex","text-sm","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"px-3","py-1","inline-flex","text-sm","font-semibold","rounded-full","bg-indigo-100","text-indigo-800"],[1,"md:col-span-2"],[1,"text-gray-900","font-medium"],[1,"w-10","h-10","bg-gradient-to-br","from-purple-500","to-pink-600","rounded-lg","flex","items-center","justify-center"],[1,"bi","bi-gear","text-white"],[1,"space-y-4"],[1,"px-3","py-2","bg-gray-100","text-gray-800","rounded-lg","text-sm","font-mono","block"],[1,"px-4","py-3","bg-gray-50","rounded-lg","text-gray-900","min-h-[60px]"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),l(6,"i",5),r(7),g(8,"translate"),i(),n(9,"p",6),r(10),g(11,"translate"),i()(),n(12,"div",7),f(13,Os,4,3,"button",8),n(14,"button",9),x("click",function(){return o.loadActivityLogs()}),l(15,"i",10),r(16),g(17,"translate"),i()()()()(),n(18,"div",1)(19,"div",11)(20,"div",12)(21,"div",13)(22,"div")(23,"p",14),r(24),g(25,"translate"),i(),n(26,"h3",15),r(27),g(28,"number"),i()(),n(29,"div",16),l(30,"i",17),i()()(),n(31,"div",18)(32,"div",13)(33,"div")(34,"p",14),r(35),g(36,"translate"),i(),n(37,"h3",15),r(38),g(39,"number"),i()(),n(40,"div",19),l(41,"i",20),i()()(),n(42,"div",21)(43,"div",13)(44,"div")(45,"p",14),r(46),g(47,"translate"),i(),n(48,"h3",15),r(49),g(50,"number"),i()(),n(51,"div",22),l(52,"i",23),i()()(),n(53,"div",24)(54,"div",13)(55,"div")(56,"p",14),r(57),g(58,"translate"),i(),n(59,"h3",15),r(60),g(61,"number"),i()(),n(62,"div",25),l(63,"i",26),i()()()()(),n(64,"div",1)(65,"div",27)(66,"div",28)(67,"h3",29),l(68,"i",30),r(69),g(70,"translate"),i()(),n(71,"div",31)(72,"div",32)(73,"div",33)(74,"label",34),r(75),g(76,"translate"),i(),n(77,"input",35),ue("ngModelChange",function(m){return oe(o.filter.startDate,m)||(o.filter.startDate=m),m}),i()(),n(78,"div",33)(79,"label",34),r(80),g(81,"translate"),i(),n(82,"input",35),ue("ngModelChange",function(m){return oe(o.filter.endDate,m)||(o.filter.endDate=m),m}),i()(),n(83,"div",33)(84,"label",34),r(85),g(86,"translate"),i(),n(87,"select",36),ue("ngModelChange",function(m){return oe(o.filter.action,m)||(o.filter.action=m),m}),n(88,"option",37),r(89),g(90,"translate"),i(),f(91,Ts,2,2,"option",38),i()(),n(92,"div",33)(93,"label",34),r(94),g(95,"translate"),i(),n(96,"select",36),ue("ngModelChange",function(m){return oe(o.filter.module,m)||(o.filter.module=m),m}),n(97,"option",37),r(98),g(99,"translate"),i(),f(100,Ms,2,2,"option",38),i()()(),n(101,"div",39)(102,"button",40),x("click",function(){return o.applyFilter()}),l(103,"i",41),r(104),g(105,"translate"),i(),n(106,"button",42),x("click",function(){return o.clearFilters()}),l(107,"i",43),r(108),g(109,"translate"),i()()()()(),n(110,"div",44)(111,"div",27)(112,"div",45)(113,"h3",29),l(114,"i",46),r(115),g(116,"translate"),i(),n(117,"span",47),r(118),g(119,"translate"),i()(),n(120,"div",48)(121,"table",49)(122,"thead",50)(123,"tr")(124,"th",51),l(125,"i",52),r(126),g(127,"translate"),i(),n(128,"th",51),l(129,"i",53),r(130),g(131,"translate"),i(),n(132,"th",51),l(133,"i",54),r(134),g(135,"translate"),i(),n(136,"th",51),l(137,"i",55),r(138),g(139,"translate"),i(),n(140,"th",51),l(141,"i",56),r(142),g(143,"translate"),i(),n(144,"th",57),l(145,"i",58),r(146),g(147,"translate"),i()()(),n(148,"tbody",59),f(149,ks,7,3,"tr",60)(150,Rs,35,35,"tr",61)(151,Ds,11,6,"tr",60),i()()(),f(152,Vs,11,11,"div",62),i()()(),n(153,"div",63)(154,"div",64)(155,"div",65)(156,"div",66)(157,"h5",67),l(158,"i",68),r(159),g(160,"translate"),i(),l(161,"button",69),i(),f(162,Ls,69,48,"div",70),n(163,"div",71)(164,"button",72),l(165,"i",73),r(166),g(167,"translate"),i()()()()()),e&2&&(d("dir",o.isRTL?"rtl":"ltr"),u(7),b(" ",h(8,44,"BREADCRUMB.ACTIVITY_LOGS")," "),u(3),p(h(11,46,"COMMON.MONITOR_ACTIVITIES")),u(3),d("ngIf",o.hasPermission(o.permissionsEnum.VIEW_ADMIN)),u(3),b(" ",h(17,48,"COMMON.REFRESH")," "),u(8),p(h(25,50,"COMMON.TOTAL_LOGS")),u(3),p(h(28,52,o.totalCount)),u(8),p(h(36,54,"COMMON.CURRENT_PAGE")),u(3),p(h(39,56,o.activityLogs.length)),u(8),p(h(47,58,"COMMON.LOGGED_USERS")),u(3),p(h(50,60,o.getUniqueUsers())),u(8),p(h(58,62,"COMMON.PAGE_SIZE")),u(3),p(h(61,64,o.getTotalPages())),u(9),b(" ",h(70,66,"COMMON.FILTERS")," "),u(6),p(h(76,68,"COMMON.START_DATE")),u(2),re("ngModel",o.filter.startDate),u(3),p(h(81,70,"COMMON.END_DATE")),u(2),re("ngModel",o.filter.endDate),u(3),p(h(86,72,"COMMON.ACTION")),u(2),re("ngModel",o.filter.action),u(2),p(h(90,74,"COMMON.ALL_ACTIONS")),u(2),d("ngForOf",o.availableActions),u(3),p(h(95,76,"COMMON.MODULE")),u(2),re("ngModel",o.filter.module),u(2),p(h(99,78,"COMMON.ALL_MODULES")),u(2),d("ngForOf",o.availableModules),u(4),b(" ",h(105,80,"COMMON.APPLY_FILTERS")," "),u(4),b(" ",h(109,82,"COMMON.CLEAR_FILTERS")," "),u(7),b(" ",h(116,84,"BREADCRUMB.ACTIVITY_LOGS")," "),u(3),b(" ",Q(119,86,"COMMON.SHOWING_ENTRIES",on(105,Ps,(o.currentPage-1)*o.pageSize+1,o.Math.min(o.currentPage*o.pageSize,o.totalCount),o.totalCount))," "),u(8),b("",h(127,89,"COMMON.USER")," "),u(4),b("",h(131,91,"COMMON.ACTION")," "),u(4),b("",h(135,93,"COMMON.MODULE")," "),u(4),b("",h(139,95,"COMMON.TIMESTAMP")," "),u(4),b("",h(143,97,"COMMON.IP_ADDRESS")," "),u(4),b("",h(147,99,"COMMON.ACTIONS")," "),u(3),d("ngIf",o.loading),u(),d("ngForOf",o.activityLogs)("ngForTrackBy",o.trackByLogId),u(),d("ngIf",!o.loading&&o.activityLogs.length===0),u(),d("ngIf",!o.loading&&o.totalCount>o.pageSize),u(7),b(" ",h(160,101,"COMMON.ACTIVITY_LOG_DETAILS")," "),u(3),d("ngIf",o.selectedLog),u(4),b(" ",h(167,103,"COMMON.CLOSE")," "))},dependencies:[Pe,fe,F,w,Qe,X,Z,V,J,D,Re,Ke,ze,_e,ve],styles:[".activity-logs-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.activity-logs-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.activity-logs-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:10px}.activity-logs-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#5a6fd8,#6b4190)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease-in-out}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000000d}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}@media (max-width: 640px){table[_ngcontent-%COMP%]{font-size:.875rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.5rem!important}}"]})};var Ri=class a{constructor(t){this.http=t}apiUrl=`${Y.baseUrl}/WorkingHours`;getWorkingHours(){return this.http.get(`${this.apiUrl}/GetWorkingHours`)}updateWorkingHours(t){return this.http.post(`${this.apiUrl}/UpdateWorkingHours`,t)}getWorkingHoursStatus(){return this.http.get(`${this.apiUrl}/GetWorkingHoursStatus`)}addException(t){return this.http.post(`${this.apiUrl}/AddException`,t)}updateException(t,e){return this.http.put(`${this.apiUrl}/UpdateException/${t}`,e)}deleteException(t){return this.http.delete(`${this.apiUrl}/DeleteException/${t}`)}getDayName(t){let e;return typeof t=="string"?e={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}[t]??0:e=t,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]||"Unknown"}convertDayToNumber(t){return typeof t=="number"?t:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}[t]??0}formatTime(t){return t?new Date(`2000-01-01T${t}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):""}isCurrentTimeWithinWorkingHours(t){let e=new Date,o=e.getDay(),s=e.getTime(),m=e.toISOString().split("T")[0],E=t.exceptions.find(I=>I.exceptionDate===m);if(E){if(!E.isWorkingDay)return!1;if(E.startTime&&E.endTime){let I=new Date(`2000-01-01T${E.startTime}`).getTime(),R=new Date(`2000-01-01T${E.endTime}`).getTime();return s>=I&&s<=R}}if(t.days&&t.days.length>0){let I=t.days.find(R=>R.dayOfWeek===o);if(I&&I.isEnabled){if(!I.startTime||!I.endTime)return!0;let R=new Date(`2000-01-01T${I.startTime}`).getTime(),P=new Date(`2000-01-01T${I.endTime}`).getTime();return s>=R&&s<=P}return!t.allowWeekends&&(o===5||o===6),!1}if(t.startDay&&t.endDay){let I=typeof t.startDay=="string"?this.convertDayToNumber(t.startDay):t.startDay,R=typeof t.endDay=="string"?this.convertDayToNumber(t.endDay):t.endDay;if(!(o>=I&&o<=R)&&!t.allowWeekends)return!1}if(t.startTime&&t.endTime){let I=new Date(`2000-01-01T${t.startTime}`).getTime(),R=new Date(`2000-01-01T${t.endTime}`).getTime();return s>=I&&s<=R}return!0}static \u0275fac=function(e){return new(e||a)(te(ae))};static \u0275prov=ie({token:a,factory:a.\u0275fac,providedIn:"root"})};function Us(a,t){if(a&1&&(n(0,"div",16),l(1,"i",22),n(2,"span",18),r(3),g(4,"translate"),n(5,"span",19),r(6),g(7,"translate"),i()()()),a&2){let e=c(2);u(3),b(" ",h(4,3,"COMMON.ENABLED_WORKING_DAYS"),": "),u(3),q(" ",e.getEnabledDaysCount()," ",h(7,5,"COMMON.DAYS")," ")}}function js(a,t){if(a&1&&(n(0,"div",23)(1,"div",24),l(2,"i",25),n(3,"div")(4,"p",26),r(5),g(6,"translate"),i(),n(7,"p",27),r(8),i()()()()),a&2){let e=c(2);u(5),b("",h(6,2,"COMMON.CONFIGURED_DAYS"),":"),u(3),p(e.getEnabledDaysNames())}}function Gs(a,t){if(a&1&&(n(0,"div",3)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),l(5,"i",17),n(6,"span",18),r(7),g(8,"translate"),n(9,"span",19),r(10),g(11,"date"),i()()(),f(12,Us,8,7,"div",20),i(),f(13,js,9,4,"div",21),i()()()),a&2){let e=c();u(7),b("",h(8,4,"COMMON.CURRENT_TIME"),": "),u(3),p(Q(11,6,e.currentTime,"medium")),u(2),d("ngIf",e.workingHours&&e.workingHours.days),u(),d("ngIf",e.workingHours&&e.workingHours.days&&e.getEnabledDaysNames())}}function Ws(a,t){if(a&1&&(Le(0),r(1),g(2,"translate"),Be()),a&2){let e=t.ngIf;u(),b(" ",h(2,1,e)," ")}}function $s(a,t){if(a&1&&(n(0,"div",63)(1,"div",64)(2,"div",65)(3,"label",49),l(4,"input",66)(5,"div",51),i(),n(6,"span",67),f(7,Ws,3,3,"ng-container",68),i()(),n(8,"div",69)(9,"div",52)(10,"label",70),r(11),g(12,"translate"),i(),l(13,"input",71),i(),n(14,"span",72),r(15),g(16,"translate"),i(),n(17,"div",52)(18,"label",70),r(19),g(20,"translate"),i(),l(21,"input",73),i()()()()),a&2){let e=t.$implicit,o=c(2);d("formGroup",e),u(7),d("ngIf",o.getDayNameKey(e.value.dayOfWeek)),u(4),p(h(12,35,"COMMON.START_TIME")),u(2),N("border-gray-200",e.value.isEnabled)("border-gray-100",!e.value.isEnabled)("bg-gray-100",!e.value.isEnabled)("bg-white",e.value.isEnabled)("focus:border-blue-500",e.value.isEnabled)("focus:ring-2",e.value.isEnabled)("focus:ring-blue-200",e.value.isEnabled),d("disabled",!e.value.isEnabled),u(2),p(h(16,37,"COMMON.TO")),u(4),p(h(20,39,"COMMON.END_TIME")),u(2),N("border-gray-200",e.value.isEnabled)("border-gray-100",!e.value.isEnabled)("bg-gray-100",!e.value.isEnabled)("bg-white",e.value.isEnabled)("focus:border-blue-500",e.value.isEnabled)("focus:ring-2",e.value.isEnabled)("focus:ring-blue-200",e.value.isEnabled),d("disabled",!e.value.isEnabled)}}function Hs(a,t){a&1&&l(0,"i",74)}function qs(a,t){a&1&&l(0,"div",75)}function zs(a,t){if(a&1){let e=C();n(0,"div",3)(1,"div",28)(2,"div",29)(3,"h3",30),l(4,"i",31),r(5),g(6,"translate"),i()(),n(7,"div",32)(8,"form",33),x("ngSubmit",function(){y(e);let s=c();return _(s.saveWorkingHours())}),n(9,"div",34)(10,"h4",35),l(11,"i",36),r(12),g(13,"translate"),i(),n(14,"div",37)(15,"div")(16,"label",38),l(17,"i",39),r(18),g(19,"translate"),i(),l(20,"input",40),g(21,"translate"),i(),n(22,"div")(23,"label",38),l(24,"i",41),r(25),g(26,"translate"),i(),l(27,"input",42),g(28,"translate"),i()()(),n(29,"div",34)(30,"h4",35),l(31,"i",43),r(32),g(33,"translate"),i(),n(34,"div",44),f(35,$s,22,41,"div",45),i()(),n(36,"div",34)(37,"h4",35),l(38,"i",46),r(39),g(40,"translate"),i(),n(41,"div",47)(42,"div",48)(43,"label",49),l(44,"input",50)(45,"div",51),i(),n(46,"div",52)(47,"div",53),l(48,"i",54),r(49),g(50,"translate"),i()()(),n(51,"div",48)(52,"label",49),l(53,"input",55)(54,"div",51),i(),n(55,"div",52)(56,"div",53),l(57,"i",56),r(58),g(59,"translate"),i()()(),n(60,"div",48)(61,"label",49),l(62,"input",57)(63,"div",51),i(),n(64,"div",52)(65,"div",53),l(66,"i",58),r(67),g(68,"translate"),i()()()()(),n(69,"div",59)(70,"button",60),f(71,Hs,1,0,"i",61)(72,qs,1,0,"div",62),r(73),g(74,"translate"),g(75,"translate"),i()()()()()()}if(a&2){let e=c();u(5),b(" ",h(6,17,"COMMON.WORKING_HOURS_CONFIGURATION")," "),u(3),d("formGroup",e.workingHoursForm),u(4),b(" ",h(13,19,"COMMON.BASIC_INFORMATION")," "),u(6),b(" ",h(19,21,"COMMON.CONFIGURATION_NAME")," "),u(2),d("placeholder",h(21,23,"COMMON.ENTER_NAME")),u(5),b(" ",h(26,25,"COMMON.DESCRIPTION")," "),u(2),d("placeholder",h(28,27,"COMMON.ENTER_DESCRIPTION")),u(5),b(" ",h(33,29,"COMMON.WORKING_SCHEDULE")," "),u(3),d("ngForOf",e.getDaysFormArray().controls),u(4),b(" ",h(40,31,"COMMON.OPTIONS")," "),u(10),b(" ",h(50,33,"COMMON.ACTIVE_CONFIGURATION")," "),u(9),b(" ",h(59,35,"COMMON.ALLOW_WEEKENDS")," "),u(9),b(" ",h(68,37,"COMMON.ALLOW_HOLIDAYS")," "),u(3),d("disabled",e.workingHoursForm.invalid||e.saving),u(),d("ngIf",!e.saving),u(),d("ngIf",e.saving),u(),b(" ",e.saving?h(74,39,"COMMON.SAVING"):h(75,41,"COMMON.SAVE_CONFIGURATION")," ")}}function Ys(a,t){if(a&1){let e=C();n(0,"div",86)(1,"div",87)(2,"h4",88),l(3,"i",89),r(4),i()(),n(5,"form",33),x("ngSubmit",function(){y(e);let s=c(2);return _(s.editingException?s.updateException():s.addException())}),n(6,"div",90)(7,"div")(8,"label",91),r(9,"Exception Date"),i(),l(10,"input",92),i(),n(11,"div")(12,"label",91),r(13,"Start Time (Optional)"),i(),l(14,"input",93),i(),n(15,"div")(16,"label",91),r(17,"End Time (Optional)"),i(),l(18,"input",94),i(),n(19,"div")(20,"label",91),r(21,"Reason"),i(),l(22,"input",95),i(),n(23,"div",96)(24,"div",97)(25,"label",49),l(26,"input",98)(27,"div",51),i(),n(28,"div",99),l(29,"i",100),r(30," Is Working Day (uncheck for holidays/closures) "),i()()()(),n(31,"div",101)(32,"button",102),l(33,"i",74),r(34),i(),n(35,"button",103),x("click",function(){y(e);let s=c(2);return _(s.resetExceptionForm())}),l(36,"i",104),r(37," Cancel "),i()()()()}if(a&2){let e=c(2);u(4),b(" ",e.editingException?"Edit Exception":"Add New Exception"," "),u(),d("formGroup",e.exceptionForm),u(27),d("disabled",e.exceptionForm.invalid),u(2),b(" ",e.editingException?"Update Exception":"Add Exception"," ")}}function Qs(a,t){if(a&1&&(n(0,"span",127),r(1),i()),a&2){let e=c().$implicit;u(),b(" ",e.startTime," ")}}function Ks(a,t){a&1&&(n(0,"span",128),r(1,"-"),i())}function Js(a,t){if(a&1&&(n(0,"span",127),r(1),i()),a&2){let e=c().$implicit;u(),b(" ",e.endTime," ")}}function Xs(a,t){a&1&&(n(0,"span",128),r(1,"-"),i())}function Zs(a,t){if(a&1){let e=C();n(0,"tr",112)(1,"td",113)(2,"div",114),l(3,"i",115),r(4),g(5,"date"),i()(),n(6,"td",113),f(7,Qs,2,1,"span",116)(8,Ks,2,0,"ng-template",null,1,je),i(),n(10,"td",113),f(11,Js,2,1,"span",116)(12,Xs,2,0,"ng-template",null,1,je),i(),n(14,"td",117)(15,"span",118),r(16),i()(),n(17,"td",113)(18,"span",119),l(19,"i",120),r(20),i()(),n(21,"td",121)(22,"div",122)(23,"button",123),x("click",function(){let s=y(e).$implicit,m=c(3);return _(m.editException(s))}),l(24,"i",124),i(),n(25,"button",125),x("click",function(){let s=y(e).$implicit,m=c(3);return _(m.deleteException(s))}),l(26,"i",126),i()()()()}if(a&2){let e=t.$implicit,o=We(9);u(4),b(" ",Q(5,9,e.exceptionDate,"MMM dd, yyyy")," "),u(3),d("ngIf",e.startTime)("ngIfElse",o),u(4),d("ngIf",e.endTime)("ngIfElse",o),u(5),p(e.reason),u(2),d("ngClass",e.isWorkingDay?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),d("ngClass",e.isWorkingDay?"bi bi-check-circle mr-1":"bi bi-x-circle mr-1"),u(),b(" ",e.isWorkingDay?"Working Day":"Closed Day"," ")}}function ed(a,t){if(a&1&&(n(0,"div")(1,"div",105)(2,"table",106)(3,"thead",107)(4,"tr")(5,"th",108),r(6,"Date"),i(),n(7,"th",108),r(8,"Start Time"),i(),n(9,"th",108),r(10,"End Time"),i(),n(11,"th",108),r(12,"Reason"),i(),n(13,"th",108),r(14,"Type"),i(),n(15,"th",109),r(16,"Actions"),i()()(),n(17,"tbody",110),f(18,Zs,27,12,"tr",111),i()()()()),a&2){let e=c(2);u(18),d("ngForOf",e.workingHours.exceptions)("ngForTrackBy",e.trackByExceptionId)}}function td(a,t){if(a&1){let e=C();n(0,"div",129)(1,"div",130),l(2,"i",131),i(),n(3,"h4",132),r(4,"No exceptions configured"),i(),n(5,"p",133),r(6,"Add exceptions for holidays, maintenance days, or special working hours."),i(),n(7,"button",134),x("click",function(){y(e);let s=c(2);return _(s.toggleExceptionForm())}),l(8,"i",79),r(9," Add First Exception "),i()()}}function id(a,t){if(a&1){let e=C();n(0,"div",3)(1,"div",28)(2,"div",76)(3,"h3",30),l(4,"i",77),r(5," Working Hours Exceptions "),i(),n(6,"button",78),x("click",function(){y(e);let s=c();return _(s.toggleExceptionForm())}),l(7,"i",79),r(8," Add Exception "),i()(),n(9,"div",32)(10,"div",80)(11,"div",24),l(12,"i",81),n(13,"div",52)(14,"h5",82),r(15),g(16,"translate"),i(),n(17,"p",83),r(18),g(19,"translate"),i()()()(),f(20,Ys,38,4,"div",84)(21,ed,19,2,"div",85)(22,td,10,0,"ng-template",null,0,je),i()()()}if(a&2){let e=We(23),o=c();u(15),p(h(16,5,"COMMON.EXCEPTIONS_INFO_TITLE")),u(3),p(h(19,7,"COMMON.EXCEPTIONS_INFO_DESCRIPTION")),u(2),d("ngIf",o.showExceptionForm),u(),d("ngIf",o.workingHours&&o.workingHours.exceptions&&o.workingHours.exceptions.length>0)("ngIfElse",e)}}function nd(a,t){a&1&&(n(0,"div",135)(1,"div",136)(2,"div",137),l(3,"div",138),n(4,"h4",132),r(5,"Loading working hours configuration..."),i(),n(6,"p",139),r(7,"Please wait while we fetch the latest settings."),i()()()())}var Tt=class a{constructor(t,e,o,s,m,E){this.fb=t;this.workingHoursService=e;this.notificationService=o;this.authService=s;this.languageService=m;this.translate=E}workingHoursForm;exceptionForm;workingHours=null;workingHoursStatus=null;loading=!1;saving=!1;isWorkingHoursActive=!1;currentStatusMessage="";currentStatusClass="";currentTime=new Date;isRTL=!1;formData={};newException={isWorkingDay:!0,exceptionDate:"",reason:"",startTime:"",endTime:""};showExceptionForm=!1;editingException=null;dayOfWeekOptions=[{value:0,nameKey:"COMMON.SUNDAY",name:"Sunday"},{value:1,nameKey:"COMMON.MONDAY",name:"Monday"},{value:2,nameKey:"COMMON.TUESDAY",name:"Tuesday"},{value:3,nameKey:"COMMON.WEDNESDAY",name:"Wednesday"},{value:4,nameKey:"COMMON.THURSDAY",name:"Thursday"},{value:5,nameKey:"COMMON.FRIDAY",name:"Friday"},{value:6,nameKey:"COMMON.SATURDAY",name:"Saturday"}];getDayNameKey(t){if(t==null)return"";let e=typeof t=="string"?parseInt(t,10):t;return isNaN(e)||e<0||e>6?"":this.dayOfWeekOptions.find(s=>s.value===e)?.nameKey||""}permissionsEnum=mt;ngOnInit(){this.updateRTL(),this.initForms(),this.initExceptionForm(),this.loadWorkingHours(),this.loadWorkingHoursStatus(),setInterval(()=>{this.currentTime=new Date},1e3)}ngDoCheck(){this.languageService.currentLang==="ar"!==this.isRTL&&this.updateRTL()}updateRTL(){this.isRTL=this.languageService.currentLang==="ar"}initForms(){this.workingHoursForm=this.fb.group({id:[0],name:["",S.required],description:[""],allowWeekends:[!1],allowHolidays:[!1],isActive:[!1],days:this.fb.array([])}),this.initializeDays()}initializeDays(){let t=this.workingHoursForm.get("days");t.clear();for(let e=0;e<7;e++)t.push(this.fb.group({id:[null],dayOfWeek:[e],startTime:[""],endTime:[""],isEnabled:[!1]}))}initExceptionForm(){this.exceptionForm=this.fb.group({workingHoursId:[0,S.required],exceptionDate:["",S.required],startTime:[""],endTime:[""],reason:["",S.required],isWorkingDay:[!0]})}hasPermission(t){return this.authService.hasPermission(t)}loadWorkingHours(){this.loading=!0,this.workingHoursService.getWorkingHours().subscribe({next:t=>{if(t.exceptions||(t.exceptions=[]),!t.days||t.days.length===0)t.days=this.dayOfWeekOptions.map(e=>({dayOfWeek:e.value,startTime:"",endTime:"",isEnabled:!1}));else{let e=t.days.map(s=>Oe(se({},s),{dayOfWeek:typeof s.dayOfWeek=="string"?this.workingHoursService.convertDayToNumber(s.dayOfWeek):s.dayOfWeek})),o=[];for(let s=0;s<7;s++){let m=e.find(E=>E.dayOfWeek===s);m?o.push(m):o.push({dayOfWeek:s,startTime:"",endTime:"",isEnabled:!1})}t.days=o.sort((s,m)=>s.dayOfWeek-m.dayOfWeek)}this.workingHours=t,this.formData=se({},t),this.populateDaysForm(t.days),this.workingHoursForm.patchValue({id:t.id,name:t.name,description:t.description,allowWeekends:t.allowWeekends,allowHolidays:t.allowHolidays,isActive:t.isActive}),this.loading=!1},error:t=>{this.notificationService.error("Failed to load working hours configuration"),this.loading=!1}})}populateDaysForm(t){let e=this.workingHoursForm.get("days");e.clear();let o=[...t].sort((s,m)=>s.dayOfWeek-m.dayOfWeek);for(let s=0;s<7;s++){let m=o.find(E=>(typeof E.dayOfWeek=="string"?this.workingHoursService.convertDayToNumber(E.dayOfWeek):E.dayOfWeek)===s);if(m){let E=typeof m.dayOfWeek=="string"?this.workingHoursService.convertDayToNumber(m.dayOfWeek):m.dayOfWeek;e.push(this.fb.group({id:[m.id||null],dayOfWeek:[E],startTime:[m.startTime||""],endTime:[m.endTime||""],isEnabled:[m.isEnabled||!1]}))}else e.push(this.fb.group({id:[null],dayOfWeek:[s],startTime:[""],endTime:[""],isEnabled:[!1]}))}}getDaysFormArray(){return this.workingHoursForm.get("days")}loadWorkingHoursStatus(){this.workingHoursService.getWorkingHoursStatus().subscribe({next:t=>{this.workingHoursStatus=t},error:t=>{}})}saveWorkingHours(){if(this.workingHoursForm.invalid){this.notificationService.error("Please fill in all required fields");return}this.saving=!0;let t=this.workingHoursForm.value,o=this.getDaysFormArray().controls.map(m=>({id:m.value.id||void 0,workingHoursId:this.workingHours?.id,dayOfWeek:m.value.dayOfWeek,startTime:m.value.isEnabled&&m.value.startTime?m.value.startTime:void 0,endTime:m.value.isEnabled&&m.value.endTime?m.value.endTime:void 0,isEnabled:m.value.isEnabled})),s={id:t.id,name:t.name,description:t.description,allowWeekends:t.allowWeekends,allowHolidays:t.allowHolidays,isActive:t.isActive,days:o,exceptions:this.workingHours?.exceptions||[],createdAt:this.workingHours?.createdAt||new Date().toISOString(),createdBy:this.workingHours?.createdBy||""};this.workingHoursService.updateWorkingHours(s).subscribe({next:m=>{this.workingHours=m,this.formData=se({},m),this.notificationService.success("Working hours updated successfully"),this.saving=!1,this.loadWorkingHoursStatus(),this.loadWorkingHours()},error:m=>{this.notificationService.error("Failed to update working hours"),this.saving=!1}})}addException(){if(!this.workingHours||!this.newException.exceptionDate||!this.newException.reason){this.notificationService.error("Please fill in all required fields");return}let t={workingHoursId:this.workingHours.id,exceptionDate:this.newException.exceptionDate,reason:this.newException.reason,isWorkingDay:this.newException.isWorkingDay,startTime:this.newException.startTime||void 0,endTime:this.newException.endTime||void 0};this.workingHoursService.addException(t).subscribe({next:e=>{this.notificationService.success("Exception added successfully"),this.loadWorkingHours(),this.resetExceptionForm()},error:e=>{this.notificationService.error("Failed to add exception")}})}editException(t){this.editingException=t,this.newException={exceptionDate:t.exceptionDate,reason:t.reason,isWorkingDay:t.isWorkingDay,startTime:t.startTime||"",endTime:t.endTime||""},this.showExceptionForm=!0}updateException(){if(!this.editingException||!this.newException.exceptionDate||!this.newException.reason){this.notificationService.error("Please fill in all required fields");return}let t={workingHoursId:this.editingException.workingHoursId,exceptionDate:this.newException.exceptionDate,reason:this.newException.reason,isWorkingDay:this.newException.isWorkingDay,startTime:this.newException.startTime||void 0,endTime:this.newException.endTime||void 0};this.workingHoursService.updateException(this.editingException.id,t).subscribe({next:()=>{this.notificationService.success("Exception updated successfully"),this.loadWorkingHours(),this.resetExceptionForm()},error:e=>{this.notificationService.error("Failed to update exception")}})}deleteException(t){confirm("Are you sure you want to delete this exception?")&&this.workingHoursService.deleteException(t.id).subscribe({next:()=>{this.notificationService.success("Exception deleted successfully"),this.loadWorkingHours()},error:e=>{this.notificationService.error("Failed to delete exception")}})}resetExceptionForm(){this.newException={isWorkingDay:!0,exceptionDate:"",reason:"",startTime:"",endTime:""},this.showExceptionForm=!1,this.editingException=null}toggleExceptionForm(){this.showExceptionForm=!this.showExceptionForm,this.showExceptionForm||this.resetExceptionForm()}convertDayToNumber(t){return typeof t=="number"?t:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}[t]??0}convertNumberToDayString(t){return{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[t]??"Sunday"}onStatusClick(){if(this.workingHours){this.workingHoursForm.patchValue({id:this.workingHours.id,name:this.workingHours.name,description:this.workingHours.description,allowWeekends:this.workingHours.allowWeekends,allowHolidays:this.workingHours.allowHolidays,isActive:this.workingHours.isActive});let t=document.querySelector(".config-section");t&&t.scrollIntoView({behavior:"smooth"})}}getDayName(t){let e=this.getDayNameKey(t);return e?this.translate.instant(e):""}getEnabledDaysCount(){return this.workingHours?.days?this.workingHours.days.filter(t=>t.isEnabled).length:0}getEnabledDaysNames(){if(!this.workingHours?.days)return"";let t=this.workingHours.days.filter(e=>e.isEnabled);return t.length===0?"":t.map(e=>this.getDayName(e.dayOfWeek)).join(", ")}isCurrentTimeWithinWorkingHours(){return this.workingHours?this.workingHoursService.isCurrentTimeWithinWorkingHours(this.workingHours):!1}getStatusClass(){return this.workingHoursStatus?this.workingHoursStatus.isWithinWorkingHours?"text-success":"text-danger":"text-muted"}getStatusIcon(){return this.workingHoursStatus?this.workingHoursStatus.isWithinWorkingHours?"fas fa-check-circle":"fas fa-times-circle":"fas fa-question-circle"}trackByExceptionId(t,e){return e.id}static \u0275fac=function(e){return new(e||a)(v(L),v(Ri),v(Ge),v(ce),v(G),v(Wt))};static \u0275cmp=A({type:a,selectors:[["app-working-hours"]],decls:20,vars:14,consts:[["noExceptions",""],["noTime",""],[1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-blue-50","to-indigo-100","py-6","px-4","sm:px-6","lg:px-8",3,"dir"],[1,"max-w-7xl","mx-auto","mb-8"],[1,"bg-gradient-to-r","from-blue-600","via-indigo-600","to-purple-600","rounded-2xl","shadow-xl","p-6","sm:p-8","text-white"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","sm:text-4xl","font-bold","mb-2","flex","items-center","gap-3"],[1,"bi","bi-calendar-check","text-4xl"],[1,"text-blue-100","text-lg"],[1,"px-4","py-2","bg-white/20","hover:bg-white/30","backdrop-blur-sm","rounded-xl","font-semibold","transition-all","duration-200","flex","items-center","gap-2","hover:scale-105",3,"click"],[1,"bi","bi-arrow-clockwise"],["class","max-w-7xl mx-auto mb-8",4,"ngIf"],["class","max-w-7xl mx-auto",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-xl","overflow-hidden"],[1,"p-6","sm:p-8"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","text-gray-700"],[1,"flex","items-center","gap-2"],[1,"bi","bi-clock","text-blue-600"],[1,"text-sm","font-medium"],[1,"font-bold"],["class","flex items-center gap-2",4,"ngIf"],["class","mt-4 p-4 bg-gray-50 rounded-xl",4,"ngIf"],[1,"bi","bi-calendar-range","text-indigo-600"],[1,"mt-4","p-4","bg-gray-50","rounded-xl"],[1,"flex","items-start","gap-3"],[1,"bi","bi-info-circle","text-blue-600","mt-1"],[1,"text-sm","font-semibold","text-gray-900","mb-1"],[1,"text-sm","text-gray-700"],[1,"bg-white","rounded-2xl","shadow-lg","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200"],[1,"text-xl","font-bold","text-gray-800","flex","items-center","gap-2"],[1,"bi","bi-gear","text-blue-600"],[1,"p-6"],[3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"text-lg","font-bold","text-gray-900","mb-4","flex","items-center","gap-2"],[1,"bi","bi-info-circle","text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"flex","items-center","gap-2","text-sm","font-semibold","text-gray-700","mb-2"],[1,"bi","bi-tag","text-gray-500"],["type","text","formControlName","name",1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200",3,"placeholder"],[1,"bi","bi-file-text","text-gray-500"],["type","text","formControlName","description",1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200",3,"placeholder"],[1,"bi","bi-calendar-check","text-indigo-600"],[1,"space-y-4"],["class","p-4 bg-gray-50 rounded-xl border-2 border-gray-200 hover:border-blue-300 transition-all duration-200",3,"formGroup",4,"ngFor","ngForOf"],[1,"bi","bi-sliders","text-purple-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","items-center","gap-3","p-4","bg-gray-50","rounded-xl"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","isActive",1,"sr-only","peer"],[1,"w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600"],[1,"flex-1"],[1,"font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"bi","bi-power","text-blue-600"],["type","checkbox","formControlName","allowWeekends",1,"sr-only","peer"],[1,"bi","bi-calendar-week","text-indigo-600"],["type","checkbox","formControlName","allowHolidays",1,"sr-only","peer"],[1,"bi","bi-calendar-x","text-purple-600"],[1,"flex","justify-center","pt-6","border-t","border-gray-200"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","rounded-xl","font-bold","hover:from-blue-700","hover:to-indigo-700","transition-all","duration-200","flex","items-center","gap-2","hover:scale-105","shadow-lg","disabled:opacity-50","disabled:cursor-not-allowed","disabled:hover:scale-100",3,"disabled"],["class","bi bi-check-circle",4,"ngIf"],["class","animate-spin rounded-full h-5 w-5 border-b-2 border-white",4,"ngIf"],[1,"p-4","bg-gray-50","rounded-xl","border-2","border-gray-200","hover:border-blue-300","transition-all","duration-200",3,"formGroup"],[1,"flex","flex-col","md:flex-row","md:items-center","gap-4"],[1,"flex","items-center","gap-3","md:w-32"],["type","checkbox","formControlName","isEnabled",1,"sr-only","peer"],[1,"font-bold","text-gray-900","min-w-[80px]"],[4,"ngIf"],[1,"flex-1","flex","items-center","gap-3"],[1,"block","text-xs","font-semibold","text-gray-600","mb-1"],["type","time","formControlName","startTime",1,"w-full","px-4","py-2","border-2","rounded-xl","transition-all","duration-200",3,"disabled"],[1,"text-gray-600","font-semibold","mt-6"],["type","time","formControlName","endTime",1,"w-full","px-4","py-2","border-2","rounded-xl","transition-all","duration-200",3,"disabled"],[1,"bi","bi-check-circle"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-white"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200","flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"bi","bi-calendar-x","text-red-600"],[1,"px-4","py-2","bg-gradient-to-r","from-green-600","to-emerald-600","text-white","rounded-xl","font-semibold","hover:from-green-700","hover:to-emerald-700","transition-all","duration-200","flex","items-center","gap-2","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-plus-circle"],[1,"mb-6","p-4","bg-blue-50","border-l-4","border-blue-500","rounded-r-lg"],[1,"bi","bi-info-circle","text-blue-600","mt-0.5"],[1,"font-semibold","text-blue-900","mb-1"],[1,"text-sm","text-blue-800"],["class","mb-6 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"mb-6","p-6","bg-gradient-to-br","from-blue-50","to-indigo-50","rounded-xl","border-2","border-blue-200"],[1,"mb-4"],[1,"text-lg","font-bold","text-gray-900","flex","items-center","gap-2"],[1,"bi","bi-plus-circle","text-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","date","formControlName","exceptionDate",1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200"],["type","time","formControlName","startTime",1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200"],["type","time","formControlName","endTime",1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200"],["type","text","formControlName","reason","placeholder","Enter reason",1,"w-full","px-4","py-2","border-2","border-gray-200","rounded-xl","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","duration-200"],[1,"md:col-span-2"],[1,"flex","items-center","gap-3","p-4","bg-white","rounded-xl"],["type","checkbox","formControlName","isWorkingDay",1,"sr-only","peer"],[1,"flex-1","font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"bi","bi-calendar-check","text-blue-600"],[1,"flex","gap-3"],["type","submit",1,"px-6","py-2","bg-gradient-to-r","from-green-600","to-emerald-600","text-white","rounded-xl","font-semibold","hover:from-green-700","hover:to-emerald-700","transition-all","duration-200","flex","items-center","gap-2","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["type","button",1,"px-6","py-2","bg-gray-200","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-300","transition-all","duration-200","flex","items-center","gap-2",3,"click"],[1,"bi","bi-x-circle"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],[1,"px-6","py-3","text-center","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-blue-50 transition-colors duration-150",4,"ngFor","ngForOf","ngForTrackBy"],[1,"hover:bg-blue-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center","gap-2","text-sm","font-medium","text-gray-900"],[1,"bi","bi-calendar-date","text-blue-600"],["class","px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",4,"ngIf","ngIfElse"],[1,"px-6","py-4"],[1,"text-sm","text-gray-900"],[1,"px-3","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"flex","items-center","justify-center","gap-2"],["title","Edit",1,"px-3","py-1","bg-blue-100","text-blue-700","hover:bg-blue-200","rounded-lg","text-sm","font-semibold","transition-colors","duration-200",3,"click"],[1,"bi","bi-pencil"],["title","Delete",1,"px-3","py-1","bg-red-100","text-red-700","hover:bg-red-200","rounded-lg","text-sm","font-semibold","transition-colors","duration-200",3,"click"],[1,"bi","bi-trash"],[1,"px-3","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"text-gray-400"],[1,"text-center","py-12"],[1,"w-20","h-20","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"bi","bi-calendar-x","text-gray-400","text-4xl"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"px-6","py-2","bg-gradient-to-r","from-green-600","to-emerald-600","text-white","rounded-xl","font-semibold","hover:from-green-700","hover:to-emerald-700","transition-all","duration-200","flex","items-center","gap-2","hover:scale-105","shadow-lg","mx-auto",3,"click"],[1,"max-w-7xl","mx-auto"],[1,"bg-white","rounded-2xl","shadow-lg","p-12"],[1,"flex","flex-col","items-center","justify-center","text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600","mb-4"],[1,"text-gray-600"]],template:function(e,o){e&1&&(n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div")(5,"h1",6),l(6,"i",7),r(7),g(8,"translate"),i(),n(9,"p",8),r(10),g(11,"translate"),i()(),n(12,"button",9),x("click",function(){return o.loadWorkingHours()}),l(13,"i",10),r(14),g(15,"translate"),i()()()(),f(16,Gs,14,9,"div",11)(17,zs,76,43,"div",11)(18,id,24,9,"div",11)(19,nd,8,0,"div",12),i()),e&2&&(d("dir",o.isRTL?"rtl":"ltr"),u(7),b(" ",h(8,8,"BREADCRUMB.WORKING_HOURS")," "),u(3),p(h(11,10,"COMMON.CONFIGURE_WORKING_HOURS")),u(4),b(" ",h(15,12,"COMMON.REFRESH")," "),u(2),d("ngIf",o.workingHours),u(),d("ngIf",o.workingHours&&!o.loading),u(),d("ngIf",o.workingHours&&!o.loading),u(),d("ngIf",o.loading))},dependencies:[Pe,fe,F,w,Qe,W,V,be,D,B,De,U,j,Ke,_e,ve],styles:[".working-hours-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.working-hours-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.working-hours-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:10px}.working-hours-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#5a6fd8,#6b4190)}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease-in-out}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000000d}input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]{background-color:#2563eb!important}@media (max-width: 640px){table[_ngcontent-%COMP%]{font-size:.875rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.5rem!important}}@keyframes _ngcontent-%COMP%_pulse-green{0%,to{box-shadow:0 0 #22c55eb3}50%{box-shadow:0 0 0 10px #22c55e00}}.border-green-500[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-green 2s infinite}"]})};function rd(a,t){a&1&&(n(0,"div",13),l(1,"div",14),n(2,"p",15),r(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644..."),i()())}function od(a,t){a&1&&(n(0,"span",40),l(1,"i",41),r(2," \u0627\u0641\u062A\u0631\u0627\u0636\u064A "),i())}function ud(a,t){if(a&1&&(n(0,"div")(1,"p",24),r(2),i()()),a&2){let e=c().$implicit;u(2),p(e.description)}}function ad(a,t){if(a&1){let e=C();n(0,"button",42),x("click",function(){y(e);let s=c().$implicit,m=c(2);return _(m.deleteConfiguration(s))}),l(1,"i",43),r(2," \u062D\u0630\u0641 "),i()}}function ld(a,t){if(a&1){let e=C();n(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",4)(4,"div",21),l(5,"i",22),i(),n(6,"div")(7,"h3",23),r(8),i(),n(9,"p",24),r(10),i()()(),f(11,od,3,0,"span",25),i()(),n(12,"div",26)(13,"div",27),f(14,ud,3,1,"div",28),n(15,"div",20)(16,"span",29),r(17,"\u0646\u0648\u0639 \u0627\u0644\u0637\u0627\u0628\u0639\u0629:"),i(),n(18,"span",30),r(19),i()(),n(20,"div",20)(21,"span",29),r(22,"\u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0648\u0631\u0642:"),i(),n(23,"span",31),r(24),i()(),n(25,"div",20)(26,"span",29),r(27,"\u062D\u062C\u0645 \u0627\u0644\u0648\u0631\u0642:"),i(),n(28,"span",31),r(29),i()(),n(30,"div",20)(31,"span",29),r(32,"\u0627\u0644\u0627\u062A\u062C\u0627\u0647:"),i(),n(33,"span",31),r(34),i()(),n(35,"div",32)(36,"span",29),r(37,"\u0627\u0644\u062D\u0627\u0644\u0629:"),i(),n(38,"span",30),l(39,"i",33),r(40),i()()()(),n(41,"div",34)(42,"span",35),r(43),i(),n(44,"div",36)(45,"button",37),x("click",function(){let s=y(e).$implicit,m=c(2);return _(m.openForm(s.id))}),l(46,"i",38),r(47," \u062A\u0639\u062F\u064A\u0644 "),i(),f(48,ad,3,0,"button",39),i()()()}if(a&2){let e=t.$implicit,o=c(2);u(8),p(e.nameAr),u(2),p(e.nameEn),u(),d("ngIf",e.isDefault),u(3),d("ngIf",e.description),u(4),d("ngClass",o.getPrinterTypeColor(e.printerType)),u(),b(" ",o.getPrinterTypeLabel(e.printerType)," "),u(5),p(e.paperFormat),u(5),q(" ",e.paperWidth,"mm \xD7 ",e.paperHeight>0?e.paperHeight+"mm":"\u0644\u0641\u0629 \u0645\u0633\u062A\u0645\u0631\u0629"," "),u(5),b(" ",e.orientation==="Portrait"?"\u0639\u0645\u0648\u062F\u064A":"\u0623\u0641\u0642\u064A"," "),u(4),d("ngClass",e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),u(),d("ngClass",e.isActive?"bi-check-circle":"bi-x-circle"),u(),b(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),u(3),b("ID: ",e.id),u(5),d("ngIf",!e.isDefault)}}function sd(a,t){if(a&1&&(n(0,"div",16),f(1,ld,49,15,"div",17),i()),a&2){let e=c();u(),d("ngForOf",e.configurations)}}function dd(a,t){if(a&1){let e=C();n(0,"div",13)(1,"div",44),l(2,"i",45),i(),n(3,"h3",46),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0637\u0627\u0628\u0639\u0629"),i(),n(5,"p",47),r(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0637\u0627\u0628\u0639\u0629 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),i(),n(7,"button",9),x("click",function(){y(e);let s=c();return _(s.openForm(null))}),l(8,"i",48),r(9," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0637\u0627\u0628\u0639\u0629 "),i()()}}var Di=class a{constructor(t,e,o,s,m){this.printerConfigService=t;this.router=e;this.route=o;this.lang=s;this.toastr=m}configurations=[];loading=!1;ngOnInit(){this.loadConfigurations()}loadConfigurations(){this.loading=!0,this.printerConfigService.GetPrinterConfigurations().subscribe({next:t=>{this.configurations=t,this.loading=!1},error:t=>{this.toastr.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629","\u062E\u0637\u0623"),this.loading=!1}})}openForm(t){t?this.router.navigate(["../printer-configuration-form"],{relativeTo:this.route,queryParams:{configId:t}}):this.router.navigate(["../printer-configuration-form"],{relativeTo:this.route})}deleteConfiguration(t){if(t.isDefault){this.toastr.warning("\u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0630\u0641 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A\u0629","\u062A\u062D\u0630\u064A\u0631");return}confirm(`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 "${t.nameAr}"\u061F`)&&this.printerConfigService.DeletePrinterConfiguration(t.id).subscribe({next:()=>{this.toastr.success("\u062A\u0645 \u062D\u0630\u0641 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0628\u0646\u062C\u0627\u062D","\u0646\u062C\u0627\u062D"),this.loadConfigurations()},error:e=>{this.toastr.error(e.error||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629","\u062E\u0637\u0623")}})}getPrinterTypeLabel(t){return{A4:"\u0637\u0627\u0628\u0639\u0629 A4",POS:"\u0637\u0627\u0628\u0639\u0629 \u0646\u0642\u0627\u0637 \u0627\u0644\u0628\u064A\u0639",Thermal:"\u0637\u0627\u0628\u0639\u0629 \u062D\u0631\u0627\u0631\u064A\u0629",Label:"\u0637\u0627\u0628\u0639\u0629 \u0645\u0644\u0635\u0642\u0627\u062A"}[t]||t}getPrinterTypeColor(t){return{A4:"bg-blue-100 text-blue-800",POS:"bg-green-100 text-green-800",Thermal:"bg-orange-100 text-orange-800",Label:"bg-purple-100 text-purple-800"}[t]||"bg-gray-100 text-gray-800"}static \u0275fac=function(e){return new(e||a)(v(dt),v(T),v(k),v(G),v(ee))};static \u0275cmp=A({type:a,selectors:[["app-printer-configurations"]],standalone:!1,decls:18,vars:3,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-purple-500","to-indigo-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-printer","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"inline-flex","items-center","px-6","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-purple-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-all","duration-200","transform","hover:scale-105","shadow-lg",3,"click"],[1,"bi","bi-plus-circle","mr-2","text-lg"],["class","bg-white rounded-2xl shadow-lg p-12 text-center",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","p-12","text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-purple-600","mx-auto"],[1,"mt-4","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","overflow-hidden","border","border-gray-100"],[1,"bg-gradient-to-r","from-purple-100","to-indigo-100","p-6"],[1,"flex","items-center","justify-between"],[1,"w-12","h-12","bg-gradient-to-br","from-purple-500","to-indigo-600","rounded-xl","flex","items-center","justify-center","mr-3"],[1,"bi","bi-printer","text-white","text-lg"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-sm","text-gray-600"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",4,"ngIf"],[1,"p-6"],[1,"space-y-4"],[4,"ngIf"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","items-center","justify-between","pt-2","border-t","border-gray-200"],[1,"bi","mr-1",3,"ngClass"],[1,"px-6","py-4","bg-gray-50","border-t","border-gray-200","flex","justify-between","items-center"],[1,"text-xs","text-gray-500"],[1,"flex","gap-2"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-pencil","mr-2"],["class","inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-yellow-100","text-yellow-800"],[1,"bi","bi-star-fill","mr-1"],[1,"inline-flex","items-center","px-4","py-2","bg-red-600","text-white","rounded-lg","text-sm","font-medium","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-colors",3,"click"],[1,"bi","bi-trash","mr-2"],[1,"w-24","h-24","bg-gray-100","rounded-full","mx-auto","flex","items-center","justify-center","mb-6"],[1,"bi","bi-printer","text-gray-400","text-4xl"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],[1,"bi","bi-plus-circle","mr-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9,"\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629"),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0648\u062A\u0643\u0648\u064A\u0646\u0627\u062A\u0647\u0627"),i()()(),n(12,"button",9),x("click",function(){return o.openForm(null)}),l(13,"i",10),r(14," \u0625\u0636\u0627\u0641\u0629 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u062C\u062F\u064A\u062F\u0629 "),i()()(),f(15,rd,4,0,"div",11)(16,sd,2,1,"div",12)(17,dd,10,0,"div",11),i()()),e&2&&(u(15),d("ngIf",o.loading),u(),d("ngIf",!o.loading&&o.configurations.length>0),u(),d("ngIf",!o.loading&&o.configurations.length===0))},dependencies:[fe,F,w,M],encapsulation:2})};function md(a,t){a&1&&(n(0,"div",18)(1,"label",19),r(2," \u062A\u0646\u0633\u064A\u0642 \u0627\u0644\u0648\u0631\u0642 "),i(),n(3,"select",62)(4,"option",28),r(5,"A4"),i(),n(6,"option",63),r(7,"Letter"),i(),n(8,"option",64),r(9,"Legal"),i(),n(10,"option",65),r(11,"A3"),i(),n(12,"option",66),r(13,"A5"),i()()())}function cd(a,t){a&1&&(n(0,"div",18)(1,"label",4),l(2,"input",67),n(3,"span",56),r(4,"\u0637\u0628\u0627\u0639\u0629 \u0645\u0644\u0648\u0646\u0629"),i()()())}function pd(a,t){a&1&&(n(0,"div",18)(1,"label",4),l(2,"input",68),n(3,"span",56),r(4,"\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u062E\u0644\u0641\u064A\u0629"),i()()())}function gd(a,t){a&1&&(n(0,"div",14)(1,"h2",15),l(2,"i",69),r(3," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0637\u0627\u0628\u0639\u0629 \u0646\u0642\u0627\u0637 \u0627\u0644\u0628\u064A\u0639 "),i(),n(4,"div",26)(5,"div",18)(6,"label",19),r(7,"\u0627\u0644\u062A\u0631\u0645\u064A\u0632"),i(),n(8,"select",70)(9,"option",71),r(10,"UTF-8"),i(),n(11,"option",72),r(12,"Windows-1256"),i(),n(13,"option",73),r(14,"ISO-8859-6"),i()()(),n(15,"div",18)(16,"label",19),r(17,"\u0639\u062F\u062F \u0627\u0644\u0646\u0633\u062E"),i(),l(18,"input",74),i(),n(19,"div",18)(20,"label",19),r(21,"\u0643\u062B\u0627\u0641\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (0-15)"),i(),l(22,"input",75),i(),n(23,"div",18)(24,"label",19),r(25,"\u0633\u0631\u0639\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (1-5)"),i(),l(26,"input",76),i(),n(27,"div",18)(28,"label",19),r(29,"\u0646\u0648\u0639 \u0627\u0644\u0627\u062A\u0635\u0627\u0644"),i(),n(30,"select",77)(31,"option",78),r(32,"USB"),i(),n(33,"option",79),r(34,"\u0634\u0628\u0643\u0629"),i(),n(35,"option",80),r(36,"\u0633\u064A\u0631\u064A\u0627\u0644"),i(),n(37,"option",81),r(38,"\u0628\u0644\u0648\u062A\u0648\u062B"),i()()(),n(39,"div",18)(40,"label",19),r(41,"\u0633\u0644\u0633\u0644\u0629 \u0627\u0644\u0627\u062A\u0635\u0627\u0644"),i(),l(42,"input",82),i(),n(43,"div",18)(44,"label",4),l(45,"input",83),n(46,"span",56),r(47,"\u0642\u0637\u0639 \u062A\u0644\u0642\u0627\u0626\u064A"),i()()(),n(48,"div",18)(49,"label",4),l(50,"input",84),n(51,"span",56),r(52,"\u0641\u062A\u062D \u062F\u0631\u062C \u0627\u0644\u0646\u0642\u062F"),i()()(),n(53,"div",18)(54,"label",4),l(55,"input",85),n(56,"span",56),r(57,"\u0627\u0633\u062A\u062E\u062F\u0627\u0645 ESC/POS"),i()()()()())}var Ni=class a{constructor(t,e,o,s,m,E){this.fb=t;this.printerConfigService=e;this.router=o;this.route=s;this.toastr=m;this.lang=E}configForm;showPosSettings=!1;isDefault=!1;ngOnInit(){this.initForm(),this.route.queryParams.subscribe(t=>{let e=+t.configId;e&&this.loadConfiguration(e)})}initForm(){this.configForm=this.fb.group({id:[0],nameAr:["",S.required],nameEn:[""],description:[""],printerType:["A4",S.required],paperFormat:["A4"],paperWidth:[210,[S.required,S.min(1)]],paperHeight:[297,[S.min(0)]],orientation:["Portrait"],printInColor:[!0],printBackground:[!0],scale:[1,[S.required,S.min(.1),S.max(2)]],isActive:[!0],marginTop:["20mm"],marginRight:["20mm"],marginBottom:["20mm"],marginLeft:["20mm"],fontFamily:["Arial"],baseFontSize:[12,[S.required,S.min(6),S.max(72)]],headerFontSize:[16,[S.required,S.min(6),S.max(72)]],footerFontSize:[10,[S.required,S.min(6),S.max(72)]],tableFontSize:[11,[S.required,S.min(6),S.max(72)]],posEncoding:["UTF-8"],posCopies:[1,[S.min(1),S.max(10)]],posAutoCut:[!0],posOpenCashDrawer:[!1],posPrintDensity:[8,[S.min(0),S.max(15)]],posPrintSpeed:[3,[S.min(1),S.max(5)]],posUseEscPos:[!0],posConnectionType:["USB"],posConnectionString:[""]}),this.configForm.get("printerType")?.valueChanges.subscribe(t=>{this.onPrinterTypeChange(t)})}onPrinterTypeChange(t){this.showPosSettings=t==="POS"||t==="Thermal",this.showPosSettings?this.configForm.patchValue({paperFormat:"Thermal",paperWidth:80,paperHeight:0,printInColor:!1,printBackground:!1,marginTop:"5mm",marginRight:"5mm",marginBottom:"5mm",marginLeft:"5mm",fontFamily:"Courier",baseFontSize:10,headerFontSize:12,footerFontSize:8,tableFontSize:9}):this.configForm.patchValue({paperFormat:"A4",paperWidth:210,paperHeight:297,printInColor:!0,printBackground:!0,marginTop:"20mm",marginRight:"20mm",marginBottom:"20mm",marginLeft:"20mm",fontFamily:"Arial",baseFontSize:12,headerFontSize:16,footerFontSize:10,tableFontSize:11})}loadConfiguration(t){this.printerConfigService.GetPrinterConfigurationById(t).subscribe({next:e=>{this.isDefault=e.isDefault;let o={},s={},m={};if(e.margins)try{o=JSON.parse(e.margins)}catch{}if(e.fontSettings)try{s=JSON.parse(e.fontSettings)}catch{}if(e.posSettings)try{m=JSON.parse(e.posSettings)}catch{}this.configForm.patchValue({id:e.id,nameAr:e.nameAr,nameEn:e.nameEn||"",description:e.description||"",printerType:e.printerType,paperFormat:e.paperFormat,paperWidth:e.paperWidth,paperHeight:e.paperHeight,orientation:e.orientation,printInColor:e.printInColor,printBackground:e.printBackground,scale:e.scale,isActive:e.isActive,marginTop:o.top||"20mm",marginRight:o.right||"20mm",marginBottom:o.bottom||"20mm",marginLeft:o.left||"20mm",fontFamily:s.fontFamily||"Arial",baseFontSize:s.baseFontSize||12,headerFontSize:s.headerFontSize||16,footerFontSize:s.footerFontSize||10,tableFontSize:s.tableFontSize||11,posEncoding:m.encoding||"UTF-8",posCopies:m.copies||1,posAutoCut:m.autoCut??!0,posOpenCashDrawer:m.openCashDrawer??!1,posPrintDensity:m.printDensity||8,posPrintSpeed:m.printSpeed||3,posUseEscPos:m.useEscPos??!0,posConnectionType:m.connectionType||"USB",posConnectionString:m.connectionString||""}),this.showPosSettings=e.printerType==="POS"||e.printerType==="Thermal"},error:e=>{this.toastr.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629","\u062E\u0637\u0623")}})}save(){if(this.configForm.valid){let t=this.configForm.value,e=JSON.stringify({top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft}),o=JSON.stringify({fontFamily:t.fontFamily,baseFontSize:t.baseFontSize,headerFontSize:t.headerFontSize,footerFontSize:t.footerFontSize,tableFontSize:t.tableFontSize}),s;this.showPosSettings&&(s=JSON.stringify({encoding:t.posEncoding,copies:t.posCopies,autoCut:t.posAutoCut,openCashDrawer:t.posOpenCashDrawer,printDensity:t.posPrintDensity,printSpeed:t.posPrintSpeed,useEscPos:t.posUseEscPos,connectionType:t.posConnectionType,connectionString:t.posConnectionString||null}));let m={id:t.id,nameAr:t.nameAr,nameEn:t.nameEn,description:t.description,printerType:t.printerType,paperFormat:t.paperFormat,paperWidth:t.paperWidth,paperHeight:t.paperHeight,margins:e,fontSettings:o,posSettings:s,printInColor:t.printInColor,printBackground:t.printBackground,orientation:t.orientation,scale:t.scale,isActive:t.isActive,isDefault:this.isDefault};this.printerConfigService.SavePrinterConfiguration(m).subscribe({next:()=>{this.toastr.success("\u062A\u0645 \u062D\u0641\u0638 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 \u0628\u0646\u062C\u0627\u062D","\u0646\u062C\u0627\u062D"),this.router.navigate(["../printer-configurations"],{relativeTo:this.route})},error:E=>{this.toastr.error(E.error||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0641\u0638 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629","\u062E\u0637\u0623")}})}else this.toastr.error("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629","\u062E\u0637\u0623")}cancel(){this.router.navigate(["../printer-configurations"],{relativeTo:this.route})}get isPosPrinter(){return this.showPosSettings}static \u0275fac=function(e){return new(e||a)(v(L),v(dt),v(T),v(k),v(ee),v(G))};static \u0275cmp=A({type:a,selectors:[["app-printer-configuration-form"]],standalone:!1,decls:142,vars:9,consts:[["dir","rtl",1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-6xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white","rounded-2xl","shadow-lg","p-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-gradient-to-br","from-purple-500","to-indigo-600","rounded-2xl","flex","items-center","justify-center","mr-4"],[1,"bi","bi-printer","text-white","text-xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"w-10","h-10","bg-gray-100","hover:bg-gray-200","rounded-full","flex","items-center","justify-center","transition-colors",3,"click"],[1,"bi","bi-x-lg","text-gray-600"],[1,"bg-white","rounded-2xl","shadow-xl","p-8"],[1,"space-y-8",3,"ngSubmit","formGroup"],["type","hidden","formControlName","id"],[1,"border-b","border-gray-200","pb-8"],[1,"text-xl","font-bold","text-gray-900","mb-6","flex","items-center"],[1,"bi","bi-info-circle","text-purple-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-gray-700"],[1,"text-red-500"],["type","text","formControlName","nameAr","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","nameEn","placeholder","Enter name in English",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"space-y-2","md:col-span-2"],["formControlName","description","rows","3","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white","resize-none"],[1,"bi","bi-printer-fill","text-blue-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["formControlName","printerType",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["value","A4"],["value","POS"],["value","Thermal"],["value","Label"],["class","space-y-2",4,"ngIf"],["type","number","formControlName","paperWidth",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","paperHeight",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["formControlName","orientation",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["value","Portrait"],["value","Landscape"],["type","number","step","0.1","formControlName","scale",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-border","text-green-600","mr-3"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6"],["type","text","formControlName","marginTop","placeholder","20mm",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","marginRight","placeholder","20mm",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","marginBottom","placeholder","20mm",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","text","formControlName","marginLeft","placeholder","20mm",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],[1,"bi","bi-fonts","text-orange-600","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-5","gap-6"],["type","text","formControlName","fontFamily",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","baseFontSize",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","headerFontSize",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","footerFontSize",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","tableFontSize",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["class","border-b border-gray-200 pb-8",4,"ngIf"],[1,"pb-8"],[1,"bi","bi-toggle-on","text-green-600","mr-3"],["type","checkbox","formControlName","isActive",1,"w-5","h-5","text-green-600","rounded","focus:ring-green-500"],[1,"mr-2","text-sm","font-semibold","text-gray-700"],[1,"flex","justify-end","space-x-4","space-x-reverse","pt-8","border-t","border-gray-200"],["type","button",1,"px-8","py-3","bg-gray-100","text-gray-700","rounded-xl","font-semibold","hover:bg-gray-200","focus:outline-none","focus:ring-2","focus:ring-gray-300","focus:ring-offset-2","transition-all","duration-200","border","border-gray-300",3,"click"],[1,"bi","bi-x-lg","mr-2"],["type","submit",1,"px-8","py-3","bg-gradient-to-r","from-purple-600","to-indigo-600","text-white","rounded-xl","font-semibold","hover:from-purple-700","hover:to-indigo-700","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:ring-offset-2","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","shadow-lg","transform","hover:scale-105",3,"disabled"],[1,"bi","bi-check-lg","mr-2"],["formControlName","paperFormat",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["value","Letter"],["value","Legal"],["value","A3"],["value","A5"],["type","checkbox","formControlName","printInColor",1,"w-5","h-5","text-purple-600","rounded","focus:ring-purple-500"],["type","checkbox","formControlName","printBackground",1,"w-5","h-5","text-purple-600","rounded","focus:ring-purple-500"],[1,"bi","bi-receipt","text-red-600","mr-3"],["formControlName","posEncoding",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["value","UTF-8"],["value","Windows-1256"],["value","ISO-8859-6"],["type","number","formControlName","posCopies",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","posPrintDensity",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","number","formControlName","posPrintSpeed",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["formControlName","posConnectionType",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["value","USB"],["value","Network"],["value","Serial"],["value","Bluetooth"],["type","text","formControlName","posConnectionString","placeholder","\u0645\u062B\u0627\u0644: COM1 \u0623\u0648 192.168.1.100",1,"w-full","px-4","py-3","border-2","border-gray-200","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-purple-500","transition-all","duration-200","bg-gray-50","focus:bg-white"],["type","checkbox","formControlName","posAutoCut",1,"w-5","h-5","text-purple-600","rounded","focus:ring-purple-500"],["type","checkbox","formControlName","posOpenCashDrawer",1,"w-5","h-5","text-purple-600","rounded","focus:ring-purple-500"],["type","checkbox","formControlName","posUseEscPos",1,"w-5","h-5","text-purple-600","rounded","focus:ring-purple-500"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l(6,"i",6),i(),n(7,"div")(8,"h1",7),r(9),i(),n(10,"p",8),r(11,"\u0625\u062F\u0627\u0631\u0629 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0648\u062A\u0643\u0648\u064A\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629"),i()()(),n(12,"button",9),x("click",function(){return o.cancel()}),l(13,"i",10),i()()(),n(14,"div",11)(15,"form",12),x("ngSubmit",function(){return o.save()}),l(16,"input",13),n(17,"div",14)(18,"h2",15),l(19,"i",16),r(20," \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629 "),i(),n(21,"div",17)(22,"div",18)(23,"label",19),r(24," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629 "),n(25,"span",20),r(26,"*"),i()(),l(27,"input",21),i(),n(28,"div",18)(29,"label",19),r(30," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 "),i(),l(31,"input",22),i(),n(32,"div",23)(33,"label",19),r(34," \u0627\u0644\u0648\u0635\u0641 "),i(),l(35,"textarea",24),i()()(),n(36,"div",14)(37,"h2",15),l(38,"i",25),r(39," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629 "),i(),n(40,"div",26)(41,"div",18)(42,"label",19),r(43," \u0646\u0648\u0639 \u0627\u0644\u0637\u0627\u0628\u0639\u0629 "),n(44,"span",20),r(45,"*"),i()(),n(46,"select",27)(47,"option",28),r(48,"\u0637\u0627\u0628\u0639\u0629 A4"),i(),n(49,"option",29),r(50,"\u0637\u0627\u0628\u0639\u0629 \u0646\u0642\u0627\u0637 \u0627\u0644\u0628\u064A\u0639"),i(),n(51,"option",30),r(52,"\u0637\u0627\u0628\u0639\u0629 \u062D\u0631\u0627\u0631\u064A\u0629"),i(),n(53,"option",31),r(54,"\u0637\u0627\u0628\u0639\u0629 \u0645\u0644\u0635\u0642\u0627\u062A"),i()()(),f(55,md,14,0,"div",32),n(56,"div",18)(57,"label",19),r(58," \u0639\u0631\u0636 \u0627\u0644\u0648\u0631\u0642 (\u0645\u0645) "),n(59,"span",20),r(60,"*"),i()(),l(61,"input",33),i(),n(62,"div",18)(63,"label",19),r(64," \u0627\u0631\u062A\u0641\u0627\u0639 \u0627\u0644\u0648\u0631\u0642 (\u0645\u0645) - 0 \u0644\u0644\u0641\u0629 \u0645\u0633\u062A\u0645\u0631\u0629 "),i(),l(65,"input",34),i(),n(66,"div",18)(67,"label",19),r(68," \u0627\u0644\u0627\u062A\u062C\u0627\u0647 "),i(),n(69,"select",35)(70,"option",36),r(71,"\u0639\u0645\u0648\u062F\u064A"),i(),n(72,"option",37),r(73,"\u0623\u0641\u0642\u064A"),i()()(),n(74,"div",18)(75,"label",19),r(76," \u0645\u0642\u064A\u0627\u0633 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 (0.1 - 2.0) "),i(),l(77,"input",38),i(),f(78,cd,5,0,"div",32)(79,pd,5,0,"div",32),i()(),n(80,"div",14)(81,"h2",15),l(82,"i",39),r(83," \u0627\u0644\u0647\u0648\u0627\u0645\u0634 "),i(),n(84,"div",40)(85,"div",18)(86,"label",19),r(87,"\u0623\u0639\u0644\u0649"),i(),l(88,"input",41),i(),n(89,"div",18)(90,"label",19),r(91,"\u064A\u0645\u064A\u0646"),i(),l(92,"input",42),i(),n(93,"div",18)(94,"label",19),r(95,"\u0623\u0633\u0641\u0644"),i(),l(96,"input",43),i(),n(97,"div",18)(98,"label",19),r(99,"\u064A\u0633\u0627\u0631"),i(),l(100,"input",44),i()()(),n(101,"div",14)(102,"h2",15),l(103,"i",45),r(104," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u062E\u0637 "),i(),n(105,"div",46)(106,"div",18)(107,"label",19),r(108,"\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u062E\u0637"),i(),l(109,"input",47),i(),n(110,"div",18)(111,"label",19),r(112,"\u062D\u062C\u0645 \u0627\u0644\u062E\u0637 \u0627\u0644\u0623\u0633\u0627\u0633\u064A"),i(),l(113,"input",48),i(),n(114,"div",18)(115,"label",19),r(116,"\u062D\u062C\u0645 \u062E\u0637 \u0627\u0644\u0639\u0646\u0648\u0627\u0646"),i(),l(117,"input",49),i(),n(118,"div",18)(119,"label",19),r(120,"\u062D\u062C\u0645 \u062E\u0637 \u0627\u0644\u062A\u0630\u064A\u064A\u0644"),i(),l(121,"input",50),i(),n(122,"div",18)(123,"label",19),r(124,"\u062D\u062C\u0645 \u062E\u0637 \u0627\u0644\u062C\u062F\u0648\u0644"),i(),l(125,"input",51),i()()(),f(126,gd,58,0,"div",52),n(127,"div",53)(128,"h2",15),l(129,"i",54),r(130," \u0627\u0644\u062D\u0627\u0644\u0629 "),i(),n(131,"div",4),l(132,"input",55),n(133,"label",56),r(134),i()()(),n(135,"div",57)(136,"button",58),x("click",function(){return o.cancel()}),l(137,"i",59),r(138," \u0625\u0644\u063A\u0627\u0621 "),i(),n(139,"button",60),l(140,"i",61),r(141),i()()()()()()),e&2){let s,m,E;u(9),b(" ",((s=o.configForm.get("id"))==null?null:s.value)>0?"\u062A\u0639\u062F\u064A\u0644 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0637\u0627\u0628\u0639\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0637\u0627\u0628\u0639\u0629 \u062C\u062F\u064A\u062F\u0629"," "),u(6),d("formGroup",o.configForm),u(40),d("ngIf",!o.isPosPrinter),u(23),d("ngIf",!o.isPosPrinter),u(),d("ngIf",!o.isPosPrinter),u(47),d("ngIf",o.showPosSettings),u(8),b(" ",(m=o.configForm.get("isActive"))!=null&&m.value?"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0646\u0634\u0637\u0629":"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u063A\u064A\u0631 \u0646\u0634\u0637\u0629"," "),u(5),d("disabled",o.configForm.invalid||o.isDefault),u(2),b(" ",((E=o.configForm.get("id"))==null?null:E.value)>0?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A":"\u062D\u0641\u0638 \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A"," ")}},dependencies:[w,M,W,X,Z,V,xe,be,J,D,B,U,j],encapsulation:2})};var fd=[{path:"",component:Qt,canActivate:[Sn],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:ni,canActivate:[z],data:{permission:["VIEW_ADMIN"]}},{path:"products",component:Ci,canActivate:[z],data:{permission:["VIEW_PRODUCTS","VIEW_PRODUCTS"]},resolve:{StoresResolver:nt}},{path:"product-form",component:Ct,canActivate:[z],data:{permission:["EDIT_PRODUCT"]},resolve:{StoresResolver:nt,subCategoriesResolver:Yt}},{path:"modifier-management",component:Ft,canActivate:[z],data:{permission:["VIEW_PRODUCTS","EDIT_PRODUCT"]}},{path:"users",component:_i,canActivate:[z],data:{permission:["VIEW_USERS","ADD_USER"]}},{path:"users-form",component:yi,canActivate:[z],data:{permission:["EDIT_USER"]},resolve:{StoresResolver:nt}},{path:"roles",component:mi,canActivate:[z],data:{permission:["VIEW_ROLES","ADD_ROLE","EDIT_ROLE"]}},{path:"roles-form",component:di,canActivate:[z],data:{permission:["VIEW_ROLES","ADD_ROLE"]},resolve:{categoriesResolver:Gi,productsResolver:ct,permissionsResolver:Bn,subCategoriesResolver:Yt}},{path:"customers",component:ti,canActivate:[z],data:{permission:["VIEW_CUSTOMERS","ADD_CUSTOMER"]}},{path:"customers-form",component:ei,canActivate:[z],data:{permission:["EDIT_CUSTOMER"]}},{path:"suppliers",component:fi,canActivate:[z],data:{permission:["VIEW_SUPPLIERS","ADD_SUPPLIER"]}},{path:"suppliers-form",component:gi,canActivate:[z],data:{permission:["EDIT_SUPPLIER"]}},{path:"order-list",component:wi,resolve:{productsResolver:ct,statusesResolver:ji,suppliersResolver:Ui},canActivate:[z],data:{permission:["VIEW_PURCHASE_ORDERS","ADD_PURCHASE_ORDER","EDIT_PURCHASE_ORDER","PRINT_PURCHASE_ORDER","VIEW_SALE_ORDERS","ADD_SALE_ORDER","EDIT_SALE_ORDER","PRINT_SALE_ORDER"]}},{path:"order-items-list",component:Ii,resolve:{subCategoriesResolver:Yt,productsResolver:ct,statusesResolver:ji,suppliersResolver:Ui,customersRsolver:_n,unitsResolver:An},canActivate:[z],data:{permission:["ADD_PURCHASE_ORDER","EDIT_PURCHASE_ORDER","PRINT_PURCHASE_ORDER","ADD_SALE_ORDER","EDIT_SALE_ORDER","PRINT_SALE_ORDER"]}},{path:"company",component:Zt,canActivate:[z],data:{permission:["VIEW_SETTINGS","EDIT_SETTINGS"]}},{path:"company-form",component:Xt,canActivate:[z],data:{permission:["VIEW_SETTINGS","EDIT_SETTINGS"]}},{path:"inventory-report",component:oi,canActivate:[z],data:{permission:["VIEW_INVENTORY_REPORT","PRINT_INVENTORY_REPORT"]},resolve:{StoresResolver:nt}},{path:"order-report",component:si,canActivate:[z],data:{permission:["VIEW_INVENTORY_REPORT"]}},{path:"transaction/:id",component:ai,canActivate:[z],data:{permission:["VIEW_INVENTORY_REPORT"]}},{path:"store",component:pi,canActivate:[z],data:{permission:["ADD_STORE","EDIT_STORE","VIEW_STORES"]}},{path:"store-form",component:ci,canActivate:[z],data:{permission:["ADD_STORE","EDIT_STORE","VIEW_STORES"]}},{path:"category",component:Jt,canActivate:[z],data:{permission:["VIEW_CATEGORIES","ADD_CATEGORY","EDIT_CATEGORY"]}},{path:"category-form",component:Kt,canActivate:[z],data:{permission:["VIEW_CATEGORIES","ADD_CATEGORY","EDIT_CATEGORY"]}},{path:"sub-category",component:Ei,canActivate:[z],data:{permission:["VIEW_SUBCATEGORIES","ADD_SUBCATEGORY","EDIT_SUBCATEGORY"]}},{path:"sub-category-form",component:Ai,canActivate:[z],data:{permission:["VIEW_SUBCATEGORIES","ADD_SUBCATEGORY","EDIT_SUBCATEGORY"]},resolve:{categoriesResolver:Gi}},{path:"unit",component:xi,canActivate:[z],data:{permission:["VIEW_UNITS","ADD_UNIT","EDIT_UNIT"]}},{path:"unit-form",component:bi,canActivate:[z],data:{permission:["VIEW_UNITS","ADD_UNIT","EDIT_UNIT"]}},{path:"store-transfers",component:kt,canActivate:[z],data:{permission:["VIEW_STORE_TRANSFERS","ADD_STORE_TRANSFER"]},resolve:{StoresResolver:nt,productsResolver:ct}},{path:"store-transfers-form",component:kt,canActivate:[z],data:{permission:["ADD_STORE_TRANSFER","EDIT_STORE_TRANSFER"]},resolve:{StoresResolver:nt,productsResolver:ct}},{path:"inventory-management",component:Fi,canActivate:[z],data:{permission:["VIEW_INVENTORY_MANAGEMENT","MANAGE_INVENTORY"]},resolve:{StoresResolver:nt,productsResolver:ct}},{path:"initial-stock-setup",component:Oi,canActivate:[z],data:{permission:["VIEW_INVENTORY_MANAGEMENT","MANAGE_INVENTORY"]}},{path:"initial-stock",component:Mi,canActivate:[z],data:{permission:["MANAGE_INVENTORY"]}},{path:"activity-logs",component:Ot,canActivate:[z],data:{permission:["VIEW_ACTIVITY_LOGS"]}},{path:"working-hours",component:Tt,canActivate:[z],data:{permission:["VIEW_WORKING_HOURS"]}},{path:"printer-configurations",component:Di,canActivate:[z],data:{permission:["VIEW_PRINTER_CONFIGURATIONS"]}},{path:"printer-configuration-form",component:Ni,canActivate:[z],data:{permission:["VIEW_PRINTER_CONFIGURATIONS","ADD_PRINTER_CONFIGURATION","EDIT_PRINTER_CONFIGURATION"]}},{path:"**",redirectTo:"dashboard"}]}],Vi=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Nt({type:a});static \u0275inj=Rt({imports:[Bi.forChild(fd),Bi]})};var Un=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Nt({type:a});static \u0275inj=Rt({providers:[Se,_e,ze,Ye],imports:[Pe,Vi,Ke,fn,wn,De,Qe,yt,St,Ct,Ft,Ot,Tt]})};export{Un as AdminModule};
